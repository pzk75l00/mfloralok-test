/*! For license information please see main.a90ee2e9.js.LICENSE.txt */
(()=>{"use strict";var t={43:(t,e,n)=>{t.exports=n(202)},153:(t,e,n)=>{var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,i)&&!l.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===s[i]&&(s[i]=e[i]);return{$$typeof:r,type:t,key:c,ref:u,props:s,_owner:o.current}}e.Fragment=s,e.jsx=c,e.jsxs=c},202:(t,e)=>{var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function b(){}function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=y.prototype;var x=v.prototype=new b;x.constructor=v,g(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,i){var r,s={},a=null,o=null;if(null!=e)for(r in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(a=""+e.key),e)_.call(e,r)&&!S.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:t,key:a,ref:o,props:s,_owner:k.current}}function C(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var T=/\/+/g;function N(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function D(t,e,r,s,a){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var l=!1;if(null===t)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=t),t=""===s?"."+N(l,0):s,w(a)?(r="",null!=t&&(r=t.replace(T,"$&/")+"/"),D(a,e,r,"",(function(t){return t}))):null!=a&&(C(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+t)),e.push(a)),1;if(l=0,s=""===s?".":s+":",w(t))for(var c=0;c<t.length;c++){var u=s+N(o=t[c],c);l+=D(o,e,r,u,a)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(o=t.next()).done;)l+=D(o=o.value,e,r,u=s+N(o,c++),a);else if("object"===o)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function M(t,e,n){if(null==t)return t;var i=[],r=0;return D(t,i,"","",(function(t){return e.call(n,t,r++)})),i}function I(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var A={current:null},P={transition:null},O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:M,forEach:function(t,e,n){M(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return M(t,(function(){e++})),e},toArray:function(t){return M(t,(function(t){return t}))||[]},only:function(t){if(!C(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=r,e.Profiler=a,e.PureComponent=v,e.StrictMode=s,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,e.act=L,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=g({},t.props),s=t.key,a=t.ref,o=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,o=k.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)_.call(e,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:t.type,key:s,ref:a,props:r,_owner:o}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=C,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:I}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=P.transition;P.transition={};try{t()}finally{P.transition=e}},e.unstable_act=L,e.useCallback=function(t,e){return A.current.useCallback(t,e)},e.useContext=function(t){return A.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return A.current.useDeferredValue(t)},e.useEffect=function(t,e){return A.current.useEffect(t,e)},e.useId=function(){return A.current.useId()},e.useImperativeHandle=function(t,e,n){return A.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return A.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return A.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return A.current.useMemo(t,e)},e.useReducer=function(t,e,n){return A.current.useReducer(t,e,n)},e.useRef=function(t){return A.current.useRef(t)},e.useState=function(t){return A.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return A.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return A.current.useTransition()},e.version="18.3.1"},234:(t,e)=>{function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<s(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=t[o],c=o+1,u=t[c];if(0>s(l,n))c<r&&0>s(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function x(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function w(t){if(m=!1,x(t),!g)if(null!==i(c))g=!0,P(_);else{var e=i(u);null!==e&&O(w,e.startTime-t)}}function _(t,n){g=!1,m&&(m=!1,b(C),C=-1),p=!0;var s=f;try{for(x(n),d=i(c);null!==d&&(!(d.expirationTime>n)||t&&!D());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof o?d.callback=o:d===i(c)&&r(c),x(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&O(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,E=null,C=-1,T=5,N=-1;function D(){return!(e.unstable_now()-N<T)}function M(){if(null!==E){var t=e.unstable_now();N=t;var n=!0;try{n=E(!0,t)}finally{n?k():(S=!1,E=null)}}else S=!1}if("function"===typeof v)k=function(){v(M)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,A=I.port2;I.port1.onmessage=M,k=function(){A.postMessage(null)}}else k=function(){y(M,0)};function P(t){E=t,S||(S=!0,k())}function O(t,n){C=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,P(_))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,r,s){var a=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(t.sortIndex=s,n(u,t),null===i(c)&&t===i(u)&&(m?(b(C),C=-1):m=!0,O(w,s-a))):(t.sortIndex=o,n(c,t),g||p||(g=!0,P(_))),t},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},391:(t,e,n)=>{var i=n(950);e.H=i.createRoot,i.hydrateRoot},579:(t,e,n)=>{t.exports=n(153)},730:(t,e,n)=>{var i=n(43),r=n(853);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(o[t]=e,t=0;t<e.length;t++)a.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(t,e,n,i,r,s,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(t){return t[1].toUpperCase()}function v(t,e,n,i){var r=m.hasOwnProperty(e)?m[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!h.call(p,t)||!h.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,b);m[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,b);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,b);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=O&&t[O]||t["@@iterator"])?t:null}var R,j=Object.assign;function F(t){if(void 0===R)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);R=e&&e[1]||""}return"\n"+R+t}var V=!1;function z(t,e){if(!t||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?F(t):""}function B(t){switch(t.tag){case 5:return F(t.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return t=z(t.type,!1);case 11:return t=z(t.type.render,!1);case 1:return t=z(t.type,!0);default:return""}}function U(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case k:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case T:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case N:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case I:return null!==(e=t.displayName||null)?e:U(t.type)||"Memo";case A:e=t._payload,t=t._init;try{return U(t(e))}catch(n){}}return null}function H(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(e);case 8:return e===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function W(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function q(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function K(t){t._valueTracker||(t._valueTracker=function(t){var e=q(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=q(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function Q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(ye){return t.body}}function G(t,e){var n=e.checked;return j({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function $(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=W(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function X(t,e){null!=(e=e.checked)&&v(t,"checked",e,!1)}function J(t,e){X(t,e);var n=W(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,W(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Q(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+W(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return j({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(et(n)){if(1<n.length)throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:W(n)}}function st(t,e){var n=W(e.value),i=W(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function ot(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ot(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=gt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var yt=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function vt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var _t=null,kt=null,St=null;function Et(t){if(t=xr(t)){if("function"!==typeof _t)throw Error(s(280));var e=t.stateNode;e&&(e=_r(e),_t(t.stateNode,t.type,e))}}function Ct(t){kt?St?St.push(t):St=[t]:kt=t}function Tt(){if(kt){var t=kt,e=St;if(St=kt=null,Et(t),e)for(t=0;t<e.length;t++)Et(e[t])}}function Nt(t,e){return t(e)}function Dt(){}var Mt=!1;function It(t,e,n){if(Mt)return t(e,n);Mt=!0;try{return Nt(t,e,n)}finally{Mt=!1,(null!==kt||null!==St)&&(Dt(),Tt())}}function At(t,e){var n=t.stateNode;if(null===n)return null;var i=_r(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var Pt=!1;if(u)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Pt=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch(ut){Pt=!1}function Lt(t,e,n,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Rt=!1,jt=null,Ft=!1,Vt=null,zt={onError:function(t){Rt=!0,jt=t}};function Bt(t,e,n,i,r,s,a,o,l){Rt=!1,jt=null,Lt.apply(zt,arguments)}function Ut(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ht(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Wt(t){if(Ut(t)!==t)throw Error(s(188))}function qt(t){return t=function(t){var e=t.alternate;if(!e){if(null===(e=Ut(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Wt(r),t;if(a===i)return Wt(r),e;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t),null!==t?Kt(t):null}function Kt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Kt(t);if(null!==e)return e;t=t.sibling}return null}var Yt=r.unstable_scheduleCallback,Qt=r.unstable_cancelCallback,Gt=r.unstable_shouldYield,$t=r.unstable_requestPaint,Xt=r.unstable_now,Jt=r.unstable_getCurrentPriorityLevel,Zt=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,se=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(oe(t)/le|0)|0},oe=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=he(o):0!==(s&=a)&&(i=he(s))}else 0!==(a=n&~r)?i=he(a):0!==s&&(i=he(s));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(s=e&-e)||16===r&&0!==(4194240&s)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-ae(e)),i|=t[n],e&=~r;return i}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function be(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ae(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var xe=0;function we(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var _e,ke,Se,Ee,Ce,Te=!1,Ne=[],De=null,Me=null,Ie=null,Ae=new Map,Pe=new Map,Oe=[],Le="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Re(t,e){switch(t){case"focusin":case"focusout":De=null;break;case"dragenter":case"dragleave":Me=null;break;case"mouseover":case"mouseout":Ie=null;break;case"pointerover":case"pointerout":Ae.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pe.delete(e.pointerId)}}function je(t,e,n,i,r,s){return null===t||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==e&&(null!==(e=xr(e))&&ke(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function Fe(t){var e=vr(t.target);if(null!==e){var n=Ut(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ht(n)))return t.blockedOn=e,void Ce(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Ve(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=xr(n))&&ke(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);xt=i,n.target.dispatchEvent(i),xt=null,e.shift()}return!0}function ze(t,e,n){Ve(t)&&n.delete(e)}function Be(){Te=!1,null!==De&&Ve(De)&&(De=null),null!==Me&&Ve(Me)&&(Me=null),null!==Ie&&Ve(Ie)&&(Ie=null),Ae.forEach(ze),Pe.forEach(ze)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,Te||(Te=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Be)))}function He(t){function e(e){return Ue(e,t)}if(0<Ne.length){Ue(Ne[0],t);for(var n=1;n<Ne.length;n++){var i=Ne[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==De&&Ue(De,t),null!==Me&&Ue(Me,t),null!==Ie&&Ue(Ie,t),Ae.forEach(e),Pe.forEach(e),n=0;n<Oe.length;n++)(i=Oe[n]).blockedOn===t&&(i.blockedOn=null);for(;0<Oe.length&&null===(n=Oe[0]).blockedOn;)Fe(n),null===n.blockedOn&&Oe.shift()}var We=x.ReactCurrentBatchConfig,qe=!0;function Ke(t,e,n,i){var r=xe,s=We.transition;We.transition=null;try{xe=1,Qe(t,e,n,i)}finally{xe=r,We.transition=s}}function Ye(t,e,n,i){var r=xe,s=We.transition;We.transition=null;try{xe=4,Qe(t,e,n,i)}finally{xe=r,We.transition=s}}function Qe(t,e,n,i){if(qe){var r=$e(t,e,n,i);if(null===r)qi(t,e,i,Ge,n),Re(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return De=je(De,t,e,n,i,r),!0;case"dragenter":return Me=je(Me,t,e,n,i,r),!0;case"mouseover":return Ie=je(Ie,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ae.set(s,je(Ae.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Pe.set(s,je(Pe.get(s)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(Re(t,i),4&e&&-1<Le.indexOf(t)){for(;null!==r;){var s=xr(r);if(null!==s&&_e(s),null===(s=$e(t,e,n,i))&&qi(t,e,i,Ge,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else qi(t,e,i,null,n)}}var Ge=null;function $e(t,e,n,i){if(Ge=null,null!==(t=vr(t=wt(i))))if(null===(e=Ut(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ht(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ge=t,null}function Xe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Zt:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var Je=null,Ze=null,tn=null;function en(){if(tn)return tn;var t,e,n=Ze,i=n.length,r="value"in Je?Je.value:Je.textContent,s=r.length;for(t=0;t<i&&n[t]===r[t];t++);var a=i-t;for(e=1;e<=a&&n[i-e]===r[s-e];e++);return tn=r.slice(t,1<e?1-e:void 0)}function nn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function rn(){return!0}function sn(){return!1}function an(t){function e(e,n,i,r,s){for(var a in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?rn:sn,this.isPropagationStopped=sn,this}return j(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),e}var on,ln,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=an(un),dn=j({},un,{view:0,detail:0}),fn=an(dn),pn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cn&&(cn&&"mousemove"===t.type?(on=t.screenX-cn.screenX,ln=t.screenY-cn.screenY):ln=on=0,cn=t),on)},movementY:function(t){return"movementY"in t?t.movementY:ln}}),gn=an(pn),mn=an(j({},pn,{dataTransfer:0})),yn=an(j({},dn,{relatedTarget:0})),bn=an(j({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=j({},un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xn=an(vn),wn=an(j({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function Cn(){return En}var Tn=j({},dn,{key:function(t){if(t.key){var e=_n[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=nn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?kn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(t){return"keypress"===t.type?nn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?nn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Nn=an(Tn),Dn=an(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=an(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),In=an(j({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=j({},pn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(An),On=[9,13,27,32],Ln=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var jn=u&&"TextEvent"in window&&!Rn,Fn=u&&(!Ln||Rn&&8<Rn&&11>=Rn),Vn=String.fromCharCode(32),zn=!1;function Bn(t,e){switch(t){case"keyup":return-1!==On.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Hn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Wn[t.type]:"textarea"===e}function Kn(t,e,n,i){Ct(i),0<(e=Yi(e,"onChange")).length&&(n=new hn("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Yn=null,Qn=null;function Gn(t){Vi(t,0)}function $n(t){if(Y(wr(t)))return t}function Xn(t,e){if("change"===t)return e}var Jn=!1;if(u){var Zn;if(u){var ti="oninput"in document;if(!ti){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),ti="function"===typeof ei.oninput}Zn=ti}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function ni(){Yn&&(Yn.detachEvent("onpropertychange",ii),Qn=Yn=null)}function ii(t){if("value"===t.propertyName&&$n(Qn)){var e=[];Kn(e,Qn,t,wt(t)),It(Gn,e)}}function ri(t,e,n){"focusin"===t?(ni(),Qn=n,(Yn=e).attachEvent("onpropertychange",ii)):"focusout"===t&&ni()}function si(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return $n(Qn)}function ai(t,e){if("click"===t)return $n(e)}function oi(t,e){if("input"===t||"change"===t)return $n(e)}var li="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function ci(t,e){if(li(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(e,r)||!li(t[r],e[r]))return!1}return!0}function ui(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hi(t,e){var n,i=ui(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ui(i)}}function di(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?di(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function fi(){for(var t=window,e=Q();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=Q((t=e.contentWindow).document)}return e}function pi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function gi(t){var e=fi(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=hi(n,s);var a=hi(n,i);r&&a&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,yi=null,bi=null,vi=null,xi=!1;function wi(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xi||null==yi||yi!==Q(i)||("selectionStart"in(i=yi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&ci(vi,i)||(vi=i,0<(i=Yi(bi,"onSelect")).length&&(e=new hn("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=yi)))}function _i(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ki={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},Si={},Ei={};function Ci(t){if(Si[t])return Si[t];if(!ki[t])return t;var e,n=ki[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ei)return Si[t]=n[e];return t}u&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);var Ti=Ci("animationend"),Ni=Ci("animationiteration"),Di=Ci("animationstart"),Mi=Ci("transitionend"),Ii=new Map,Ai="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(t,e){Ii.set(t,e),l(e,[t])}for(var Oi=0;Oi<Ai.length;Oi++){var Li=Ai[Oi];Pi(Li.toLowerCase(),"on"+(Li[0].toUpperCase()+Li.slice(1)))}Pi(Ti,"onAnimationEnd"),Pi(Ni,"onAnimationIteration"),Pi(Di,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(Mi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ji=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ri));function Fi(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,a,o,l,c){if(Bt.apply(this,arguments),Rt){if(!Rt)throw Error(s(198));var u=jt;Rt=!1,jt=null,Ft||(Ft=!0,Vt=u)}}(i,e,void 0,t),t.currentTarget=null}function Vi(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break t;Fi(r,o,c),s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break t;Fi(r,o,c),s=l}}}if(Ft)throw t=Vt,Ft=!1,Vt=null,t}function zi(t,e){var n=e[mr];void 0===n&&(n=e[mr]=new Set);var i=t+"__bubble";n.has(i)||(Wi(e,t,2,!1),n.add(i))}function Bi(t,e,n){var i=0;e&&(i|=4),Wi(n,t,i,e)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function Hi(t){if(!t[Ui]){t[Ui]=!0,a.forEach((function(e){"selectionchange"!==e&&(ji.has(e)||Bi(e,!1,t),Bi(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ui]||(e[Ui]=!0,Bi("selectionchange",!1,e))}}function Wi(t,e,n,i){switch(Xe(e)){case 1:var r=Ke;break;case 4:r=Ye;break;default:r=Qe}n=r.bind(null,e,n,t),r=void 0,!Pt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function qi(t,e,n,i,r){var s=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=vr(o)))return;if(5===(l=a.tag)||6===l){i=s=a;continue t}o=o.parentNode}}i=i.return}It((function(){var i=s,r=wt(n),a=[];t:{var o=Ii.get(t);if(void 0!==o){var l=hn,c=t;switch(t){case"keypress":if(0===nn(n))break t;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mn;break;case Ti:case Ni:case Di:l=bn;break;case Mi:l=In;break;case"scroll":l=fn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Dn}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=At(p,d))&&u.push(Ki(p,g,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(o="mouseover"===t||"pointerover"===t)||n===xt||!(c=n.relatedTarget||n.fromElement)||!vr(c)&&!c[gr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?vr(c):null)&&(c!==(h=Ut(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=gn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=Dn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:wr(l),f=null==c?o:wr(c),(o=new u(g,p+"leave",l,n,r)).target=h,o.relatedTarget=f,g=null,vr(r)===i&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)t:{for(d=c,p=0,f=u=l;f;f=Qi(f))p++;for(f=0,g=d;g;g=Qi(g))f++;for(;0<p-f;)u=Qi(u),p--;for(;0<f-p;)d=Qi(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break t;u=Qi(u),d=Qi(d)}u=null}else u=null;null!==l&&Gi(a,o,l,u,!1),null!==c&&null!==h&&Gi(a,h,c,u,!0)}if("select"===(l=(o=i?wr(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Xn;else if(qn(o))if(Jn)m=oi;else{m=si;var y=ri}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ai);switch(m&&(m=m(t,i))?Kn(a,m,n,r):(y&&y(t,o,i),"focusout"===t&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&tt(o,"number",o.value)),y=i?wr(i):window,t){case"focusin":(qn(y)||"true"===y.contentEditable)&&(yi=y,bi=i,vi=null);break;case"focusout":vi=bi=yi=null;break;case"mousedown":xi=!0;break;case"contextmenu":case"mouseup":case"dragend":xi=!1,wi(a,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":wi(a,n,r)}var b;if(Ln)t:{switch(t){case"compositionstart":var v="onCompositionStart";break t;case"compositionend":v="onCompositionEnd";break t;case"compositionupdate":v="onCompositionUpdate";break t}v=void 0}else Hn?Bn(t,n)&&(v="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(v="onCompositionStart");v&&(Fn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Hn&&(b=en()):(Ze="value"in(Je=r)?Je.value:Je.textContent,Hn=!0)),0<(y=Yi(i,v)).length&&(v=new wn(v,t,null,n,r),a.push({event:v,listeners:y}),b?v.data=b:null!==(b=Un(n))&&(v.data=b))),(b=jn?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(zn=!0,Vn);case"textInput":return(t=e.data)===Vn&&zn?null:t;default:return null}}(t,n):function(t,e){if(Hn)return"compositionend"===t||!Ln&&Bn(t,e)?(t=en(),tn=Ze=Je=null,Hn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=Yi(i,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=b))}Vi(a,e)}))}function Ki(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=At(t,n))&&i.unshift(Ki(t,s,r)),null!=(s=At(t,e))&&i.push(Ki(t,s,r))),t=t.return}return i}function Qi(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Gi(t,e,n,i,r){for(var s=e._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=At(n,s))&&a.unshift(Ki(n,l,o)):r||null!=(l=At(n,s))&&a.push(Ki(n,l,o))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var $i=/\r\n?/g,Xi=/\u0000|\uFFFD/g;function Ji(t){return("string"===typeof t?t:""+t).replace($i,"\n").replace(Xi,"")}function Zi(t,e,n){if(e=Ji(e),Ji(t)!==e&&n)throw Error(s(425))}function tr(){}var er=null,nr=null;function ir(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var rr="function"===typeof setTimeout?setTimeout:void 0,sr="function"===typeof clearTimeout?clearTimeout:void 0,ar="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ar?function(t){return ar.resolve(null).then(t).catch(lr)}:rr;function lr(t){setTimeout((function(){throw t}))}function cr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void He(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);He(e)}function ur(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function hr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var dr=Math.random().toString(36).slice(2),fr="__reactFiber$"+dr,pr="__reactProps$"+dr,gr="__reactContainer$"+dr,mr="__reactEvents$"+dr,yr="__reactListeners$"+dr,br="__reactHandles$"+dr;function vr(t){var e=t[fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gr]||n[fr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=hr(t);null!==t;){if(n=t[fr])return n;t=hr(t)}return e}n=(t=n).parentNode}return null}function xr(t){return!(t=t[fr]||t[gr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function wr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function _r(t){return t[pr]||null}var kr=[],Sr=-1;function Er(t){return{current:t}}function Cr(t){0>Sr||(t.current=kr[Sr],kr[Sr]=null,Sr--)}function Tr(t,e){Sr++,kr[Sr]=t.current,t.current=e}var Nr={},Dr=Er(Nr),Mr=Er(!1),Ir=Nr;function Ar(t,e){var n=t.type.contextTypes;if(!n)return Nr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Or(){Cr(Mr),Cr(Dr)}function Lr(t,e,n){if(Dr.current!==Nr)throw Error(s(168));Tr(Dr,e),Tr(Mr,n)}function Rr(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(s(108,H(t)||"Unknown",r));return j({},n,i)}function jr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Nr,Ir=Dr.current,Tr(Dr,t),Tr(Mr,Mr.current),!0}function Fr(t,e,n){var i=t.stateNode;if(!i)throw Error(s(169));n?(t=Rr(t,e,Ir),i.__reactInternalMemoizedMergedChildContext=t,Cr(Mr),Cr(Dr),Tr(Dr,t)):Cr(Mr),Tr(Mr,n)}var Vr=null,zr=!1,Br=!1;function Ur(t){null===Vr?Vr=[t]:Vr.push(t)}function Hr(){if(!Br&&null!==Vr){Br=!0;var t=0,e=xe;try{var n=Vr;for(xe=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}Vr=null,zr=!1}catch(r){throw null!==Vr&&(Vr=Vr.slice(t+1)),Yt(Zt,Hr),r}finally{xe=e,Br=!1}}return null}var Wr=[],qr=0,Kr=null,Yr=0,Qr=[],Gr=0,$r=null,Xr=1,Jr="";function Zr(t,e){Wr[qr++]=Yr,Wr[qr++]=Kr,Kr=t,Yr=e}function ts(t,e,n){Qr[Gr++]=Xr,Qr[Gr++]=Jr,Qr[Gr++]=$r,$r=t;var i=Xr;t=Jr;var r=32-ae(i)-1;i&=~(1<<r),n+=1;var s=32-ae(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Xr=1<<32-ae(e)+r|n<<r|i,Jr=s+t}else Xr=1<<s|n<<r|i,Jr=t}function es(t){null!==t.return&&(Zr(t,1),ts(t,1,0))}function ns(t){for(;t===Kr;)Kr=Wr[--qr],Wr[qr]=null,Yr=Wr[--qr],Wr[qr]=null;for(;t===$r;)$r=Qr[--Gr],Qr[Gr]=null,Jr=Qr[--Gr],Qr[Gr]=null,Xr=Qr[--Gr],Qr[Gr]=null}var is=null,rs=null,ss=!1,as=null;function os(t,e){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function ls(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,is=t,rs=ur(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,is=t,rs=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==$r?{id:Xr,overflow:Jr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=e,n.return=t,t.child=n,is=t,rs=null,!0);default:return!1}}function cs(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function us(t){if(ss){var e=rs;if(e){var n=e;if(!ls(t,e)){if(cs(t))throw Error(s(418));e=ur(n.nextSibling);var i=is;e&&ls(t,e)?os(i,n):(t.flags=-4097&t.flags|2,ss=!1,is=t)}}else{if(cs(t))throw Error(s(418));t.flags=-4097&t.flags|2,ss=!1,is=t}}}function hs(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;is=t}function ds(t){if(t!==is)return!1;if(!ss)return hs(t),ss=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ir(t.type,t.memoizedProps)),e&&(e=rs)){if(cs(t))throw fs(),Error(s(418));for(;e;)os(t,e),e=ur(e.nextSibling)}if(hs(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){rs=ur(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}rs=null}}else rs=is?ur(t.stateNode.nextSibling):null;return!0}function fs(){for(var t=rs;t;)t=ur(t.nextSibling)}function ps(){rs=is=null,ss=!1}function gs(t){null===as?as=[t]:as.push(t)}var ms=x.ReactCurrentBatchConfig;function ys(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,t));var r=i,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=r.refs;null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function bs(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vs(t){return(0,t._init)(t._payload)}function xs(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Oc(t,e)).index=0,t.sibling=null,t}function a(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Fc(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function c(t,e,n,i){var s=n.type;return s===k?h(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===A&&vs(s)===e.type)?((i=r(e,n.props)).ref=ys(t,e,n),i.return=t,i):((i=Lc(n.type,n.key,n.props,null,t.mode,i)).ref=ys(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Vc(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,s){return null===e||7!==e.tag?((e=Rc(n,t.mode,i,s)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Fc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Lc(e.type,e.key,e.props,null,t.mode,n)).ref=ys(t,null,e),n.return=t,n;case _:return(e=Vc(e,t.mode,n)).return=t,e;case A:return d(t,(0,e._init)(e._payload),n)}if(et(e)||L(e))return(e=Rc(e,t.mode,n,null)).return=t,e;bs(t,e)}return null}function f(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(t,e,n,i):null;case _:return n.key===r?u(t,e,n,i):null;case A:return f(t,e,(r=n._init)(n._payload),i)}if(et(n)||L(n))return null!==r?null:h(t,e,n,i,null);bs(t,n)}return null}function p(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case _:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r);case A:return p(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||L(i))return h(e,t=t.get(n)||null,i,r,null);bs(e,i)}return null}function g(r,s,o,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<o.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(r,h,o[g],l);if(null===y){null===h&&(h=m);break}t&&h&&null===y.alternate&&e(r,h),s=a(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===o.length)return n(r,h),ss&&Zr(r,g),c;if(null===h){for(;g<o.length;g++)null!==(h=d(r,o[g],l))&&(s=a(h,s,g),null===u?c=h:u.sibling=h,u=h);return ss&&Zr(r,g),c}for(h=i(r,h);g<o.length;g++)null!==(m=p(h,r,g,o[g],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=a(m,s,g),null===u?c=m:u.sibling=m,u=m);return t&&h.forEach((function(t){return e(r,t)})),ss&&Zr(r,g),c}function m(r,o,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=o,m=o=0,y=null,b=l.next();null!==g&&!b.done;m++,b=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var v=f(r,g,b.value,c);if(null===v){null===g&&(g=y);break}t&&g&&null===v.alternate&&e(r,g),o=a(v,o,m),null===h?u=v:h.sibling=v,h=v,g=y}if(b.done)return n(r,g),ss&&Zr(r,m),u;if(null===g){for(;!b.done;m++,b=l.next())null!==(b=d(r,b.value,c))&&(o=a(b,o,m),null===h?u=b:h.sibling=b,h=b);return ss&&Zr(r,m),u}for(g=i(r,g);!b.done;m++,b=l.next())null!==(b=p(g,r,m,b.value,c))&&(t&&null!==b.alternate&&g.delete(null===b.key?m:b.key),o=a(b,o,m),null===h?u=b:h.sibling=b,h=b);return t&&g.forEach((function(t){return e(r,t)})),ss&&Zr(r,m),u}return function t(i,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:t:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(i,u.sibling),(s=r(u,a.props.children)).return=i,i=s;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&vs(c)===u.type){n(i,u.sibling),(s=r(u,a.props)).ref=ys(i,u,a),s.return=i,i=s;break t}n(i,u);break}e(i,u),u=u.sibling}a.type===k?((s=Rc(a.props.children,i.mode,l,a.key)).return=i,i=s):((l=Lc(a.type,a.key,a.props,null,i.mode,l)).ref=ys(i,s,a),l.return=i,i=l)}return o(i);case _:t:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break t}n(i,s);break}e(i,s),s=s.sibling}(s=Vc(a,i.mode,l)).return=i,i=s}return o(i);case A:return t(i,s,(u=a._init)(a._payload),l)}if(et(a))return g(i,s,a,l);if(L(a))return m(i,s,a,l);bs(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=Fc(a,i.mode,l)).return=i,i=s),o(i)):n(i,s)}}var ws=xs(!0),_s=xs(!1),ks=Er(null),Ss=null,Es=null,Cs=null;function Ts(){Cs=Es=Ss=null}function Ns(t){var e=ks.current;Cr(ks),t._currentValue=e}function Ds(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ms(t,e){Ss=t,Cs=Es=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(xo=!0),t.firstContext=null)}function Is(t){var e=t._currentValue;if(Cs!==t)if(t={context:t,memoizedValue:e,next:null},null===Es){if(null===Ss)throw Error(s(308));Es=t,Ss.dependencies={lanes:0,firstContext:t}}else Es=Es.next=t;return e}var As=null;function Ps(t){null===As?As=[t]:As.push(t)}function Os(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,Ps(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ls(t,i)}function Ls(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Rs=!1;function js(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zs(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Dl)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ls(t,n)}return null===(r=i.interleaved)?(e.next=e,Ps(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ls(t,n)}function Bs(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ve(t,n)}}function Us(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=e:s=s.next=e}else r=s=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hs(t,e,n,i){var r=t.updateQueue;Rs=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=t.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var p=t,g=o;switch(d=e,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break t;h=j({},h,d);break t;case 2:Rs=!0}}null!==o.callback&&0!==o.lane&&(t.flags|=64,null===(d=r.effects)?r.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(d=o).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(e=r.shared.interleaved)){r=e;do{a|=r.lane,r=r.next}while(r!==e)}else null===s&&(r.shared.lanes=0);jl|=a,t.lanes=a,t.memoizedState=h}}function Ws(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var qs={},Ks=Er(qs),Ys=Er(qs),Qs=Er(qs);function Gs(t){if(t===qs)throw Error(s(174));return t}function $s(t,e){switch(Tr(Qs,e),Tr(Ys,t),Tr(Ks,qs),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Cr(Ks),Tr(Ks,e)}function Xs(){Cr(Ks),Cr(Ys),Cr(Qs)}function Js(t){Gs(Qs.current);var e=Gs(Ks.current),n=lt(e,t.type);e!==n&&(Tr(Ys,t),Tr(Ks,n))}function Zs(t){Ys.current===t&&(Cr(Ks),Cr(Ys))}var ta=Er(0);function ea(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var na=[];function ia(){for(var t=0;t<na.length;t++)na[t]._workInProgressVersionPrimary=null;na.length=0}var ra=x.ReactCurrentDispatcher,sa=x.ReactCurrentBatchConfig,aa=0,oa=null,la=null,ca=null,ua=!1,ha=!1,da=0,fa=0;function pa(){throw Error(s(321))}function ga(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!li(t[n],e[n]))return!1;return!0}function ma(t,e,n,i,r,a){if(aa=a,oa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ra.current=null===t||null===t.memoizedState?Za:to,t=n(i,r),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(s(301));a+=1,ca=la=null,e.updateQueue=null,ra.current=eo,t=n(i,r)}while(ha)}if(ra.current=Ja,e=null!==la&&null!==la.next,aa=0,ca=la=oa=null,ua=!1,e)throw Error(s(300));return t}function ya(){var t=0!==da;return da=0,t}function ba(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?oa.memoizedState=ca=t:ca=ca.next=t,ca}function va(){if(null===la){var t=oa.alternate;t=null!==t?t.memoizedState:null}else t=la.next;var e=null===ca?oa.memoizedState:ca.next;if(null!==e)ca=e,la=t;else{if(null===t)throw Error(s(310));t={memoizedState:(la=t).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?oa.memoizedState=ca=t:ca=ca.next=t}return ca}function xa(t,e){return"function"===typeof e?e(t):e}function wa(t){var e=va(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=la,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=i):c=c.next=d,oa.lanes|=h,jl|=h}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,li(i,e.memoizedState)||(xo=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{a=r.lane,oa.lanes|=a,jl|=a,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _a(t){var e=va(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,a=e.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=t(a,o.action),o=o.next}while(o!==r);li(a,e.memoizedState)||(xo=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function ka(){}function Sa(t,e){var n=oa,i=va(),r=e(),a=!li(i.memoizedState,r);if(a&&(i.memoizedState=r,xo=!0),i=i.queue,Ra(Ta.bind(null,n,i,t),[t]),i.getSnapshot!==e||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Ia(9,Ca.bind(null,n,i,r,e),void 0,null),null===Ml)throw Error(s(349));0!==(30&aa)||Ea(n,e,r)}return r}function Ea(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=oa.updateQueue)?(e={lastEffect:null,stores:null},oa.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ca(t,e,n,i){e.value=n,e.getSnapshot=i,Na(e)&&Da(t)}function Ta(t,e,n){return n((function(){Na(e)&&Da(t)}))}function Na(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!li(t,n)}catch(i){return!0}}function Da(t){var e=Ls(t,1);null!==e&&ic(e,t,1,-1)}function Ma(t){var e=ba();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},e.queue=t,t=t.dispatch=Qa.bind(null,oa,t),[e.memoizedState,t]}function Ia(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=oa.updateQueue)?(e={lastEffect:null,stores:null},oa.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Aa(){return va().memoizedState}function Pa(t,e,n,i){var r=ba();oa.flags|=t,r.memoizedState=Ia(1|e,n,void 0,void 0===i?null:i)}function Oa(t,e,n,i){var r=va();i=void 0===i?null:i;var s=void 0;if(null!==la){var a=la.memoizedState;if(s=a.destroy,null!==i&&ga(i,a.deps))return void(r.memoizedState=Ia(e,n,s,i))}oa.flags|=t,r.memoizedState=Ia(1|e,n,s,i)}function La(t,e){return Pa(8390656,8,t,e)}function Ra(t,e){return Oa(2048,8,t,e)}function ja(t,e){return Oa(4,2,t,e)}function Fa(t,e){return Oa(4,4,t,e)}function Va(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function za(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Oa(4,4,Va.bind(null,e,t),n)}function Ba(){}function Ua(t,e){var n=va();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&ga(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Ha(t,e){var n=va();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&ga(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Wa(t,e,n){return 0===(21&aa)?(t.baseState&&(t.baseState=!1,xo=!0),t.memoizedState=n):(li(n,e)||(n=ge(),oa.lanes|=n,jl|=n,t.baseState=!0),e)}function qa(t,e){var n=xe;xe=0!==n&&4>n?n:4,t(!0);var i=sa.transition;sa.transition={};try{t(!1),e()}finally{xe=n,sa.transition=i}}function Ka(){return va().memoizedState}function Ya(t,e,n){var i=nc(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ga(t))$a(e,n);else if(null!==(n=Os(t,e,n,i))){ic(n,t,i,ec()),Xa(n,e,i)}}function Qa(t,e,n){var i=nc(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ga(t))$a(e,r);else{var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,li(o,a)){var l=e.interleaved;return null===l?(r.next=r,Ps(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(c){}null!==(n=Os(t,e,r,i))&&(ic(n,t,i,r=ec()),Xa(n,e,i))}}function Ga(t){var e=t.alternate;return t===oa||null!==e&&e===oa}function $a(t,e){ha=ua=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xa(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ve(t,n)}}var Ja={readContext:Is,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:Is,useCallback:function(t,e){return ba().memoizedState=[t,void 0===e?null:e],t},useContext:Is,useEffect:La,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Pa(4194308,4,Va.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pa(4,2,t,e)},useMemo:function(t,e){var n=ba();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ba();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Ya.bind(null,oa,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},ba().memoizedState=t},useState:Ma,useDebugValue:Ba,useDeferredValue:function(t){return ba().memoizedState=t},useTransition:function(){var t=Ma(!1),e=t[0];return t=qa.bind(null,t[1]),ba().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=oa,r=ba();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===Ml)throw Error(s(349));0!==(30&aa)||Ea(i,e,n)}r.memoizedState=n;var a={value:n,getSnapshot:e};return r.queue=a,La(Ta.bind(null,i,a,t),[t]),i.flags|=2048,Ia(9,Ca.bind(null,i,a,n,e),void 0,null),n},useId:function(){var t=ba(),e=Ml.identifierPrefix;if(ss){var n=Jr;e=":"+e+"R"+(n=(Xr&~(1<<32-ae(Xr)-1)).toString(32)+n),0<(n=da++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=fa++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},to={readContext:Is,useCallback:Ua,useContext:Is,useEffect:Ra,useImperativeHandle:za,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Ha,useReducer:wa,useRef:Aa,useState:function(){return wa(xa)},useDebugValue:Ba,useDeferredValue:function(t){return Wa(va(),la.memoizedState,t)},useTransition:function(){return[wa(xa)[0],va().memoizedState]},useMutableSource:ka,useSyncExternalStore:Sa,useId:Ka,unstable_isNewReconciler:!1},eo={readContext:Is,useCallback:Ua,useContext:Is,useEffect:Ra,useImperativeHandle:za,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Ha,useReducer:_a,useRef:Aa,useState:function(){return _a(xa)},useDebugValue:Ba,useDeferredValue:function(t){var e=va();return null===la?e.memoizedState=t:Wa(e,la.memoizedState,t)},useTransition:function(){return[_a(xa)[0],va().memoizedState]},useMutableSource:ka,useSyncExternalStore:Sa,useId:Ka,unstable_isNewReconciler:!1};function no(t,e){if(t&&t.defaultProps){for(var n in e=j({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function io(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:j({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var ro={isMounted:function(t){return!!(t=t._reactInternals)&&Ut(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ec(),r=nc(t),s=Vs(i,r);s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=zs(t,s,r))&&(ic(e,t,r,i),Bs(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ec(),r=nc(t),s=Vs(i,r);s.tag=1,s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=zs(t,s,r))&&(ic(e,t,r,i),Bs(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ec(),i=nc(t),r=Vs(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),null!==(e=zs(t,r,i))&&(ic(e,t,i,n),Bs(e,t,i))}};function so(t,e,n,i,r,s,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,s,a):!e.prototype||!e.prototype.isPureReactComponent||(!ci(n,i)||!ci(r,s))}function ao(t,e,n){var i=!1,r=Nr,s=e.contextType;return"object"===typeof s&&null!==s?s=Is(s):(r=Pr(e)?Ir:Dr.current,s=(i=null!==(i=e.contextTypes)&&void 0!==i)?Ar(t,r):Nr),e=new e(n,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=ro,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function oo(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ro.enqueueReplaceState(e,e.state,null)}function lo(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},js(t);var s=e.contextType;"object"===typeof s&&null!==s?r.context=Is(s):(s=Pr(e)?Ir:Dr.current,r.context=Ar(t,s)),r.state=t.memoizedState,"function"===typeof(s=e.getDerivedStateFromProps)&&(io(t,e,s,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&ro.enqueueReplaceState(r,r.state,null),Hs(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}function co(t,e){try{var n="",i=e;do{n+=B(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:t,source:e,stack:r,digest:null}}function uo(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ho(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(t,e,n){(n=Vs(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ql||(ql=!0,Kl=i),ho(0,e)},n}function go(t,e,n){(n=Vs(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ho(0,e)}}var s=t.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,e),"function"!==typeof i&&(null===Yl?Yl=new Set([this]):Yl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function mo(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new fo;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Cc.bind(null,t,e,n),e.then(t,t))}function yo(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function bo(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Vs(-1,1)).tag=2,zs(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var vo=x.ReactCurrentOwner,xo=!1;function wo(t,e,n,i){e.child=null===t?_s(e,null,n,i):ws(e,t.child,n,i)}function _o(t,e,n,i,r){n=n.render;var s=e.ref;return Ms(e,r),i=ma(t,e,n,i,s,r),n=ya(),null===t||xo?(ss&&n&&es(e),e.flags|=1,wo(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,qo(t,e,r))}function ko(t,e,n,i,r){if(null===t){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Lc(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,So(t,e,s,i,r))}if(s=t.child,0===(t.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:ci)(a,i)&&t.ref===e.ref)return qo(t,e,r)}return e.flags|=1,(t=Oc(s,i)).ref=e.ref,t.return=e,e.child=t}function So(t,e,n,i,r){if(null!==t){var s=t.memoizedProps;if(ci(s,i)&&t.ref===e.ref){if(xo=!1,e.pendingProps=i=s,0===(t.lanes&r))return e.lanes=t.lanes,qo(t,e,r);0!==(131072&t.flags)&&(xo=!0)}}return To(t,e,n,i,r)}function Eo(t,e,n){var i=e.pendingProps,r=i.children,s=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return t=null!==s?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tr(Ol,Pl),Pl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Tr(Ol,Pl),Pl|=i}else null!==s?(i=s.baseLanes|n,e.memoizedState=null):i=n,Tr(Ol,Pl),Pl|=i;return wo(t,e,r,n),e.child}function Co(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function To(t,e,n,i,r){var s=Pr(n)?Ir:Dr.current;return s=Ar(e,s),Ms(e,r),n=ma(t,e,n,i,s,r),i=ya(),null===t||xo?(ss&&i&&es(e),e.flags|=1,wo(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,qo(t,e,r))}function No(t,e,n,i,r){if(Pr(n)){var s=!0;jr(e)}else s=!1;if(Ms(e,r),null===e.stateNode)Wo(t,e),ao(e,n,i),lo(e,n,i,r),i=!0;else if(null===t){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Is(c):c=Ar(e,c=Pr(n)?Ir:Dr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&oo(e,a,i,c),Rs=!1;var d=e.memoizedState;a.state=d,Hs(e,i,a,r),l=e.memoizedState,o!==i||d!==l||Mr.current||Rs?("function"===typeof u&&(io(e,n,u,i),l=e.memoizedState),(o=Rs||so(e,n,o,i,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Fs(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:no(e.type,o),a.props=c,h=e.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Is(l):l=Ar(e,l=Pr(n)?Ir:Dr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&oo(e,a,i,l),Rs=!1,d=e.memoizedState,a.state=d,Hs(e,i,a,r);var p=e.memoizedState;o!==h||d!==p||Mr.current||Rs?("function"===typeof f&&(io(e,n,f,i),p=e.memoizedState),(c=Rs||so(e,n,c,i,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),a.props=i,a.state=p,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Do(t,e,n,i,s,r)}function Do(t,e,n,i,r,s){Co(t,e);var a=0!==(128&e.flags);if(!i&&!a)return r&&Fr(e,n,!1),qo(t,e,s);i=e.stateNode,vo.current=e;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&a?(e.child=ws(e,t.child,null,s),e.child=ws(e,null,o,s)):wo(t,e,o,s),e.memoizedState=i.state,r&&Fr(e,n,!0),e.child}function Mo(t){var e=t.stateNode;e.pendingContext?Lr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Lr(0,e.context,!1),$s(t,e.containerInfo)}function Io(t,e,n,i,r){return ps(),gs(r),e.flags|=256,wo(t,e,n,i),e.child}var Ao,Po,Oo,Lo,Ro={dehydrated:null,treeContext:null,retryLane:0};function jo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fo(t,e,n){var i,r=e.pendingProps,a=ta.current,o=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&a)),i?(o=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Tr(ta,1&a),null===t)return us(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=jc(l,r,0,null),t=Rc(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=jo(n),e.memoizedState=Ro,t):Vo(e,l));if(null!==(a=t.memoizedState)&&null!==(i=a.dehydrated))return function(t,e,n,i,r,a,o){if(n)return 256&e.flags?(e.flags&=-257,zo(t,e,o,i=uo(Error(s(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=i.fallback,r=e.mode,i=jc({mode:"visible",children:i.children},r,0,null),(a=Rc(a,r,o,null)).flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,0!==(1&e.mode)&&ws(e,t.child,null,o),e.child.memoizedState=jo(o),e.memoizedState=Ro,a);if(0===(1&e.mode))return zo(t,e,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,zo(t,e,o,i=uo(a=Error(s(419)),i,void 0))}if(l=0!==(o&t.childLanes),xo||l){if(null!==(i=Ml)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Ls(t,r),ic(i,t,r,-1))}return mc(),zo(t,e,o,i=uo(Error(s(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=Nc.bind(null,t),r._reactRetry=e,null):(t=a.treeContext,rs=ur(r.nextSibling),is=e,ss=!0,as=null,null!==t&&(Qr[Gr++]=Xr,Qr[Gr++]=Jr,Qr[Gr++]=$r,Xr=t.id,Jr=t.overflow,$r=e),e=Vo(e,i.children),e.flags|=4096,e)}(t,e,l,r,i,a,n);if(o){o=r.fallback,l=e.mode,i=(a=t.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&e.child!==a?((r=e.child).childLanes=0,r.pendingProps=c,e.deletions=null):(r=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Oc(i,o):(o=Rc(o,l,n,null)).flags|=2,o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=null===(l=t.child.memoizedState)?jo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Ro,r}return t=(o=t.child).sibling,r=Oc(o,{mode:"visible",children:r.children}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Vo(t,e){return(e=jc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function zo(t,e,n,i){return null!==i&&gs(i),ws(e,t.child,null,n),(t=Vo(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Bo(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),Ds(t.return,e,n)}function Uo(t,e,n,i,r){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ho(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(wo(t,e,i.children,n),0!==(2&(i=ta.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Bo(t,n,e);else if(19===t.tag)Bo(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Tr(ta,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===ea(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Uo(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===ea(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Uo(e,!0,n,null,s);break;case"together":Uo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wo(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qo(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),jl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Oc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Oc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ko(t,e){if(!ss)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Yo(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Qo(t,e,n){var i=e.pendingProps;switch(ns(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(e),null;case 1:case 17:return Pr(e.type)&&Or(),Yo(e),null;case 3:return i=e.stateNode,Xs(),Cr(Mr),Cr(Dr),ia(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(ds(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==as&&(oc(as),as=null))),Po(t,e),Yo(e),null;case 5:Zs(e);var r=Gs(Qs.current);if(n=e.type,null!==t&&null!=e.stateNode)Oo(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(s(166));return Yo(e),null}if(t=Gs(Ks.current),ds(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[fr]=e,i[pr]=a,t=0!==(1&e.mode),n){case"dialog":zi("cancel",i),zi("close",i);break;case"iframe":case"object":case"embed":zi("load",i);break;case"video":case"audio":for(r=0;r<Ri.length;r++)zi(Ri[r],i);break;case"source":zi("error",i);break;case"img":case"image":case"link":zi("error",i),zi("load",i);break;case"details":zi("toggle",i);break;case"input":$(i,a),zi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},zi("invalid",i);break;case"textarea":rt(i,a),zi("invalid",i)}for(var l in bt(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Zi(i.textContent,c,t),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Zi(i.textContent,c,t),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zi("scroll",i)}switch(n){case"input":K(i),Z(i,a,!0);break;case"textarea":K(i),at(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=tr)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=ot(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[fr]=e,t[pr]=i,Ao(t,e,!1,!1),e.stateNode=t;t:{switch(l=vt(n,i),n){case"dialog":zi("cancel",t),zi("close",t),r=i;break;case"iframe":case"object":case"embed":zi("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ri.length;r++)zi(Ri[r],t);r=i;break;case"source":zi("error",t),r=i;break;case"img":case"image":case"link":zi("error",t),zi("load",t),r=i;break;case"details":zi("toggle",t),r=i;break;case"input":$(t,i),r=G(t,i),zi("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=j({},i,{value:void 0}),zi("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),zi("invalid",t)}for(a in bt(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?mt(t,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zi("scroll",t):null!=u&&v(t,a,u,l))}switch(n){case"input":K(t),Z(t,i,!1);break;case"textarea":K(t),at(t);break;case"option":null!=i.value&&t.setAttribute("value",""+W(i.value));break;case"select":t.multiple=!!i.multiple,null!=(a=i.value)?nt(t,!!i.multiple,a,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=tr)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Yo(e),null;case 6:if(t&&null!=e.stateNode)Lo(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(s(166));if(n=Gs(Qs.current),Gs(Ks.current),ds(e)){if(i=e.stateNode,n=e.memoizedProps,i[fr]=e,(a=i.nodeValue!==n)&&null!==(t=is))switch(t.tag){case 3:Zi(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Zi(i.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[fr]=e,e.stateNode=i}return Yo(e),null;case 13:if(Cr(ta),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(ss&&null!==rs&&0!==(1&e.mode)&&0===(128&e.flags))fs(),ps(),e.flags|=98560,a=!1;else if(a=ds(e),null!==i&&null!==i.dehydrated){if(null===t){if(!a)throw Error(s(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(s(317));a[fr]=e}else ps(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Yo(e),a=!1}else null!==as&&(oc(as),as=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ta.current)?0===Ll&&(Ll=3):mc())),null!==e.updateQueue&&(e.flags|=4),Yo(e),null);case 4:return Xs(),Po(t,e),null===t&&Hi(e.stateNode.containerInfo),Yo(e),null;case 10:return Ns(e.type._context),Yo(e),null;case 19:if(Cr(ta),null===(a=e.memoizedState))return Yo(e),null;if(i=0!==(128&e.flags),null===(l=a.rendering))if(i)Ko(a,!1);else{if(0!==Ll||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ea(t))){for(e.flags|=128,Ko(a,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tr(ta,1&ta.current|2),e.child}t=t.sibling}null!==a.tail&&Xt()>Hl&&(e.flags|=128,i=!0,Ko(a,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=ea(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Ko(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ss)return Yo(e),null}else 2*Xt()-a.renderingStartTime>Hl&&1073741824!==n&&(e.flags|=128,i=!0,Ko(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Xt(),e.sibling=null,n=ta.current,Tr(ta,i?1&n|2:1&n),e):(Yo(e),null);case 22:case 23:return dc(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Pl)&&(Yo(e),6&e.subtreeFlags&&(e.flags|=8192)):Yo(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}function Go(t,e){switch(ns(e),e.tag){case 1:return Pr(e.type)&&Or(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Xs(),Cr(Mr),Cr(Dr),ia(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Zs(e),null;case 13:if(Cr(ta),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));ps()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Cr(ta),null;case 4:return Xs(),null;case 10:return Ns(e.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ao=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Oo=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Gs(Ks.current);var s,a=null;switch(n){case"input":r=G(t,r),i=G(t,i),a=[];break;case"select":r=j({},r,{value:void 0}),i=j({},i,{value:void 0}),a=[];break;case"textarea":r=it(t,r),i=it(t,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(t.onclick=tr)}for(u in bt(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zi("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}},Lo=function(t,e,n,i){n!==i&&(e.flags|=4)};var $o=!1,Xo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ec(t,e,i)}else n.current=null}function el(t,e,n){try{n()}catch(i){Ec(t,e,i)}}var nl=!1;function il(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(e,n,s)}r=r.next}while(r!==i)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function sl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function al(t){var e=t.alternate;null!==e&&(t.alternate=null,al(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[fr],delete e[pr],delete e[mr],delete e[yr],delete e[br])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ol(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||ol(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function cl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=tr));else if(4!==i&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}function ul(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}var hl=null,dl=!1;function fl(t,e,n){for(n=n.child;null!==n;)pl(t,e,n),n=n.sibling}function pl(t,e,n){if(se&&"function"===typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(re,n)}catch(o){}switch(n.tag){case 5:Xo||tl(n,e);case 6:var i=hl,r=dl;hl=null,fl(t,e,n),dl=r,null!==(hl=i)&&(dl?(t=hl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(t=hl,n=n.stateNode,8===t.nodeType?cr(t.parentNode,n):1===t.nodeType&&cr(t,n),He(t)):cr(hl,n.stateNode));break;case 4:i=hl,r=dl,hl=n.stateNode.containerInfo,dl=!0,fl(t,e,n),hl=i,dl=r;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,e,a),r=r.next}while(r!==i)}fl(t,e,n);break;case 1:if(!Xo&&(tl(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Ec(n,e,o)}fl(t,e,n);break;case 21:fl(t,e,n);break;case 22:1&n.mode?(Xo=(i=Xo)||null!==n.memoizedState,fl(t,e,n),Xo=i):fl(t,e,n);break;default:fl(t,e,n)}}function gl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Jo),e.forEach((function(e){var i=Dc.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function ml(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=t,o=e,l=o;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break t}l=l.return}if(null===hl)throw Error(s(160));pl(a,o,r),hl=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Ec(r,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)yl(e,t),e=e.sibling}function yl(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),bl(t),4&i){try{il(3,t,t.return),rl(3,t)}catch(m){Ec(t,t.return,m)}try{il(5,t,t.return)}catch(m){Ec(t,t.return,m)}}break;case 1:ml(e,t),bl(t),512&i&&null!==n&&tl(n,n.return);break;case 5:if(ml(e,t),bl(t),512&i&&null!==n&&tl(n,n.return),32&t.flags){var r=t.stateNode;try{dt(r,"")}catch(m){Ec(t,t.return,m)}}if(4&i&&null!=(r=t.stateNode)){var a=t.memoizedProps,o=null!==n?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(r,a),vt(l,o);var u=vt(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?mt(r,d):"dangerouslySetInnerHTML"===h?ht(r,d):"children"===h?dt(r,d):v(r,h,d,u)}switch(l){case"input":J(r,a);break;case"textarea":st(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?nt(r,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?nt(r,!!a.multiple,a.defaultValue,!0):nt(r,!!a.multiple,a.multiple?[]:"",!1))}r[pr]=a}catch(m){Ec(t,t.return,m)}}break;case 6:if(ml(e,t),bl(t),4&i){if(null===t.stateNode)throw Error(s(162));r=t.stateNode,a=t.memoizedProps;try{r.nodeValue=a}catch(m){Ec(t,t.return,m)}}break;case 3:if(ml(e,t),bl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{He(e.containerInfo)}catch(m){Ec(t,t.return,m)}break;case 4:default:ml(e,t),bl(t);break;case 13:ml(e,t),bl(t),8192&(r=t.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Ul=Xt())),4&i&&gl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Xo=(u=Xo)||h,ml(e,t),Xo=u):ml(e,t),bl(t),8192&i){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for(Zo=t,h=t.child;null!==h;){for(d=Zo=h;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:tl(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Ec(i,n,m)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,Zo=p):_l(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",o))}catch(m){Ec(t,t.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ec(t,t.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(e,t),bl(t),4&i&&gl(t);case 21:}}function bl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(ol(n)){var i=n;break t}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(dt(r,""),i.flags&=-33),ul(t,ll(t),r);break;case 3:case 4:var a=i.stateNode.containerInfo;cl(t,ll(t),a);break;default:throw Error(s(161))}}catch(o){Ec(t,t.return,o)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vl(t,e,n){Zo=t,xl(t,e,n)}function xl(t,e,n){for(var i=0!==(1&t.mode);null!==Zo;){var r=Zo,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||$o;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=$o;var c=Xo;if($o=a,(Xo=l)&&!c)for(Zo=r;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?kl(r):null!==l?(l.return=a,Zo=l):kl(r);for(;null!==s;)Zo=s,xl(s,e,n),s=s.sibling;Zo=r,$o=o,Xo=c}wl(t)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Zo=s):wl(t)}}function wl(t){for(;null!==Zo;){var e=Zo;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Xo||rl(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Xo)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:no(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Ws(e,a,i);break;case 3:var o=e.updateQueue;if(null!==o){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Ws(e,o,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&He(d)}}}break;default:throw Error(s(163))}Xo||512&e.flags&&sl(e)}catch(f){Ec(e,e.return,f)}}if(e===t){Zo=null;break}if(null!==(n=e.sibling)){n.return=e.return,Zo=n;break}Zo=e.return}}function _l(t){for(;null!==Zo;){var e=Zo;if(e===t){Zo=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Zo=n;break}Zo=e.return}}function kl(t){for(;null!==Zo;){var e=Zo;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(l){Ec(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){Ec(e,r,l)}}var s=e.return;try{sl(e)}catch(l){Ec(e,s,l)}break;case 5:var a=e.return;try{sl(e)}catch(l){Ec(e,a,l)}}}catch(l){Ec(e,e.return,l)}if(e===t){Zo=null;break}var o=e.sibling;if(null!==o){o.return=e.return,Zo=o;break}Zo=e.return}}var Sl,El=Math.ceil,Cl=x.ReactCurrentDispatcher,Tl=x.ReactCurrentOwner,Nl=x.ReactCurrentBatchConfig,Dl=0,Ml=null,Il=null,Al=0,Pl=0,Ol=Er(0),Ll=0,Rl=null,jl=0,Fl=0,Vl=0,zl=null,Bl=null,Ul=0,Hl=1/0,Wl=null,ql=!1,Kl=null,Yl=null,Ql=!1,Gl=null,$l=0,Xl=0,Jl=null,Zl=-1,tc=0;function ec(){return 0!==(6&Dl)?Xt():-1!==Zl?Zl:Zl=Xt()}function nc(t){return 0===(1&t.mode)?1:0!==(2&Dl)&&0!==Al?Al&-Al:null!==ms.transition?(0===tc&&(tc=ge()),tc):0!==(t=xe)?t:t=void 0===(t=window.event)?16:Xe(t.type)}function ic(t,e,n,i){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));be(t,n,i),0!==(2&Dl)&&t===Ml||(t===Ml&&(0===(2&Dl)&&(Fl|=n),4===Ll&&lc(t,Al)),rc(t,i),1===n&&0===Dl&&0===(1&e.mode)&&(Hl=Xt()+500,zr&&Hr()))}function rc(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ae(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=fe(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}(t,e);var i=de(t,t===Ml?Al:0);if(0===i)null!==n&&Qt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Qt(n),1===e)0===t.tag?function(t){zr=!0,Ur(t)}(cc.bind(null,t)):Ur(cc.bind(null,t)),or((function(){0===(6&Dl)&&Hr()})),n=null;else{switch(we(i)){case 1:n=Zt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Mc(n,sc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sc(t,e){if(Zl=-1,tc=0,0!==(6&Dl))throw Error(s(327));var n=t.callbackNode;if(kc()&&t.callbackNode!==n)return null;var i=de(t,t===Ml?Al:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=yc(t,i);else{e=i;var r=Dl;Dl|=2;var a=gc();for(Ml===t&&Al===e||(Wl=null,Hl=Xt()+500,fc(t,e));;)try{vc();break}catch(l){pc(t,l)}Ts(),Cl.current=a,Dl=r,null!==Il?e=0:(Ml=null,Al=0,e=Ll)}if(0!==e){if(2===e&&(0!==(r=pe(t))&&(i=r,e=ac(t,r))),1===e)throw n=Rl,fc(t,0),lc(t,i),rc(t,Xt()),n;if(6===e)lc(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!li(s(),r))return!1}catch(o){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=yc(t,i))&&(0!==(a=pe(t))&&(i=a,e=ac(t,a))),1===e))throw n=Rl,fc(t,0),lc(t,i),rc(t,Xt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(s(345));case 2:case 5:_c(t,Bl,Wl);break;case 3:if(lc(t,i),(130023424&i)===i&&10<(e=Ul+500-Xt())){if(0!==de(t,0))break;if(((r=t.suspendedLanes)&i)!==i){ec(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=rr(_c.bind(null,t,Bl,Wl),e);break}_c(t,Bl,Wl);break;case 4:if(lc(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-ae(i);a=1<<o,(o=e[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=Xt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*El(i/1960))-i)){t.timeoutHandle=rr(_c.bind(null,t,Bl,Wl),i);break}_c(t,Bl,Wl);break;default:throw Error(s(329))}}}return rc(t,Xt()),t.callbackNode===n?sc.bind(null,t):null}function ac(t,e){var n=zl;return t.current.memoizedState.isDehydrated&&(fc(t,e).flags|=256),2!==(t=yc(t,e))&&(e=Bl,Bl=n,null!==e&&oc(e)),t}function oc(t){null===Bl?Bl=t:Bl.push.apply(Bl,t)}function lc(t,e){for(e&=~Vl,e&=~Fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),i=1<<n;t[n]=-1,e&=~i}}function cc(t){if(0!==(6&Dl))throw Error(s(327));kc();var e=de(t,0);if(0===(1&e))return rc(t,Xt()),null;var n=yc(t,e);if(0!==t.tag&&2===n){var i=pe(t);0!==i&&(e=i,n=ac(t,i))}if(1===n)throw n=Rl,fc(t,0),lc(t,e),rc(t,Xt()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_c(t,Bl,Wl),rc(t,Xt()),null}function uc(t,e){var n=Dl;Dl|=1;try{return t(e)}finally{0===(Dl=n)&&(Hl=Xt()+500,zr&&Hr())}}function hc(t){null!==Gl&&0===Gl.tag&&0===(6&Dl)&&kc();var e=Dl;Dl|=1;var n=Nl.transition,i=xe;try{if(Nl.transition=null,xe=1,t)return t()}finally{xe=i,Nl.transition=n,0===(6&(Dl=e))&&Hr()}}function dc(){Pl=Ol.current,Cr(Ol)}function fc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,sr(n)),null!==Il)for(n=Il.return;null!==n;){var i=n;switch(ns(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Or();break;case 3:Xs(),Cr(Mr),Cr(Dr),ia();break;case 5:Zs(i);break;case 4:Xs();break;case 13:case 19:Cr(ta);break;case 10:Ns(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Ml=t,Il=t=Oc(t.current,null),Al=Pl=e,Ll=0,Rl=null,Vl=Fl=jl=0,Bl=zl=null,null!==As){for(e=0;e<As.length;e++)if(null!==(i=(n=As[e]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}As=null}return t}function pc(t,e){for(;;){var n=Il;try{if(Ts(),ra.current=Ja,ua){for(var i=oa.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ua=!1}if(aa=0,ca=la=oa=null,ha=!1,da=0,Tl.current=null,null===n||null===n.return){Ll=1,Rl=e,Il=null;break}t:{var a=t,o=n.return,l=n,c=e;if(e=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=yo(o);if(null!==p){p.flags&=-257,bo(p,o,l,0,e),1&p.mode&&mo(a,u,e),c=u;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){mo(a,u,e),mc();break t}c=Error(s(426))}else if(ss&&1&l.mode){var y=yo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),bo(y,o,l,0,e),gs(co(c,l));break t}}a=c=co(c,l),4!==Ll&&(Ll=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Us(a,po(0,c,e));break t;case 1:l=c;var b=a.type,v=a.stateNode;if(0===(128&a.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Yl||!Yl.has(v)))){a.flags|=65536,e&=-e,a.lanes|=e,Us(a,go(a,l,e));break t}}a=a.return}while(null!==a)}wc(n)}catch(x){e=x,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function gc(){var t=Cl.current;return Cl.current=Ja,null===t?Ja:t}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Ml||0===(268435455&jl)&&0===(268435455&Fl)||lc(Ml,Al)}function yc(t,e){var n=Dl;Dl|=2;var i=gc();for(Ml===t&&Al===e||(Wl=null,fc(t,e));;)try{bc();break}catch(r){pc(t,r)}if(Ts(),Dl=n,Cl.current=i,null!==Il)throw Error(s(261));return Ml=null,Al=0,Ll}function bc(){for(;null!==Il;)xc(Il)}function vc(){for(;null!==Il&&!Gt();)xc(Il)}function xc(t){var e=Sl(t.alternate,t,Pl);t.memoizedProps=t.pendingProps,null===e?wc(t):Il=e,Tl.current=null}function wc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Qo(n,e,Pl)))return void(Il=n)}else{if(null!==(n=Go(n,e)))return n.flags&=32767,void(Il=n);if(null===t)return Ll=6,void(Il=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Il=e);Il=e=t}while(null!==e);0===Ll&&(Ll=5)}function _c(t,e,n){var i=xe,r=Nl.transition;try{Nl.transition=null,xe=1,function(t,e,n,i){do{kc()}while(null!==Gl);if(0!==(6&Dl))throw Error(s(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ae(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}(t,a),t===Ml&&(Il=Ml=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Mc(ee,(function(){return kc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Nl.transition,Nl.transition=null;var o=xe;xe=1;var l=Dl;Dl|=4,Tl.current=null,function(t,e){if(er=qe,pi(t=fi())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break t}var o=0,l=-1,c=-1,u=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=o+r),d!==a||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++u===r&&(l=o),f===a&&++h===i&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nr={focusedElem:t,selectionRange:n},qe=!1,Zo=e;null!==Zo;)if(t=(e=Zo).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Zo=t;else for(;null!==Zo;){e=Zo;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?m:no(e.type,m),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(w){Ec(e,e.return,w)}if(null!==(t=e.sibling)){t.return=e.return,Zo=t;break}Zo=e.return}g=nl,nl=!1}(t,n),yl(n,t),gi(nr),qe=!!er,nr=er=null,t.current=n,vl(n,t,r),$t(),Dl=l,xe=o,Nl.transition=a}else t.current=n;if(Ql&&(Ql=!1,Gl=t,$l=r),a=t.pendingLanes,0===a&&(Yl=null),function(t){if(se&&"function"===typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),rc(t,Xt()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ql)throw ql=!1,t=Kl,Kl=null,t;0!==(1&$l)&&0!==t.tag&&kc(),a=t.pendingLanes,0!==(1&a)?t===Jl?Xl++:(Xl=0,Jl=t):Xl=0,Hr()}(t,e,n,i)}finally{Nl.transition=r,xe=i}return null}function kc(){if(null!==Gl){var t=we($l),e=Nl.transition,n=xe;try{if(Nl.transition=null,xe=16>t?16:t,null===Gl)var i=!1;else{if(t=Gl,Gl=null,$l=0,0!==(6&Dl))throw Error(s(331));var r=Dl;for(Dl|=4,Zo=t.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var h=Zo;switch(h.tag){case 0:case 11:case 15:il(8,h,a)}var d=h.child;if(null!==d)d.return=h,Zo=d;else for(;null!==Zo;){var f=(h=Zo).sibling,p=h.return;if(al(h),h===u){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else t:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:il(9,a,a.return)}var b=a.sibling;if(null!==b){b.return=a.return,Zo=b;break t}Zo=a.return}}var v=t.current;for(Zo=v;null!==Zo;){var x=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Zo=x;else t:for(o=v;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Ec(l,l.return,_)}if(l===o){Zo=null;break t}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break t}Zo=l.return}}if(Dl=r,Hr(),se&&"function"===typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(re,t)}catch(_){}i=!0}return i}finally{xe=n,Nl.transition=e}}return!1}function Sc(t,e,n){t=zs(t,e=po(0,e=co(n,e),1),1),e=ec(),null!==t&&(be(t,1,e),rc(t,e))}function Ec(t,e,n){if(3===t.tag)Sc(t,t,n);else for(;null!==e;){if(3===e.tag){Sc(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Yl||!Yl.has(i))){e=zs(e,t=go(e,t=co(n,t),1),1),t=ec(),null!==e&&(be(e,1,t),rc(e,t));break}}e=e.return}}function Cc(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=ec(),t.pingedLanes|=t.suspendedLanes&n,Ml===t&&(Al&n)===n&&(4===Ll||3===Ll&&(130023424&Al)===Al&&500>Xt()-Ul?fc(t,0):Vl|=n),rc(t,e)}function Tc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=ec();null!==(t=Ls(t,e))&&(be(t,e,n),rc(t,n))}function Nc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Tc(t,n)}function Dc(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(e),Tc(t,n)}function Mc(t,e){return Yt(t,e)}function Ic(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(t,e,n,i){return new Ic(t,e,n,i)}function Pc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Oc(t,e){var n=t.alternate;return null===n?((n=Ac(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lc(t,e,n,i,r,a){var o=2;if(i=t,"function"===typeof t)Pc(t)&&(o=1);else if("string"===typeof t)o=5;else t:switch(t){case k:return Rc(n.children,r,a,e);case S:o=8,r|=8;break;case E:return(t=Ac(12,n,e,2|r)).elementType=E,t.lanes=a,t;case D:return(t=Ac(13,n,e,r)).elementType=D,t.lanes=a,t;case M:return(t=Ac(19,n,e,r)).elementType=M,t.lanes=a,t;case P:return jc(n,r,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case C:o=10;break t;case T:o=9;break t;case N:o=11;break t;case I:o=14;break t;case A:o=16,i=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Ac(o,n,e,r)).elementType=t,e.type=i,e.lanes=a,e}function Rc(t,e,n,i){return(t=Ac(7,t,i,e)).lanes=n,t}function jc(t,e,n,i){return(t=Ac(22,t,i,e)).elementType=P,t.lanes=n,t.stateNode={isHidden:!1},t}function Fc(t,e,n){return(t=Ac(6,t,null,e)).lanes=n,t}function Vc(t,e,n){return(e=Ac(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zc(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bc(t,e,n,i,r,s,a,o,l){return t=new zc(t,e,n,o,l),1===e?(e=1,!0===s&&(e|=8)):e=0,s=Ac(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},js(s),t}function Uc(t){if(!t)return Nr;t:{if(Ut(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Pr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(Pr(n))return Rr(t,n,e)}return e}function Hc(t,e,n,i,r,s,a,o,l){return(t=Bc(n,i,!0,t,0,s,0,o,l)).context=Uc(null),n=t.current,(s=Vs(i=ec(),r=nc(n))).callback=void 0!==e&&null!==e?e:null,zs(n,s,r),t.current.lanes=r,be(t,r,i),rc(t,i),t}function Wc(t,e,n,i){var r=e.current,s=ec(),a=nc(r);return n=Uc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Vs(s,a)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=zs(r,e,a))&&(ic(t,r,a,s),Bs(t,r,a)),a}function qc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Kc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Yc(t,e){Kc(t,e),(t=t.alternate)&&Kc(t,e)}Sl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Mr.current)xo=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return xo=!1,function(t,e,n){switch(e.tag){case 3:Mo(e),ps();break;case 5:Js(e);break;case 1:Pr(e.type)&&jr(e);break;case 4:$s(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Tr(ks,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Tr(ta,1&ta.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Fo(t,e,n):(Tr(ta,1&ta.current),null!==(t=qo(t,e,n))?t.sibling:null);Tr(ta,1&ta.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return Ho(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr(ta,ta.current),i)break;return null;case 22:case 23:return e.lanes=0,Eo(t,e,n)}return qo(t,e,n)}(t,e,n);xo=0!==(131072&t.flags)}else xo=!1,ss&&0!==(1048576&e.flags)&&ts(e,Yr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Wo(t,e),t=e.pendingProps;var r=Ar(e,Dr.current);Ms(e,n),r=ma(null,e,i,t,r,n);var a=ya();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pr(i)?(a=!0,jr(e)):a=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,js(e),r.updater=ro,e.stateNode=r,r._reactInternals=e,lo(e,i,t,n),e=Do(null,e,i,!0,a,n)):(e.tag=0,ss&&a&&es(e),wo(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(Wo(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Pc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===N)return 11;if(t===I)return 14}return 2}(i),t=no(i,t),r){case 0:e=To(null,e,i,t,n);break t;case 1:e=No(null,e,i,t,n);break t;case 11:e=_o(null,e,i,t,n);break t;case 14:e=ko(null,e,i,no(i.type,t),n);break t}throw Error(s(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,To(t,e,i,r=e.elementType===i?r:no(i,r),n);case 1:return i=e.type,r=e.pendingProps,No(t,e,i,r=e.elementType===i?r:no(i,r),n);case 3:t:{if(Mo(e),null===t)throw Error(s(387));i=e.pendingProps,r=(a=e.memoizedState).element,Fs(t,e),Hs(e,i,null,n);var o=e.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Io(t,e,i,n,r=co(Error(s(423)),e));break t}if(i!==r){e=Io(t,e,i,n,r=co(Error(s(424)),e));break t}for(rs=ur(e.stateNode.containerInfo.firstChild),is=e,ss=!0,as=null,n=_s(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),i===r){e=qo(t,e,n);break t}wo(t,e,i,n)}e=e.child}return e;case 5:return Js(e),null===t&&us(e),i=e.type,r=e.pendingProps,a=null!==t?t.memoizedProps:null,o=r.children,ir(i,r)?o=null:null!==a&&ir(i,a)&&(e.flags|=32),Co(t,e),wo(t,e,o,n),e.child;case 6:return null===t&&us(e),null;case 13:return Fo(t,e,n);case 4:return $s(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=ws(e,null,i,n):wo(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,_o(t,e,i,r=e.elementType===i?r:no(i,r),n);case 7:return wo(t,e,e.pendingProps,n),e.child;case 8:case 12:return wo(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,a=e.memoizedProps,o=r.value,Tr(ks,i._currentValue),i._currentValue=o,null!==a)if(li(a.value,o)){if(a.children===r.children&&!Mr.current){e=qo(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=Vs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ds(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ds(o,n,e),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ms(e,n),i=i(r=Is(r)),e.flags|=1,wo(t,e,i,n),e.child;case 14:return r=no(i=e.type,e.pendingProps),ko(t,e,i,r=no(i.type,r),n);case 15:return So(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:no(i,r),Wo(t,e),e.tag=1,Pr(i)?(t=!0,jr(e)):t=!1,Ms(e,n),ao(e,i,r),lo(e,i,r,n),Do(null,e,i,!0,t,n);case 19:return Ho(t,e,n);case 22:return Eo(t,e,n)}throw Error(s(156,e.tag))};var Qc="function"===typeof reportError?reportError:function(t){console.error(t)};function Gc(t){this._internalRoot=t}function $c(t){this._internalRoot=t}function Xc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Zc(){}function tu(t,e,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var t=qc(a);o.call(t)}}Wc(e,a,t,r)}else a=function(t,e,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var t=qc(a);s.call(t)}}var a=Hc(e,i,t,0,null,!1,0,"",Zc);return t._reactRootContainer=a,t[gr]=a.current,Hi(8===t.nodeType?t.parentNode:t),hc(),a}for(;r=t.lastChild;)t.removeChild(r);if("function"===typeof i){var o=i;i=function(){var t=qc(l);o.call(t)}}var l=Bc(t,0,!1,null,0,!1,0,"",Zc);return t._reactRootContainer=l,t[gr]=l.current,Hi(8===t.nodeType?t.parentNode:t),hc((function(){Wc(e,l,n,i)})),l}(n,e,t,r,i);return qc(a)}$c.prototype.render=Gc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(s(409));Wc(t,e,null,null)},$c.prototype.unmount=Gc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hc((function(){Wc(null,t,null,null)})),e[gr]=null}},$c.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Oe.length&&0!==e&&e<Oe[n].priority;n++);Oe.splice(n,0,t),0===n&&Fe(t)}},_e=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ve(e,1|n),rc(e,Xt()),0===(6&Dl)&&(Hl=Xt()+500,Hr()))}break;case 13:hc((function(){var e=Ls(t,1);if(null!==e){var n=ec();ic(e,t,1,n)}})),Yc(t,1)}},ke=function(t){if(13===t.tag){var e=Ls(t,134217728);if(null!==e)ic(e,t,134217728,ec());Yc(t,134217728)}},Se=function(t){if(13===t.tag){var e=nc(t),n=Ls(t,e);if(null!==n)ic(n,t,e,ec());Yc(t,e)}},Ee=function(){return xe},Ce=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}},_t=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=_r(i);if(!r)throw Error(s(90));Y(i),J(i,r)}}}break;case"textarea":st(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Nt=uc,Dt=hc;var eu={usingClientEntryPoint:!1,Events:[xr,wr,_r,Ct,Tt,uc]},nu={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=qt(t))?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{re=ru.inject(iu),se=ru}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(e))throw Error(s(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Xc(t))throw Error(s(299));var n=!1,i="",r=Qc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=Bc(t,1,!1,null,0,n,0,i,r),t[gr]=e.current,Hi(8===t.nodeType?t.parentNode:t),new Gc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return t=null===(t=qt(e))?null:t.stateNode},e.flushSync=function(t){return hc(t)},e.hydrate=function(t,e,n){if(!Jc(e))throw Error(s(200));return tu(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Xc(t))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),e=Hc(e,null,t,1,null!=n?n:null,r,0,a,o),t[gr]=e.current,Hi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new $c(e)},e.render=function(t,e,n){if(!Jc(e))throw Error(s(200));return tu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(s(40));return!!t._reactRootContainer&&(hc((function(){tu(null,null,t,!1,(function(){t._reactRootContainer=null,t[gr]=null}))})),!0)},e.unstable_batchedUpdates=uc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Jc(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return tu(t,e,n,!1,i)},e.version="18.3.1-next-f1338f8080-20240426"},853:(t,e,n)=>{t.exports=n(234)},950:(t,e,n)=>{!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(730)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.p="/";var i=n(43),r=n(391);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}function o(t,e,n){return(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const u=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,a=s?t[r+1]:0,o=r+2<t.length,l=o?t[r+2]:0,c=e>>2,u=(3&e)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(u(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0;++r;const a=r<t.length?n[t.charAt(r)]:64;++r;const o=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==s||null==a||null==o)throw new d;const l=e<<2|s>>4;if(i.push(l),64!==a){const t=s<<4&240|a>>2;if(i.push(t),64!==o){const t=a<<6&192|o;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class d extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f=function(t){return function(t){const e=u(t);return h.encodeByteArray(e,!0)}(t).replace(/\./g,"")},p=function(t){try{return h.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const g=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,m=()=>{try{return g()||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyCK8Rmtti1TrKRCR_sUzhncm4ebk7OoUXs",REACT_APP_APP_ID:"1:274684476540:web:5dc96795cee6e8c81d5df9",REACT_APP_AUTH_DOMAIN:"mruh2-398d6.firebaseapp.com",REACT_APP_DATABASE_URL:"https://mruh2-398d6.firebaseio.com",REACT_APP_MESSAGING_SENDER_ID:"274684476540",REACT_APP_PROJECT_ID:"mruh2-398d6",REACT_APP_STORAGE_BUCKET:"mruh2-398d6.appspot.com"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&p(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t))}},y=t=>{const e=(t=>{var e,n;return null===(n=null===(e=m())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]},b=()=>{var t;return null===(t=m())||void 0===t?void 0:t.config};class v{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function w(){return!function(){var t;const e=null===(t=m())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _(){try{return"object"===typeof indexedDB}catch(t){return!1}}class k extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,k.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S.prototype.create)}}class S{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),i=this.errors[t],r=i?function(t,e){return t.replace(E,((t,n)=>{const i=e[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,e):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new k(n,s,e)}}const E=/\{\$([^}]+)}/g;function C(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(T(n)&&T(s)){if(!C(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function T(t){return null!==t&&"object"===typeof t}function N(t){return t&&t._delegate?t._delegate:t}class D{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const M="[DEFAULT]";class I{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new v;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:M})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instances.has(t)}getOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instancesOptions.get(t)||{}}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(i){}}getOrInitializeService(t){let{instanceIdentifier:e,options:n={}}=t,i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===M?void 0:r),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.component?this.component.multipleInstances?t:M:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class A{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new I(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const P=[];var O;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(O||(O={}));const L={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},R=O.INFO,j={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},F=function(t,e){if(e<t.logLevel)return;const n=(new Date).toISOString(),i=j[e];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];console[i]("[".concat(n,"]  ").concat(t.name,":"),...s)};class V{constructor(t){this.name=t,this._logLevel=R,this._logHandler=F,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in O))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?L[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...e),this._logHandler(this,O.DEBUG,...e)}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...e),this._logHandler(this,O.VERBOSE,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.INFO,...e),this._logHandler(this,O.INFO,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.WARN,...e),this._logHandler(this,O.WARN,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.ERROR,...e),this._logHandler(this,O.ERROR,...e)}}let z,B;const U=new WeakMap,H=new WeakMap,W=new WeakMap,q=new WeakMap,K=new WeakMap;let Y={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return H.get(t);if("objectStoreNames"===e)return t.objectStoreNames||W.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Q(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(B||(B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(X(this),n),$(U.get(this))}:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return $(t.apply(X(this),n))}:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=t.call(X(this),e,...i);return W.set(s,e.sort?e.sort():[e]),$(s)}}function G(t){return"function"===typeof t?Q(t):(t instanceof IDBTransaction&&function(t){if(H.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));H.set(t,e)}(t),e=t,(z||(z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>e instanceof t))?new Proxy(t,Y):t);var e}function $(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e($(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&U.set(e,t)})).catch((()=>{})),K.set(e,t),e}(t);if(q.has(t))return q.get(t);const e=G(t);return e!==t&&(q.set(t,e),K.set(e,t)),e}const X=t=>K.get(t);const J=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],tt=new Map;function et(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(tt.get(e))return tt.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Z.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!J.includes(n))return;const s=async function(t){const e=this.transaction(t,r?"readwrite":"readonly");let s=e.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return i&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),r&&e.done]))[0]};return tt.set(e,s),s}!function(t){Y=t(Y)}((t=>c(c({},t),{},{get:(e,n,i)=>et(e,n)||t.get(e,n,i),has:(e,n)=>!!et(e,n)||t.has(e,n)})));class nt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){const e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((t=>t)).join(" ")}}const it="@firebase/app",rt="0.10.13",st=new V("@firebase/app"),at="@firebase/app-compat",ot="@firebase/analytics-compat",lt="@firebase/analytics",ct="@firebase/app-check-compat",ut="@firebase/app-check",ht="@firebase/auth",dt="@firebase/auth-compat",ft="@firebase/database",pt="@firebase/data-connect",gt="@firebase/database-compat",mt="@firebase/functions",yt="@firebase/functions-compat",bt="@firebase/installations",vt="@firebase/installations-compat",xt="@firebase/messaging",wt="@firebase/messaging-compat",_t="@firebase/performance",kt="@firebase/performance-compat",St="@firebase/remote-config",Et="@firebase/remote-config-compat",Ct="@firebase/storage",Tt="@firebase/storage-compat",Nt="@firebase/firestore",Dt="@firebase/vertexai-preview",Mt="@firebase/firestore-compat",It="firebase",At="[DEFAULT]",Pt={[it]:"fire-core",[at]:"fire-core-compat",[lt]:"fire-analytics",[ot]:"fire-analytics-compat",[ut]:"fire-app-check",[ct]:"fire-app-check-compat",[ht]:"fire-auth",[dt]:"fire-auth-compat",[ft]:"fire-rtdb",[pt]:"fire-data-connect",[gt]:"fire-rtdb-compat",[mt]:"fire-fn",[yt]:"fire-fn-compat",[bt]:"fire-iid",[vt]:"fire-iid-compat",[xt]:"fire-fcm",[wt]:"fire-fcm-compat",[_t]:"fire-perf",[kt]:"fire-perf-compat",[St]:"fire-rc",[Et]:"fire-rc-compat",[Ct]:"fire-gcs",[Tt]:"fire-gcs-compat",[Nt]:"fire-fst",[Mt]:"fire-fst-compat",[Dt]:"fire-vertex","fire-js":"fire-js",[It]:"fire-js-all"},Ot=new Map,Lt=new Map,Rt=new Map;function jt(t,e){try{t.container.addComponent(e)}catch(n){st.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function Ft(t){const e=t.name;if(Rt.has(e))return st.debug("There were multiple attempts to register component ".concat(e,".")),!1;Rt.set(e,t);for(const n of Ot.values())jt(n,t);for(const n of Lt.values())jt(n,t);return!0}function Vt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const zt=new S("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Bt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new D("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw zt.create("app-deleted",{appName:this._name})}}function Ut(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("object"!==typeof e){e={name:e}}const i=Object.assign({name:At,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!==typeof r||!r)throw zt.create("bad-app-name",{appName:String(r)});if(n||(n=b()),!n)throw zt.create("no-options");const s=Ot.get(r);if(s){if(C(n,s.options)&&C(i,s.config))return s;throw zt.create("duplicate-app",{appName:r})}const a=new A(r);for(const l of Rt.values())a.addComponent(l);const o=new Bt(n,i,a);return Ot.set(r,o),o}function Ht(t,e,n){var i;let r=null!==(i=Pt[t])&&void 0!==i?i:t;n&&(r+="-".concat(n));const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const t=['Unable to register library "'.concat(r,'" with version "').concat(e,'":')];return s&&t.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&a&&t.push("and"),a&&t.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void st.warn(t.join(" "))}Ft(new D("".concat(r,"-version"),(()=>({library:r,version:e})),"VERSION"))}const Wt="firebase-heartbeat-store";let qt=null;function Kt(){return qt||(qt=function(t,e){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(t,e),o=$(a);return i&&a.addEventListener("upgradeneeded",(t=>{i($(a.result),t.oldVersion,t.newVersion,$(a.transaction),t)})),n&&a.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),o.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Wt)}catch(n){console.warn(n)}}}).catch((t=>{throw zt.create("idb-open",{originalErrorMessage:t.message})}))),qt}async function Yt(t,e){try{const n=(await Kt()).transaction(Wt,"readwrite"),i=n.objectStore(Wt);await i.put(e,Qt(t)),await n.done}catch(n){if(n instanceof k)st.warn(n.message);else{const t=zt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});st.warn(t.message)}}}function Qt(t){return"".concat(t.name,"!").concat(t.options.appId)}class Gt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Xt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$t();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return;return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){st.warn(n)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=$t(),{heartbeatsToSend:n,unsentEntries:i}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Jt(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Jt(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=f(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return st.warn(e),""}}}function $t(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!_()&&new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await Kt()).transaction(Wt),n=await e.objectStore(Wt).get(Qt(t));return await e.done,n}catch(e){if(e instanceof k)st.warn(e.message);else{const t=zt.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});st.warn(t.message)}}}(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Yt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Yt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Jt(t){return f(JSON.stringify({version:2,heartbeats:t})).length}var Zt;Zt="",Ft(new D("platform-logger",(t=>new nt(t)),"PRIVATE")),Ft(new D("heartbeat",(t=>new Gt(t)),"PRIVATE")),Ht(it,rt,Zt),Ht(it,rt,"esm2017"),Ht("fire-js","");var te,ee,ne="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ie={};(function(){var t;function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(t,e,n){n||(n=0);var i=Array(16);if("string"===typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],a=e+(s^n&(r^s))+i[0]+3614090360&4294967295;a=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(a<<7&4294967295|a>>>25))+((a=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(e=n+((a=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((r=s+((a=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function i(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}(e,(function(){this.blockSize=-1})),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var i=e-this.blockSize,r=this.B,s=this.h,a=0;a<e;){if(0==s)for(;a<=i;)n(this,t,a),a+=this.blockSize;if("string"===typeof t){for(;a<e;)if(r[s++]=t.charCodeAt(a++),s==this.blockSize){n(this,r),s=0;break}}else for(;a<e;)if(r[s++]=t[a++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=e},e.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var r={};function s(t){return-128<=t&&128>t?function(t,e){var n=r;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(t){return new i([0|t],0>t?-1:0)})):new i([0|t],0>t?-1:0)}function a(t){if(isNaN(t)||!isFinite(t))return o;if(0>t)return d(a(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=4294967296;return new i(e,0)}var o=s(0),l=s(1),c=s(16777216);function u(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function h(t){return-1==t.h}function d(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new i(n,~t.h).add(l)}function f(t,e){return t.add(d(e))}function p(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function g(t,e){this.g=t,this.h=e}function m(t,e){if(u(e))throw Error("division by zero");if(u(t))return new g(o,o);if(h(t))return e=m(d(t),e),new g(d(e.g),d(e.h));if(h(e))return e=m(t,d(e)),new g(d(e.g),e.h);if(30<t.g.length){if(h(t)||h(e))throw Error("slowDivide_ only works with positive integers.");for(var n=l,i=e;0>=i.l(t);)n=y(n),i=y(i);var r=b(n,1),s=b(i,1);for(i=b(i,2),n=b(n,2);!u(i);){var c=s.add(i);0>=c.l(t)&&(r=r.add(n),s=c),i=b(i,1),n=b(n,1)}return e=f(t,r.j(e)),new g(r,e)}for(r=o;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),c=(s=a(n)).j(e);h(c)||0<c.l(t);)c=(s=a(n-=i)).j(e);u(s)&&(s=l),r=r.add(s),t=f(t,c)}return new g(r,t)}function y(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.i(r)<<1|t.i(r-1)>>>31;return new i(n,t.h)}function b(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],a=0;a<r;a++)s[a]=0<e?t.i(a+n)>>>e|t.i(a+n+1)<<32-e:t.i(a+n);return new i(s,t.h)}(t=i.prototype).m=function(){if(h(this))return-d(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.i(n);t+=(0<=i?i:4294967296+i)*e,e*=4294967296}return t},t.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(u(this))return"0";if(h(this))return"-"+d(this).toString(t);for(var e=a(Math.pow(t,6)),n=this,i="";;){var r=m(n,e).g,s=((0<(n=f(n,r.j(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(u(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return h(t=f(this,t))?-1:u(t)?0:1},t.abs=function(){return h(this)?d(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var a=r+(65535&this.i(s))+(65535&t.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(t.i(s)>>>16);r=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new i(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(u(this)||u(t))return o;if(h(this))return h(t)?d(this).j(d(t)):d(d(this).j(t));if(h(t))return d(this.j(d(t)));if(0>this.l(c)&&0>t.l(c))return a(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var l=this.i(r)>>>16,f=65535&this.i(r),g=t.i(s)>>>16,m=65535&t.i(s);n[2*r+2*s]+=f*m,p(n,2*r+2*s),n[2*r+2*s+1]+=l*m,p(n,2*r+2*s+1),n[2*r+2*s+1]+=f*g,p(n,2*r+2*s+1),n[2*r+2*s+2]+=l*g,p(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new i(n,0)},t.A=function(t){return m(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)&t.i(r);return new i(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)|t.i(r);return new i(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)^t.i(r);return new i(n,this.h^t.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,ee=ie.Md5=e,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=a,i.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return d(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=a(Math.pow(n,8)),r=o,s=0;s<e.length;s+=8){var l=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),r=r.j(l).add(a(c))):r=(r=r.j(i)).add(a(c))}return r},te=ie.Integer=i}).apply("undefined"!==typeof ne?ne:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var re,se,ae,oe,le,ce,ue,he,de="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},fe={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof de&&de];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(t,i){if(i)t:{var r=n;t=t.split(".");for(var s=0;s<t.length-1;s++){var a=t[s];if(!(a in r))break t;r=r[a]}(i=i(s=r[t=t[t.length-1]]))!=s&&null!=i&&e(r,t,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,i=!1,r={next:function(){if(!i&&n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(t,e){return e}))}}));var i=i||{},r=this||self;function s(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function a(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function o(t,e,n){return t.call.apply(t.bind,arguments)}function l(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function c(t,e,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function h(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function d(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function f(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(s(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function p(t){return/^[\s\xa0]*$/.test(t)}function g(){var t=r.navigator;return t&&(t=t.userAgent)?t:""}function m(t){return m[" "](t),t}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function b(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function v(t){const e={};for(const n in t)e[n]=t[n];return e}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<x.length;e++)n=x[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function _(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function k(t){r.setTimeout((()=>{throw t}),0)}function S(){var t=D;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var E=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new C),(t=>t.reset()));class C{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let T,N=!1,D=new class{constructor(){this.h=this.g=null}add(t,e){const n=E.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},M=()=>{const t=r.Promise.resolve(void 0);T=()=>{t.then(I)}};var I=()=>{for(var t;t=S();){try{t.h.call(t.g)}catch(n){k(n)}var e=E;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}N=!1};function A(){this.s=this.s,this.C=this.C}function P(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}A.prototype.s=!1,A.prototype.ma=function(){this.s||(this.s=!0,this.N())},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};r.addEventListener("test",t,e),r.removeEventListener("test",t,e)}catch(n){}return t}();function L(t,e){if(P.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(y){t:{try{m(e.nodeName);var r=!0;break t}catch(s){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:R[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&L.aa.h.call(this)}}h(L,P);var R={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++F,this.da=this.fa=!1}function z(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function B(t){this.src=t,this.g={},this.h=0}function U(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Array.prototype.indexOf.call(r,e,void 0);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(z(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function H(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.da&&s.listener==e&&s.capture==!!n&&s.ha==i)return r}return-1}B.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var a=H(t,e,i,r);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new V(e,this.src,s,!!i,r)).fa=n,t.push(e)),e};var W="closure_lm_"+(1e6*Math.random()|0),q={};function K(t,e,n,i,r){if(i&&i.once)return Q(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)K(t,e[s],n,i,r);return null}return n=et(n),t&&t[j]?t.K(e,n,a(i)?!!i.capture:!!i,r):Y(t,e,n,!1,i,r)}function Y(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=a(r)?!!r.capture:!!r,l=Z(t);if(l||(t[W]=l=new B(t)),(n=l.add(e,n,i,o,s)).proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}const e=J;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)O||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(X(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Q(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Q(t,e[s],n,i,r);return null}return n=et(n),t&&t[j]?t.L(e,n,a(i)?!!i.capture:!!i,r):Y(t,e,n,!0,i,r)}function G(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)G(t,e[s],n,i,r);else i=a(i)?!!i.capture:!!i,n=et(n),t&&t[j]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=H(s=t.g[e],n,i,r))&&(z(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=Z(t))&&(e=t.g[e.toString()],t=-1,e&&(t=H(e,n,i,r)),(n=-1<t?e[t]:null)&&$(n))}function $(t){if("number"!==typeof t&&t&&!t.da){var e=t.src;if(e&&e[j])U(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(X(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Z(e))?(U(n,t),0==n.h&&(n.src=null,e[W]=null)):z(t)}}}function X(t){return t in q?q[t]:q[t]="on"+t}function J(t,e){if(t.da)t=!0;else{e=new L(e,this);var n=t.listener,i=t.ha||t.src;t.fa&&$(t),t=n.call(i,e)}return t}function Z(t){return(t=t[W])instanceof B?t:null}var tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(t){return"function"===typeof t?t:(t[tt]||(t[tt]=function(e){return t.handleEvent(e)}),t[tt])}function nt(){A.call(this),this.i=new B(this),this.M=this,this.F=null}function it(t,e){var n,i=t.F;if(i)for(n=[];i;i=i.F)n.push(i);if(t=t.M,i=e.type||e,"string"===typeof e)e=new P(e,t);else if(e instanceof P)e.target=e.target||t;else{var r=e;w(e=new P(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var a=e.g=n[s];r=rt(a,i,!0,e)&&r}if(r=rt(a=e.g=t,i,!0,e)&&r,r=rt(a,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=rt(a=e.g=n[s],i,!1,e)&&r}function rt(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&U(t.i,a),r=!1!==o.call(l,i)&&r}}return r&&!i.defaultPrevented}function st(t,e,n){if("function"===typeof t)n&&(t=c(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=c(t.handleEvent,t)}return 2147483647<Number(e)?-1:r.setTimeout(t,e||0)}function at(t){t.g=st((()=>{t.g=null,t.i&&(t.i=!1,at(t))}),t.l);const e=t.h;t.h=null,t.m.apply(null,e)}h(nt,A),nt.prototype[j]=!0,nt.prototype.removeEventListener=function(t,e,n,i){G(this,t,e,n,i)},nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)z(n[i]);delete e.g[t],e.h--}}this.F=null},nt.prototype.K=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},nt.prototype.L=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};class ot extends A{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:at(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lt(t){A.call(this),this.h=t,this.g={}}h(lt,A);var ct=[];function ut(t){b(t.g,(function(t,e){this.g.hasOwnProperty(e)&&$(t)}),t),t.g={}}lt.prototype.N=function(){lt.aa.N.call(this),ut(this)},lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=r.JSON.stringify,dt=r.JSON.parse,ft=class{stringify(t){return r.JSON.stringify(t,void 0)}parse(t){return r.JSON.parse(t,void 0)}};function pt(){}function gt(t){return t.h||(t.h=t.i())}function mt(){}pt.prototype.h=null;var yt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bt(){P.call(this,"d")}function vt(){P.call(this,"c")}h(bt,P),h(vt,P);var xt={},wt=null;function _t(){return wt=wt||new nt}function kt(t){P.call(this,xt.La,t)}function St(t){const e=_t();it(e,new kt(e))}function Et(t,e){P.call(this,xt.STAT_EVENT,t),this.stat=e}function Ct(t){const e=_t();it(e,new Et(e,t))}function Tt(t,e){P.call(this,xt.Ma,t),this.size=e}function Nt(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return r.setTimeout((function(){t()}),e)}function Dt(){this.g=!0}function Mt(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<r.length;a++)r[a]=""}}}return ht(n)}catch(o){return e}}(t,n)+(i?" "+i:"")}))}xt.La="serverreachability",h(kt,P),xt.STAT_EVENT="statevent",h(Et,P),xt.Ma="timingevent",h(Tt,P),Dt.prototype.xa=function(){this.g=!1},Dt.prototype.info=function(){};var It,At={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ot(){}function Lt(t,e,n,i){this.j=t,this.i=e,this.l=n,this.R=i||1,this.U=new lt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rt}function Rt(){this.i=null,this.g="",this.h=!1}h(Ot,pt),Ot.prototype.g=function(){return new XMLHttpRequest},Ot.prototype.i=function(){return{}},It=new Ot;var jt={},Ft={};function Vt(t,e,n){t.L=1,t.v=ke(be(e)),t.m=n,t.P=!0,zt(t,null)}function zt(t,e){t.F=Date.now(),Ht(t),t.A=be(t.v);var n=t.A,i=t.R;Array.isArray(i)||(i=[String(i)]),je(n.i,"t",i),t.C=0,n=t.j.J,t.h=new Rt,t.g=En(t.j,n?e:null,!t.m),0<t.O&&(t.M=new ot(c(t.Y,t,t.g),t.O)),e=t.U,n=t.g,i=t.ca;var r="readystatechange";Array.isArray(r)||(r&&(ct[0]=r.toString()),r=ct);for(var s=0;s<r.length;s++){var a=K(n,r[s],i||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}e=t.H?v(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),St(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+a}))}(t.i,t.u,t.A,t.l,t.R,t.m)}function Bt(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.j.Ca)}function Ut(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Ft:(n=Number(e.substring(n,i)),isNaN(n)?jt:(i+=1)+n>e.length?Ft:(e=e.slice(i,i+n),t.C=i+n,e))}function Ht(t){t.S=Date.now()+t.I,Wt(t,t.I)}function Wt(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Nt(c(t.ba,t),e)}function qt(t){t.B&&(r.clearTimeout(t.B),t.B=null)}function Kt(t){0==t.j.G||t.J||xn(t.j,t)}function Yt(t){qt(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,ut(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function Qt(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||Zt(n.h,t)))if(!t.K&&Zt(n.h,t)&&3==n.G){try{var i=n.Da.g.parse(e)}catch(u){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;vn(n),cn(n)}mn(n),Ct(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=Nt(c(n.Za,n),6e3));if(1>=Jt(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else _n(n,11)}else if((t.K||n.g==t)&&vn(n),!p(e))for(r=n.Da.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const e=c[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const r=c[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(te(s,s.h),s.h=null))}if(i.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.ya=t,_e(i.I,i.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=t;if((i=n).qa=Sn(i,i.J?i.ia:null,i.W),a.K){ee(i.h,a);var o=a,l=i.L;l&&(o.I=l),o.B&&(qt(o),Ht(o)),i.g=a}else gn(i);0<n.i.length&&hn(n)}else"stop"!=c[0]&&"close"!=c[0]||_n(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?_n(n,7):ln(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}St()}catch(u){}}Lt.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==rn(t)?e.j():this.Y(t)},Lt.prototype.Y=function(t){try{if(t==this.g)t:{const d=rn(this.g);var e=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||sn(this.g)))){this.J||4!=d||7==e||St(),qt(this);var n=this.g.Z();this.X=n;e:if(Bt(this)){var i=sn(this.g);t="";var s=i.length,a=4==rn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Yt(this),Kt(this);var o="";break e}this.h.i=new r.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:!(a&&e==s-1)});i.length=0,this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(t,e,n,i,r,s,a){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+a}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){e:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break e}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ct(12),Yt(this),Kt(this);break t}Mt(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qt(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<o.length;){if(t=Ut(this,o),t==Ft){4==d&&(this.s=4,Ct(14),n=!1),Mt(this.i,this.l,null,"[Incomplete Response]");break}if(t==jt){this.s=4,Ct(15),Mt(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Mt(this.i,this.l,t,null),Qt(this,t)}if(Bt(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Ct(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),yn(h),h.M=!0,Ct(11))}}else Mt(this.i,this.l,o,"[Invalid Chunked Response]"),Yt(this),Kt(this)}else Mt(this.i,this.l,o,null),Qt(this,o);4==d&&Yt(this),this.o&&!this.J&&(4==d?xn(this.j,this):(this.o=!1,Ht(this)))}else(function(t){const e={};t=(t.g&&2<=rn(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(p(t[i]))continue;var n=_(t[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),Yt(this),Kt(this)}}}catch(pe){}},Lt.prototype.cancel=function(){this.J=!0,Yt(this)},Lt.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.i,this.A),2!=this.L&&(St(),Ct(17)),Yt(this),this.s=2,Kt(this)):Wt(this,this.S-t)};var Gt=class{constructor(t,e){this.g=t,this.map=e}};function $t(t){this.l=t||10,r.PerformanceNavigationTiming?t=0<(t=r.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xt(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Jt(t){return t.h?1:t.g?t.g.size:0}function Zt(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function te(t,e){t.g?t.g.add(e):t.h=e}function ee(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ne(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return d(t.i)}function ie(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(s(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(s(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(s(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,a=0;a<r;a++)e.call(void 0,i[a],n&&n[a],t)}$t.prototype.cancel=function(){if(this.i=ne(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var ge=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function me(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof me){this.h=t.h,ve(this,t.j),this.o=t.o,this.g=t.g,xe(this,t.s),this.l=t.l;var e=t.i,n=new Pe;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),we(this,n),this.m=t.m}else t&&(e=String(t).match(ge))?(this.h=!1,ve(this,e[1]||"",!0),this.o=Se(e[2]||""),this.g=Se(e[3]||"",!0),xe(this,e[4]),this.l=Se(e[5]||"",!0),we(this,e[6]||"",!0),this.m=Se(e[7]||"")):(this.h=!1,this.i=new Pe(null,this.h))}function be(t){return new me(t)}function ve(t,e,n){t.j=n?Se(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function xe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function we(t,e,n){e instanceof Pe?(t.i=e,function(t,e){e&&!t.j&&(Oe(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Le(this,e),je(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=Ee(e,Ie)),t.i=new Pe(e,t.h))}function _e(t,e,n){t.i.set(e,n)}function ke(t){return _e(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Se(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ee(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Ce),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ce(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}me.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ee(e,Ne,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(Ee(e,Ne,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ee(n,"/"==n.charAt(0)?Me:De,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",Ee(n,Ae)),t.join("")};var Te,Ne=/[#\/\?@]/g,De=/[#\?:]/g,Me=/[#\?]/g,Ie=/[#\?@]/g,Ae=/#/g;function Pe(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Oe(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Le(t,e){Oe(t),e=Fe(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Re(t,e){return Oe(t),e=Fe(t,e),t.g.has(e)}function je(t,e,n){Le(t,e),0<n.length&&(t.i=null,t.g.set(Fe(t,e),d(n)),t.h+=n.length)}function Fe(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ve(t,e,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function ze(){this.g=new ft}function Be(t,e,n){const i=n||"";try{ie(t,(function(t,n){let r=t;a(t)&&(r=ht(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Ue(t){this.l=t.Ub||null,this.j=t.eb||!1}function He(t,e){nt.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function We(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function qe(t){t.readyState=4,t.l=null,t.j=null,t.v=null,Ke(t)}function Ke(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Ye(t){let e="";return b(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Qe(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Ye(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):_e(t,e,n))}function Ge(t){nt.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=Pe.prototype).add=function(t,e){Oe(this),this.i=null,t=Fe(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){Oe(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},t.na=function(){Oe(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},t.V=function(t){Oe(this);let e=[];if("string"===typeof t)Re(this,t)&&(e=e.concat(this.g.get(Fe(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return Oe(this),this.i=null,Re(this,t=Fe(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),a=this.V(i);for(i=0;i<a.length;i++){var r=s;""!==a[i]&&(r+="="+encodeURIComponent(String(a[i]))),t.push(r)}}return this.i=t.join("&")},h(Ue,pt),Ue.prototype.g=function(){return new He(this.l,this.j)},Ue.prototype.i=(Te={},function(){return Te}),h(He,nt),(t=He.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,Ke(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||r).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qe(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ke(this)),this.g&&(this.readyState=3,Ke(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof r.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;We(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?qe(this):Ke(this),3==this.readyState&&We(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,qe(this))},t.Qa=function(t){this.g&&(this.response=t,qe(this))},t.ga=function(){this.g&&qe(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(He.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),h(Ge,nt);var $e=/^https?$/i,Xe=["POST","PUT"];function Je(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,Ze(t),en(t)}function Ze(t){t.A||(t.A=!0,it(t,"complete"),it(t,"error"))}function tn(t){if(t.h&&"undefined"!=typeof i&&(!t.v[1]||4!=rn(t)||2!=t.Z()))if(t.u&&4==rn(t))st(t.Ea,0,t);else if(it(t,"readystatechange"),4==rn(t)){t.h=!1;try{const i=t.Z();t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===i){var a=String(t.D).match(ge)[1]||null;!a&&r.self&&r.self.location&&(a=r.self.location.protocol.slice(0,-1)),s=!$e.test(a?a.toLowerCase():"")}n=s}if(n)it(t,"complete"),it(t,"success");else{t.m=6;try{var o=2<rn(t)?t.g.statusText:""}catch(l){o=""}t.l=o+" ["+t.Z()+"]",Ze(t)}}finally{en(t)}}}function en(t,e){if(t.g){nn(t);const i=t.g,r=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||it(t,"ready");try{i.onreadystatechange=r}catch(n){}}}function nn(t){t.I&&(r.clearTimeout(t.I),t.I=null)}function rn(t){return t.g?t.g.readyState:0}function sn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(ye){return null}}function an(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function on(t){this.Aa=0,this.i=[],this.j=new Dt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=an("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=an("baseRetryDelayMs",5e3,t),this.cb=an("retryDelaySeedMs",1e4,t),this.Wa=an("forwardChannelMaxRetries",2,t),this.wa=an("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new $t(t&&t.concurrentRequestLimit),this.Da=new ze,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function ln(t){if(un(t),3==t.G){var e=t.U++,n=be(t.I);if(_e(n,"SID",t.K),_e(n,"RID",e),_e(n,"TYPE","terminate"),fn(t,n),(e=new Lt(t,t.j,e)).L=2,e.v=ke(be(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(e.v.toString(),"")}catch(i){}!n&&r.Image&&((new Image).src=e.v,n=!0),n||(e.g=En(e.j,null),e.g.ea(e.v)),e.F=Date.now(),Ht(e)}kn(t)}function cn(t){t.g&&(yn(t),t.g.cancel(),t.g=null)}function un(t){cn(t),t.u&&(r.clearTimeout(t.u),t.u=null),vn(t),t.h.cancel(),t.s&&("number"===typeof t.s&&r.clearTimeout(t.s),t.s=null)}function hn(t){if(!Xt(t.h)&&!t.s){t.s=!0;var e=t.Ga;T||M(),N||(T(),N=!0),D.add(e,t),t.B=0}}function dn(t,e){var n;n=e?e.l:t.U++;const i=be(t.I);_e(i,"SID",t.K),_e(i,"RID",n),_e(i,"AID",t.T),fn(t,i),t.m&&t.o&&Qe(i,t.m,t.o),n=new Lt(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=pn(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),te(t.h,n),Vt(n,i,e)}function fn(t,e){t.H&&b(t.H,(function(t,n){_e(e,n,t)})),t.l&&ie({},(function(t,n){_e(e,n,t)}))}function pn(t,e,n){n=Math.min(t.i.length,n);var i=t.l?c(t.l.Na,t.l,t):null;t:{var r=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let a=0;a<n;a++){let n=r[a].g;const o=r[a].map;if(n-=e,0>n)e=Math.max(0,r[a].g-100),s=!1;else try{Be(o,t,"req"+n+"_")}catch(pe){i&&i(o)}}if(s){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,i}function gn(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;T||M(),N||(T(),N=!0),D.add(e,t),t.v=0}}function mn(t){return!(t.g||t.u||3<=t.v)&&(t.Y++,t.u=Nt(c(t.Fa,t),wn(t,t.v)),t.v++,!0)}function yn(t){null!=t.A&&(r.clearTimeout(t.A),t.A=null)}function bn(t){t.g=new Lt(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=be(t.qa);_e(e,"RID","rpc"),_e(e,"SID",t.K),_e(e,"AID",t.T),_e(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&_e(e,"TO",t.ja),_e(e,"TYPE","xmlhttp"),fn(t,e),t.m&&t.o&&Qe(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=ke(be(e)),n.m=null,n.P=!0,zt(n,t)}function vn(t){null!=t.C&&(r.clearTimeout(t.C),t.C=null)}function xn(t,e){var n=null;if(t.g==e){vn(t),yn(t),t.g=null;var i=2}else{if(!Zt(t.h,e))return;n=e.D,ee(t.h,e),i=1}if(0!=t.G)if(e.o)if(1==i){n=e.m?e.m.length:0,e=Date.now()-e.F;var r=t.B;it(i=_t(),new Tt(i,n)),hn(t)}else gn(t);else if(3==(r=e.s)||0==r&&0<e.X||!(1==i&&function(t,e){return!(Jt(t.h)>=t.h.j-(t.s?1:0))&&(t.s?(t.i=e.D.concat(t.i),!0):!(1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa))&&(t.s=Nt(c(t.Ga,t,e),wn(t,t.B)),t.B++,!0))}(t,e)||2==i&&mn(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:_n(t,5);break;case 4:_n(t,10);break;case 3:_n(t,6);break;default:_n(t,2)}}function wn(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function _n(t,e){if(t.j.info("Error code "+e),2==e){var n=c(t.fb,t),i=t.Xa;const e=!i;i=new me(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||ve(i,"https"),ke(i),e?function(t,e){const n=new Dt;if(r.Image){const i=new Image;i.onload=u(Ve,n,"TestLoadImage: loaded",!0,e,i),i.onerror=u(Ve,n,"TestLoadImage: error",!1,e,i),i.onabort=u(Ve,n,"TestLoadImage: abort",!1,e,i),i.ontimeout=u(Ve,n,"TestLoadImage: timeout",!1,e,i),r.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(i.toString(),n):function(t,e){new Dt;const n=new AbortController,i=setTimeout((()=>{n.abort(),Ve(0,0,!1,e)}),1e4);fetch(t,{signal:n.signal}).then((t=>{clearTimeout(i),t.ok?Ve(0,0,!0,e):Ve(0,0,!1,e)})).catch((()=>{clearTimeout(i),Ve(0,0,!1,e)}))}(i.toString(),n)}else Ct(2);t.G=0,t.l&&t.l.sa(e),kn(t),un(t)}function kn(t){if(t.G=0,t.ka=[],t.l){const e=ne(t.h);0==e.length&&0==t.i.length||(f(t.ka,e),f(t.ka,t.i),t.h.i.length=0,d(t.i),t.i.length=0),t.l.ra()}}function Sn(t,e,n){var i=n instanceof me?be(n):new me(n);if(""!=i.g)e&&(i.g=e+"."+i.g),xe(i,i.s);else{var s=r.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var a=new me(null);i&&ve(a,i),e&&(a.g=e),s&&xe(a,s),n&&(a.l=n),i=a}return n=t.D,e=t.ya,n&&e&&_e(i,n,e),_e(i,"VER",t.la),fn(t,i),i}function En(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ca&&!t.pa?new Ge(new Ue({eb:n})):new Ge(t.pa)).Ha(t.J),e}function Cn(){}function Tn(){}function Nn(t,e){nt.call(this),this.g=new on(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!p(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!p(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new In(this)}function Dn(t){bt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Mn(){vt.call(this),this.status=1}function In(t){this.g=t}(t=Ge.prototype).Ha=function(t){this.J=t},t.ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():It.g(),this.v=this.o?gt(this.o):gt(It),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(a){return void Je(this,a)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),s=r.FormData&&t instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Xe,e,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(t),this.u=!1}catch(a){Je(this,a)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,it(this,"complete"),it(this,"abort"),en(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),en(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tn(this):this.bb())},t.bb=function(){tn(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch(Te){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(Te){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),dt(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(t=on.prototype).la=8,t.G=1,t.connect=function(t,e,n,i){Ct(0),this.W=t,this.H=e||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=Sn(this,null,this.W),hn(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new Lt(this,this.j,t);let s=this.o;if(this.S&&(s?(s=v(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(r.H=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=pn(this,r,e),_e(n=be(this.I),"RID",t),_e(n,"CVER",22),this.D&&_e(n,"X-HTTP-Session-Id",this.D),fn(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Ye(s)))+"&"+e:this.m&&Qe(n,this.m,s)),te(this.h,r),this.Ua&&_e(n,"TYPE","init"),this.P?(_e(n,"$req",e),_e(n,"SID","null"),r.T=!0,Vt(r,n,null)):Vt(r,n,e),this.G=2}}else 3==this.G&&(t?dn(this,t):0==this.i.length||Xt(this.h)||dn(this))},t.Fa=function(){if(this.u=null,bn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=Nt(c(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),cn(this),bn(this))},t.Za=function(){null!=this.C&&(this.C=null,cn(this),mn(this),Ct(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=Cn.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},Tn.prototype.g=function(t,e){return new Nn(t,e)},h(Nn,nt),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){ln(this.g)},Nn.prototype.o=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.u&&((n={}).__data__=ht(t),t=n);e.i.push(new Gt(e.Ya++,t)),3==e.G&&hn(e)},Nn.prototype.N=function(){this.g.l=null,delete this.j,ln(this.g),delete this.g,Nn.aa.N.call(this)},h(Dn,bt),h(Mn,vt),h(In,Cn),In.prototype.ua=function(){it(this.g,"a")},In.prototype.ta=function(t){it(this.g,new Dn(t))},In.prototype.sa=function(t){it(this.g,new Mn)},In.prototype.ra=function(){it(this.g,"b")},Tn.prototype.createWebChannel=Tn.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,he=fe.createWebChannelTransport=function(){return new Tn},ue=fe.getStatEventTarget=function(){return _t()},ce=fe.Event=xt,le=fe.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},At.NO_ERROR=0,At.TIMEOUT=8,At.HTTP_ERROR=6,oe=fe.ErrorCode=At,Pt.COMPLETE="complete",ae=fe.EventType=Pt,mt.EventType=yt,yt.OPEN="a",yt.CLOSE="b",yt.ERROR="c",yt.MESSAGE="d",nt.prototype.listen=nt.prototype.K,se=fe.WebChannel=mt,fe.FetchXmlHttpFactory=Ue,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,re=fe.XhrIo=Ge}).apply("undefined"!==typeof de?de:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const pe="@firebase/firestore";class ge{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ge.UNAUTHENTICATED=new ge(null),ge.GOOGLE_CREDENTIALS=new ge("google-credentials-uid"),ge.FIRST_PARTY=new ge("first-party-uid"),ge.MOCK_USER=new ge("mock-user");let me="10.14.0";const ye=new V("@firebase/firestore");function be(){return ye.logLevel}function ve(t){if(ye.logLevel<=O.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(_e);ye.debug("Firestore (".concat(me,"): ").concat(t),...r)}}function xe(t){if(ye.logLevel<=O.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(_e);ye.error("Firestore (".concat(me,"): ").concat(t),...r)}}function we(t){if(ye.logLevel<=O.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(_e);ye.warn("Firestore (".concat(me,"): ").concat(t),...r)}}function _e(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function ke(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const e="FIRESTORE (".concat(me,") INTERNAL ASSERTION FAILED: ")+t;throw xe(e),new Error(e)}function Se(t,e){t||ke()}function Ee(t,e){return t}const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends k{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Ne{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class De{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))}}class Me{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(ge.UNAUTHENTICATED)))}shutdown(){}}class Ie{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Ae{constructor(t){this.t=t,this.currentUser=ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Se(void 0===this.o);let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new Ne;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ne,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},a=t=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((t=>a(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?a(t):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ne)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Se("string"==typeof e.accessToken),new De(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Se(null===t||"string"==typeof t),new ge(t)}}class Pe{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=ge.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Oe{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Pe(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(ge.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Le{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Re{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){Se(void 0===this.o);const n=t=>{null!=t.error&&ve("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));const n=t.token!==this.R;return this.R=t.token,ve("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Se("string"==typeof t.token),this.R=t.token,new Le(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function je(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class Fe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=je(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%62))}return n}}function Ve(t,e){return t<e?-1:t>e?1:0}function ze(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class Be{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Te(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Te(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Te(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Te(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Be.fromMillis(Date.now())}static fromDate(t){return Be.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Be(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ve(this.nanoseconds,t.nanoseconds):Ve(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ue{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ue(t)}static min(){return new Ue(new Be(0,0))}static max(){return new Ue(new Be(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class He{constructor(t,e,n){void 0===e?e=0:e>t.length&&ke(),void 0===n?n=t.length-e:n>t.length-e&&ke(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===He.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof He?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class We extends He{construct(t,e,n){return new We(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const t=[];for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new Te(Ce.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));t.push(...r.split("/").filter((t=>t.length>0)))}return new We(t)}static emptyPath(){return new We([])}}const qe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends He{construct(t,e,n){return new Ke(t,e,n)}static isValidIdentifier(t){return qe.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ke(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Te(Ce.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Te(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Te(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new Te(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ke(e)}static emptyPath(){return new Ke([])}}class Ye{constructor(t){this.path=t}static fromPath(t){return new Ye(We.fromString(t))}static fromName(t){return new Ye(We.fromString(t).popFirst(5))}static empty(){return new Ye(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===We.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return We.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ye(new We(t.slice()))}}class Qe{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}Qe.UNKNOWN_ID=-1;function Ge(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Ue.fromTimestamp(1e9===i?new Be(n+1,0):new Be(n,i));return new Xe(r,Ye.empty(),e)}function $e(t){return new Xe(t.readTime,t.key,-1)}class Xe{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Xe(Ue.min(),Ye.empty(),-1)}static max(){return new Xe(Ue.max(),Ye.empty(),-1)}}function Je(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Ye.comparator(t.documentKey,e.documentKey),0!==n?n:Ve(t.largestBatchId,e.largestBatchId))}const Ze="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function en(t){if(t.code!==Ce.FAILED_PRECONDITION||t.message!==Ze)throw t;ve("LocalStore","Unexpectedly lost primary lease")}class nn{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new nn(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof nn?e:nn.resolve(e)}catch(t){return nn.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):nn.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):nn.reject(e)}static resolve(t){return new nn(((e,n)=>{e(t)}))}static reject(t){return new nn(((e,n)=>{n(t)}))}static waitFor(t){return new nn(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=nn.resolve(!1);for(const n of t)e=e.next((t=>t?nn.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new nn(((n,i)=>{const r=t.length,s=new Array(r);let a=0;for(let o=0;o<r;o++){const l=o;e(t[l]).next((t=>{s[l]=t,++a,a===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new nn(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}function rn(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sn(t){return"IndexedDbTransactionError"===t.name}class an{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ie(t),this.se=t=>e.writeSequenceNumber(t))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}function on(t){return null==t}function ln(t){return 0===t&&1/t==-1/0}function cn(t){return"number"==typeof t&&Number.isInteger(t)&&!ln(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}an.oe=-1;const un=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dn=hn,fn=[...dn,"indexConfiguration","indexState","indexEntries"];function pn(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mn(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class yn{constructor(t,e){this.comparator=t,this.root=e||vn.EMPTY}insert(t,e){return new yn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(t){return new yn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,vn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push("".concat(e,":").concat(n)),!1))),"{".concat(t.join(", "),"}")}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new bn(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new bn(this.root,t,this.comparator,!1)}getReverseIterator(){return new bn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new bn(this.root,t,this.comparator,!0)}}class bn{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class vn{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:vn.RED,this.left=null!=i?i:vn.EMPTY,this.right=null!=r?r:vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new vn(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return vn.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke();if(this.right.isRed())throw ke();const t=this.left.check();if(t!==this.right.check())throw ke();return t+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1,vn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke()}get value(){throw ke()}get color(){throw ke()}get left(){throw ke()}get right(){throw ke()}copy(t,e,n,i,r){return this}insert(t,e,n){return new vn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xn{constructor(t){this.comparator=t,this.data=new yn(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new wn(this.data.getIterator())}getIteratorFrom(t){return new wn(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof xn))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new xn(this.comparator);return e.data=t,e}}class wn{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _n{constructor(t){this.fields=t,t.sort(Ke.comparator)}static empty(){return new _n([])}unionWith(t){let e=new xn(Ke.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new _n(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ze(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class kn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new kn("Invalid base64 string: "+t):t}}(t);return new Sn(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Sn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ve(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const En=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cn(t){if(Se(!!t),"string"==typeof t){let e=0;const n=En.exec(t);if(Se(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tn(t.seconds),nanos:Tn(t.nanos)}}function Tn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Nn(t){return"string"==typeof t?Sn.fromBase64String(t):Sn.fromUint8Array(t)}function Dn(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Mn(t){const e=t.mapValue.fields.__previous_value__;return Dn(e)?Mn(e):e}function In(t){const e=Cn(t.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}class An{constructor(t,e,n,i,r,s,a,o,l){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class Pn{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Pn("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Pn&&t.projectId===this.projectId&&t.database===this.database}}const On={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ln(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dn(t)?4:$n(t)?9007199254740991:Qn(t)?10:11:ke()}function Rn(t,e){if(t===e)return!0;const n=Ln(t);if(n!==Ln(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return In(t).isEqual(In(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Cn(t.timestampValue),i=Cn(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Nn(t.bytesValue).isEqual(Nn(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Tn(t.geoPointValue.latitude)===Tn(e.geoPointValue.latitude)&&Tn(t.geoPointValue.longitude)===Tn(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Tn(t.integerValue)===Tn(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Tn(t.doubleValue),i=Tn(e.doubleValue);return n===i?ln(n)===ln(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return ze(t.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(pn(n)!==pn(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Rn(n[r],i[r])))return!1;return!0}(t,e);default:return ke()}}function jn(t,e){return void 0!==(t.values||[]).find((t=>Rn(t,e)))}function Fn(t,e){if(t===e)return 0;const n=Ln(t),i=Ln(e);if(n!==i)return Ve(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Tn(t.integerValue||t.doubleValue),i=Tn(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return Vn(t.timestampValue,e.timestampValue);case 4:return Vn(In(t),In(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Nn(t),i=Nn(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=Ve(n[r],i[r]);if(0!==t)return t}return Ve(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Ve(Tn(t.latitude),Tn(e.latitude));return 0!==n?n:Ve(Tn(t.longitude),Tn(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zn(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,i,r,s;const a=t.fields||{},o=e.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(i=o.value)||void 0===i?void 0:i.arrayValue,u=Ve((null===(r=null==l?void 0:l.values)||void 0===r?void 0:r.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:zn(l,c)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===On.mapValue&&e===On.mapValue)return 0;if(t===On.mapValue)return 1;if(e===On.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let a=0;a<i.length&&a<s.length;++a){const t=Ve(i[a],s[a]);if(0!==t)return t;const e=Fn(n[i[a]],r[s[a]]);if(0!==e)return e}return Ve(i.length,s.length)}(t.mapValue,e.mapValue);default:throw ke()}}function Vn(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ve(t,e);const n=Cn(t),i=Cn(e),r=Ve(n.seconds,i.seconds);return 0!==r?r:Ve(n.nanos,i.nanos)}function zn(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=Fn(n[r],i[r]);if(t)return t}return Ve(n.length,i.length)}function Bn(t){return Un(t)}function Un(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Cn(t);return"time(".concat(e.seconds,",").concat(e.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Nn(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return Ye.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return"geo(".concat(t.latitude,",").concat(t.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Un(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+="".concat(r,":").concat(Un(t.fields[r]));return n+"}"}(t.mapValue):ke()}function Hn(t){return!!t&&"integerValue"in t}function Wn(t){return!!t&&"arrayValue"in t}function qn(t){return!!t&&"nullValue"in t}function Kn(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yn(t){return!!t&&"mapValue"in t}function Qn(t){var e,n;return"__vector__"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gn(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gn(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Gn(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gn(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $n(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Xn{constructor(t){this.value=t}static empty(){return new Xn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Yn(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Gn(e)}setAll(t){let e=Ke.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=Gn(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());Yn(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Rn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];Yn(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){gn(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new Xn(Gn(this.value))}}function Jn(t){const e=[];return gn(t.fields,((t,n)=>{const i=new Ke([t]);if(Yn(n)){const t=Jn(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new _n(e)}class Zn{constructor(t,e,n,i,r,s,a){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=a}static newInvalidDocument(t){return new Zn(t,0,Ue.min(),Ue.min(),Ue.min(),Xn.empty(),0)}static newFoundDocument(t,e,n,i){return new Zn(t,1,e,Ue.min(),n,i,0)}static newNoDocument(t,e){return new Zn(t,2,e,Ue.min(),Ue.min(),Xn.empty(),0)}static newUnknownDocument(t,e){return new Zn(t,3,e,Ue.min(),Ue.min(),Xn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ue.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Zn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ti{constructor(t,e){this.position=t,this.inclusive=e}}function ei(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(i=s.field.isKeyField()?Ye.comparator(Ye.fromName(a.referenceValue),n.key):Fn(a,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function ni(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rn(t.position[n],e.position[n]))return!1;return!0}class ii{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=t,this.dir=e}}function ri(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class si{}class ai extends si{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new pi(t,e,n):"array-contains"===e?new bi(t,n):"in"===e?new vi(t,n):"not-in"===e?new xi(t,n):"array-contains-any"===e?new wi(t,n):new ai(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new gi(t,n):new mi(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Fn(e,this.value)):null!==e&&Ln(this.value)===Ln(e)&&this.matchesComparison(Fn(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends si{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new oi(t,e)}matches(t){return li(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function li(t){return"and"===t.op}function ci(t){return ui(t)&&li(t)}function ui(t){for(const e of t.filters)if(e instanceof oi)return!1;return!0}function hi(t){if(t instanceof ai)return t.field.canonicalString()+t.op.toString()+Bn(t.value);if(ci(t))return t.filters.map((t=>hi(t))).join(",");{const e=t.filters.map((t=>hi(t))).join(",");return"".concat(t.op,"(").concat(e,")")}}function di(t,e){return t instanceof ai?function(t,e){return e instanceof ai&&t.op===e.op&&t.field.isEqual(e.field)&&Rn(t.value,e.value)}(t,e):t instanceof oi?function(t,e){return e instanceof oi&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&di(n,e.filters[i])),!0)}(t,e):void ke()}function fi(t){return t instanceof ai?function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(Bn(t.value))}(t):t instanceof oi?function(t){return t.op.toString()+" {"+t.getFilters().map(fi).join(" ,")+"}"}(t):"Filter"}class pi extends ai{constructor(t,e,n){super(t,e,n),this.key=Ye.fromName(n.referenceValue)}matches(t){const e=Ye.comparator(t.key,this.key);return this.matchesComparison(e)}}class gi extends ai{constructor(t,e){super(t,"in",e),this.keys=yi("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class mi extends ai{constructor(t,e){super(t,"not-in",e),this.keys=yi("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function yi(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Ye.fromName(t.referenceValue)))}class bi extends ai{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Wn(e)&&jn(e.arrayValue,this.value)}}class vi extends ai{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&jn(this.value.arrayValue,e)}}class xi extends ai{constructor(t,e){super(t,"not-in",e)}matches(t){if(jn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!jn(this.value.arrayValue,e)}}class wi extends ai{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Wn(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>jn(this.value.arrayValue,t)))}}class _i{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=a,this.ue=null}}function ki(t){return new _i(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Si(t){const e=Ee(t);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>hi(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),on(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Bn(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Bn(t))).join(",")),e.ue=t}return e.ue}function Ei(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ri(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!di(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ni(t.startAt,e.startAt)&&ni(t.endAt,e.endAt)}function Ci(t){return Ye.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Ti{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ni(t,e,n,i,r,s,a,o){return new Ti(t,e,n,i,r,s,a,o)}function Di(t){return new Ti(t)}function Mi(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Ii(t){return null!==t.collectionGroup}function Ai(t){const e=Ee(t);if(null===e.ce){e.ce=[];const t=new Set;for(const r of e.explicitOrderBy)e.ce.push(r),t.add(r.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new xn(Ke.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ii(i,n))})),t.has(Ke.keyField().canonicalString())||e.ce.push(new ii(Ke.keyField(),n))}return e.ce}function Pi(t){const e=Ee(t);return e.le||(e.le=Oi(e,Ai(t))),e.le}function Oi(t,e){if("F"===t.limitType)return ki(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new ii(t.field,e)}));const n=t.endAt?new ti(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ti(t.startAt.position,t.startAt.inclusive):null;return ki(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Li(t,e,n){return new Ti(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ri(t,e){return Ei(Pi(t),Pi(e))&&t.limitType===e.limitType}function ji(t){return"".concat(Si(Pi(t)),"|lt:").concat(t.limitType)}function Fi(t){return"Query(target=".concat(function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: [".concat(t.filters.map((t=>fi(t))).join(", "),"]")),on(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: [".concat(t.orderBy.map((t=>function(t){return"".concat(t.field.canonicalString()," (").concat(t.dir,")")}(t))).join(", "),"]")),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Bn(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Bn(t))).join(",")),"Target(".concat(e,")")}(Pi(t)),"; limitType=").concat(t.limitType,")")}function Vi(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ye.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Ai(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=ei(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,Ai(t),e))&&!(t.endAt&&!function(t,e,n){const i=ei(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,Ai(t),e))}(t,e)}function zi(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Bi(t){return(e,n)=>{let i=!1;for(const r of Ai(t)){const t=Ui(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function Ui(t,e,n){const i=t.field.isKeyField()?Ye.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?Fn(i,r):ke()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ke()}}class Hi{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){gn(this.inner,((e,n)=>{for(const[i,r]of n)t(i,r)}))}isEmpty(){return mn(this.inner)}size(){return this.innerSize}}const Wi=new yn(Ye.comparator);function qi(){return Wi}const Ki=new yn(Ye.comparator);function Yi(){let t=Ki;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.insert(r.key,r);return t}function Qi(t){let e=Ki;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Gi(){return Xi()}function $i(){return Xi()}function Xi(){return new Hi((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Ji=new yn(Ye.comparator),Zi=new xn(Ye.comparator);function tr(){let t=Zi;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.add(r);return t}const er=new xn(Ve);function nr(){return er}function ir(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ln(e)?"-0":e}}function rr(t){return{integerValue:""+t}}function sr(t,e){return cn(e)?rr(e):ir(t,e)}class ar{constructor(){this._=void 0}}function or(t,e,n){return t instanceof ur?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Dn(e)&&(e=Mn(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof hr?dr(t,e):t instanceof fr?pr(t,e):function(t,e){const n=cr(t,e),i=mr(n)+mr(t.Pe);return Hn(n)&&Hn(t.Pe)?rr(i):ir(t.serializer,i)}(t,e)}function lr(t,e,n){return t instanceof hr?dr(t,e):t instanceof fr?pr(t,e):n}function cr(t,e){return t instanceof gr?function(t){return Hn(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class ur extends ar{}class hr extends ar{constructor(t){super(),this.elements=t}}function dr(t,e){const n=yr(e);for(const i of t.elements)n.some((t=>Rn(t,i)))||n.push(i);return{arrayValue:{values:n}}}class fr extends ar{constructor(t){super(),this.elements=t}}function pr(t,e){let n=yr(e);for(const i of t.elements)n=n.filter((t=>!Rn(t,i)));return{arrayValue:{values:n}}}class gr extends ar{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function mr(t){return Tn(t.integerValue||t.doubleValue)}function yr(t){return Wn(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class br{constructor(t,e){this.version=t,this.transformResults=e}}class vr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new vr}static exists(t){return new vr(void 0,t)}static updateTime(t){return new vr(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function xr(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class wr{}function _r(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Ar(t.key,vr.none()):new Tr(t.key,t.data,vr.none());{const n=t.data,i=Xn.empty();let r=new xn(Ke.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new Nr(t.key,i,new _n(r.toArray()),vr.none())}}function kr(t,e,n){t instanceof Tr?function(t,e,n){const i=t.value.clone(),r=Mr(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof Nr?function(t,e,n){if(!xr(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=Mr(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(Dr(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Sr(t,e,n,i){return t instanceof Tr?function(t,e,n,i){if(!xr(t.precondition,e))return n;const r=t.value.clone(),s=Ir(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof Nr?function(t,e,n,i){if(!xr(t.precondition,e))return n;const r=Ir(t.fieldTransforms,i,e),s=e.data;return s.setAll(Dr(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return xr(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Er(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=cr(i.transform,t||null);null!=r&&(null===n&&(n=Xn.empty()),n.set(i.field,r))}return n||null}function Cr(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ze(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof hr&&e instanceof hr||t instanceof fr&&e instanceof fr?ze(t.elements,e.elements,Rn):t instanceof gr&&e instanceof gr?Rn(t.Pe,e.Pe):t instanceof ur&&e instanceof ur}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tr extends wr{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Nr extends wr{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Dr(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Mr(t,e,n){const i=new Map;Se(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,o=e.data.field(s.field);i.set(s.field,lr(a,o,n[r]))}return i}function Ir(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,or(t,s,e))}return i}class Ar extends wr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pr extends wr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Or{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&kr(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Sr(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Sr(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=$i();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let a=this.applyToLocalView(s,r.mutatedFields);a=e.has(i.key)?null:a;const o=_r(s,a);null!==o&&n.set(i.key,o),s.isValidDocument()||s.convertToNoDocument(Ue.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),tr())}isEqual(t){return this.batchId===t.batchId&&ze(this.mutations,t.mutations,((t,e)=>Cr(t,e)))&&ze(this.baseMutations,t.baseMutations,((t,e)=>Cr(t,e)))}}class Lr{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){Se(t.mutations.length===n.length);let i=Ji;const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Lr(t,e,n,i)}}class Rr{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class jr{constructor(t,e){this.count=t,this.unchangedNames=e}}var Fr,Vr;function zr(t){switch(t){default:return ke();case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0}}function Br(t){if(void 0===t)return xe("GRPC error has no .code"),Ce.UNKNOWN;switch(t){case Fr.OK:return Ce.OK;case Fr.CANCELLED:return Ce.CANCELLED;case Fr.UNKNOWN:return Ce.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return Ce.INTERNAL;case Fr.UNAVAILABLE:return Ce.UNAVAILABLE;case Fr.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case Fr.NOT_FOUND:return Ce.NOT_FOUND;case Fr.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case Fr.ABORTED:return Ce.ABORTED;case Fr.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case Fr.DATA_LOSS:return Ce.DATA_LOSS;default:return ke()}}(Vr=Fr||(Fr={}))[Vr.OK=0]="OK",Vr[Vr.CANCELLED=1]="CANCELLED",Vr[Vr.UNKNOWN=2]="UNKNOWN",Vr[Vr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vr[Vr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vr[Vr.NOT_FOUND=5]="NOT_FOUND",Vr[Vr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vr[Vr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vr[Vr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vr[Vr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vr[Vr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vr[Vr.ABORTED=10]="ABORTED",Vr[Vr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vr[Vr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vr[Vr.INTERNAL=13]="INTERNAL",Vr[Vr.UNAVAILABLE=14]="UNAVAILABLE",Vr[Vr.DATA_LOSS=15]="DATA_LOSS";let Ur=null;function Hr(){return new TextEncoder}const Wr=new te([4294967295,4294967295],0);function qr(t){const e=Hr().encode(t),n=new ee;return n.update(e),new Uint8Array(n.digest())}function Kr(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new te([n,i],0),new te([r,s],0)]}class Yr{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Qr("Invalid padding: ".concat(e));if(n<0)throw new Qr("Invalid hash count: ".concat(n));if(t.length>0&&0===this.hashCount)throw new Qr("Invalid hash count: ".concat(n));if(0===t.length&&0!==e)throw new Qr("Invalid padding when bitmap length is 0: ".concat(e));this.Ie=8*t.length-e,this.Te=te.fromNumber(this.Ie)}Ee(t,e,n){let i=t.add(e.multiply(te.fromNumber(n)));return 1===i.compare(Wr)&&(i=new te([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const e=qr(t),[n,i]=Kr(e);for(let r=0;r<this.hashCount;r++){const t=this.Ee(n,i,r);if(!this.de(t))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),s=new Yr(r,i,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Ie)return;const e=qr(t),[n,i]=Kr(e);for(let r=0;r<this.hashCount;r++){const t=this.Ee(n,i,r);this.Ae(t)}}Ae(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Qr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gr{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,$r.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Gr(Ue.min(),i,new yn(Ve),qi(),tr())}}class $r{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new $r(n,e,tr(),tr(),tr())}}class Xr{constructor(t,e,n,i){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=i}}class Jr{constructor(t,e){this.targetId=t,this.me=e}}class Zr{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sn.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class ts{constructor(){this.fe=0,this.ge=is(),this.pe=Sn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=tr(),e=tr(),n=tr();return this.ge.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:ke()}})),new $r(this.pe,this.ye,t,e,n)}Ce(){this.we=!1,this.ge=is()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class es{constructor(t){this.Le=t,this.Be=new Map,this.ke=qi(),this.qe=ns(),this.Qe=new yn(Ve)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,(e=>{const n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:ke()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach(((t,n)=>{this.ze(n)&&e(n)}))}He(t){const e=t.targetId,n=t.me.count,i=this.Je(e);if(i){const r=i.target;if(Ci(r))if(0===n){const t=new Ye(r.path);this.Ue(e,t,Zn.newNoDocument(t,Ue.min()))}else Se(1===n);else{const i=this.Ye(e);if(i!==n){const n=this.Ze(t),r=n?this.Xe(n,t,i):1;if(0!==r){this.je(e);const t=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,t)}null==Ur||Ur.et(function(t,e,n,i,r){var s,a,o,l,c,u;const h={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},d=e.unchangedNames;return d&&(h.bloomFilter={applied:0===r,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==d?void 0:d.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:t=>{var e;return null!==(e=null==i?void 0:i.mightContain(t))&&void 0!==e&&e}}),h}(i,t.me,this.Le.tt(),n,r))}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=e;let s,a;try{s=Nn(n).toUint8Array()}catch(t){if(t instanceof kn)return we("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{a=new Yr(s,i,r)}catch(t){return we(t instanceof Qr?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===a.Ie?null:a}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{const r=this.Le.tt(),s="projects/".concat(r.projectId,"/databases/").concat(r.database,"/documents/").concat(n.path.canonicalString());t.mightContain(s)||(this.Ue(e,n,null),i++)})),i}rt(t){const e=new Map;this.Be.forEach(((n,i)=>{const r=this.Je(i);if(r){if(n.current&&Ci(r.target)){const e=new Ye(r.target.path);null!==this.ke.get(e)||this.it(i,e)||this.Ue(i,e,Zn.newNoDocument(e,t))}n.be&&(e.set(i,n.ve()),n.Ce())}}));let n=tr();this.qe.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.Je(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.ke.forEach(((e,n)=>n.setReadTime(t)));const i=new Gr(t,e,this.Qe,this.ke,n);return this.ke=qi(),this.qe=ns(),this.Qe=new yn(Ve),i}$e(t,e){if(!this.ze(t))return;const n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,e)?i.Fe(e,1):i.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new ts,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new xn(Ve),this.qe=this.qe.insert(t,e)),e}ze(t){const e=null!==this.Je(t);return e||ve("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new ts),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.Ue(t,e,null)}))}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function ns(){return new yn(Ye.comparator)}function is(){return new yn(Ye.comparator)}const rs={asc:"ASCENDING",desc:"DESCENDING"},ss={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},as={and:"AND",or:"OR"};class os{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function ls(t,e){return t.useProto3Json||on(e)?e:{value:e}}function cs(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function us(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hs(t,e){return cs(t,e.toTimestamp())}function ds(t){return Se(!!t),Ue.fromTimestamp(function(t){const e=Cn(t);return new Be(e.seconds,e.nanos)}(t))}function fs(t,e){return ps(t,e).canonicalString()}function ps(t,e){const n=function(t){return new We(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function gs(t){const e=We.fromString(t);return Se(Ls(e)),e}function ms(t,e){return fs(t.databaseId,e.path)}function ys(t,e){const n=gs(e);if(n.get(1)!==t.databaseId.projectId)throw new Te(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Te(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ye(ws(n))}function bs(t,e){return fs(t.databaseId,e)}function vs(t){const e=gs(t);return 4===e.length?We.emptyPath():ws(e)}function xs(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ws(t){return Se(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function _s(t,e,n){return{name:ms(t,e),fields:n.value.mapValue.fields}}function ks(t,e){let n;if(e instanceof Tr)n={update:_s(t,e.key,e.value)};else if(e instanceof Ar)n={delete:ms(t,e.key)};else if(e instanceof Nr)n={update:_s(t,e.key,e.data),updateMask:Os(e.fieldMask)};else{if(!(e instanceof Pr))return ke();n={verify:ms(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof ur)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof hr)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof fr)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof gr)return{fieldPath:e.field.canonicalString(),increment:n.Pe};throw ke()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:hs(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ke()}(t,e.precondition)),n}function Ss(t,e){return{documents:[bs(t,e.path)]}}function Es(t,e){const n={structuredQuery:{}},i=e.path;let r;null!==e.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=bs(t,r);const s=function(t){if(0!==t.length)return Ps(oi.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Is(t.field),direction:Ns(t.dir)}}(t)))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=ls(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{_t:n,parent:r}}function Cs(t){let e=vs(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Se(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Ts(t);return e instanceof oi&&ci(e)?e.getFilters():[e]}(n.where));let a=[];n.orderBy&&(a=function(t){return t.map((t=>function(t){return new ii(As(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let o=null;n.limit&&(o=function(t){let e;return e="object"==typeof t?t.value:t,on(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new ti(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new ti(n,e)}(n.endAt)),Ni(e,r,a,s,o,"F",l,c)}function Ts(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=As(t.unaryFilter.field);return ai.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=As(t.unaryFilter.field);return ai.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=As(t.unaryFilter.field);return ai.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=As(t.unaryFilter.field);return ai.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ke()}}(t):void 0!==t.fieldFilter?function(t){return ai.create(As(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return oi.create(t.compositeFilter.filters.map((t=>Ts(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ke()}}(t.compositeFilter.op))}(t):ke()}function Ns(t){return rs[t]}function Ds(t){return ss[t]}function Ms(t){return as[t]}function Is(t){return{fieldPath:t.canonicalString()}}function As(t){return Ke.fromServerFormat(t.fieldPath)}function Ps(t){return t instanceof ai?function(t){if("=="===t.op){if(Kn(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NAN"}};if(qn(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Kn(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NOT_NAN"}};if(qn(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(t.field),op:Ds(t.op),value:t.value}}}(t):t instanceof oi?function(t){const e=t.getFilters().map((t=>Ps(t)));return 1===e.length?e[0]:{compositeFilter:{op:Ms(t.op),filters:e}}}(t):ke()}function Os(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Ls(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Rs{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ue.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ue.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Sn.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(t){return new Rs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class js{constructor(t){this.ct=t}}function Fs(t){const e=Cs({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Li(e,e.limit,"L"):e}class Vs{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(Tn(t.integerValue));else if("doubleValue"in t){const n=Tn(t.doubleValue);isNaN(n)?this.dt(e,13):(this.dt(e,15),ln(n)?e.At(0):e.At(n))}else if("timestampValue"in t){let n=t.timestampValue;this.dt(e,20),"string"==typeof n&&(n=Cn(n)),e.Rt("".concat(n.seconds||"")),e.At(n.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(Nn(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.dt(e,45),e.At(n.latitude||0),e.At(n.longitude||0)}else"mapValue"in t?$n(t)?this.dt(e,Number.MAX_SAFE_INTEGER):Qn(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):ke()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){const n=t.fields||{};this.dt(e,55);for(const i of Object.keys(n))this.Vt(i,e),this.Tt(n[i],e)}wt(t,e){var n,i;const r=t.fields||{};this.dt(e,53);const s="value",a=(null===(i=null===(n=r[s].arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.length)||0;this.dt(e,15),e.At(Tn(a)),this.Vt(s,e),this.Tt(r[s],e)}bt(t,e){const n=t.values||[];this.dt(e,50);for(const i of n)this.Tt(i,e)}yt(t,e){this.dt(e,37),Ye.fromName(t).path.forEach((t=>{this.dt(e,60),this.Dt(t,e)}))}dt(t,e){t.At(e)}ft(t){t.At(2)}}Vs.vt=new Vs;class zs{constructor(){this.un=new Bs}addToCollectionParentIndex(t,e){return this.un.add(e),nn.resolve()}getCollectionParents(t,e){return nn.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return nn.resolve()}deleteFieldIndex(t,e){return nn.resolve()}deleteAllFieldIndexes(t){return nn.resolve()}createTargetIndexes(t,e){return nn.resolve()}getDocumentsMatchingTarget(t,e){return nn.resolve(null)}getIndexType(t,e){return nn.resolve(0)}getFieldIndexes(t,e){return nn.resolve([])}getNextCollectionGroupToUpdate(t){return nn.resolve(null)}getMinOffset(t,e){return nn.resolve(Xe.min())}getMinOffsetFromCollectionGroup(t,e){return nn.resolve(Xe.min())}updateCollectionGroup(t,e,n){return nn.resolve()}updateIndexEntries(t,e){return nn.resolve()}}class Bs{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new xn(We.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new xn(We.comparator)).toArray()}}new Uint8Array(0);class Us{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Us(t,Us.DEFAULT_COLLECTION_PERCENTILE,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Us.DEFAULT_COLLECTION_PERCENTILE=10,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Us.DEFAULT=new Us(41943040,Us.DEFAULT_COLLECTION_PERCENTILE,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Us.DISABLED=new Us(-1,0,0);class Hs{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Hs(0)}static kn(){return new Hs(-1)}}class Ws{constructor(){this.changes=new Hi((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Zn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?nn.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class qs{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Ks{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Sr(n.mutation,t,_n.empty(),Be.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,tr()).next((()=>e))))}getLocalViewOfDocuments(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tr();const i=Gi();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Yi();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Gi();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,tr())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=qi();const s=Xi(),a=Xi();return e.forEach(((t,e)=>{const a=n.get(e.key);i.has(e.key)&&(void 0===a||a.mutation instanceof Nr)?r=r.insert(e.key,e):void 0!==a?(s.set(e.key,a.mutation.getFieldMask()),Sr(a.mutation,e,a.mutation.getFieldMask(),Be.now())):s.set(e.key,_n.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return a.set(t,new qs(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(t,e){const n=Xi();let i=new yn(((t,e)=>t-e)),r=tr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let a=n.get(t)||_n.empty();a=r.applyToLocalView(s,a),n.set(t,a);const o=(i.get(r.batchId)||tr()).add(t);i=i.insert(r.batchId,o)}))})).next((()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const i=a.getNext(),o=i.key,l=i.value,c=$i();l.forEach((t=>{if(!r.has(t)){const i=_r(e.get(t),n.get(t));null!==i&&c.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,o,c))}return nn.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return Ye.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Ii(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):nn.resolve(Gi());let a=-1,o=r;return s.next((e=>nn.forEach(e,((e,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),r.get(e)?nn.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{o=o.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,o,e,tr()))).next((t=>({batchId:a,changes:Qi(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ye(e)).next((t=>{let e=Yi();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=Yi();return this.indexManager.getCollectionParents(t,r).next((a=>nn.forEach(a,(a=>{const o=function(t,e){return new Ti(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(r));return this.getDocumentsMatchingCollectionQuery(t,o,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Zn.newInvalidDocument(i)))}));let n=Yi();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&Sr(s.mutation,i,_n.empty(),Be.now()),Vi(e,i)&&(n=n.insert(t,i))})),n}))}}class Ys{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return nn.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:ds(t.createTime)}}(e)),nn.resolve()}getNamedQuery(t,e){return nn.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(t){return{name:t.name,query:Fs(t.bundledQuery),readTime:ds(t.readTime)}}(e)),nn.resolve()}}class Qs{constructor(){this.overlays=new yn(Ye.comparator),this.Ir=new Map}getOverlay(t,e){return nn.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Gi();return nn.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.ht(t,e,i)})),nn.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.Ir.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.Ir.delete(n)),nn.resolve()}getOverlaysForCollection(t,e,n){const i=Gi(),r=e.length+1,s=new Ye(e.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const t=a.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return nn.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new yn(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=Gi(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const a=Gi(),o=r.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((t,e)=>a.set(t,e))),!(a.size()>=i)););return nn.resolve(a)}ht(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Rr(e,n));let r=this.Ir.get(e);void 0===r&&(r=tr(),this.Ir.set(e,r)),this.Ir.set(e,r.add(n.key))}}class Gs{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(t){return nn.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,nn.resolve()}}class $s{constructor(){this.Tr=new xn(Xs.Er),this.dr=new xn(Xs.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const n=new Xs(t,e);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Vr(new Xs(t,e))}mr(t,e){t.forEach((t=>this.removeReference(t,e)))}gr(t){const e=new Ye(new We([])),n=new Xs(e,t),i=new Xs(e,t+1),r=[];return this.dr.forEachInRange([n,i],(t=>{this.Vr(t),r.push(t.key)})),r}pr(){this.Tr.forEach((t=>this.Vr(t)))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new Ye(new We([])),n=new Xs(e,t),i=new Xs(e,t+1);let r=tr();return this.dr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new Xs(t,0),n=this.Tr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Xs{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return Ye.comparator(t.key,e.key)||Ve(t.wr,e.wr)}static Ar(t,e){return Ve(t.wr,e.wr)||Ye.comparator(t.key,e.key)}}class Js{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new xn(Xs.Er)}checkEmpty(t){return nn.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Or(r,e,n,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new Xs(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return nn.resolve(s)}lookupMutationBatch(t,e){return nn.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.vr(n),r=i<0?0:i;return nn.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return nn.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return nn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Xs(e,0),i=new Xs(e,Number.POSITIVE_INFINITY),r=[];return this.br.forEachInRange([n,i],(t=>{const e=this.Dr(t.wr);r.push(e)})),nn.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new xn(Ve);return e.forEach((t=>{const e=new Xs(t,0),i=new Xs(t,Number.POSITIVE_INFINITY);this.br.forEachInRange([e,i],(t=>{n=n.add(t.wr)}))})),nn.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;Ye.isDocumentKey(r)||(r=r.child(""));const s=new Xs(new Ye(r),0);let a=new xn(Ve);return this.br.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(a=a.add(t.wr)),!0)}),s),nn.resolve(this.Cr(a))}Cr(t){const e=[];return t.forEach((t=>{const n=this.Dr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Se(0===this.Fr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return nn.forEach(e.mutations,(i=>{const r=new Xs(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.br=n}))}On(t){}containsKey(t,e){const n=new Xs(e,0),i=this.br.firstAfterOrEqual(n);return nn.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,nn.resolve()}Fr(t,e){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Zs{constructor(t){this.Mr=t,this.docs=new yn(Ye.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.Mr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return nn.resolve(n?n.document.mutableCopy():Zn.newInvalidDocument(e))}getEntries(t,e){let n=qi();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Zn.newInvalidDocument(t))})),nn.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=qi();const s=e.path,a=new Ye(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:t,value:{document:a}}=o.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||Je($e(a),n)<=0||(i.has(a.key)||Vi(e,a))&&(r=r.insert(a.key,a.mutableCopy()))}return nn.resolve(r)}getAllFromCollectionGroup(t,e,n,i){ke()}Or(t,e){return nn.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new ta(this)}getSize(t){return nn.resolve(this.size)}}class ta extends Ws{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.cr.addEntry(t,i)):this.cr.removeEntry(n)})),nn.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}class ea{constructor(t){this.persistence=t,this.Nr=new Hi((t=>Si(t)),Ei),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $s,this.targetCount=0,this.kr=Hs.Bn()}forEachTarget(t,e){return this.Nr.forEach(((t,n)=>e(n))),nn.resolve()}getLastRemoteSnapshotVersion(t){return nn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return nn.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),nn.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Lr&&(this.Lr=e),nn.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new Hs(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,nn.resolve()}updateTargetData(t,e){return this.Kn(e),nn.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,nn.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Nr.forEach(((s,a)=>{a.sequenceNumber<=e&&null===n.get(a.targetId)&&(this.Nr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),nn.waitFor(r).next((()=>i))}getTargetCount(t){return nn.resolve(this.targetCount)}getTargetData(t,e){const n=this.Nr.get(e)||null;return nn.resolve(n)}addMatchingKeys(t,e,n){return this.Br.Rr(e,n),nn.resolve()}removeMatchingKeys(t,e,n){this.Br.mr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),nn.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),nn.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Br.yr(e);return nn.resolve(n)}containsKey(t,e){return nn.resolve(this.Br.containsKey(e))}}class na{constructor(t,e){this.qr={},this.overlays={},this.Qr=new an(0),this.Kr=!1,this.Kr=!0,this.$r=new Gs,this.referenceDelegate=t(this),this.Ur=new ea(this),this.indexManager=new zs,this.remoteDocumentCache=function(t){return new Zs(t)}((t=>this.referenceDelegate.Wr(t))),this.serializer=new js(e),this.Gr=new Ys(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Qs,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.qr[t.toKey()];return n||(n=new Js(e,this.referenceDelegate),this.qr[t.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,n){ve("MemoryPersistence","Starting transaction:",t);const i=new ia(this.Qr.next());return this.referenceDelegate.zr(),n(i).next((t=>this.referenceDelegate.jr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Hr(t,e){return nn.or(Object.values(this.qr).map((n=>()=>n.containsKey(t,e))))}}class ia extends tn{constructor(t){super(),this.currentSequenceNumber=t}}class ra{constructor(t){this.persistence=t,this.Jr=new $s,this.Yr=null}static Zr(t){return new ra(t)}get Xr(){if(this.Yr)return this.Yr;throw ke()}addReference(t,e,n){return this.Jr.addReference(n,e),this.Xr.delete(n.toString()),nn.resolve()}removeReference(t,e,n){return this.Jr.removeReference(n,e),this.Xr.add(n.toString()),nn.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),nn.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach((t=>this.Xr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Xr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nn.forEach(this.Xr,(n=>{const i=Ye.fromPath(n);return this.ei(t,i).next((t=>{t||e.removeEntry(i,Ue.min())}))})).next((()=>(this.Yr=null,e.apply(t))))}updateLimboDocument(t,e){return this.ei(t,e).next((t=>{t?this.Xr.delete(e.toString()):this.Xr.add(e.toString())}))}Wr(t){return 0}ei(t,e){return nn.or([()=>nn.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}class sa{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.$i=n,this.Ui=i}static Wi(t,e){let n=tr(),i=tr();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new sa(t,e.fromCache,n,i)}}class aa{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class oa{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=w()?8:rn(x())>0?6:4}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.Yi(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.Zi(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new aa;return this.Xi(t,e,n).next((i=>{if(r.result=i,this.zi)return this.es(t,e,n,i.size)}))})).next((()=>r.result))}es(t,e,n,i){return n.documentReadCount<this.ji?(be()<=O.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Fi(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),nn.resolve()):(be()<=O.DEBUG&&ve("QueryEngine","Query:",Fi(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(be()<=O.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Fi(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Pi(e))):nn.resolve())}Yi(t,e){if(Mi(e))return nn.resolve(null);let n=Pi(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=Li(e,null,"F"),n=Pi(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=tr(...i);return this.Ji.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.ts(e,i);return this.ns(e,s,r,n.readTime)?this.Yi(t,Li(e,null,"F")):this.rs(t,s,e,n)}))))})))))}Zi(t,e,n,i){return Mi(e)||i.isEqual(Ue.min())?nn.resolve(null):this.Ji.getDocuments(t,n).next((r=>{const s=this.ts(e,r);return this.ns(e,s,n,i)?nn.resolve(null):(be()<=O.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fi(e)),this.rs(t,s,e,Ge(i,-1)).next((t=>t)))}))}ts(t,e){let n=new xn(Bi(t));return e.forEach(((e,i)=>{Vi(t,i)&&(n=n.add(i))})),n}ns(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Xi(t,e,n){return be()<=O.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Fi(e)),this.Ji.getDocumentsMatchingQuery(t,e,Xe.min(),n)}rs(t,e,n,i){return this.Ji.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class la{constructor(t,e,n,i){this.persistence=t,this.ss=e,this.serializer=i,this.os=new yn(Ve),this._s=new Hi((t=>Si(t)),Ei),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(n)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ks(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.os)))}}function ca(t,e,n,i){return new la(t,e,n,i)}async function ua(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n.ls(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let a=tr();for(const t of i){r.push(t.batchId);for(const e of t.mutations)a=a.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)a=a.add(e.key)}return n.localDocuments.getDocuments(t,a).next((t=>({hs:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function ha(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function da(t,e,n){let i=tr(),r=tr();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=qi();return n.forEach(((n,s)=>{const a=t.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(Ue.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):ve("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{Ps:i,Is:r}}))}function fa(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function pa(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Ur.getTargetData(t,e).next((r=>r?(i=r,nn.resolve(i)):n.Ur.allocateTargetId(t).next((r=>(i=new Rs(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Ur.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.os.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(t.targetId,t),n._s.set(e,t.targetId)),t}))}async function ga(t,e,n){const i=Ee(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!sn(t))throw t;ve("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(t))}i.os=i.os.remove(e),i._s.delete(r.target)}function ma(t,e,n){const i=Ee(t);let r=Ue.min(),s=tr();return i.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const i=Ee(t),r=i._s.get(n);return void 0!==r?nn.resolve(i.os.get(r)):i.Ur.getTargetData(e,n)}(i,t,Pi(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>i.ss.getDocumentsMatchingQuery(t,e,n?r:Ue.min(),n?s:tr()))).next((t=>(ya(i,zi(e),t),{documents:t,Ts:s})))))}function ya(t,e,n){let i=t.us.get(e)||Ue.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.us.set(e,i)}class ba{constructor(){this.activeTargetIds=nr()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class va{constructor(){this.so=new ba,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,n){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new ba,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class xa{_o(t){}shutdown(){}}class wa{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _a=null;function ka(){return null===_a?_a=268435456+Math.round(2147483648*Math.random()):_a++,"0x"+_a.toString(16)}const Sa={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ea{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}const Ca="WebChannelConnection";class Ta extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=e+"://"+t.host,this.vo="projects/".concat(n,"/databases/").concat(i),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}get Fo(){return!1}Mo(t,e,n,i,r){const s=ka(),a=this.xo(t,e.toUriEncodedString());ve("RestConnection","Sending RPC '".concat(t,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,i,r),this.No(t,a,o,n).then((e=>(ve("RestConnection","Received RPC '".concat(t,"' ").concat(s,": "),e),e)),(e=>{throw we("RestConnection","RPC '".concat(t,"' ").concat(s," failed with error: "),e,"url: ",a,"request:",n),e}))}Lo(t,e,n,i,r,s){return this.Mo(t,e,n,i,r)}Oo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+me,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}xo(t,e){const n=Sa[t];return"".concat(this.Do,"/v1/").concat(e,":").concat(n)}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,n,i){const r=ka();return new Promise(((s,a)=>{const o=new re;o.setWithCredentials(!0),o.listenOnce(ae.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case oe.NO_ERROR:const e=o.getResponseJson();ve(Ca,"XHR for RPC '".concat(t,"' ").concat(r," received:"),JSON.stringify(e)),s(e);break;case oe.TIMEOUT:ve(Ca,"RPC '".concat(t,"' ").concat(r," timed out")),a(new Te(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case oe.HTTP_ERROR:const n=o.getStatus();if(ve(Ca,"RPC '".concat(t,"' ").concat(r," failed with status:"),n,"response text:",o.getResponseText()),n>0){let t=o.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(e)>=0?e:Ce.UNKNOWN}(e.status);a(new Te(t,e.message))}else a(new Te(Ce.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Te(Ce.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{ve(Ca,"RPC '".concat(t,"' ").concat(r," completed."))}}));const l=JSON.stringify(i);ve(Ca,"RPC '".concat(t,"' ").concat(r," sending request:"),i),o.send(e,"POST",l,n,15)}))}Bo(t,e,n){const i=ka(),r=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=he(),a=ue(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,e,n),o.encodeInitMessageHeaders=!0;const c=r.join("");ve(Ca,"Creating RPC '".concat(t,"' stream ").concat(i,": ").concat(c),o);const u=s.createWebChannel(c,o);let h=!1,d=!1;const f=new Ea({Io:e=>{d?ve(Ca,"Not sending because RPC '".concat(t,"' stream ").concat(i," is closed:"),e):(h||(ve(Ca,"Opening RPC '".concat(t,"' stream ").concat(i," transport.")),u.open(),h=!0),ve(Ca,"RPC '".concat(t,"' stream ").concat(i," sending:"),e),u.send(e))},To:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(u,se.EventType.OPEN,(()=>{d||(ve(Ca,"RPC '".concat(t,"' stream ").concat(i," transport opened.")),f.yo())})),p(u,se.EventType.CLOSE,(()=>{d||(d=!0,ve(Ca,"RPC '".concat(t,"' stream ").concat(i," transport closed")),f.So())})),p(u,se.EventType.ERROR,(e=>{d||(d=!0,we(Ca,"RPC '".concat(t,"' stream ").concat(i," transport errored:"),e),f.So(new Te(Ce.UNAVAILABLE,"The operation could not be completed")))})),p(u,se.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];Se(!!r);const s=r,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){ve(Ca,"RPC '".concat(t,"' stream ").concat(i," received error:"),a);const e=a.status;let n=function(t){const e=Fr[t];if(void 0!==e)return Br(e)}(e),r=a.message;void 0===n&&(n=Ce.INTERNAL,r="Unknown error status: "+e+" with message "+a.message),d=!0,f.So(new Te(n,r)),u.close()}else ve(Ca,"RPC '".concat(t,"' stream ").concat(i," received:"),r),f.bo(r)}})),p(a,ce.STAT_EVENT,(e=>{e.stat===le.PROXY?ve(Ca,"RPC '".concat(t,"' stream ").concat(i," detected buffering proxy")):e.stat===le.NOPROXY&&ve(Ca,"RPC '".concat(t,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((()=>{f.wo()}),0),f}}function Na(){return"undefined"!=typeof document?document:null}function Da(t){return new os(t,!0)}class Ma{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=t,this.timerId=e,this.ko=n,this.qo=i,this.Qo=r,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,e-n);i>0&&ve("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(e," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),t()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Ia{constructor(t,e,n,i,r,s,a,o){this.ui=t,this.Ho=n,this.Jo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ma(t,e)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==t?this.t_.reset():e&&e.code===Ce.RESOURCE_EXHAUSTED?(xe(e.toString()),xe("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===Ce.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((t=>{let[n,i]=t;this.Yo===e&&this.P_(n,i)}),(e=>{t((()=>{const t=new Te(Ce.UNKNOWN,"Fetching auth token failed: "+e.message);return this.I_(t)}))}))}P_(t,e){const n=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((t=>{n((()=>this.I_(t)))})),this.stream.onMessage((t=>{n((()=>1==++this.e_?this.E_(t):this.onNext(t)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(t){return ve("PersistentStream","close with error: ".concat(t)),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget((()=>this.Yo===t?e():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Aa extends Ia{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ke()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(Se(void 0===e||"string"==typeof e),Sn.fromBase64String(e||"")):(Se(void 0===e||e instanceof Buffer||e instanceof Uint8Array),Sn.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(t){const e=void 0===t.code?Ce.UNKNOWN:Br(t.code);return new Te(e,t.message||"")}(a);n=new Zr(i,r,s,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ys(t,i.document.name),s=ds(i.document.updateTime),a=i.document.createTime?ds(i.document.createTime):Ue.min(),o=new Xn({mapValue:{fields:i.document.fields}}),l=Zn.newFoundDocument(r,s,a,o),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Xr(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ys(t,i.document),s=i.readTime?ds(i.readTime):Ue.min(),a=Zn.newNoDocument(r,s),o=i.removedTargetIds||[];n=new Xr([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ys(t,i.document),s=i.removedTargetIds||[];n=new Xr([],s,r,null)}else{if(!("filter"in e))return ke();{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,s=new jr(i,r),a=t.targetId;n=new Jr(a,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Ue.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Ue.min():e.readTime?ds(e.readTime):Ue.min()}(t);return this.listener.d_(e,n)}A_(t){const e={};e.database=xs(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=Ci(i)?{documents:Ss(t,i)}:{query:Es(t,i)._t},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=us(t,e.resumeToken);const i=ls(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(Ue.min())>0){n.readTime=cs(t,e.snapshotVersion.toTimestamp());const i=ls(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.a_(e)}R_(t){const e={};e.database=xs(this.serializer),e.removeTarget=t,this.a_(e)}}class Pa extends Ia{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return Se(!!t.streamToken),this.lastStreamToken=t.streamToken,Se(!t.writeResults||0===t.writeResults.length),this.listener.f_()}onNext(t){Se(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=function(t,e){return t&&t.length>0?(Se(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?ds(t.updateTime):ds(e);return n.isEqual(Ue.min())&&(n=ds(e)),new br(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=ds(t.commitTime);return this.listener.g_(n,e)}p_(){const t={};t.database=xs(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>ks(this.serializer,t)))};this.a_(e)}}class Oa extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Te(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[s,a]=r;return this.connection.Mo(t,ps(e,n),i,s,a)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Te(Ce.UNKNOWN,t.toString())}))}Lo(t,e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[a,o]=s;return this.connection.Lo(t,ps(e,n),i,a,o,r)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Te(Ce.UNKNOWN,t.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class La{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(xe(e),this.D_=!1):ve("OnlineStateTracker",e)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Ra{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=r,this.k_._o((t=>{n.enqueueAndForget((async()=>{qa(this)&&(ve("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Ee(t);e.L_.add(4),await Fa(e),e.q_.set("Unknown"),e.L_.delete(4),await ja(e)}(this))}))})),this.q_=new La(n,i)}}async function ja(t){if(qa(t))for(const e of t.B_)await e(!0)}async function Fa(t){for(const e of t.B_)await e(!1)}function Va(t,e){const n=Ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Wa(n)?Ha(n):uo(n).r_()&&Ba(n,e))}function za(t,e){const n=Ee(t),i=uo(n);n.N_.delete(e),i.r_()&&Ua(n,e),0===n.N_.size&&(i.r_()?i.o_():qa(n)&&n.q_.set("Unknown"))}function Ba(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uo(t).A_(e)}function Ua(t,e){t.Q_.xe(e),uo(t).R_(e)}function Ha(t){t.Q_=new es({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),uo(t).start(),t.q_.v_()}function Wa(t){return qa(t)&&!uo(t).n_()&&t.N_.size>0}function qa(t){return 0===Ee(t).L_.size}function Ka(t){t.Q_=void 0}async function Ya(t){t.q_.set("Online")}async function Qa(t){t.N_.forEach(((e,n)=>{Ba(t,e)}))}async function Ga(t,e){Ka(t),Wa(t)?(t.q_.M_(e),Ha(t)):t.q_.set("Unknown")}async function $a(t,e,n){if(t.q_.set("Online"),e instanceof Zr&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.N_.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.N_.delete(i),t.Q_.removeTarget(i))}(t,e)}catch(n){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Xa(t,n)}else if(e instanceof Xr?t.Q_.Ke(e):e instanceof Jr?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ue.min()))try{const e=await ha(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Q_.rt(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.N_.get(i);r&&t.N_.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const i=t.N_.get(e);if(!i)return;t.N_.set(e,i.withResumeToken(Sn.EMPTY_BYTE_STRING,i.snapshotVersion)),Ua(t,e);const r=new Rs(i.target,e,n,i.sequenceNumber);Ba(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){ve("RemoteStore","Failed to raise snapshot:",e),await Xa(t,e)}}async function Xa(t,e,n){if(!sn(e))throw e;t.L_.add(1),await Fa(t),t.q_.set("Offline"),n||(n=()=>ha(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ve("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ja(t)}))}function Ja(t,e){return e().catch((n=>Xa(t,n,e)))}async function Za(t){const e=Ee(t),n=ho(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;to(e);)try{const t=await fa(e.localStore,i);if(null===t){0===e.O_.length&&n.o_();break}i=t.batchId,eo(e,t)}catch(t){await Xa(e,t)}no(e)&&io(e)}function to(t){return qa(t)&&t.O_.length<10}function eo(t,e){t.O_.push(e);const n=ho(t);n.r_()&&n.V_&&n.m_(e.mutations)}function no(t){return qa(t)&&!ho(t).n_()&&t.O_.length>0}function io(t){ho(t).start()}async function ro(t){ho(t).p_()}async function so(t){const e=ho(t);for(const n of t.O_)e.m_(n.mutations)}async function ao(t,e,n){const i=t.O_.shift(),r=Lr.from(i,e,n);await Ja(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Za(t)}async function oo(t,e){e&&ho(t).V_&&await async function(t,e){if(function(t){return zr(t)&&t!==Ce.ABORTED}(e.code)){const n=t.O_.shift();ho(t).s_(),await Ja(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Za(t)}}(t,e),no(t)&&io(t)}async function lo(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const i=qa(n);n.L_.add(3),await Fa(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ja(n)}async function co(t,e){const n=Ee(t);e?(n.L_.delete(2),await ja(n)):e||(n.L_.add(2),await Fa(n),n.q_.set("Unknown"))}function uo(t){return t.K_||(t.K_=function(t,e,n){const i=Ee(t);return i.w_(),new Aa(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Eo:Ya.bind(null,t),Ro:Qa.bind(null,t),mo:Ga.bind(null,t),d_:$a.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),Wa(t)?Ha(t):t.q_.set("Unknown")):(await t.K_.stop(),Ka(t))}))),t.K_}function ho(t){return t.U_||(t.U_=function(t,e,n){const i=Ee(t);return i.w_(),new Pa(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ro.bind(null,t),mo:oo.bind(null,t),f_:so.bind(null,t),g_:ao.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Za(t)):(await t.U_.stop(),t.O_.length>0&&(ve("RemoteStore","Stopping write stream with ".concat(t.O_.length," pending writes")),t.O_=[]))}))),t.U_}class fo{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Ne,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,a=new fo(t,e,s,i,r);return a.start(n),a}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(Ce.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function po(t,e){if(xe("AsyncQueue","".concat(e,": ").concat(t)),sn(t))return new Te(Ce.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}class go{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Ye.comparator(e.key,n.key):(t,e)=>Ye.comparator(t.key,e.key),this.keyedMap=Yi(),this.sortedSet=new yn(this.comparator)}static emptySet(t){return new go(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof go))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new go;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class mo{constructor(){this.W_=new yn(Ye.comparator)}track(t){const e=t.doc.key,n=this.W_.get(e);n?0!==t.type&&3===n.type?this.W_=this.W_.insert(e,t):3===t.type&&1!==n.type?this.W_=this.W_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.W_=this.W_.remove(e):1===t.type&&2===n.type?this.W_=this.W_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):ke():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class yo{constructor(t,e,n,i,r,s,a,o,l){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new yo(t,e,go.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ri(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}class bo{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((t=>t.J_()))}}class vo{constructor(){this.queries=xo(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,e){const n=Ee(t),i=n.queries;n.queries=xo(),i.forEach(((t,n)=>{for(const i of n.j_)i.onError(e)}))}(this,new Te(Ce.ABORTED,"Firestore shutting down"))}}function xo(){return new Hi((t=>ji(t)),Ri)}async function wo(t,e){const n=Ee(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new bo,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(t){const n=po(t,"Initialization of query '".concat(Fi(e.query),"' failed"));return void e.onError(n)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Eo(n)}async function _o(t,e){const n=Ee(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const t=s.j_.indexOf(e);t>=0&&(s.j_.splice(t,1),0===s.j_.length?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function ko(t,e){const n=Ee(t);let i=!1;for(const r of e){const t=r.query,e=n.queries.get(t);if(e){for(const t of e.j_)t.X_(r)&&(i=!0);e.z_=r}}i&&Eo(n)}function So(t,e,n){const i=Ee(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function Eo(t){t.Y_.forEach((t=>{t.next()}))}var Co,To;(To=Co||(Co={})).ea="default",To.Cache="cache";class No{constructor(t,e,n){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new yo(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==e;return(!this.options._a||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}oa(t){t=yo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Co.Cache}}class Do{constructor(t){this.key=t}}class Mo{constructor(t){this.key=t}}class Io{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=tr(),this.mutatedKeys=tr(),this.Aa=Bi(t),this.Ra=new go(this.Aa)}get Va(){return this.Ta}ma(t,e){const n=e?e.fa:new mo,i=e?e.Ra:this.Ra;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1;const o="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const c=i.get(t),u=Vi(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{Ra:s,fa:n,ns:a,mutatedKeys:r}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const r=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const s=t.fa.G_();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return n(t)-n(e)}(t.type,e.type)||this.Aa(t.doc,e.doc))),this.pa(n),i=null!=i&&i;const a=e&&!i?this.ya():[],o=0===this.da.size&&this.current&&!i?1:0,l=o!==this.Ea;return this.Ea=o,0!==s.length||l?{snapshot:new yo(this.query,t.Ra,r,s,t.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new mo,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=tr(),this.Ra.forEach((t=>{this.Sa(t.key)&&(this.da=this.da.add(t.key))}));const e=[];return t.forEach((t=>{this.da.has(t)||e.push(new Mo(t))})),this.da.forEach((n=>{t.has(n)||e.push(new Do(n))})),e}ba(t){this.Ta=t.Ts,this.da=tr();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return yo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Ao{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Po{constructor(t){this.key=t,this.va=!1}}class Oo{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Hi((t=>ji(t)),Ri),this.Ma=new Map,this.xa=new Set,this.Oa=new yn(Ye.comparator),this.Na=new Map,this.La=new $s,this.Ba={},this.ka=new Map,this.qa=Hs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Lo(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=nl(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await jo(i,e,n,!0),r}async function Ro(t,e){const n=nl(t);await jo(n,e,!0,!1)}async function jo(t,e,n,i){const r=await pa(t.localStore,Pi(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return i&&(o=await Fo(t,e,s,"current"===a,r.resumeToken)),t.isPrimaryClient&&n&&Va(t.remoteStore,r),o}async function Fo(t,e,n,i,r){t.Ka=(e,n,i)=>async function(t,e,n,i){let r=e.view.ma(n);r.ns&&(r=await ma(t.localStore,e.query,!1).then((t=>{let{documents:n}=t;return e.view.ma(n,r)})));const s=i&&i.targetChanges.get(e.targetId),a=i&&null!=i.targetMismatches.get(e.targetId),o=e.view.applyChanges(r,t.isPrimaryClient,s,a);return $o(t,e.targetId,o.wa),o.snapshot}(t,e,n,i);const s=await ma(t.localStore,e,!0),a=new Io(e,s.Ts),o=a.ma(s.documents),l=$r.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),c=a.applyChanges(o,t.isPrimaryClient,l);$o(t,n,c.wa);const u=new Ao(e,n,a);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function Vo(t,e,n){const i=Ee(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter((t=>!Ri(t,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ga(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&za(i.remoteStore,r.targetId),Qo(i,r.targetId)})).catch(en)):(Qo(i,r.targetId),await ga(i.localStore,r.targetId,!0))}async function zo(t,e){const n=Ee(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),za(n.remoteStore,i.targetId))}async function Bo(t,e){const n=Ee(t);try{const t=await function(t,e){const n=Ee(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach(((s,o)=>{const l=r.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(t,s.removedDocuments,o).next((()=>n.Ur.addMatchingKeys(t,s.addedDocuments,o))));let c=l.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(o)?c=c.withResumeToken(Sn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,i)),r=r.insert(o,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&a.push(n.Ur.updateTargetData(t,c))}));let o=qi(),l=tr();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),a.push(da(t,s,e.documentUpdates).next((t=>{o=t.Ps,l=t.Is}))),!i.isEqual(Ue.min())){const e=n.Ur.getLastRemoteSnapshotVersion(t).next((e=>n.Ur.setTargetsMetadata(t,t.currentSequenceNumber,i)));a.push(e)}return nn.waitFor(a).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,o,l))).next((()=>o))})).then((t=>(n.os=r,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.Na.get(e);i&&(Se(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.va=!0:t.modifiedDocuments.size>0?Se(i.va):t.removedDocuments.size>0&&(Se(i.va),i.va=!1))})),await Zo(n,t,e)}catch(t){await en(t)}}function Uo(t,e,n){const i=Ee(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.Fa.forEach(((n,i)=>{const r=i.view.Z_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=Ee(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const r of n.j_)r.Z_(e)&&(i=!0)})),i&&Eo(n)}(i.eventManager,e),t.length&&i.Ca.d_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Ho(t,e,n){const i=Ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let t=new yn(Ye.comparator);t=t.insert(s,Zn.newNoDocument(s,Ue.min()));const n=tr().add(s),r=new Gr(Ue.min(),new Map,new yn(Ve),t,n);await Bo(i,r),i.Oa=i.Oa.remove(s),i.Na.delete(e),Jo(i)}else await ga(i.localStore,e,!1).then((()=>Qo(i,e,n))).catch(en)}async function Wo(t,e){const n=Ee(t),i=e.batch.batchId;try{const t=await function(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.cs.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let a=nn.resolve();return s.forEach((t=>{a=a.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);Se(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),a.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=tr();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);Yo(n,i,null),Ko(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Zo(n,t)}catch(t){await en(t)}}async function qo(t,e,n){const i=Ee(t);try{const t=await function(t,e){const n=Ee(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(Se(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);Yo(i,e,n),Ko(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Zo(i,t)}catch(n){await en(n)}}function Ko(t,e){(t.ka.get(e)||[]).forEach((t=>{t.resolve()})),t.ka.delete(e)}function Yo(t,e,n){const i=Ee(t);let r=i.Ba[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Qo(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((e=>{t.La.containsKey(e)||Go(t,e)}))}function Go(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);null!==n&&(za(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Jo(t))}function $o(t,e,n){for(const i of n)i instanceof Do?(t.La.addReference(i.key,e),Xo(t,i)):i instanceof Mo?(ve("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||Go(t,i.key)):ke()}function Xo(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ve("SyncEngine","New document in limbo: "+n),t.xa.add(i),Jo(t))}function Jo(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ye(We.fromString(e)),i=t.qa.next();t.Na.set(i,new Po(n)),t.Oa=t.Oa.insert(n,i),Va(t.remoteStore,new Rs(Pi(Di(n.path)),i,"TargetPurposeLimboResolution",an.oe))}}async function Zo(t,e,n){const i=Ee(t),r=[],s=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach(((t,o)=>{a.push(i.Ka(o,e,n).then((t=>{var e;if((t||n)&&i.isPrimaryClient){const r=t?!t.fromCache:null===(e=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===e?void 0:e.current;i.sharedClientState.updateQueryState(o.targetId,r?"current":"not-current")}if(t){r.push(t);const e=sa.Wi(o.targetId,t);s.push(e)}})))})),await Promise.all(a),i.Ca.d_(r),await async function(t,e){const n=Ee(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>nn.forEach(e,(e=>nn.forEach(e.$i,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>nn.forEach(e.Ui,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!sn(t))throw t;ve("LocalStore","Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.os.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.os=n.os.insert(t,r)}}}(i.localStore,s))}async function tl(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const t=await ua(n.localStore,e);n.currentUser=e,function(t,e){t.ka.forEach((t=>{t.forEach((t=>{t.reject(new Te(Ce.CANCELLED,e))}))})),t.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Zo(n,t.hs)}}function el(t,e){const n=Ee(t),i=n.Na.get(e);if(i&&i.va)return tr().add(i.key);{let t=tr();const i=n.Ma.get(e);if(!i)return t;for(const e of i){const i=n.Fa.get(e);t=t.unionWith(i.view.Va)}return t}}function nl(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bo.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=el.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ho.bind(null,e),e.Ca.d_=ko.bind(null,e.eventManager),e.Ca.$a=So.bind(null,e.eventManager),e}function il(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wo.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qo.bind(null,e),e}class rl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Da(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,e){return null}Ha(t,e){return null}za(t){return ca(this.persistence,new oa,t.initialUser,this.serializer)}Ga(t){return new na(ra.Zr,this.serializer)}Wa(t){return new va}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rl.provider={build:()=>new rl};class sl{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Uo(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=tl.bind(null,this.syncEngine),await co(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new vo}createDatastore(t){const e=Da(t.databaseInfo.databaseId),n=function(t){return new Ta(t)}(t.databaseInfo);return function(t,e,n,i){return new Oa(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new Ra(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>Uo(this.syncEngine,t,0)),wa.D()?new wa:new xa)}createSyncEngine(t,e){return function(t,e,n,i,r,s,a){const o=new Oo(t,e,n,i,r,s);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=Ee(t);ve("RemoteStore","RemoteStore shutting down."),e.L_.add(5),await Fa(e),e.k_.shutdown(),e.q_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}sl.provider={build:()=>new sl};class al{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):xe("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}class ol{constructor(t,e,n,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=ge.UNAUTHENTICATED,this.clientId=Fe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,(async t=>{ve("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(ve("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ne;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=po(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function ll(t,e){t.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await ua(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function cl(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ul(t);ve("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>lo(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>lo(e.remoteStore,n))),t._onlineComponents=e}async function ul(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await ll(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===Ce.FAILED_PRECONDITION||t.code===Ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;we("Error using user provided cache. Falling back to memory cache: "+n),await ll(t,new rl)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),await ll(t,new rl);return t._offlineComponents}async function hl(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),await cl(t,t._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),await cl(t,new sl))),t._onlineComponents}function dl(t){return hl(t).then((t=>t.syncEngine))}async function fl(t){const e=await hl(t),n=e.eventManager;return n.onListen=Lo.bind(null,e.syncEngine),n.onUnlisten=Vo.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Ro.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zo.bind(null,e.syncEngine),n}function pl(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Ne;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new al({next:o=>{s.Za(),e.enqueueAndForget((()=>_o(t,a)));const l=o.docs.has(n);!l&&o.fromCache?r.reject(new Te(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&i&&"server"===i.source?r.reject(new Te(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(o)},error:t=>r.reject(t)}),a=new No(Di(n.path),s,{includeMetadataChanges:!0,_a:!0});return wo(t,a)}(await fl(t),t.asyncQueue,e,n,i))),i.promise}function gl(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const ml=new Map;function yl(t,e,n){if(!n)throw new Te(Ce.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function bl(t){if(!Ye.isDocumentKey(t))throw new Te(Ce.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function vl(t){if(Ye.isDocumentKey(t))throw new Te(Ce.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function xl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return"function"==typeof t?"a function":ke()}function wl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Te(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xl(t);throw new Te(Ce.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}class _l{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Te(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Te(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new Te(Ce.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gl(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Te(Ce.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (must not be NaN)"));if(t.timeoutSeconds<5)throw new Te(Ce.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (minimum allowed value is 5)"));if(t.timeoutSeconds>30)throw new Te(Ce.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class kl{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _l({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Te(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _l(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Me;switch(t.type){case"firstParty":return new Oe(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Te(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=ml.get(t);e&&(ve("ComponentProvider","Removing Datastore"),ml.delete(t),e.terminate())}(this),Promise.resolve()}}function Sl(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const s=(t=wl(t,kl))._getSettings(),a="".concat(e,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==a&&we("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=ge.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[f(JSON.stringify({alg:"none",type:"JWT"})),f(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Te(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ge(s)}t._authCredentials=new Ie(new De(e,n))}}class El{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new El(this.firestore,t,this._query)}}class Cl{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Cl(this.firestore,t,this._key)}}class Tl extends El{constructor(t,e,n){super(t,e,Di(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Cl(this.firestore,null,new Ye(t))}withConverter(t){return new Tl(this.firestore,t,this._path)}}function Nl(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=N(t),yl("collection","path",e),t instanceof kl){const n=We.fromString(e,...i);return vl(n),new Tl(t,null,n)}{if(!(t instanceof Cl||t instanceof Tl))throw new Te(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(We.fromString(e,...i));return vl(n),new Tl(t.firestore,null,n)}}function Dl(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=N(t),1===arguments.length&&(e=Fe.newId()),yl("doc","path",e),t instanceof kl){const n=We.fromString(e,...i);return bl(n),new Cl(t,null,new Ye(n))}{if(!(t instanceof Cl||t instanceof Tl))throw new Te(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(We.fromString(e,...i));return bl(n),new Cl(t.firestore,t instanceof Tl?t.converter:null,new Ye(n))}}class Ml{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ma(this,"async_queue_retry"),this.Vu=()=>{const t=Na();t&&ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()},this.mu=t;const e=Na();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const e=Na();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise((()=>{}));const e=new Ne;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Pu.push(t),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!sn(t))throw t;ve("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(t){const e=this.mu.then((()=>(this.du=!0,t().catch((t=>{this.Eu=t,this.du=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw xe("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.du=!1,t))))));return this.mu=e,e}enqueueAfterDelay(t,e,n){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);const i=fo.createAndSchedule(this,t,e,n,(t=>this.yu(t)));return this.Tu.push(i),i}fu(){this.Eu&&ke()}verifyOperationInProgress(){}async wu(){let t;do{t=this.mu,await t}while(t!==this.mu)}Su(t){for(const e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then((()=>{this.Tu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.Tu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.wu()}))}Du(t){this.Ru.push(t)}yu(t){const e=this.Tu.indexOf(t);this.Tu.splice(e,1)}}function Il(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const i of e)if(i in n&&"function"==typeof n[i])return!0;return!1}(t,["next","error","complete"])}class Al extends kl{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new Ml,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Ml(t),this._firestoreClient=void 0,await t}}}function Pl(t){if(t._terminated)throw new Te(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Ol(t),t._firestoreClient}function Ol(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new An(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,gl(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new ol(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(t){const e=null==t?void 0:t._online.build();return{_offline:null==t?void 0:t._offline.build(e),_online:e}}(t._componentsProvider))}class Ll{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ll(Sn.fromBase64String(t))}catch(t){throw new Te(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Ll(Sn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Rl{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let i=0;i<e.length;++i)if(0===e[i].length)throw new Te(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class jl{constructor(t){this._methodName=t}}class Fl{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Te(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Te(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ve(this._lat,t._lat)||Ve(this._long,t._long)}}class Vl{constructor(t){this._values=(t||[]).map((t=>t))}toArray(){return this._values.map((t=>t))}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}}const zl=/^__.*__$/;class Bl{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Nr(t,this.data,this.fieldMask,e,this.fieldTransforms):new Tr(t,this.data,e,this.fieldTransforms)}}class Ul{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Nr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Hl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}class Wl{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.vu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new Wl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Fu({path:n,xu:!1});return i.Ou(t),i}Nu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return rc(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(0===t.length)throw this.Bu("Document fields must not be empty");if(Hl(this.Cu)&&zl.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class ql{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Da(t)}Qu(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Wl({Cu:t,methodName:e,qu:n,path:Ke.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kl(t){const e=t._freezeSettings(),n=Da(t._databaseId);return new ql(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Yl(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);tc("Data must be an object, but it was:",a,i);const o=Jl(i,a);let l,c;if(s.merge)l=new _n(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=ec(e,i,n);if(!a.contains(r))throw new Te(Ce.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));sc(t,r)||t.push(r)}l=new _n(t),c=a.fieldTransforms.filter((t=>l.covers(t.field)))}else l=null,c=a.fieldTransforms;return new Bl(new Xn(o),l,c)}class Ql extends jl{_toFieldTransform(t){if(2!==t.Cu)throw 1===t.Cu?t.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):t.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ql}}function Gl(t,e,n,i){const r=t.Qu(1,e,n);tc("Data must be an object, but it was:",r,i);const s=[],a=Xn.empty();gn(i,((t,i)=>{const o=ic(e,t,n);i=N(i);const l=r.Nu(o);if(i instanceof Ql)s.push(o);else{const t=Xl(i,l);null!=t&&(s.push(o),a.set(o,t))}}));const o=new _n(s);return new Ul(a,o,r.fieldTransforms)}function $l(t,e,n,i,r,s){const a=t.Qu(1,e,n),o=[ec(e,i,n)],l=[r];if(s.length%2!=0)throw new Te(Ce.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)o.push(ec(e,s[d])),l.push(s[d+1]);const c=[],u=Xn.empty();for(let d=o.length-1;d>=0;--d)if(!sc(c,o[d])){const t=o[d];let e=l[d];e=N(e);const n=a.Nu(t);if(e instanceof Ql)c.push(t);else{const i=Xl(e,n);null!=i&&(c.push(t),u.set(t,i))}}const h=new _n(c);return new Ul(u,h,a.fieldTransforms)}function Xl(t,e){if(Zl(t=N(t)))return tc("Unsupported field value:",e,t),Jl(t,e);if(t instanceof jl)return function(t,e){if(!Hl(e.Cu))throw e.Bu("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.Bu("".concat(t._methodName,"() is not currently supported inside arrays"));const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Xl(r,e.Lu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=N(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return sr(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Be.fromDate(t);return{timestampValue:cs(e.serializer,n)}}if(t instanceof Be){const n=new Be(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:cs(e.serializer,n)}}if(t instanceof Fl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ll)return{bytesValue:us(e.serializer,t._byteString)};if(t instanceof Cl){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Bu("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:fs(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof Vl)return function(t,e){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:t.toArray().map((t=>{if("number"!=typeof t)throw e.Bu("VectorValues must only contain numeric values.");return ir(e.serializer,t)}))}}}}}}(t,e);throw e.Bu("Unsupported field value: ".concat(xl(t)))}(t,e)}function Jl(t,e){const n={};return mn(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gn(t,((t,i)=>{const r=Xl(i,e.Mu(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function Zl(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof Fl||t instanceof Ll||t instanceof Cl||t instanceof jl||t instanceof Vl)}function tc(t,e,n){if(!Zl(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=xl(n);throw"an object"===i?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function ec(t,e,n){if((e=N(e))instanceof Rl)return e._internalPath;if("string"==typeof e)return ic(t,e);throw rc("Field path arguments must be of type string or ",t,!1,void 0,n)}const nc=new RegExp("[~\\*/\\[\\]]");function ic(t,e,n){if(e.search(nc)>=0)throw rc("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new Rl(...e.split("."))._internalPath}catch(i){throw rc("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function rc(t,e,n,i,r){const s=i&&!i.isEmpty(),a=void 0!==r;let o="Function ".concat(e,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(i)),a&&(l+=" in document ".concat(r)),l+=")"),new Te(Ce.INVALID_ARGUMENT,o+t+l)}function sc(t,e){return t.some((t=>t.isEqual(e)))}class ac{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Cl(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new oc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(lc("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class oc extends ac{data(){return super.data()}}function lc(t,e){return"string"==typeof e?ic(t,e):e instanceof Rl?e._internalPath:e._delegate._internalPath}function cc(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Te(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uc{convertValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ln(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Tn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Nn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ke()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return gn(t,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertVectorValue(t){var e,n,i;const r=null===(i=null===(n=null===(e=t.fields)||void 0===e?void 0:e.value.arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.map((t=>Tn(t.doubleValue)));return new Vl(r)}convertGeoPoint(t){return new Fl(Tn(t.latitude),Tn(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Mn(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(In(t));default:return null}}convertTimestamp(t){const e=Cn(t);return new Be(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=We.fromString(t);Se(Ls(n));const i=new Pn(n.get(1),n.get(3)),r=new Ye(n.popFirst(5));return i.isEqual(e)||xe("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),r}}function hc(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class dc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class fc extends ac{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const e=new pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(lc("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class pc extends fc{data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(t)}}class gc{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new dc(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new pc(this._firestore,this._userDataWriter,n.key,n,new dc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const t=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new pc(t._firestore,t._userDataWriter,n.doc.key,n.doc,new dc(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new pc(t._firestore,t._userDataWriter,e.doc.key,e.doc,new dc(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:mc(e.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mc(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke()}}function yc(t){t=wl(t,Cl);const e=wl(t.firestore,Al);return pl(Pl(e),t._key).then((n=>Ec(e,t,n)))}class bc extends uc{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ll(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Cl(this.firestore,null,e)}}function vc(t,e,n){t=wl(t,Cl);const i=wl(t.firestore,Al),r=hc(t.converter,e,n);return Sc(i,[Yl(Kl(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,vr.none())])}function xc(t,e,n){t=wl(t,Cl);const i=wl(t.firestore,Al),r=Kl(i);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(e=N(e))||e instanceof Rl?$l(r,"updateDoc",t._key,e,n,o):Gl(r,"updateDoc",t._key,e),Sc(i,[s.toMutation(t._key,vr.exists(!0))])}function wc(t){return Sc(wl(t.firestore,Al),[new Ar(t._key,vr.none())])}function _c(t,e){const n=wl(t.firestore,Al),i=Dl(t),r=hc(t.converter,e);return Sc(n,[Yl(Kl(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,vr.exists(!1))]).then((()=>i))}function kc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r,s,a;t=N(t);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Il(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Il(n[l])){const t=n[l];n[l]=null===(r=t.next)||void 0===r?void 0:r.bind(t),n[l+1]=null===(s=t.error)||void 0===s?void 0:s.bind(t),n[l+2]=null===(a=t.complete)||void 0===a?void 0:a.bind(t)}let u,h,d;if(t instanceof Cl)h=wl(t.firestore,Al),d=Di(t._key.path),u={next:e=>{n[l]&&n[l](Ec(h,t,e))},error:n[l+1],complete:n[l+2]};else{const e=wl(t,El);h=wl(e.firestore,Al),d=e._query;const i=new bc(h);u={next:t=>{n[l]&&n[l](new gc(h,i,e,t))},error:n[l+1],complete:n[l+2]},cc(t._query)}return function(t,e,n,i){const r=new al(i),s=new No(e,r,n);return t.asyncQueue.enqueueAndForget((async()=>wo(await fl(t),s))),()=>{r.Za(),t.asyncQueue.enqueueAndForget((async()=>_o(await fl(t),s)))}}(Pl(h),d,c,u)}function Sc(t,e){return function(t,e){const n=new Ne;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=il(t);try{const t=await function(t,e){const n=Ee(t),i=Be.now(),r=e.reduce(((t,e)=>t.add(e.key)),tr());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let o=qi(),l=tr();return n.cs.getEntries(t,r).next((t=>{o=t,o.forEach(((t,e)=>{e.isValidDocument()||(l=l.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,o))).next((r=>{s=r;const a=[];for(const t of e){const e=Er(t,s.get(t.key).overlayedDocument);null!=e&&a.push(new Nr(t.key,e,Jn(e.value.mapValue),vr.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,a,e)})).next((e=>{a=e;const i=e.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:a.batchId,changes:Qi(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Ba[t.currentUser.toKey()];i||(i=new yn(Ve)),i=i.insert(e,n),t.Ba[t.currentUser.toKey()]=i}(i,t.batchId,n),await Zo(i,t.changes),await Za(i.remoteStore)}catch(t){const e=po(t,"Failed to persist write");n.reject(e)}}(await dl(t),e,n))),n.promise}(Pl(t),e)}function Ec(t,e,n){const i=n.docs.get(e._key),r=new bc(t);return new fc(t,r,e._key,i,new dc(n.hasPendingWrites,n.fromCache),e.converter)}new WeakMap;!function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){me=t}("10.14.1"),Ft(new D("firestore",((t,n)=>{let{instanceIdentifier:i,options:r}=n;const s=t.getProvider("app").getImmediate(),a=new Al(new Ae(t.getProvider("auth-internal")),new Re(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Te(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pn(t.options.projectId,e)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),Ht(pe,"4.7.3",t),Ht(pe,"4.7.3","esm2017")}();Ht("firebase","10.14.1","app");const Cc=function(t,e){const n="object"==typeof t?t:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At;const e=Ot.get(t);if(!e&&t===At&&b())return Ut();if(!e)throw zt.create("no-app",{appName:t});return e}(),i="string"==typeof t?t:e||"(default)",r=Vt(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const t=y("firestore");t&&Sl(r,...t)}return r}(Ut({apiKey:"AIzaSyCK8Rmtti1TrKRCR_sUzhncm4ebk7OoUXs",authDomain:"mruh2-398d6.firebaseapp.com",databaseURL:"https://mruh2-398d6.firebaseio.com",projectId:"mruh2-398d6",storageBucket:"mruh2-398d6.appspot.com",messagingSenderId:"274684476540",appId:"1:274684476540:web:5dc96795cee6e8c81d5df9"}));var Tc=n(579);const Nc={name:"",type:"",stock:0,basePrice:0,purchasePrice:0,purchaseDate:"",supplier:""},Dc=()=>{const[t,e]=(0,i.useState)([]),[n,r]=(0,i.useState)(Nc),[s,a]=(0,i.useState)(null),[o,l]=(0,i.useState)(!1),[u,h]=(0,i.useState)("cards"),[d,f]=(0,i.useState)("");(0,i.useEffect)((()=>{const t=kc(Nl(Cc,"plants"),(t=>{const n=t.docs.map((t=>c({id:t.id},t.data())));e(n)}));return()=>t()}),[]);const p=t=>{const{name:e,value:n}=t.target;r((t=>c(c({},t),{},{[e]:"stock"===e||"basePrice"===e||"purchasePrice"===e?Number(n):n})))},g=t=>{r({name:t.name,type:t.type,stock:t.stock,basePrice:t.basePrice,purchasePrice:t.purchasePrice,purchaseDate:t.purchaseDate,supplier:t.supplier}),a(t.id),l(!0)},m=async t=>{window.confirm("\xbfEliminar esta planta?")&&await wc(Dl(Nl(Cc,"plants"),t))},y=t.filter((t=>{var e,n,i;const r=d.trim().toLowerCase();return!r||((null===(e=t.name)||void 0===e?void 0:e.toLowerCase().includes(r))||(null===(n=t.type)||void 0===n?void 0:n.toLowerCase().includes(r))||String(t.stock).includes(r)||String(t.basePrice).includes(r)||String(t.purchasePrice).includes(r)||(null===(i=t.supplier)||void 0===i?void 0:i.toLowerCase().includes(r))||"")}));return(0,Tc.jsx)("div",{className:"relative min-h-screen bg-gray-50 pb-24",children:(0,Tc.jsxs)("div",{className:"rounded-lg shadow bg-white p-3",children:[(0,Tc.jsx)("div",{className:"mb-4 max-w-md mx-auto",children:(0,Tc.jsx)("input",{type:"text",className:"border rounded p-2 w-full",placeholder:"Buscar por nombre, tipo, proveedor...",value:d,onChange:t=>f(t.target.value)})}),(0,Tc.jsxs)("div",{className:"flex justify-center mb-2 gap-2",children:[(0,Tc.jsx)("button",{className:"px-3 py-1 rounded font-semibold text-sm ".concat("cards"===u?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>h("cards"),children:"Vista de tarjetas"}),(0,Tc.jsx)("button",{className:"px-3 py-1 rounded font-semibold text-sm ".concat("table"===u?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>h("table"),children:"Vista de tabla"})]}),(0,Tc.jsx)("button",{type:"button",className:"fixed bottom-20 right-4 z-50 bg-green-600 text-white rounded-full shadow-lg p-4 text-3xl md:hidden hover:bg-green-700 transition",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},onClick:()=>l(!0),"aria-label":"Nuevo producto",children:"+"}),o&&(0,Tc.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-30",children:(0,Tc.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!n.name.trim()||!n.type.trim()||n.stock<0||n.basePrice<0||n.purchasePrice<0)return void alert("Todos los campos son obligatorios y deben ser v\xe1lidos.");if(n.basePrice>n.purchasePrice)return void alert("El precio de compra no puede ser mayor al precio de venta.");const i=new Date,o=i.getFullYear(),c=String(i.getMonth()+1).padStart(2,"0"),u=String(i.getDate()).padStart(2,"0"),h="".concat(o,"-").concat(c,"-").concat(u),d={id:s||(Math.max(0,...t.map((t=>Number(t.id)||0)))+1).toString(),name:n.name,type:n.type,stock:n.stock,basePrice:n.basePrice,purchasePrice:n.purchasePrice,purchaseDate:n.purchaseDate||h,supplier:n.supplier||""};try{await vc(Dl(Nl(Cc,"plants"),d.id),d),r(Nc),a(null),l(!1)}catch(f){alert("Error guardando la planta.")}},className:"bg-white p-4 rounded-lg shadow-md",children:[(0,Tc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Nombre"}),(0,Tc.jsx)("input",{name:"name",value:n.name,onChange:p,className:"border rounded p-2 w-full",placeholder:"Nombre",required:!0}),(0,Tc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Tipo"}),(0,Tc.jsxs)("select",{name:"type",value:n.type,onChange:p,className:"border rounded p-2 w-full",required:!0,children:[(0,Tc.jsx)("option",{value:"",children:"Tipo..."}),(0,Tc.jsx)("option",{value:"Plantas de Interior",children:"Plantas de Interior"}),(0,Tc.jsx)("option",{value:"Plantas de Exterior",children:"Plantas de Exterior"}),(0,Tc.jsx)("option",{value:"Macetas",children:"Macetas"}),(0,Tc.jsx)("option",{value:"Otros",children:"Otros"})]}),(0,Tc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Stock"}),(0,Tc.jsx)("input",{name:"stock",type:"number",min:"0",value:n.stock,onChange:p,className:"border rounded p-2 w-full",placeholder:"Stock",required:!0}),(0,Tc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Precio de Venta"}),(0,Tc.jsx)("input",{name:"purchasePrice",type:"number",min:"0",value:n.purchasePrice,onChange:p,className:"border rounded p-2 w-full",placeholder:"Precio de Venta",required:!0}),(0,Tc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Precio de Compra"}),(0,Tc.jsx)("input",{name:"basePrice",type:"number",min:"0",value:n.basePrice,onChange:p,className:"border rounded p-2 w-full",placeholder:"Precio de Compra",required:!0}),(0,Tc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Fecha de Compra"}),(0,Tc.jsx)("input",{name:"purchaseDate",type:"date",value:n.purchaseDate,onChange:p,className:"border rounded p-2 w-full"}),(0,Tc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Proveedor (opcional)"}),(0,Tc.jsx)("input",{name:"supplier",value:n.supplier,onChange:p,className:"border rounded p-2 w-full",placeholder:"Proveedor (opcional)"}),(0,Tc.jsxs)("div",{className:"fixed left-0 right-0 bottom-0 z-[110] flex gap-2 p-4 bg-white border-t border-gray-300 shadow-lg",style:{height:70},children:[(0,Tc.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-4 py-3 rounded flex-1 text-lg font-semibold shadow",children:s?"Actualizar":"Agregar"}),(0,Tc.jsx)("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-3 rounded flex-1 text-lg font-semibold shadow",onClick:()=>{r(Nc),a(null),l(!1)},children:"Cancelar"})]})]})}),"cards"===u?(0,Tc.jsx)("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4",children:y.slice().sort(((t,e)=>t.name.localeCompare(e.name))).map((t=>{const e=Number(t.stock)<=1,n=e?"bg-red-100 border-red-300":"bg-green-50 border-green-200";return(0,Tc.jsxs)("div",{className:"rounded-lg shadow p-3 flex flex-col items-start border ".concat(n," transition-colors duration-300"),children:[(0,Tc.jsx)("div",{className:"font-bold text-base text-green-700 mb-1",children:t.name}),(0,Tc.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:t.type}),(0,Tc.jsxs)("div",{className:"text-sm mb-1 ".concat(e?"text-red-700 font-bold":"text-green-800"),children:["Stock: ",(0,Tc.jsx)("b",{children:t.stock})]}),(0,Tc.jsxs)("div",{className:"text-sm mb-1",children:["Venta: ",(0,Tc.jsxs)("b",{children:["$",t.purchasePrice]})]}),(0,Tc.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,Tc.jsx)("button",{className:"text-blue-600 underline text-xs",onClick:()=>g(t),children:"Editar"}),(0,Tc.jsx)("button",{className:"text-red-600 underline text-xs",onClick:()=>m(t.id),children:"Eliminar"})]})]},t.id)}))}):(0,Tc.jsx)("div",{className:"bg-white rounded-lg shadow p-2",children:(0,Tc.jsxs)("table",{className:"min-w-full text-xs",children:[(0,Tc.jsx)("thead",{children:(0,Tc.jsxs)("tr",{className:"bg-green-100",children:[(0,Tc.jsx)("th",{className:"p-1",children:"Nombre"}),(0,Tc.jsx)("th",{className:"p-1",children:"Tipo"}),(0,Tc.jsx)("th",{className:"p-1",children:"Stock"}),(0,Tc.jsx)("th",{className:"p-1",children:"Venta"}),(0,Tc.jsx)("th",{className:"p-1",children:"Compra"}),(0,Tc.jsx)("th",{className:"p-1",children:"Acciones"})]})}),(0,Tc.jsx)("tbody",{children:y.slice().sort(((t,e)=>t.name.localeCompare(e.name))).map((t=>(0,Tc.jsxs)("tr",{className:"border-t",children:[(0,Tc.jsx)("td",{className:"p-1",children:t.name}),(0,Tc.jsx)("td",{className:"p-1",children:t.type}),(0,Tc.jsx)("td",{className:"p-1",children:t.stock}),(0,Tc.jsxs)("td",{className:"p-1",children:["$",t.purchasePrice]}),(0,Tc.jsxs)("td",{className:"p-1",children:["$",t.basePrice]}),(0,Tc.jsxs)("td",{className:"p-1 flex gap-1",children:[(0,Tc.jsx)("button",{className:"text-blue-600 underline text-xs",onClick:()=>g(t),children:"Editar"}),(0,Tc.jsx)("button",{className:"text-red-600 underline text-xs",onClick:()=>m(t.id),children:"Eliminar"})]})]},t.id)))})]})})]})})},Mc=["Plantas de Interior","Plantas de Exterior","Macetas","Otros"],Ic=t=>{let{plant:e,onEdit:n,onDelete:r}=t;const[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),[d,f]=(0,i.useState)(e.type),[p,g]=(0,i.useState)(e.stock),[m,y]=(0,i.useState)(e.purchasePrice),[b,v]=(0,i.useState)(!1);let x="/img/plants/generic_plants.jpg";e.image&&"string"===typeof e.image&&""!==e.image.trim()&&(x=e.image);const w=async(t,i)=>{v(!0),await n(c(c({},e),{},{[t]:i})),setTimeout((()=>{v(!1)}),500)};return(0,Tc.jsx)("div",{className:"bg-[#f7f7fa] rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow border border-gray-300",children:(0,Tc.jsxs)("div",{className:"flex flex-col items-center p-4",children:[(0,Tc.jsx)("img",{src:x,alt:e.name,className:"h-32 w-32 object-cover rounded-lg border border-gray-200 bg-gray-50 mb-2",loading:"lazy"}),(0,Tc.jsx)("h3",{className:"text-xl font-semibold text-gray-800 truncate w-full text-center mb-1",children:e.name}),(0,Tc.jsx)("div",{className:"mb-2 w-full text-center",children:s?(0,Tc.jsx)("select",{className:"border rounded p-1 text-xs w-32 border-gray-300 focus:ring-blue-400",value:d,autoFocus:!0,disabled:b,onChange:t=>f(t.target.value),onBlur:async()=>{a(!1),d!==e.type&&await w("type",d)},onKeyDown:async t=>{"Enter"!==t.key&&"Tab"!==t.key||(a(!1),d!==e.type&&await w("type",d))},children:Mc.map((t=>(0,Tc.jsx)("option",{value:t,children:t},t)))}):(0,Tc.jsx)("span",{onClick:()=>a(!0),className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full cursor-pointer",children:d})}),(0,Tc.jsxs)("div",{className:"grid grid-cols-2 gap-2 w-full mb-2",children:[(0,Tc.jsxs)("div",{className:"text-center",children:[(0,Tc.jsx)("p",{className:"text-sm text-gray-500",children:"Precio venta"}),(0,Tc.jsx)("span",{className:"font-medium cursor-pointer text-gray-800",onClick:()=>h(!0),children:u?(0,Tc.jsx)("input",{type:"number",className:"border rounded p-1 text-xs w-20 text-center border-gray-300 focus:ring-blue-400",value:m,min:0,autoFocus:!0,disabled:b,onChange:t=>y(t.target.value),onBlur:async()=>{h(!1),String(m)!==String(e.purchasePrice)&&await w("purchasePrice",Number(m))},onKeyDown:async t=>{"Enter"!==t.key&&"Tab"!==t.key||(h(!1),String(m)!==String(e.purchasePrice)&&await w("purchasePrice",Number(m)))}}):(0,Tc.jsxs)("b",{children:["$",e.purchasePrice]})})]}),(0,Tc.jsxs)("div",{className:"text-center",children:[(0,Tc.jsx)("p",{className:"text-sm text-gray-500",children:"Stock"}),(0,Tc.jsxs)("span",{className:"font-medium cursor-pointer ".concat(Number(e.stock)<=1?"text-red-700":"text-gray-800"),onClick:()=>l(!0),children:[o?(0,Tc.jsx)("input",{type:"number",className:"border rounded p-1 text-xs w-16 text-center border-gray-300 focus:ring-blue-400",value:p,min:0,autoFocus:!0,disabled:b,onChange:t=>g(t.target.value),onBlur:async()=>{l(!1),String(p)!==String(e.stock)&&await w("stock",Number(p))},onKeyDown:async t=>{"Enter"!==t.key&&"Tab"!==t.key||(l(!1),String(p)!==String(e.stock)&&await w("stock",Number(p)))}}):(0,Tc.jsx)("b",{children:e.stock}),(0,Tc.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:"unidades"})]})]})]}),(0,Tc.jsxs)("div",{className:"mt-2 flex space-x-2 w-full justify-center",children:[(0,Tc.jsx)("button",{onClick:()=>n(e),className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100",children:"Editar"}),(0,Tc.jsx)("button",{onClick:()=>r(e.id),className:"px-3 py-1 bg-red-50 text-red-600 rounded-md hover:bg-red-100",children:"Eliminar"})]}),b&&(0,Tc.jsx)("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center text-xs text-gray-500",children:"Guardando..."})]})})};const Ac={name:"",type:"",stock:0,basePrice:0,purchasePrice:0,purchaseDate:"",supplier:""},Pc=()=>{const[t,e]=(0,i.useState)(window.innerWidth<768),[n,r]=(0,i.useState)([]),[s,a]=(0,i.useState)(Ac),[o,l]=(0,i.useState)(null),[u,h]=(0,i.useState)(""),[d,f]=(0,i.useState)("table"),p=(0,i.useRef)(null),g=(0,i.useRef)(null),m=(0,i.useRef)(null),[y,b]=(0,i.useState)({open:!1,id:null,name:""}),[v,x]=(0,i.useState)(null),[w,_]=(0,i.useState)(null),[k,S]=(0,i.useState)(!1),[E,C]=(0,i.useState)(0);(0,i.useEffect)((()=>{const t=()=>e(window.innerWidth<768);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),(0,i.useEffect)((()=>{S(!0);const t=kc(Nl(Cc,"plants"),(t=>{const e=t.docs.map((t=>c({id:t.id},t.data())));r(e),S(!1)}));return()=>t()}),[E]);const T=n.filter((t=>{var e,n,i;const r=u.trim().toLowerCase();return!r||((null===(e=t.name)||void 0===e?void 0:e.toLowerCase().includes(r))||(null===(n=t.type)||void 0===n?void 0:n.toLowerCase().includes(r))||String(t.stock).includes(r)||String(t.basePrice).includes(r)||String(t.purchasePrice).includes(r)||(null===(i=t.supplier)||void 0===i?void 0:i.toLowerCase().includes(r))||"")})),N=t=>{const{name:e,value:n,type:i,files:r}=t.target;if("file"!==i)a((t=>c(c({},t),{},{[e]:"stock"===e||"basePrice"===e||"purchasePrice"===e?Number(n):n})));else{const t=r[0];if(_(t),t){const e=new FileReader;e.onloadend=()=>x(e.result),e.readAsDataURL(t)}else x(null)}},D=t=>{a({name:t.name,type:t.type,stock:t.stock,basePrice:t.basePrice,purchasePrice:t.purchasePrice,purchaseDate:t.purchaseDate,supplier:t.supplier}),l(t.id),setTimeout((()=>{if(m.current&&m.current.scrollIntoView({behavior:"smooth",block:"start"}),g.current&&g.current.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout((()=>{var t;const e=null===(t=g.current)||void 0===t?void 0:t.getBoundingClientRect();e&&window.scrollTo({top:window.scrollY+e.top-24,behavior:"smooth"})}),200),p.current){const t=p.current.querySelector("input,select,textarea");t&&t.focus(),p.current.classList.add("ring-2","ring-green-400"),setTimeout((()=>p.current.classList.remove("ring-2","ring-green-400")),1200)}}),100)},M=(t,e)=>{b({open:!0,id:t,name:e})};return t?(0,Tc.jsx)(Dc,{}):(0,Tc.jsxs)("div",{className:"w-full max-w-7xl mx-auto p-4",children:[(0,Tc.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Tc.jsx)("h2",{className:"text-2xl font-bold",children:"Inventario de Plantas"}),(0,Tc.jsx)("button",{onClick:()=>{S(!0),C((t=>t+1))},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow",disabled:k,children:k?"Cargando...":"Cargar desde Firebase"})]}),(0,Tc.jsxs)("div",{className:"sticky top-2 z-20 bg-white/90 backdrop-blur rounded-xl shadow-md border border-gray-100 px-4 py-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-4",children:[(0,Tc.jsxs)("div",{className:"flex gap-2 order-1 md:order-none",children:[(0,Tc.jsx)("button",{className:"px-3 py-1 rounded font-semibold text-sm ".concat("table"===d?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>f("table"),children:"Tabla"}),(0,Tc.jsx)("button",{className:"px-3 py-1 rounded font-semibold text-sm ".concat("cards"===d?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>f("cards"),children:"Widgets"})]}),(0,Tc.jsx)("div",{className:"flex-1 flex justify-center order-3 md:order-none",children:(0,Tc.jsx)("input",{type:"text",className:"border rounded p-2 w-full max-w-xs text-sm",placeholder:"Buscar por nombre, tipo, proveedor...",value:u,onChange:t=>h(t.target.value)})}),(0,Tc.jsxs)("div",{className:"flex items-center gap-2 order-2 md:order-none min-w-[220px] justify-end",children:[(0,Tc.jsx)("button",{className:"px-3 py-1 rounded text-xs bg-green-100 hover:bg-green-200 text-green-700 border border-green-200",onClick:()=>{if(!n.length)return;const t=["id","name","type","stock","basePrice","purchasePrice","purchaseDate","supplier","image"],e=[t.join(",")].concat(n.map((e=>t.map((t=>{var n;let i=null!==(n=e[t])&&void 0!==n?n:"";return"string"===typeof i&&(i.includes(",")||i.includes('"'))&&(i='"'+i.replace(/"/g,'""')+'"'),i})).join(",")))).join("\r\n"),i=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download="plantas_export.csv",s.click(),URL.revokeObjectURL(r)},children:"Exportar CSV"}),(0,Tc.jsxs)("label",{className:"px-3 py-1 rounded text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 border border-gray-200 cursor-pointer mb-0",children:["Importar CSV",(0,Tc.jsx)("input",{type:"file",accept:".csv,text/csv",className:"hidden",onChange:async t=>{const e=t.target.files[0];if(!e)return;const i=await e.text();try{const t=i.split(/\r?\n/).filter(Boolean),e=t[0].split(",").map((t=>t.trim())),r=t.slice(1).map((t=>{const n=[];let i="",r=!1;for(let e=0;e<t.length;e++){const s=t[e];'"'===s?r&&'"'===t[e+1]?(i+='"',e++):r=!r:","!==s||r?i+=s:(n.push(i),i="")}n.push(i);const s={};return e.forEach(((t,e)=>{var i;let r=null!==(i=n[e])&&void 0!==i?i:"";"stock"!==t&&"basePrice"!==t&&"purchasePrice"!==t||(r=Number(r)||0),s[t]=r})),s}));if(!window.confirm("\xbfSobrescribir todas las plantas actuales con las importadas?"))return;for(const i of n)await wc(Dl(Nl(Cc,"plants"),i.id));for(const n of r)await vc(Dl(Nl(Cc,"plants"),n.id),n);alert("Importaci\xf3n completada. Recargue la p\xe1gina para ver los cambios.")}catch(r){alert("Error al importar CSV: "+r.message)}}})]})]})]}),(0,Tc.jsxs)("section",{className:"bg-white rounded-xl shadow p-6 border border-gray-100",children:[(0,Tc.jsx)("h2",{ref:g,className:"text-2xl font-bold mb-2 text-green-700",children:"Carga - Actualizaci\xf3n de productos"}),o&&(0,Tc.jsxs)("div",{className:"mb-2 px-2 py-1 rounded bg-green-50 border border-green-200 text-green-800 text-xs font-semibold flex items-center gap-2",children:[(0,Tc.jsx)("span",{className:"material-icons text-base align-middle",children:"edit"}),"Editando: ",(0,Tc.jsx)("b",{className:"ml-1",children:s.name})]}),(0,Tc.jsxs)("form",{ref:p,onSubmit:async t=>{if(t.preventDefault(),!s.name.trim()||!s.type.trim()||s.stock<0||s.basePrice<0||s.purchasePrice<0)return void alert("Todos los campos son obligatorios y deben ser v\xe1lidos.");if(s.basePrice>s.purchasePrice)return void alert("El precio de compra no puede ser mayor al precio de venta.");const e=new Date,i=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0"),u="".concat(i,"-").concat(r,"-").concat(c),h={id:o||(Math.max(0,...n.map((t=>Number(t.id)||0)))+1).toString(),name:s.name,type:s.type,stock:s.stock,basePrice:s.basePrice,purchasePrice:s.purchasePrice,purchaseDate:s.purchaseDate||u,supplier:s.supplier||""};try{if(w){const t="plant_".concat(h.id,".jpg"),e="/img/plants/".concat(t);h.image=e,alert("La imagen se asociar\xe1 al producto, pero para que se vea en producci\xf3n debe copiarse manualmente a public/img/plants/ con el nombre sugerido: "+t)}await vc(Dl(Nl(Cc,"plants"),h.id),h),a(Ac),l(null),_(null),x(null)}catch(d){alert("Error guardando la planta.")}},className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Tc.jsxs)("div",{className:"w-full grid grid-cols-1 md:grid-cols-8 gap-2 items-end",children:[(0,Tc.jsxs)("div",{children:[(0,Tc.jsx)("label",{className:"block text-xs font-medium",children:"Nombre"}),(0,Tc.jsx)("input",{name:"name",value:s.name,onChange:N,className:"border rounded p-1 w-full text-xs",required:!0})]}),(0,Tc.jsxs)("div",{children:[(0,Tc.jsx)("label",{className:"block text-xs font-medium",children:"Tipo"}),(0,Tc.jsxs)("select",{name:"type",value:s.type,onChange:N,className:"border rounded p-1 w-full text-xs",required:!0,children:[(0,Tc.jsx)("option",{value:"",children:"Seleccionar..."}),(0,Tc.jsx)("option",{value:"Plantas de Interior",children:"Plantas de Interior"}),(0,Tc.jsx)("option",{value:"Plantas de Exterior",children:"Plantas de Exterior"}),(0,Tc.jsx)("option",{value:"Macetas",children:"Macetas"}),(0,Tc.jsx)("option",{value:"Otros",children:"Otros"})]})]}),(0,Tc.jsxs)("div",{children:[(0,Tc.jsx)("label",{className:"block text-xs font-medium",children:"Stock"}),(0,Tc.jsx)("input",{name:"stock",type:"number",min:"0",value:s.stock,onChange:N,className:"border rounded p-1 w-full text-xs",required:!0,style:{maxWidth:"80px"}})]}),(0,Tc.jsxs)("div",{children:[(0,Tc.jsx)("label",{className:"block text-xs font-medium",children:"Precio Compra"}),(0,Tc.jsx)("input",{name:"basePrice",type:"number",min:"0",value:s.basePrice,onChange:N,className:"border rounded p-1 w-full text-xs",required:!0,style:{maxWidth:"100px"}})]}),(0,Tc.jsxs)("div",{children:[(0,Tc.jsx)("label",{className:"block text-xs font-medium",children:"Precio Venta"}),(0,Tc.jsx)("input",{name:"purchasePrice",type:"number",min:"0",value:s.purchasePrice,onChange:N,className:"border rounded p-1 w-full text-xs",required:!0,style:{maxWidth:"100px"}})]}),(0,Tc.jsxs)("div",{children:[(0,Tc.jsx)("label",{className:"block text-xs font-medium",children:"Fecha Compra"}),(0,Tc.jsx)("input",{name:"purchaseDate",type:"date",value:s.purchaseDate,onChange:N,className:"border rounded p-1 w-full text-xs",style:{maxWidth:"120px"}})]}),(0,Tc.jsxs)("div",{children:[(0,Tc.jsx)("label",{className:"block text-xs font-medium",children:"Proveedor"}),(0,Tc.jsx)("input",{name:"supplier",value:s.supplier,onChange:N,className:"border rounded p-1 w-full text-xs",placeholder:"(opcional)",style:{maxWidth:"120px"}})]}),(0,Tc.jsxs)("div",{children:[(0,Tc.jsx)("label",{className:"block text-xs font-medium",children:"Imagen"}),(0,Tc.jsxs)("div",{className:"relative",children:[(0,Tc.jsx)("button",{type:"button",className:"px-2 py-1 rounded text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 border border-gray-200 cursor-pointer w-full text-left",onClick:()=>document.getElementById("input-img-producto").click(),children:"Seleccionar imagen"}),(0,Tc.jsx)("input",{id:"input-img-producto",type:"file",accept:"image/*",className:"hidden",onChange:t=>{const e=t.target.files[0];_(e||null),x(null)}}),w&&(0,Tc.jsx)("span",{className:"block text-green-700 text-[11px] mt-1 font-semibold",children:"Imagen cargada"})]})]})]}),(0,Tc.jsxs)("div",{className:"text-xs text-yellow-700 bg-yellow-50 border border-yellow-200 rounded p-2 mt-2 mb-2",children:[(0,Tc.jsx)("b",{children:"Nota:"})," Para asociar una imagen personalizada al producto, debes copiar manualmente el archivo a ",(0,Tc.jsxs)("code",{children:["/public/img/plants/plant_",o||"[id]",".jpg"]}),".",(0,Tc.jsx)("br",{}),"El nombre del archivo debe coincidir exactamente con el ID del producto. Puedes exportar el CSV para ver todos los IDs actuales.",(0,Tc.jsx)("br",{}),"Si no se sube una imagen, se mostrar\xe1 una imagen gen\xe9rica."]}),(0,Tc.jsxs)("div",{className:"flex gap-2 mt-3 justify-start border-t border-gray-100 pt-3",children:[(0,Tc.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-3 py-1 rounded font-semibold text-xs",children:o?"Actualizar":"Agregar"}),o&&(0,Tc.jsx)("button",{type:"button",className:"bg-gray-200 text-gray-700 px-3 py-1 rounded font-semibold border border-gray-400 hover:bg-gray-300 transition text-xs",onClick:()=>{a(Ac),l(null),_(null),x(null)},children:"Cancelar"})]})]})]}),(0,Tc.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,Tc.jsx)("section",{children:"table"===d?(0,Tc.jsxs)("table",{className:"min-w-full bg-white border rounded shadow text-sm",children:[(0,Tc.jsx)("thead",{children:(0,Tc.jsxs)("tr",{className:"bg-green-100",children:[(0,Tc.jsx)("th",{className:"p-2",children:"Nombre"}),(0,Tc.jsx)("th",{className:"p-2",children:"Tipo"}),(0,Tc.jsx)("th",{className:"p-2",children:"Stock"}),(0,Tc.jsx)("th",{className:"p-2",children:"Precio de Venta"}),(0,Tc.jsx)("th",{className:"p-2",children:"Precio de Compra"}),(0,Tc.jsx)("th",{className:"p-2",children:"Fecha de Compra"}),(0,Tc.jsx)("th",{className:"p-2",children:"Proveedor"}),(0,Tc.jsx)("th",{className:"p-2",children:"Acciones"})]})}),(0,Tc.jsx)("tbody",{children:T.slice().sort(((t,e)=>t.name.localeCompare(e.name))).map((t=>(0,Tc.jsxs)("tr",{className:"border-t",children:[(0,Tc.jsx)("td",{className:"p-2",children:t.name}),(0,Tc.jsx)("td",{className:"p-2",children:t.type}),(0,Tc.jsx)("td",{className:"p-2",children:t.stock}),(0,Tc.jsxs)("td",{className:"p-2",children:["$",t.purchasePrice]}),(0,Tc.jsxs)("td",{className:"p-2",children:["$",t.basePrice]}),(0,Tc.jsx)("td",{className:"p-2",children:t.purchaseDate||"-"}),(0,Tc.jsx)("td",{className:"p-2",children:t.supplier||"-"}),(0,Tc.jsxs)("td",{className:"p-2 flex gap-2",children:[(0,Tc.jsx)("button",{className:"px-2 py-1 rounded text-xs bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300",onClick:()=>D(t),children:"Editar"}),(0,Tc.jsx)("button",{className:"px-2 py-1 rounded text-xs bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-300",onClick:()=>M(t.id,t.name),children:"Eliminar"})]})]},t.id)))})]}):(0,Tc.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:T.slice().sort(((t,e)=>t.name.localeCompare(e.name))).map((t=>(0,Tc.jsx)(Ic,{plant:t,onEdit:D,onDelete:()=>M(t.id,t.name)},t.id)))})}),y.open&&(0,Tc.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:(0,Tc.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-xs w-full border border-gray-200",children:[(0,Tc.jsxs)("h3",{className:"text-lg font-bold mb-2 text-red-700 flex items-center gap-2",children:[(0,Tc.jsx)("span",{className:"material-icons text-2xl",children:"warning"})," Confirmar eliminaci\xf3n"]}),(0,Tc.jsxs)("p",{className:"mb-4 text-gray-700 text-sm",children:["\xbfSeguro que deseas eliminar el producto ",(0,Tc.jsx)("b",{children:y.name}),"? Esta acci\xf3n no se puede deshacer."]}),(0,Tc.jsxs)("div",{className:"flex gap-2 justify-end mt-4",children:[(0,Tc.jsx)("button",{className:"px-3 py-1 rounded border border-gray-300 bg-gray-100 text-gray-700 hover:bg-gray-200",onClick:()=>{b({open:!1,id:null,name:""})},children:"Cancelar"}),(0,Tc.jsx)("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:async()=>{await wc(Dl(Nl(Cc,"plants"),y.id)),b({open:!1,id:null,name:""})},children:"Eliminar"})]})]})}),(0,Tc.jsx)("button",{type:"button",className:"fixed bottom-20 right-4 z-50 bg-green-600 text-white rounded-full shadow-lg p-4 text-3xl md:hidden hover:bg-green-700 transition",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},onClick:()=>{const t=document.getElementById("form-alta-producto");t&&t.scrollIntoView({behavior:"smooth",block:"start"})},"aria-label":"Nuevo producto",children:"+"})]})};function Oc(t,e){const n=function(t){Rc[t]||(Rc[t]=Fc?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));return Rc[t]}(e);return"formatToParts"in n?function(t,e){try{const n=t.formatToParts(e),i=[];for(let t=0;t<n.length;t++){const e=Lc[n[t].type];void 0!==e&&(i[e]=parseInt(n[t].value,10))}return i}catch(n){if(n instanceof RangeError)return[NaN];throw n}}(n,t):function(t,e){const n=t.format(e),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(i[3],10),parseInt(i[1],10),parseInt(i[2],10),parseInt(i[4],10),parseInt(i[5],10),parseInt(i[6],10)]}(n,t)}const Lc={year:0,month:1,day:2,hour:3,minute:4,second:5};const Rc={},jc=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Fc="06/25/2014, 00:00:00"===jc||"\u200e06\u200e/\u200e25\u200e/\u200e2014\u200e \u200e00\u200e:\u200e00\u200e:\u200e00"===jc;function Vc(t,e,n,i,r,s,a){const o=new Date(0);return o.setUTCFullYear(t,e,n),o.setUTCHours(i,r,s,a),o}const zc=36e5,Bc={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Uc(t,e,n){if(!t)return 0;let i,r,s=Bc.timezoneZ.exec(t);if(s)return 0;if(s=Bc.timezoneHH.exec(t),s)return i=parseInt(s[1],10),Wc(i)?-i*zc:NaN;if(s=Bc.timezoneHHMM.exec(t),s){i=parseInt(s[2],10);const t=parseInt(s[3],10);return Wc(i,t)?(r=Math.abs(i)*zc+6e4*t,"+"===s[1]?-r:r):NaN}if(function(t){if(qc[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),qc[t]=!0,!0}catch(e){return!1}}(t)){e=new Date(e||Date.now());const i=n?e:function(t){return Vc(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}(e),r=Hc(i,t),s=n?r:function(t,e,n){const i=t.getTime();let r=i-e;const s=Hc(new Date(r),n);if(e===s)return e;r-=s-e;const a=Hc(new Date(r),n);if(s===a)return s;return Math.max(s,a)}(e,r,t);return-s}return NaN}function Hc(t,e){const n=Oc(t,e),i=Vc(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let r=t.getTime();const s=r%1e3;return r-=s>=0?s:1e3+s,i-r}function Wc(t,e){return-23<=t&&t<=23&&(null==e||0<=e&&e<=59)}const qc={};function Kc(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+t-+e}const Yc=36e5,Qc=6e4,Gc={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/};function $c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===t)return new Date(NaN);const n=null==e.additionalDigits?2:Number(e.additionalDigits);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||"object"===typeof t&&"[object Date]"===Object.prototype.toString.call(t))return new Date(t.getTime());if("number"===typeof t||"[object Number]"===Object.prototype.toString.call(t))return new Date(t);if("[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);const i=function(t){const e={};let n,i=Gc.dateTimePattern.exec(t);i?(e.date=i[1],n=i[3]):(i=Gc.datePattern.exec(t),i?(e.date=i[1],n=i[2]):(e.date=null,n=t));if(n){const t=Gc.timeZone.exec(n);t?(e.time=n.replace(t[1],""),e.timeZone=t[1].trim()):e.time=n}return e}(t),{year:r,restDateString:s}=function(t,e){if(t){const n=Gc.YYY[e],i=Gc.YYYYY[e];let r=Gc.YYYY.exec(t)||i.exec(t);if(r){const e=r[1];return{year:parseInt(e,10),restDateString:t.slice(e.length)}}if(r=Gc.YY.exec(t)||n.exec(t),r){const e=r[1];return{year:100*parseInt(e,10),restDateString:t.slice(e.length)}}}return{year:null}}(i.date,n),a=function(t,e){if(null===e)return null;let n,i,r;if(!t||!t.length)return n=new Date(0),n.setUTCFullYear(e),n;let s=Gc.MM.exec(t);if(s)return n=new Date(0),i=parseInt(s[1],10)-1,eu(e,i)?(n.setUTCFullYear(e,i),n):new Date(NaN);if(s=Gc.DDD.exec(t),s){n=new Date(0);const t=parseInt(s[1],10);return function(t,e){if(e<1)return!1;const n=tu(t);if(n&&e>366)return!1;if(!n&&e>365)return!1;return!0}(e,t)?(n.setUTCFullYear(e,0,t),n):new Date(NaN)}if(s=Gc.MMDD.exec(t),s){n=new Date(0),i=parseInt(s[1],10)-1;const t=parseInt(s[2],10);return eu(e,i,t)?(n.setUTCFullYear(e,i,t),n):new Date(NaN)}if(s=Gc.Www.exec(t),s)return r=parseInt(s[1],10)-1,nu(r)?Xc(e,r):new Date(NaN);if(s=Gc.WwwD.exec(t),s){r=parseInt(s[1],10)-1;const t=parseInt(s[2],10)-1;return nu(r,t)?Xc(e,r,t):new Date(NaN)}return null}(s,r);if(null===a||isNaN(a.getTime()))return new Date(NaN);if(a){const t=a.getTime();let n,r=0;if(i.time&&(r=function(t){let e,n,i=Gc.HH.exec(t);if(i)return e=parseFloat(i[1].replace(",",".")),iu(e)?e%24*Yc:NaN;if(i=Gc.HHMM.exec(t),i)return e=parseInt(i[1],10),n=parseFloat(i[2].replace(",",".")),iu(e,n)?e%24*Yc+n*Qc:NaN;if(i=Gc.HHMMSS.exec(t),i){e=parseInt(i[1],10),n=parseInt(i[2],10);const t=parseFloat(i[3].replace(",","."));return iu(e,n,t)?e%24*Yc+n*Qc+1e3*t:NaN}return null}(i.time),null===r||isNaN(r)))return new Date(NaN);if(i.timeZone||e.timeZone){if(n=Uc(i.timeZone||e.timeZone,new Date(t+r)),isNaN(n))return new Date(NaN)}else n=Kc(new Date(t+r)),n=Kc(new Date(t+r+n));return new Date(t+r+n)}return new Date(NaN)}function Xc(t,e,n){e=e||0,n=n||0;const i=new Date(0);i.setUTCFullYear(t,0,4);const r=7*e+n+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+r),i}const Jc=[31,28,31,30,31,30,31,31,30,31,30,31],Zc=[31,29,31,30,31,30,31,31,30,31,30,31];function tu(t){return t%400===0||t%4===0&&t%100!==0}function eu(t,e,n){if(e<0||e>11)return!1;if(null!=n){if(n<1)return!1;const i=tu(t);if(i&&n>Zc[e])return!1;if(!i&&n>Jc[e])return!1}return!0}function nu(t,e){return!(t<0||t>52)&&(null==e||!(e<0||e>6))}function iu(t,e,n){return!(t<0||t>=25)&&((null==e||!(e<0||e>=60))&&(null==n||!(n<0||n>=60)))}function ru(t,e,n){const i=Uc(e,t=$c(t,n),!0),r=new Date(t.getTime()-i),s=new Date(0);return s.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),s.setHours(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),s}const su=[{value:"venta",label:"Venta"},{value:"compra",label:"Compra"},{value:"ingreso",label:"Ingreso"},{value:"egreso",label:"Egreso"},{value:"gasto",label:"Gasto"}],au=[{value:"efectivo",label:"Efectivo (E)"},{value:"mercadoPago",label:"Mercado Pago (MP)"}],ou=t=>{let{plants:e,hideForm:n,showOnlyForm:r,renderTotals:s}=t;const[a,o]=(0,i.useState)(e||[]),[l,u]=(0,i.useState)([]),[h,d]=(0,i.useState)({type:"venta",detail:"",plantId:"",quantity:1,price:"",total:"",paymentMethod:"efectivo",date:(new Date).toISOString().slice(0,16),location:"",notes:""}),[f,p]=(0,i.useState)(!1),[g,m]=(0,i.useState)(""),[y,b]=(0,i.useState)(!1),[v,x]=(0,i.useState)(!1),[w,_]=(0,i.useState)(""),[k,S]=(0,i.useState)(null),[E,C]=(0,i.useState)(!1),[T,N]=(0,i.useState)(null),[D,M]=(0,i.useState)(null),[I,A]=(0,i.useState)(!1),[P,O]=(0,i.useState)(0),L=new Date,R=L.getMonth(),j=L.getFullYear(),F=l.filter((t=>{if(!t.date)return!1;const e=new Date(t.date);return!isNaN(e.getTime())&&(e.getMonth()===R&&e.getFullYear()===j)})),[V,z]=(0,i.useState)([]),[B,U]=(0,i.useState)({plantId:"",quantity:1,price:""});(0,i.useEffect)((()=>{const t=kc(Nl(Cc,"plants"),(t=>{const e=t.docs.map((t=>c({id:t.id},t.data())));o(e)})),e=kc(Nl(Cc,"movements"),(t=>{const e=t.docs.map((t=>c({id:t.id},t.data())));u(e.sort(((t,e)=>new Date(e.date)-new Date(t.date))))}));return()=>{t(),e()}}),[P]);const H=t=>{const{name:e,value:n}=t.target;d((t=>c(c({},t),{},{[e]:n})))},W=l.filter((t=>"efectivo"===t.paymentMethod)).reduce(((t,e)=>"venta"===e.type||"ingreso"===e.type?t+(Number(e.total)||0):"compra"===e.type||"egreso"===e.type?t-(Number(e.total)||0):t),0),q=l.filter((t=>"mercadoPago"===t.paymentMethod)).reduce(((t,e)=>"venta"===e.type||"ingreso"===e.type?t+(Number(e.total)||0):"compra"===e.type||"egreso"===e.type?t-(Number(e.total)||0):t),0),K=t=>{const{name:e,value:n}=t.target;U((t=>c(c({},t),{},{[e]:n})))},Y=V.reduce(((t,e)=>t+e.total),0),Q=L.getDate(),G=l.filter((t=>{if(!t.date)return!1;const e=new Date(t.date);return!isNaN(e.getTime())&&(e.getDate()===Q&&e.getMonth()===R&&e.getFullYear()===j)}));G.filter((t=>"venta"===t.type)).reduce(((t,e)=>t+(e.total||0)),0),G.filter((t=>"compra"===t.type)).reduce(((t,e)=>t+(e.total||0)),0),G.filter((t=>"egreso"===t.type&&"efectivo"===t.paymentMethod)).reduce(((t,e)=>t+(e.total||0)),0),G.filter((t=>"egreso"===t.type&&"mercadoPago"===t.paymentMethod)).reduce(((t,e)=>t+(e.total||0)),0),G.filter((t=>"venta"===t.type&&"efectivo"===t.paymentMethod)).reduce(((t,e)=>t+(e.total||0)),0),G.filter((t=>"venta"===t.type&&"mercadoPago"===t.paymentMethod)).reduce(((t,e)=>t+(e.total||0)),0),G.filter((t=>"compra"===t.type&&"efectivo"===t.paymentMethod)).reduce(((t,e)=>t+(e.total||0)),0),G.filter((t=>"compra"===t.type&&"mercadoPago"===t.paymentMethod)).reduce(((t,e)=>t+(e.total||0)),0),G.filter((t=>"ingreso"===t.type&&"efectivo"===t.paymentMethod)).reduce(((t,e)=>t+(e.total||0)),0),G.filter((t=>"ingreso"===t.type&&"mercadoPago"===t.paymentMethod)).reduce(((t,e)=>t+(e.total||0)),0),G.filter((t=>"venta"===t.type)).reduce(((t,e)=>t+(Number(e.quantity)||0)),0);(0,i.useEffect)((()=>{const t=()=>x(window.innerWidth<768);return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]);const $=v,X=t=>{S(t),C("error"===t.type),"success"===t.type&&(window.innerWidth<768&&window.scrollTo({top:0,behavior:"smooth"}),setTimeout((()=>S(null)),4e3))},J=t=>{const{name:e,value:n}=t.target;M((t=>c(c({},t),{},{[e]:n})))},Z=()=>{N(null),M(null)},tt=async()=>{if(D){A(!0),console.log("DEBUG: handleEditSave called",D,T);try{if(("venta"===D.type||"compra"===D.type)&&(!D.plantId||!D.quantity))return X({type:"error",text:"Producto y cantidad requeridos para ventas/compras."}),void A(!1);const t=c({},D);"venta"!==D.type&&"compra"!==D.type?(delete t.quantity,delete t.price,delete t.plantId):(t.quantity=Number(D.quantity),t.price=Number(D.price),t.plantId=D.plantId),t.total=D.total?Number(D.total):0;const e=Dl(Cc,"movements",T);console.log("DEBUG: updateDoc",e,t),await xc(e,t),X({type:"success",text:"Movimiento actualizado."}),N(null),M(null)}catch(t){console.error("ERROR en handleEditSave:",t),X({type:"error",text:"Error al actualizar el movimiento."})}A(!1)}},et=t=>{if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const n=t=>String(t).padStart(2,"0");return"".concat(e.getFullYear(),"-").concat(n(e.getMonth()+1),"-").concat(n(e.getDate()),"T").concat(n(e.getHours()),":").concat(n(e.getMinutes()))};return(0,Tc.jsxs)("div",{children:[(0,Tc.jsx)("div",{className:"sticky top-0 z-20 bg-white border border-gray-100 rounded-xl shadow-md px-2 py-1 w-full mx-0 mt-6",children:!n&&(0,Tc.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),_(""),console.log("DEBUG: handleSubmit called",h,V);let e=h.total,n=h.price;if("venta"===h.type||"compra"===h.type){if(0===V.length)return void _("Agregue al menos un producto.");e=V.reduce(((t,e)=>t+e.total),0)}if("venta"===h.type||"compra"===h.type?(e||(e=0),n=""):(!e&&h.price&&(e=Number(h.price).toFixed(2)),n=h.price?Number(h.price).toFixed(2):""),("venta"===h.type||"compra"===h.type)&&0===V.length)return void _("Agregue al menos un producto.");if("egreso"===h.type){const t=Number(h.price);if("mercadoPago"===h.paymentMethod&&t>q)return _("No hay saldo suficiente en Mercado Pago para realizar esta operaci\xf3n."),X({type:"error",text:"No hay saldo suficiente en Mercado Pago para realizar esta operaci\xf3n."}),void C(!0);if("efectivo"===h.paymentMethod&&t>W)return _("No hay saldo suficiente en Efectivo para realizar esta operaci\xf3n."),X({type:"error",text:"No hay saldo suficiente en Efectivo para realizar esta operaci\xf3n."}),void C(!0)}let i,r=h.date;if("venta"===h.type&&$){const t=ru((new Date).toISOString().slice(0,16),"America/Argentina/Buenos_Aires");i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()))}else if(r&&10===r.length){const t=ru(r+"T00:00","America/Argentina/Buenos_Aires");i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()))}else if(r&&16===r.length){const t=ru(r,"America/Argentina/Buenos_Aires");i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()))}else{const t=ru((new Date).toISOString().slice(0,16),"America/Argentina/Buenos_Aires");i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()))}const s=i.toISOString();try{if(console.log("DEBUG: Intentando guardar movimiento",h,V),"venta"===h.type||"compra"===h.type){for(const t of V){if("venta"===h.type){const e=Dl(Cc,"plants",String(t.plantId)),n=await yc(e);if(!n.exists())return void _("Producto no encontrado en inventario.");const i=n.data().stock||0;if(i<t.quantity)return void _("Stock insuficiente para ".concat(t.name,". Disponible: ").concat(i));await xc(e,{stock:i-t.quantity})}if("compra"===h.type){const e=Dl(Cc,"plants",String(t.plantId)),n=await yc(e);if(!n.exists())return void _("Producto no encontrado en inventario.");const i=n.data().stock||0;await xc(e,{stock:i+t.quantity})}const e=c(c({},h),{},{plantId:t.plantId,quantity:t.quantity,price:t.price,total:t.total,detail:"",date:s});delete e.products,await _c(Nl(Cc,"movements"),e)}X({type:"success",text:("venta"===h.type?"Venta":"Compra")+" registrada correctamente"}),z([]),U({plantId:"",quantity:1,price:""})}else{let t=c(c({},h),{},{total:Number(e),price:n?Number(n):void 0,date:s});delete t.quantity,delete t.plantId,await _c(Nl(Cc,"movements"),t),X({type:"success",text:"Movimiento registrado correctamente"})}d({type:"venta",detail:"",plantId:"",quantity:1,price:"",total:"",paymentMethod:"efectivo",date:(new Date).toISOString().slice(0,16),location:"",notes:""})}catch(a){_("Error al registrar el movimiento"),X({type:"error",text:"Error al registrar el movimiento"}),C(!0),console.error("ERROR al guardar movimiento:",a)}},className:"flex flex-row flex-wrap gap-1 items-end w-full text-xs",children:[(0,Tc.jsxs)("div",{className:"flex flex-col min-w-[110px] max-w-[130px]",children:[(0,Tc.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Tipo"}),(0,Tc.jsx)("select",{name:"type",value:h.type,onChange:H,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs",children:su.map((t=>(0,Tc.jsx)("option",{value:t.value,children:t.label},t.value)))})]}),"venta"===h.type||"compra"===h.type?(0,Tc.jsxs)(Tc.Fragment,{children:[(0,Tc.jsxs)("div",{className:"flex flex-col min-w-[120px] max-w-[160px]",children:[(0,Tc.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Producto"}),(0,Tc.jsxs)("select",{name:"plantId",value:B.plantId,onChange:K,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs",children:[(0,Tc.jsx)("option",{value:"",children:"Seleccionar..."}),a.map((t=>(0,Tc.jsx)("option",{value:t.id,children:t.name},t.id)))]})]}),(0,Tc.jsxs)("div",{className:"flex flex-col min-w-[60px] max-w-[80px]",children:[(0,Tc.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Cantidad"}),(0,Tc.jsx)("input",{type:"number",name:"quantity",min:"1",value:B.quantity,onChange:K,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs"})]}),(0,Tc.jsxs)("div",{className:"flex flex-col min-w-[70px] max-w-[90px]",children:[(0,Tc.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Precio"}),(0,Tc.jsx)("input",{type:"number",name:"price",min:"0",value:B.price,onChange:K,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs"})]}),(0,Tc.jsx)("button",{type:"button",onClick:()=>(async t=>{if((null===t||void 0===t?void 0:t.preventDefault)&&t.preventDefault(),!B.plantId||!B.quantity||!B.price)return;if("venta"===h.type){const t=a.find((t=>String(t.id)===String(B.plantId)));if(!t)return void _("Producto no encontrado en inventario.");const e=t.stock||0;if(e<Number(B.quantity))return void _("Stock insuficiente para ".concat(t.name,". Disponible: ").concat(e))}const e=a.find((t=>String(t.id)===String(B.plantId)));z((t=>[...t,{plantId:B.plantId,name:(null===e||void 0===e?void 0:e.name)||"",quantity:Number(B.quantity),price:Number(B.price),total:Number(B.quantity)*Number(B.price)}])),U({plantId:"",quantity:1,price:""}),_("")})(),className:"bg-blue-600 text-white px-2 py-1 rounded text-xs mt-4",id:"btn-agregar-producto",children:"Agregar"}),(0,Tc.jsxs)("div",{className:"w-full mt-2",children:[V.length>0&&(0,Tc.jsxs)("table",{className:"w-full text-xs border border-gray-200 mb-2",children:[(0,Tc.jsx)("thead",{children:(0,Tc.jsxs)("tr",{children:[(0,Tc.jsx)("th",{className:"border px-1",children:"Producto"}),(0,Tc.jsx)("th",{className:"border px-1",children:"Cantidad"}),(0,Tc.jsx)("th",{className:"border px-1",children:"Precio"}),(0,Tc.jsx)("th",{className:"border px-1",children:"Subtotal"}),(0,Tc.jsx)("th",{className:"border px-1"})]})}),(0,Tc.jsx)("tbody",{children:V.map(((t,e)=>(0,Tc.jsxs)("tr",{children:[(0,Tc.jsx)("td",{className:"border px-1",children:t.name}),(0,Tc.jsx)("td",{className:"border px-1 text-right",children:t.quantity}),(0,Tc.jsxs)("td",{className:"border px-1 text-right",children:["$",t.price]}),(0,Tc.jsxs)("td",{className:"border px-1 text-right",children:["$",t.total]}),(0,Tc.jsx)("td",{className:"border px-1 text-center",children:(0,Tc.jsx)("button",{type:"button",onClick:()=>(t=>{z((e=>e.filter(((e,n)=>n!==t))))})(e),className:"text-red-600",children:"\u2715"})})]},e)))})]}),V.length>0&&(0,Tc.jsxs)("div",{className:"text-right font-bold text-green-700 pr-2",children:["Total: $",Y]})]})]}):(0,Tc.jsx)(Tc.Fragment,{}),(0,Tc.jsxs)("div",{className:"flex flex-col min-w-[90px] max-w-[110px]",children:[(0,Tc.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Pago"}),(0,Tc.jsx)("select",{name:"paymentMethod",value:h.paymentMethod,onChange:H,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs",children:au.map((t=>(0,Tc.jsx)("option",{value:t.value,children:t.label},t.value)))})]}),(0,Tc.jsxs)("div",{className:"flex flex-col min-w-[110px] max-w-[130px]",children:[(0,Tc.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Fecha"}),(0,Tc.jsx)("input",{type:"datetime-local",name:"date",value:h.date,onChange:H,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs"})]}),(0,Tc.jsxs)("div",{className:"flex flex-col min-w-[80px] max-w-[100px]",children:[(0,Tc.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Lugar"}),(0,Tc.jsx)("input",{name:"location",value:h.location,onChange:H,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs"})]}),(0,Tc.jsxs)("div",{className:"flex flex-col min-w-[100px] max-w-[120px]",children:[(0,Tc.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Notas"}),(0,Tc.jsx)("input",{name:"notes",value:h.notes,onChange:H,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs"})]}),(0,Tc.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-2 py-1 rounded font-semibold text-xs ml-2",id:"btn-registrar-venta",children:"venta"===h.type?"Registrar Venta":"Registrar"})]})}),(0,Tc.jsxs)("div",{className:"mt-6 p-3 bg-white rounded-lg shadow w-full mx-0",children:[(0,Tc.jsx)("h2",{className:"text-base font-bold mb-2",children:"Hist\xf3rico de Movimientos del Mes"}),F.length>0?(0,Tc.jsxs)("table",{className:"w-full border-collapse border border-gray-200 text-xs",children:[(0,Tc.jsx)("thead",{children:(0,Tc.jsxs)("tr",{children:[(0,Tc.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Fecha"}),(0,Tc.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Producto"}),(0,Tc.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Cantidad"}),(0,Tc.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Precio"}),(0,Tc.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Total"}),(0,Tc.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"M\xe9todo de Pago"}),(0,Tc.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Tipo"}),(0,Tc.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Lugar"}),(0,Tc.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Notas"}),(0,Tc.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Acciones"})]})}),(0,Tc.jsx)("tbody",{children:F.map((t=>{var e,n,i,r,s,o,l,u;let h="";"ingreso"===t.type&&(h="bg-green-100 text-green-900"),"egreso"===t.type&&(h="bg-black text-white"),"compra"===t.type&&(h="bg-red-600 text-white"),"gasto"===t.type&&(h="bg-orange-500 text-white");const d=T===t.id;return(0,Tc.jsx)("tr",{className:h,children:d?(0,Tc.jsxs)(Tc.Fragment,{children:[(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Tc.jsx)("input",{type:"datetime-local",name:"date",value:et(D.date),onChange:J,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5"})}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:"venta"===D.type||"compra"===D.type?(0,Tc.jsxs)("select",{name:"plantId",value:D.plantId||"",onChange:J,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5",children:[(0,Tc.jsx)("option",{value:"",children:"-"}),a.map((t=>(0,Tc.jsx)("option",{value:t.id,children:t.name},t.id)))]}):"-"}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:"venta"===D.type||"compra"===D.type?(0,Tc.jsx)("input",{type:"number",name:"quantity",min:"1",value:null!==(e=D.quantity)&&void 0!==e?e:"",onChange:J,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5"}):""}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Tc.jsx)("input",{type:"number",name:"price",value:null!==(n=D.price)&&void 0!==n?n:"",onChange:J,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5"})}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Tc.jsx)("input",{type:"number",name:"total",value:null!==(i=D.total)&&void 0!==i?i:"",onChange:J,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5"})}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Tc.jsx)("select",{name:"paymentMethod",value:D.paymentMethod||"",onChange:J,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5",children:au.map((t=>(0,Tc.jsx)("option",{value:t.value,children:t.label},t.value)))})}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Tc.jsx)("select",{name:"type",value:D.type||"",onChange:J,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5",children:su.map((t=>(0,Tc.jsx)("option",{value:t.value,children:t.label},t.value)))})}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Tc.jsx)("input",{name:"location",value:null!==(r=D.location)&&void 0!==r?r:"",onChange:J,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5"})}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Tc.jsx)("input",{name:"notes",value:null!==(s=D.notes)&&void 0!==s?s:"",onChange:J,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5"})}),(0,Tc.jsxs)("td",{className:"border border-gray-200 px-2 py-1 flex gap-1",children:[(0,Tc.jsx)("button",{type:"button",onClick:tt,className:"bg-green-600 text-white px-2 py-1 rounded text-xs",disabled:I,children:I?"Guardando...":"Guardar"}),(0,Tc.jsx)("button",{type:"button",onClick:Z,className:"bg-gray-400 text-white px-2 py-1 rounded text-xs",disabled:I,children:"Cancelar"})]})]}):(0,Tc.jsxs)(Tc.Fragment,{children:[(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:t.date?new Date(t.date).toLocaleString("es-AR",{timeZone:"America/Argentina/Buenos_Aires",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:a&&t.plantId&&((null===(o=a.find((e=>String(e.id)===String(t.plantId))))||void 0===o?void 0:o.name)||t.plantId)||"-"}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1 text-right",children:("venta"===t.type||"compra"===t.type)&&t.products&&Array.isArray(t.products)?t.products.reduce(((t,e)=>t+(Number(e.quantity)||0)),0):"venta"===t.type||"compra"===t.type?t.quantity:""}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1 text-right",children:("venta"===t.type||"compra"===t.type)&&t.products&&Array.isArray(t.products)?"":t.price?"$".concat(t.price):""}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1 text-right",children:t.total?"$".concat(t.total):""}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(null===(l=au.find((e=>e.value===t.paymentMethod)))||void 0===l?void 0:l.label)||t.paymentMethod}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(null===(u=su.find((e=>e.value===t.type)))||void 0===u?void 0:u.label)||t.type}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:t.location}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:t.notes}),(0,Tc.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Tc.jsx)("button",{onClick:()=>(t=>{N(t.id),M(c({},t))})(t),className:"bg-blue-500 text-white px-2 py-1 rounded text-xs",children:"Editar"})})]})},t.id)}))})]}):(0,Tc.jsx)("p",{className:"text-gray-500 text-xs",children:"No hay movimientos registrados este mes."})]}),(0,Tc.jsx)("div",{style:{display:"none"},children:(0,i.useEffect)((()=>{console.log("PLANTS:",a),console.log("MOVEMENTS:",l)}),[a,l])})]})},lu=t=>{const[e,n]=(0,i.useState)([]);(0,i.useEffect)((()=>{const t=kc(Nl(Cc,"movements"),(t=>{const e=new Date,i=e.getDate(),r=e.getMonth(),s=e.getFullYear(),a=t.docs.map((t=>c({id:t.id},t.data()))).filter((t=>{if(!t.date)return!1;const e=new Date(t.date);return!isNaN(e.getTime())&&(("compra"===t.type||"egreso"===t.type)&&e.getDate()===i&&e.getMonth()===r&&e.getFullYear()===s)}));n(a)}));return()=>t()}),[]);const r={sucursal:{bg:"bg-blue-50",border:"border-blue-400",text:"text-blue-700"},deposito:{bg:"bg-yellow-50",border:"border-yellow-400",text:"text-yellow-700"},online:{bg:"bg-purple-50",border:"border-purple-400",text:"text-purple-700"},"":{bg:"bg-green-50",border:"border-green-400",text:"text-green-700"}};t.lugar||t.location;return(0,Tc.jsx)("div",{className:"relative min-h-screen bg-gray-50 pb-24",children:(0,Tc.jsxs)("div",{className:"rounded-lg shadow bg-white p-3",children:[(0,Tc.jsx)(ou,c(c({},t),{},{showOnlyForm:!0,renderTotals:t=>(0,Tc.jsxs)(Tc.Fragment,{children:[(0,Tc.jsxs)("div",{className:"mt-6 w-full max-w-xl mx-auto flex flex-wrap gap-2 sm:gap-4 justify-center",children:[(0,Tc.jsxs)("div",{className:"flex-1 min-w-[110px] bg-green-100 rounded-lg shadow p-2 sm:p-4 flex flex-col items-center border border-green-300",children:[(0,Tc.jsx)("span",{className:"text-gray-500 text-xs sm:text-sm",children:"Efectivo"}),(0,Tc.jsxs)("span",{className:"text-lg sm:text-2xl font-bold text-green-700 truncate",children:["$",t.cajaFisicaDia.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,Tc.jsxs)("div",{className:"flex-1 min-w-[110px] bg-blue-100 rounded-lg shadow p-2 sm:p-4 flex flex-col items-center border border-blue-300",children:[(0,Tc.jsx)("span",{className:"text-gray-500 text-xs sm:text-sm",children:"Mercado Pago"}),(0,Tc.jsxs)("span",{className:"text-lg sm:text-2xl font-bold text-blue-700 truncate",children:["$",t.cajaMPDia.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,Tc.jsxs)("div",{className:"flex-1 min-w-[110px] bg-yellow-100 rounded-lg shadow p-2 sm:p-4 flex flex-col items-center border border-yellow-300",children:[(0,Tc.jsx)("span",{className:"text-gray-500 text-xs sm:text-sm",children:"Total"}),(0,Tc.jsxs)("span",{className:"text-lg sm:text-2xl font-bold text-yellow-700 truncate",children:["$",t.totalGeneralDia.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),(0,Tc.jsx)("div",{className:"mt-4 w-full max-w-xl mx-auto flex flex-row gap-4 justify-center",children:(0,Tc.jsxs)("div",{className:"flex-1 bg-purple-100 rounded-lg shadow p-4 flex flex-col items-center border border-purple-300",children:[(0,Tc.jsx)("span",{className:"text-gray-500 text-sm",children:"Art\xedculos vendidos hoy"}),(0,Tc.jsx)("span",{className:"text-2xl font-bold text-purple-700",children:t.cantidadProductosVendidosDia})]})})]})})),(0,Tc.jsx)("div",{className:"mt-8 w-full max-w-xl mx-auto",children:e.length>0&&(0,Tc.jsxs)("div",{className:"rounded-lg bg-red-50 border border-red-200 shadow-sm p-2 mt-2",children:[(0,Tc.jsx)("div",{className:"text-xs font-semibold text-red-700 mb-2 text-center",children:"Compras y egresos de hoy"}),(0,Tc.jsxs)("ul",{className:"divide-y divide-red-100",children:[(0,Tc.jsxs)("li",{className:"flex flex-row items-center justify-between px-1 py-1 text-xs font-semibold text-red-800 bg-red-100 rounded mb-1",children:[(0,Tc.jsx)("span",{className:"w-14 text-left",children:"Fecha"}),(0,Tc.jsx)("span",{className:"w-20 text-center",children:"Total"}),(0,Tc.jsx)("span",{className:"w-14 text-center",children:"M\xe9todo"}),(0,Tc.jsx)("span",{className:"flex-1 px-2 text-left",children:"Lugar"}),(0,Tc.jsx)("span",{className:"max-w-[80px] text-left",children:"Nota"})]}),e.map(((t,e)=>{var n;return(0,Tc.jsxs)("li",{className:"flex flex-row items-center justify-between px-1 py-1 text-xs",children:[(0,Tc.jsx)("span",{className:"text-gray-700 w-14 text-left",children:new Date(t.date).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit"})}),(0,Tc.jsxs)("span",{className:"font-semibold text-red-700 w-20 text-center",children:["$",null===(n=t.total)||void 0===n?void 0:n.toLocaleString("es-AR",{minimumFractionDigits:2})]}),(0,Tc.jsx)("span",{className:"text-gray-700 w-14 text-center",children:"efectivo"===t.paymentMethod?"Efectivo":"mercadoPago"===t.paymentMethod?"MP":"-"}),(0,Tc.jsx)("span",{className:"text-gray-600 flex-1 px-2 truncate text-left",children:t.location||"-"}),(0,Tc.jsx)("span",{className:"text-gray-500 max-w-[80px] truncate text-left ml-2",children:t.notes||"-"})]},t.id||e)}))]})]})})]})})},cu=t=>{const[e,n]=(0,i.useState)(window.innerWidth<768);return(0,i.useEffect)((()=>{const t=()=>n(window.innerWidth<768);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),e?(0,Tc.jsx)(lu,c({},t)):(0,Tc.jsx)("div",{className:"max-w-full mx-auto px-6 space-y-8",children:(0,Tc.jsx)(ou,c({},t))})};function uu(t){return t+.5|0}const hu=(t,e,n)=>Math.max(Math.min(t,n),e);function du(t){return hu(uu(2.55*t),0,255)}function fu(t){return hu(uu(255*t),0,255)}function pu(t){return hu(uu(t/2.55)/100,0,1)}function gu(t){return hu(uu(100*t),0,100)}const mu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yu=[..."0123456789ABCDEF"],bu=t=>yu[15&t],vu=t=>yu[(240&t)>>4]+yu[15&t],xu=t=>(240&t)>>4===(15&t);function wu(t){var e=(t=>xu(t.r)&&xu(t.g)&&xu(t.b)&&xu(t.a))(t)?bu:vu;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const _u=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ku(t,e,n){const i=e*Math.min(n,1-n),r=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function Su(t,e,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+t/60)%6;return n-n*e*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function Eu(t,e,n){const i=ku(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function Cu(t){const e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),s=Math.min(e,n,i),a=(r+s)/2;let o,l,c;return r!==s&&(c=r-s,l=a>.5?c/(2-r-s):c/(r+s),o=function(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}(e,n,i,c,r),o=60*o+.5),[0|o,l||0,a]}function Tu(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(fu)}function Nu(t,e,n){return Tu(ku,t,e,n)}function Du(t){return(t%360+360)%360}function Mu(t){const e=_u.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?du(+e[5]):fu(+e[5]));const r=Du(+e[2]),s=+e[3]/100,a=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return Tu(Eu,t,e,n)}(r,s,a):"hsv"===e[1]?function(t,e,n){return Tu(Su,t,e,n)}(r,s,a):Nu(r,s,a),{r:n[0],g:n[1],b:n[2],a:i}}const Iu={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Au={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Pu;function Ou(t){Pu||(Pu=function(){const t={},e=Object.keys(Au),n=Object.keys(Iu);let i,r,s,a,o;for(i=0;i<e.length;i++){for(a=o=e[i],r=0;r<n.length;r++)s=n[r],o=o.replace(s,Iu[s]);s=parseInt(Au[a],16),t[o]=[s>>16&255,s>>8&255,255&s]}return t}(),Pu.transparent=[0,0,0,0]);const e=Pu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const Lu=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Ru=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,ju=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Fu(t,e,n){if(t){let i=Cu(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=Nu(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Vu(t,e){return t?Object.assign(e||{},t):t}function zu(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=fu(t[3]))):(e=Vu(t,{r:0,g:0,b:0,a:1})).a=fu(e.a),e}function Bu(t){return"r"===t.charAt(0)?function(t){const e=Lu.exec(t);let n,i,r,s=255;if(e){if(e[7]!==n){const t=+e[7];s=e[8]?du(t):hu(255*t,0,255)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?du(n):hu(n,0,255)),i=255&(e[4]?du(i):hu(i,0,255)),r=255&(e[6]?du(r):hu(r,0,255)),{r:n,g:i,b:r,a:s}}}(t):Mu(t)}class Uu{constructor(t){if(t instanceof Uu)return t;const e=typeof t;let n;"object"===e?n=zu(t):"string"===e&&(n=function(t){var e,n=t.length;return"#"===t[0]&&(4===n||5===n?e={r:255&17*mu[t[1]],g:255&17*mu[t[2]],b:255&17*mu[t[3]],a:5===n?17*mu[t[4]]:255}:7!==n&&9!==n||(e={r:mu[t[1]]<<4|mu[t[2]],g:mu[t[3]]<<4|mu[t[4]],b:mu[t[5]]<<4|mu[t[6]],a:9===n?mu[t[7]]<<4|mu[t[8]]:255})),e}(t)||Ou(t)||Bu(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Vu(this._rgb);return t&&(t.a=pu(t.a)),t}set rgb(t){this._rgb=zu(t)}rgbString(){return this._valid?function(t){return t&&(t.a<255?"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(pu(t.a),")"):"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")"))}(this._rgb):void 0}hexString(){return this._valid?wu(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=Cu(t),n=e[0],i=gu(e[1]),r=gu(e[2]);return t.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(pu(t.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let r;const s=e===r?.5:e,a=2*s-1,o=n.a-i.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const i=ju(pu(t.r)),r=ju(pu(t.g)),s=ju(pu(t.b));return{r:fu(Ru(i+n*(ju(pu(e.r))-i))),g:fu(Ru(r+n*(ju(pu(e.g))-r))),b:fu(Ru(s+n*(ju(pu(e.b))-s))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new Uu(this.rgb)}alpha(t){return this._rgb.a=fu(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=uu(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Fu(this._rgb,2,t),this}darken(t){return Fu(this._rgb,2,-t),this}saturate(t){return Fu(this._rgb,1,t),this}desaturate(t){return Fu(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=Cu(t);n[0]=Du(n[0]+e),n=Nu(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function Hu(){}const Wu=(()=>{let t=0;return()=>t++})();function qu(t){return null===t||void 0===t}function Ku(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Yu(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function Qu(t){return("number"===typeof t||t instanceof Number)&&isFinite(+t)}function Gu(t,e){return Qu(t)?t:e}function $u(t,e){return"undefined"===typeof t?e:t}const Xu=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ju(t,e,n){if(t&&"function"===typeof t.call)return t.apply(n,e)}function Zu(t,e,n,i){let r,s,a;if(Ku(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(Yu(t))for(a=Object.keys(t),s=a.length,r=0;r<s;r++)e.call(n,t[a[r]],a[r])}function th(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function eh(t){if(Ku(t))return t.map(eh);if(Yu(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=eh(t[n[r]]);return e}return t}function nh(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function ih(t,e,n,i){if(!nh(t))return;const r=e[t],s=n[t];Yu(r)&&Yu(s)?rh(r,s,i):e[t]=eh(s)}function rh(t,e,n){const i=Ku(e)?e:[e],r=i.length;if(!Yu(t))return t;const s=(n=n||{}).merger||ih;let a;for(let o=0;o<r;++o){if(a=i[o],!Yu(a))continue;const e=Object.keys(a);for(let i=0,r=e.length;i<r;++i)s(e[i],t,a,n)}return t}function sh(t,e){return rh(t,e,{merger:ah})}function ah(t,e,n){if(!nh(t))return;const i=e[t],r=n[t];Yu(i)&&Yu(r)?sh(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=eh(r))}const oh={"":t=>t,x:t=>t.x,y:t=>t.y};function lh(t,e){const n=oh[e]||(oh[e]=function(t){const e=function(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function ch(t){return t.charAt(0).toUpperCase()+t.slice(1)}const uh=t=>"undefined"!==typeof t,hh=t=>"function"===typeof t,dh=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const fh=Math.PI,ph=2*fh,gh=ph+fh,mh=Number.POSITIVE_INFINITY,yh=fh/180,bh=fh/2,vh=fh/4,xh=2*fh/3,wh=Math.log10,_h=Math.sign;function kh(t,e,n){return Math.abs(t-e)<n}function Sh(t){const e=Math.round(t);t=kh(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(wh(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Eh(t){return!function(t){return"symbol"===typeof t||"object"===typeof t&&null!==t&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Ch(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Th(t){return t*(fh/180)}function Nh(t){return t*(180/fh)}function Dh(t){if(!Qu(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Mh(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*fh&&(s+=ph),{angle:s,distance:r}}function Ih(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ah(t,e){return(t-e+gh)%ph-fh}function Ph(t){return(t%ph+ph)%ph}function Oh(t,e,n,i){const r=Ph(t),s=Ph(e),a=Ph(n),o=Ph(s-r),l=Ph(a-r),c=Ph(r-s),u=Ph(r-a);return r===s||r===a||i&&s===a||o>l&&c<u}function Lh(t,e,n){return Math.max(e,Math.min(n,t))}function Rh(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function jh(t,e,n){n=n||(n=>t[n]<e);let i,r=t.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Fh=(t,e,n,i)=>jh(t,n,i?i=>{const r=t[i][e];return r<n||r===n&&t[i+1][e]===n}:i=>t[i][e]<n),Vh=(t,e,n)=>jh(t,n,(i=>t[i][e]>=n));const zh=["push","pop","shift","splice","unshift"];function Bh(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||(zh.forEach((e=>{delete t[e]})),delete t._chartjs)}function Uh(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Hh="undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame;function Wh(t,e){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];n=s,i||(i=!0,Hh.call(window,(()=>{i=!1,t.apply(e,n)})))}}const qh=t=>"start"===t?"left":"end"===t?"right":"center",Kh=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function Yh(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:a,vScale:o,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=a.axis,{min:h,max:d,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(r=Math.min(Fh(l,u,h).lo,n?i:Fh(e,u,a.getPixelForValue(h)).lo),c){const t=l.slice(0,r+1).reverse().findIndex((t=>!qu(t[o.axis])));r-=Math.max(0,t)}r=Lh(r,0,i-1)}if(p){let t=Math.max(Fh(l,a.axis,d,!0).hi+1,n?0:Fh(e,u,a.getPixelForValue(d),!0).hi+1);if(c){const e=l.slice(t-1).findIndex((t=>!qu(t[o.axis])));t+=Math.max(0,e)}s=Lh(t,r,i)-r}else s=i-r}return{start:r,count:s}}function Qh(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Gh=t=>0===t||1===t,$h=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*ph/n),Xh=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ph/n)+1,Jh={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*bh),easeOutSine:t=>Math.sin(t*bh),easeInOutSine:t=>-.5*(Math.cos(fh*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Gh(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Gh(t)?t:$h(t,.075,.3),easeOutElastic:t=>Gh(t)?t:Xh(t,.075,.3),easeInOutElastic(t){const e=.1125;return Gh(t)?t:t<.5?.5*$h(2*t,e,.45):.5+.5*Xh(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Jh.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*Jh.easeInBounce(2*t):.5*Jh.easeOutBounce(2*t-1)+.5};function Zh(t){if(t&&"object"===typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function td(t){return Zh(t)?t:new Uu(t)}function ed(t){return Zh(t)?t:new Uu(t).saturate(.5).darken(.1).hexString()}const nd=["x","y","borderWidth","radius","tension"],id=["color","borderColor","backgroundColor"];const rd=new Map;function sd(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=rd.get(n);return i||(i=new Intl.NumberFormat(t,e),rd.set(n,i)),i}(e,n).format(t)}const ad={values:t=>Ku(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),s=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const a=wh(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),sd(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(wh(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?ad.numeric.call(this,t,e,n):""}};var od={formatters:ad};const ld=Object.create(null),cd=Object.create(null);function ud(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const e=n[i];t=t[e]||(t[e]=Object.create(null))}return t}function hd(t,e,n){return"string"===typeof e?rh(ud(t,e),n):rh(ud(t,""),e)}class dd{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>ed(e.backgroundColor),this.hoverBorderColor=(t,e)=>ed(e.borderColor),this.hoverColor=(t,e)=>ed(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return hd(this,t,e)}get(t){return ud(this,t)}describe(t,e){return hd(cd,t,e)}override(t,e){return hd(ld,t,e)}route(t,e,n,i){const r=ud(this,t),s=ud(this,n),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=s[i];return Yu(t)?Object.assign({},e,t):$u(t,e)},set(t){this[a]=t}}})}apply(t){t.forEach((t=>t(this)))}}var fd=new dd({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:id},numbers:{type:"number",properties:nd}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:od.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function pd(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function gd(t,e,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let a=0;const o=n.length;let l,c,u,h,d;for(l=0;l<o;l++)if(h=n[l],void 0===h||null===h||Ku(h)){if(Ku(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||Ku(d)||(a=pd(t,r,s,a,d))}else a=pd(t,r,s,a,h);t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return a}function md(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function yd(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function bd(t,e,n,i){vd(t,e,n,i,null)}function vd(t,e,n,i,r){let s,a,o,l,c,u,h,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*yh;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,i),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,g,0,0,ph):t.arc(n,i,g,0,ph),t.closePath();break;case"triangle":u=r?r/2:g,t.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=xh,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=xh,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=.516*g,l=g-c,a=Math.cos(m+vh)*l,h=Math.cos(m+vh)*(r?r/2-c:l),o=Math.sin(m+vh)*l,d=Math.sin(m+vh)*(r?r/2-c:l),t.arc(n-h,i-o,c,m-fh,m-bh),t.arc(n+d,i-a,c,m-bh,m),t.arc(n+h,i+o,c,m,m+bh),t.arc(n-d,i+a,c,m+bh,m+fh),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}m+=vh;case"rectRot":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-o),t.lineTo(n+d,i-a),t.lineTo(n+h,i+o),t.lineTo(n-d,i+a),t.closePath();break;case"crossRot":m+=vh;case"cross":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-o),t.lineTo(n+h,i+o),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a);break;case"star":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-o),t.lineTo(n+h,i+o),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a),m+=vh,h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-o),t.lineTo(n+h,i+o),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a);break;case"line":a=r?r/2:Math.cos(m)*g,o=Math.sin(m)*g,t.moveTo(n-a,i-o),t.lineTo(n+a,i+o);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function xd(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function wd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function _d(t){t.restore()}function kd(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===r!==!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Sd(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Ed(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),a=e-s.actualBoundingBoxLeft,o=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(a,u),t.lineTo(o,u),t.stroke()}}function Cd(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Td(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=Ku(e)?e:[e],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(t.save(),t.font=r.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),qu(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&Cd(t,s.backdrop),o&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),qu(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),Ed(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function Nd(t,e){const{x:n,y:i,w:r,h:s,radius:a}=e;t.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*fh,fh,!0),t.lineTo(n,i+s-a.bottomLeft),t.arc(n+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,fh,bh,!0),t.lineTo(n+r-a.bottomRight,i+s),t.arc(n+r-a.bottomRight,i+s-a.bottomRight,a.bottomRight,bh,0,!0),t.lineTo(n+r,i+a.topRight),t.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-bh,!0),t.lineTo(n+a.topLeft,i)}const Dd=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Md=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Id(t,e){const n=(""+t).match(Dd);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const Ad=t=>+t||0;function Pd(t,e){const n={},i=Yu(e),r=i?Object.keys(e):e,s=Yu(t)?i?n=>$u(t[n],t[e[n]]):e=>t[e]:()=>t;for(const a of r)n[a]=Ad(s(a));return n}function Od(t){return Pd(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ld(t){return Pd(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Rd(t){const e=Od(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function jd(t,e){t=t||{},e=e||fd.font;let n=$u(t.size,e.size);"string"===typeof n&&(n=parseInt(n,10));let i=$u(t.style,e.style);i&&!(""+i).match(Md)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:$u(t.family,e.family),lineHeight:Id($u(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:$u(t.weight,e.weight),string:""};return r.string=function(t){return!t||qu(t.size)||qu(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r}function Fd(t,e,n,i){let r,s,a,o=!0;for(r=0,s=t.length;r<s;++r)if(a=t[r],void 0!==a&&(void 0!==e&&"function"===typeof a&&(a=a(e),o=!1),void 0!==n&&Ku(a)&&(a=a[n%a.length],o=!1),void 0!==a))return i&&!o&&(i.cacheable=!1),a}function Vd(t,e){return Object.assign(Object.create(t),e)}function zd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>t[0];const r=(arguments.length>2?arguments[2]:void 0)||t;"undefined"===typeof n&&(n=Xd("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>zd([i,...t],e,r,n)};return new Proxy(s,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>qd(n,i,(()=>function(t,e,n,i){let r;for(const s of e)if(r=Xd(Hd(s,t),n),"undefined"!==typeof r)return Wd(t,r)?Gd(n,i,t,r):r}(i,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>Jd(t).includes(e),ownKeys:t=>Jd(t),set(t,e,n){const r=t._storage||(t._storage=i());return t[e]=r[e]=n,delete t._keys,!0}})}function Bd(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Ud(t,i),setContext:e=>Bd(t,e,n,i),override:r=>Bd(t.override(r),e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>qd(t,e,(()=>function(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:a}=t;let o=i[e];hh(o)&&a.isScriptable(e)&&(o=function(t,e,n,i){const{_proxy:r,_context:s,_subProxy:a,_stack:o}=n;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(s,a||i);o.delete(t),Wd(t,l)&&(l=Gd(r._scopes,r,t,l));return l}(e,o,t,n));Ku(o)&&o.length&&(o=function(t,e,n,i){const{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof s.index&&i(t))return e[s.index%e.length];if(Yu(e[0])){const n=e,i=r._scopes.filter((t=>t!==n));e=[];for(const l of n){const n=Gd(i,r,t,l);e.push(Bd(n,s,a&&a[t],o))}}return e}(e,o,t,a.isIndexable));Wd(e,o)&&(o=Bd(o,r,s&&s[e],a));return o}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function Ud(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:hh(n)?n:()=>n,isIndexable:hh(i)?i:()=>i}}const Hd=(t,e)=>t?t+ch(e):e,Wd=(t,e)=>Yu(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function qd(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const i=n();return t[e]=i,i}function Kd(t,e,n){return hh(t)?t(e,n):t}const Yd=(t,e)=>!0===t?e:"string"===typeof t?lh(e,t):void 0;function Qd(t,e,n,i,r){for(const s of e){const e=Yd(n,s);if(e){t.add(e);const s=Kd(e._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===e&&"undefined"!==typeof i&&n!==i)return null}return!1}function Gd(t,e,n,i){const r=e._rootScopes,s=Kd(e._fallback,n,i),a=[...t,...r],o=new Set;o.add(i);let l=$d(o,a,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=$d(o,a,s,l,i),null!==l))&&zd(Array.from(o),[""],r,s,(()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];if(Ku(r)&&Yu(n))return n;return r||{}}(e,n,i))))}function $d(t,e,n,i,r){for(;n;)n=Qd(t,e,n,i,r);return n}function Xd(t,e){for(const n of e){if(!n)continue;const e=n[t];if("undefined"!==typeof e)return e}}function Jd(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function Zd(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=e[c],a[o]={r:r.parse(lh(u,s),c)};return a}const tf=Number.EPSILON||1e-14,ef=(t,e)=>e<t.length&&!t[e].skip&&t[e],nf=t=>"x"===t?"y":"x";function rf(t,e,n,i){const r=t.skip?e:t,s=e,a=n.skip?e:n,o=Ih(s,r),l=Ih(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(a.x-r.x),y:s.y-h*(a.y-r.y)},next:{x:s.x+d*(a.x-r.x),y:s.y+d*(a.y-r.y)}}}function sf(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=nf(e),i=t.length,r=Array(i).fill(0),s=Array(i);let a,o,l,c=ef(t,0);for(a=0;a<i;++a)if(o=l,l=c,c=ef(t,a+1),l){if(c){const t=c[e]-l[e];r[a]=0!==t?(c[n]-l[n])/t:0}s[a]=o?c?_h(r[a-1])!==_h(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(t,e,n){const i=t.length;let r,s,a,o,l,c=ef(t,0);for(let u=0;u<i-1;++u)l=c,c=ef(t,u+1),l&&c&&(kh(e[u],0,tf)?n[u]=n[u+1]=0:(r=n[u]/e[u],s=n[u+1]/e[u],o=Math.pow(r,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[u]=r*a*e[u],n[u+1]=s*a*e[u])))}(t,r,s),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=nf(n),r=t.length;let s,a,o,l=ef(t,0);for(let c=0;c<r;++c){if(a=o,o=l,l=ef(t,c+1),!o)continue;const r=o[n],u=o[i];a&&(s=(r-a[n])/3,o["cp1".concat(n)]=r-s,o["cp1".concat(i)]=u-s*e[c]),l&&(s=(l[n]-r)/3,o["cp2".concat(n)]=r+s,o["cp2".concat(i)]=u+s*e[c])}}(t,s,e)}function af(t,e,n){return Math.max(Math.min(t,n),e)}function of(t,e,n,i,r){let s,a,o,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)sf(t,r);else{let n=i?t[t.length-1]:t[0];for(s=0,a=t.length;s<a;++s)o=t[s],l=rf(n,o,t[Math.min(s+1,a-(i?0:1))%a],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}e.capBezierPoints&&function(t,e){let n,i,r,s,a,o=xd(t[0],e);for(n=0,i=t.length;n<i;++n)a=s,s=o,o=n<i-1&&xd(t[n+1],e),s&&(r=t[n],a&&(r.cp1x=af(r.cp1x,e.left,e.right),r.cp1y=af(r.cp1y,e.top,e.bottom)),o&&(r.cp2x=af(r.cp2x,e.left,e.right),r.cp2y=af(r.cp2y,e.top,e.bottom)))}(t,n)}function lf(){return"undefined"!==typeof window&&"undefined"!==typeof document}function cf(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function uf(t,e,n){let i;return"string"===typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const hf=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const df=["top","right","bottom","left"];function ff(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=df[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function pf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=hf(n),s="border-box"===r.boxSizing,a=ff(r,"padding"),o=ff(r,"border","width"),{x:l,y:c,box:u}=function(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let a,o,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(r,s,t.target))a=r,o=s;else{const t=e.getBoundingClientRect();a=i.clientX-t.left,o=i.clientY-t.top,l=!0}return{x:a,y:o,box:l}}(t,n),h=a.left+(u&&o.left),d=a.top+(u&&o.top);let{width:f,height:p}=e;return s&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const gf=t=>Math.round(10*t)/10;function mf(t,e,n,i){const r=hf(t),s=ff(r,"margin"),a=uf(r.maxWidth,t,"clientWidth")||mh,o=uf(r.maxHeight,t,"clientHeight")||mh,l=function(t,e,n){let i,r;if(void 0===e||void 0===n){const s=t&&cf(t);if(s){const t=s.getBoundingClientRect(),a=hf(s),o=ff(a,"border","width"),l=ff(a,"padding");e=t.width-l.width-o.width,n=t.height-l.height-o.height,i=uf(a.maxWidth,s,"clientWidth"),r=uf(a.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||mh,maxHeight:r||mh}}(t,e,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const t=ff(r,"border","width"),e=ff(r,"padding");c-=e.width+t.width,u-=e.height+t.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=gf(Math.min(c,a,l.maxWidth)),u=gf(Math.min(u,o,l.maxHeight)),c&&!u&&(u=gf(c/2));return(void 0!==e||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=gf(Math.floor(u*i))),{width:c,height:u}}function yf(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(t.height,"px"),a.style.width="".concat(t.width,"px")),(t.currentDevicePixelRatio!==i||a.height!==r||a.width!==s)&&(t.currentDevicePixelRatio=i,a.height=r,a.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0)}const bf=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};lf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(e){}return t}();function vf(t,e){const n=function(t,e){return hf(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function xf(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function wf(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function _f(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},a=xf(t,r,n),o=xf(r,s,n),l=xf(s,e,n),c=xf(a,o,n),u=xf(o,l,n);return xf(c,u,n)}function kf(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function Sf(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Ef(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Cf(t){return"angle"===t?{between:Oh,compare:Ah,normalize:Ph}:{between:Rh,compare:(t,e)=>t-e,normalize:t=>t}}function Tf(t){let{start:e,end:n,count:i,loop:r,style:s}=t;return{start:e%i,end:n%i,loop:r&&(n-e+1)%i===0,style:s}}function Nf(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,a=e.length,{compare:o,between:l,normalize:c}=Cf(i),{start:u,end:h,loop:d,style:f}=function(t,e,n){const{property:i,start:r,end:s}=n,{between:a,normalize:o}=Cf(i),l=e.length;let c,u,{start:h,end:d,loop:f}=t;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&a(o(e[h%l][i]),r,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:t.style}}(t,e,n),p=[];let g,m,y,b=!1,v=null;const x=()=>b||l(r,y,g)&&0!==o(r,y),w=()=>!b||0===o(s,g)||l(s,y,g);for(let _=u,k=u;_<=h;++_)m=e[_%a],m.skip||(g=c(m[i]),g!==y&&(b=l(g,r,s),null===v&&x()&&(v=0===o(g,r)?_:k),null!==v&&w()&&(p.push(Tf({start:v,end:_,loop:d,count:a,style:f})),v=null),k=_,y=g));return null!==v&&p.push(Tf({start:v,end:h,loop:d,count:a,style:f})),p}function Df(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=Nf(i[r],t.points,e);s.length&&n.push(...s)}return n}function Mf(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const r=t._chart.getContext(),s=If(t.options),{_datasetIndex:a,options:{spanGaps:o}}=t,l=n.length,c=[];let u=s,h=e[0].start,d=h;function f(t,e,i,r){const s=o?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=s;for(;n[e%l].skip;)e+=s;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:i,style:r}),u=r,h=e%l)}}for(const p of e){h=o?h:p.start;let t,e=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];t=If(i.setContext(Vd(r,{type:"segment",p0:e,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),Af(t,u)&&f(h,d-1,p.loop,u),e=s,u=t}h<d-1&&f(h,d-1,p.loop,u)}return c}(t,e,n,i):e}function If(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Af(t,e){if(!e)return!1;const n=[],i=function(t,e){return Zh(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Pf(t,e,n){return t.options.clip?t[n]:e[n]}function Of(t,e){const n=e._clip;if(n.disabled)return!1;const i=function(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Pf(n,e,"left"),right:Pf(n,e,"right"),top:Pf(i,e,"top"),bottom:Pf(i,e,"bottom")}:e}(e,t.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?t.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?t.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class Lf{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],s=e.duration;r.forEach((i=>i({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(n-e.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=Hh.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,a=r.length-1,o=!1;for(;a>=0;--a)s=r[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(t),o=!0):(r[a]=r[r.length-1],r.pop());o&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Rf=new Lf;const jf="transparent",Ff={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=td(t||jf),r=i.valid&&td(e||jf);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class Vf{constructor(t,e,n,i){const r=e[n];i=Fd([t.to,i,r,t.from]);const s=Fd([t.from,r,i]);this._active=!0,this._fn=t.fn||Ff[t.type||typeof s],this._easing=Jh[t.easing]||Jh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Fd([t.to,e,i,t.from]),this._from=Fd([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,a=this._to;let o;if(this._active=r!==a&&(s||e<n),!this._active)return this._target[i]=a,void this._notify(!0);e<0?this._target[i]=r:(o=e/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[i]=this._fn(r,a,o))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][e]()}}class zf{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Yu(t))return;const e=Object.keys(fd.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach((i=>{const r=t[i];if(!Yu(r))return;const s={};for(const t of e)s[t]=r[t];(Ku(r.properties)&&r.properties||[i]).forEach((t=>{t!==i&&n.has(t)||n.set(t,s)}))}))}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const e=t[i[r]];e&&e.active()&&n.push(e.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),s=Object.keys(e),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(t,e));continue}const c=e[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,a);continue}u.cancel()}h&&h.duration?(r[l]=u=new Vf(h,t,l,c),i.push(u)):t[l]=c}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Rf.add(this._chart,n),!0):void 0}}function Bf(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:i?s:r,end:i?r:s}}function Uf(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Hf(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=t.keys,s="single"===i.mode;let a,o,l,c;if(null===e)return;let u=!1;for(a=0,o=r.length;a<o;++a){if(l=+r[a],l===n){if(u=!0,i.all)continue;break}c=t.values[l],Qu(c)&&(s||0===e||_h(e)===_h(c))&&(e+=c)}return u||i.all?e:0}function Wf(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function qf(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Kf(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const e=t[r.index];if(n&&e>0||!n&&e<0)return r.index}return null}function Yf(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=i,l=s.axis,c=a.axis,u=function(t,e,n){return"".concat(t.id,".").concat(e.id,".").concat(n.stack||n.type)}(s,a,i),h=e.length;let d;for(let f=0;f<h;++f){const t=e[f],{[l]:n,[c]:s}=t;d=(t._stacks||(t._stacks={}))[c]=qf(r,u,n),d[o]=s,d._top=Kf(d,a,!0,i.type),d._bottom=Kf(d,a,!1,i.type);(d._visualValues||(d._visualValues={}))[o]=s}}function Qf(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function Gf(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n],void 0!==e[i]._visualValues&&void 0!==e[i]._visualValues[n]&&delete e[i]._visualValues[n]}}}const $f=t=>"reset"===t||"none"===t,Xf=(t,e)=>e?t:Object.assign({},t);class Jf{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Wf(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Gf(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,r=e.xAxisID=$u(n.xAxisID,Qf(t,"x")),s=e.yAxisID=$u(n.yAxisID,Qf(t,"y")),a=e.rAxisID=$u(n.rAxisID,Qf(t,"r")),o=e.indexAxis,l=e.iAxisID=i(o,r,s,a),c=e.vAxisID=i(o,s,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Bh(this._data,this),t._stacked&&Gf(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Yu(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:n,vScale:i}=e,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",a=Object.keys(t),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[r]:u,[s]:t[u]};return o}(e,t)}else if(n!==e){if(n){Bh(n,this);const t=this._cachedMeta;Gf(t),t._parsed=[]}e&&Object.isExtensible(e)&&(r=this,(i=e)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),zh.forEach((t=>{const e="_onData"+ch(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];const a=n.apply(this,r);return i._chartjs.listeners.forEach((t=>{"function"===typeof t[e]&&t[e](...r)})),a}})})))),this._syncList=[],this._data=e}var i,r}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=Wf(e.vScale,e),e.stack!==n.stack&&(i=!0,Gf(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&(Yf(this,e._parsed),e._stacked=Wf(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,a=r.axis;let o,l,c,u=0===t&&e===i.length||n._sorted,h=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=Ku(i[t])?this.parseArrayData(n,i,t,e):Yu(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const r=()=>null===l[a]||h&&l[a]<h[a];for(o=0;o<e;++o)n._parsed[o+t]=l=c[o],u&&(r()&&(u=!1),h=l);n._sorted=u}s&&Yf(this,c)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:s}=t,a=r.axis,o=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[a]:c||r.parse(l[f],f),[o]:s.parse(e[f],f)};return u}parseArrayData(t,e,n,i){const{xScale:r,yScale:s}=t,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=e[c],a[o]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return a}parseObjectData(t,e,n,i){const{xScale:r,yScale:s}=t,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=e[h],l[c]={x:r.parse(lh(d,a),h),y:s.parse(lh(d,o),h)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,s=e[t.axis];return Hf({keys:Uf(i,!0),values:e._stacks[t.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let s=null===r?NaN:r;const a=i&&n._stacks[e.axis];i&&a&&(i.values=a,s=Hf(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,s=i.length,a=this._getOtherScale(t),o=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Uf(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let h,d;function f(){d=i[h];const e=d[a.axis];return!Qu(d[t.axis])||c>e||u<e}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,t,d,o),!r));++h);if(r)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,t,d,o);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i][t.axis],Qu(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,r;return Yu(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}($u(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=Bf(t,n),r=Bf(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,r,a,o),c=a;c<a+o;++c){const e=i[c];e.hidden||(e.active&&l?s.push(e):e.draw(t,r))}for(c=0;c<s.length;++c)s[c].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=function(t,e,n){return Vd(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return Vd(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===e,r=this._cachedDataOpts,s=t+"-"+e,a=r[s],o=this.enableOptionSharing&&uh(n);if(a)return Xf(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=i?["".concat(t,"Hover"),"hover",t,""]:[t,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(fd.elements[t]),f=l.resolveNamedOptions(h,d,(()=>this.getContext(n,i,e)),u);return f.$shared&&(f.$shared=o,r[s]=Object.freeze(Xf(f,o))),f}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(e),a=r[s];if(a)return a;let o;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,e),s=i.getOptionScopes(this.getDataset(),r);o=i.createResolver(s,this.getContext(t,n,e))}const l=new zf(i,o&&o.animations);return o&&o._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||$f(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,n),{sharedOptions:r,includeOptions:s}}updateElement(t,e,n,i){$f(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!$f(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const i=n.length,r=e.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=t+e;let a;const o=t=>{for(t.length+=e,a=t.length-1;a>=s;a--)t[a]=t[a-e]};for(o(r),a=t;a<s;++a)r[a]=new this.dataElementType;this._parsing&&o(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&Gf(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Zf(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=Uh(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let i,r,s,a,o=e._length;const l=()=>{32767!==s&&-32768!==s&&(uh(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(i=0,r=n.length;i<r;++i)s=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,r=e.ticks.length;i<r;++i)s=e.getPixelForTick(i),l();return o}function tp(t,e,n,i){return Ku(t)?function(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),a=Math.min(r,s),o=Math.max(r,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:a,max:o}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function ep(t,e,n,i){const r=t.iScale,s=t.vScale,a=r.getLabels(),o=r===s,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=e[c],h={},h[r.axis]=o||r.parse(a[c],c),l.push(tp(d,h,s,c));return l}function np(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function ip(t,e,n,i){let r=e.borderSkipped;const s={};if(!r)return void(t.borderSkipped=s);if(!0===r)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[rp(u,a,o,l)]=!0,r=c)),s[rp(r,a,o,l)]=!0,t.borderSkipped=s}function rp(t,e,n,i){var r,s,a;return i?(a=n,t=sp(t=(r=t)===(s=e)?a:r===a?s:r,n,e)):t=sp(t,e,n),t}function sp(t,e,n){return"start"===t?e:"end"===t?n:t}function ap(t,e,n){let{inflateAmount:i}=e;t.inflateAmount="auto"===i?1===n?.33:0:i}o(Jf,"defaults",{}),o(Jf,"datasetElementType",null),o(Jf,"dataElementType",null);class op extends Jf{parsePrimitiveData(t,e,n,i){return ep(t,e,n,i)}parseArrayData(t,e,n,i){return ep(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:s}=t,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===r.axis?a:o,c="x"===s.axis?a:o,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=e[h],f={},f[r.axis]=r.parse(lh(p,l),h),u.push(tp(lh(p,c),f,s,h));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),s=r._custom,a=np(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(e,i);for(let d=e;d<e+n;d++){const e=this.getParsed(d),n=r||qu(e[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(e._stacks||{})[a.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||np(e._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,t[d].active?"active":i));const m=g.options||t[d].options;ip(g,m,p,s),ap(g,m,c.ratio),this.updateElement(t[d],d,g,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),r=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(e),o=a&&a[n.axis],l=t=>{const e=t._parsed.find((t=>t[n.axis]===o)),i=e&&e[t.vScale.axis];if(qu(i)||isNaN(i))return!0};for(const c of i)if((void 0===e||!l(c))&&((!1===r||-1===s.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&s.push(c.stack),c.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,s;for(r=0,s=e.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=t.barThickness;return{min:a||Zf(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,a=r||0,o=this.getParsed(t),l=o._custom,c=np(l);let u,h,d=o[e.axis],f=0,p=n?this.applyStack(e,o,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&_h(d)!==_h(l.barEnd)&&(f=0),f+=d);const g=qu(r)||c?f:r;let m=e.getPixelForValue(g);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(t,e,n){return 0!==t?_h(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(h,e,a)*s,d===a&&(m-=h/2);const t=e.getPixelForDecimal(0),r=e.getPixelForDecimal(1),l=Math.min(t,r),f=Math.max(t,r);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(o._stacks[e.axis]._visualValues[i]=e.getValueForPixel(u)-e.getValueForPixel(m))}if(m===e.getPixelForValue(a)){const t=_h(h)*e.getLineWidthForValue(a)/2;m+=t,h-=t}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,s=$u(i.maxBarThickness,1/0);let a,o;if(e.grouped){const n=r?this._getStackCount(t):e.stackCount,l="flex"===i.barThickness?function(t,e,n,i){const r=e.pixels,s=r[t];let a=t>0?r[t-1]:null,o=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?e.end-e.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:n.barPercentage,start:c}}(t,e,i,n):function(t,e,n,i){const r=n.barThickness;let s,a;return qu(r)?(s=e.min*n.categoryPercentage,a=n.barPercentage):(s=r*i,a=1),{chunk:s/i,ratio:a,start:e.pixels[t]-s/2}}(t,e,i,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=l.start+l.chunk*c+l.chunk/2,o=Math.min(s,l.chunk*l.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),o=Math.min(s,e.min*e.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[e.axis]||n[r].hidden||n[r].draw(this._ctx)}}o(op,"id","bar"),o(op,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),o(op,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class lp extends Jf{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let s=0;s<r.length;s++){const t=e[n+s];r[s]._custom=$u(t[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let s=0;s<r.length;s++){const t=e[n+s];r[s]._custom=$u(t&&t.r&&+t.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,s=this.getParsed(t),a=i.getLabelForValue(s.x),o=r.getLabelForValue(s.y),l=s._custom;return{label:n[t]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(e,i),c=s.axis,u=a.axis;for(let h=e;h<e+n;h++){const e=t[h],n=!r&&this.getParsed(h),d={},f=d[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=r?a.getBasePixel():a.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=o||this.resolveDataElementOptions(h,e.active?"active":i),r&&(d.options.radius=0)),this.updateElement(e,h,d,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=$u(n&&n._custom,r),i}}o(lp,"id","bubble"),o(lp,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),o(lp,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class cp extends Jf{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,a=t=>+n[t];if(Yu(n[t])){const{key:t="value"}=this._parsing;a=e=>+lh(n[e],t)}for(r=t,s=t+e;r<s;++r)i._parsed[r]=a(r)}}_getRotation(){return Th(this.options.rotation-90)}_getCircumference(){return Th(this.options.circumference)}_getRotationExtents(){let t=ph,e=-ph;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let i=1,r=1,s=0,a=0;if(e<ph){const o=t,l=o+e,c=Math.cos(o),u=Math.sin(o),h=Math.cos(l),d=Math.sin(l),f=(t,e,i)=>Oh(t,o,l,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>Oh(t,o,l,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,c,h),m=f(bh,u,d),y=p(fh,c,h),b=p(fh+bh,u,d);i=(g-y)/2,r=(m-b)/2,s=-(g+y)/2,a=-(m+b)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:a}}(d,h,o),y=(n.width-s)/f,b=(n.height-s)/p,v=Math.max(Math.min(y,b)/2,0),x=Xu(this.options.radius,v),w=(x-Math.max(x*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=m*x,i.total=this.calculateTotal(),this.outerRadius=x-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/ph)}updateElements(t,e,n,i){const r="reset"===i,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=r&&o.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,i);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,r);for(g=e;g<e+n;++g){const e=this._circumference(g,r),n=t[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":i)),m+=e,this.updateElement(n,g,s,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?ph*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=sd(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,s,a,o;if(!t)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),t=s.data,a=s.controller;break}if(!t)return 0;for(i=0,r=t.length;i<r;++i)o=a.resolveDataElementOptions(i),"inner"!==o.borderAlign&&(e=Math.max(e,o.borderWidth||0,o.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max($u(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}o(cp,"id","doughnut"),o(cp,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),o(cp,"descriptors",{_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),o(cp,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,r)=>{const s=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class up extends Jf{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,s=this.chart._animationsDisabled;let{start:a,count:o}=Yh(e,i,s);this._drawStart=a,this._drawCount=o,Qh(e)&&(a=0,o=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},t),this.updateElements(i,a,o,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,i),h=s.axis,d=a.axis,{spanGaps:f,segment:p}=this.options,g=Eh(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===i,y=e+n,b=t.length;let v=e>0&&this.getParsed(e-1);for(let x=0;x<b;++x){const n=t[x],f=m?n:{};if(x<e||x>=y){f.skip=!0;continue}const b=this.getParsed(x),w=qu(b[d]),_=f[h]=s.getPixelForValue(b[h],x),k=f[d]=r||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,b,o):b[d],x);f.skip=isNaN(_)||isNaN(k)||w,f.stop=x>0&&Math.abs(b[h]-v[h])>g,p&&(f.parsed=b,f.raw=l.data[x]),u&&(f.options=c||this.resolveDataElementOptions(x,n.active?"active":i)),m||this.updateElement(n,x,f,i),v=b}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}o(up,"id","line"),o(up,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),o(up,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class hp extends Jf{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=sd(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,n,i){return Zd.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<e.min&&(e.min=i),i>e.max&&(e.max=i))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(t,e,n,i){const r="reset"===i,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*fh;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<e;++h)d+=this._computeAngle(h,i,f);for(h=e;h<e+n;h++){const e=t[h];let n=d,p=d+this._computeAngle(h,i,f),g=s.getDataVisibility(h)?o.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,r&&(a.animateScale&&(g=0),a.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,e.active?"active":i)};this.updateElement(e,h,m,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++})),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?Th(this.resolveDataElementOptions(t,e).angle||n):0}}o(hp,"id","polarArea"),o(hp,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),o(hp,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,r)=>{const s=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class dp extends cp{}o(dp,"id","pie"),o(dp,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class fp extends Jf{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return Zd.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:e};this.updateElement(n,void 0,s,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let a=e;a<e+n;a++){const e=t[a],n=this.resolveDataElementOptions(a,e.active?"active":i),o=r.getPointPositionForValue(a,this.getParsed(a).r),l=s?r.xCenter:o.x,c=s?r.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,a,u,i)}}}o(fp,"id","radar"),o(fp,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),o(fp,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class pp extends Jf{getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,s=this.getParsed(t),a=i.getLabelForValue(s.x),o=r.getLabelForValue(s.y);return{label:n[t]||"",value:"("+a+", "+o+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:s}=Yh(e,n,i);if(this._drawStart=r,this._drawCount=s,Qh(e)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const a=this.resolveDatasetElementOptions(t);a.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:a},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=s.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=Eh(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||"none"===i;let b=e>0&&this.getParsed(e-1);for(let v=e;v<e+n;++v){const e=t[v],n=this.getParsed(v),c=y?e:{},p=qu(n[f]),x=c[d]=s.getPixelForValue(n[d],v),w=c[f]=r||p?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],v);c.skip=isNaN(x)||isNaN(w)||p,c.stop=v>0&&Math.abs(n[d]-b[d])>m,g&&(c.parsed=n,c.raw=l.data[v]),h&&(c.options=u||this.resolveDataElementOptions(v,e.active?"active":i)),y||this.updateElement(e,v,c,i),b=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,s)/2}}o(pp,"id","scatter"),o(pp,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),o(pp,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function gp(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class mp{static override(t){Object.assign(mp.prototype,t)}constructor(t){o(this,"options",void 0),this.options=t||{}}init(){}formats(){return gp()}parse(){return gp()}format(){return gp()}add(){return gp()}diff(){return gp()}startOf(){return gp()}endOf(){return gp()}}var yp=mp;function bp(t,e,n,i){const{controller:r,data:s,_sorted:a}=t,o=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&"r"!==e&&a&&s.length){const a=o._reversePixels?Vh:Fh;if(!i){const i=a(s,e,n);if(l){const{vScale:e}=r._cachedMeta,{_parsed:n}=t,s=n.slice(0,i.lo+1).reverse().findIndex((t=>!qu(t[e.axis])));i.lo-=Math.max(0,s);const a=n.slice(i.hi).findIndex((t=>!qu(t[e.axis])));i.hi+=Math.max(0,a)}return i}if(r._sharedOptions){const t=s[0],i="function"===typeof t.getRange&&t.getRange(e);if(i){const t=a(s,e,n-i),r=a(s,e,n+i);return{lo:t.lo,hi:r.hi}}}}return{lo:0,hi:s.length-1}}function vp(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),a=n[e];for(let o=0,l=s.length;o<l;++o){const{index:t,data:n}=s[o],{lo:l,hi:c}=bp(s[o],e,a,r);for(let e=l;e<=c;++e){const r=n[e];r.skip||i(r,t,e)}}}function xp(t,e,n,i,r){const s=[];if(!r&&!t.isPointInArea(e))return s;return vp(t,n,e,(function(n,a,o){(r||xd(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&s.push({element:n,datasetIndex:a,index:o})}),!0),s}function wp(t,e,n,i,r,s){let a=[];const o=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,s=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return vp(t,n,e,(function(n,c,u){const h=n.inRange(e.x,e.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!(!!s||t.isPointInArea(d))&&!h)return;const f=o(e,d);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})})),a}function _p(t,e,n,i,r,s){return s||t.isPointInArea(e)?"r"!==n||i?wp(t,e,n,i,r,s):function(t,e,n,i){let r=[];return vp(t,n,e,(function(t,n,s){const{startAngle:a,endAngle:o}=t.getProps(["startAngle","endAngle"],i),{angle:l}=Mh(t,{x:e.x,y:e.y});Oh(l,a,o)&&r.push({element:t,datasetIndex:n,index:s})})),r}(t,e,n,r):[]}function kp(t,e,n,i,r){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return vp(t,n,e,((t,i,l)=>{t[a]&&t[a](e[n],r)&&(s.push({element:t,datasetIndex:i,index:l}),o=o||t.inRange(e.x,e.y,r))})),i&&!o?[]:s}var Sp={evaluateInteractionItems:vp,modes:{index(t,e,n,i){const r=pf(e,t),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?xp(t,r,s,i,a):_p(t,r,s,!1,i,a),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=o[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})})),l):[]},dataset(t,e,n,i){const r=pf(e,t),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?xp(t,r,s,i,a):_p(t,r,s,!1,i,a);if(o.length>0){const e=o[0].datasetIndex,n=t.getDatasetMeta(e).data;o=[];for(let t=0;t<n.length;++t)o.push({element:n[t],datasetIndex:e,index:t})}return o},point:(t,e,n,i)=>xp(t,pf(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest(t,e,n,i){const r=pf(e,t),s=n.axis||"xy",a=n.includeInvisible||!1;return _p(t,r,s,n.intersect,i,a)},x:(t,e,n,i)=>kp(t,pf(e,t),"x",n.intersect,i),y:(t,e,n,i)=>kp(t,pf(e,t),"y",n.intersect,i)}};const Ep=["left","top","right","bottom"];function Cp(t,e){return t.filter((t=>t.pos===e))}function Tp(t,e){return t.filter((t=>-1===Ep.indexOf(t.pos)&&t.box.axis===e))}function Np(t,e){return t.sort(((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function Dp(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!Ep.includes(i))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,a,o;for(s=0,a=t.length;s<a;++s){o=t[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*i:a&&e.availableWidth,o.height=r):(o.width=i,o.height=c?c*r:a&&e.availableHeight)}return n}function Mp(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Ip(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Ap(t,e,n,i){const{pos:r,box:s}=n,a=t.maxPadding;if(!Yu(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?s.height:s.width),n.size=e.size/e.count,t[r]+=n.size}s.getPadding&&Ip(a,s.getPadding());const o=Math.max(0,e.outerWidth-Mp(a,t,"left","right")),l=Math.max(0,e.outerHeight-Mp(a,t,"top","bottom")),c=o!==t.w,u=l!==t.h;return t.w=o,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Pp(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{i[t]=Math.max(e[t],n[t])})),i}return i(t?["left","right"]:["top","bottom"])}function Op(t,e,n,i){const r=[];let s,a,o,l,c,u;for(s=0,a=t.length,c=0;s<a;++s){o=t[s],l=o.box,l.update(o.width||e.w,o.height||e.h,Pp(o.horizontal,e));const{same:a,other:h}=Ap(e,n,o,i);c|=a&&r.length,u=u||h,l.fullSize||r.push(o)}return c&&Op(r,e,n,i)||u}function Lp(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Rp(t,e,n,i){const r=n.padding;let{x:s,y:a}=e;for(const o of t){const t=o.box,l=i[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const i=e.w*c,s=l.size||t.height;uh(l.start)&&(a=l.start),t.fullSize?Lp(t,r.left,a,n.outerWidth-r.right-r.left,s):Lp(t,e.left+l.placed,a,i,s),l.start=a,l.placed+=i,a=t.bottom}else{const i=e.h*c,a=l.size||t.width;uh(l.start)&&(s=l.start),t.fullSize?Lp(t,s,r.top,a,n.outerHeight-r.bottom-r.top):Lp(t,s,e.top+l.placed,a,i),l.start=s,l.placed+=i,s=t.right}}e.x=s,e.y=a}var jp={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Rd(t.options.layout.padding),s=Math.max(e-r.width,0),a=Math.max(n-r.height,0),o=function(t){const e=function(t){const e=[];let n,i,r,s,a,o;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:s,options:{stack:a,stackWeight:o=1}}=r),e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return e}(t),n=Np(e.filter((t=>t.box.fullSize)),!0),i=Np(Cp(e,"left"),!0),r=Np(Cp(e,"right")),s=Np(Cp(e,"top"),!0),a=Np(Cp(e,"bottom")),o=Tp(e,"x"),l=Tp(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:Cp(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(a).concat(o)}}(t.boxes),l=o.vertical,c=o.horizontal;Zu(t.boxes,(t=>{"function"===typeof t.beforeLayout&&t.beforeLayout()}));const u=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),d=Object.assign({},r);Ip(d,Rd(i));const f=Object.assign({maxPadding:d,w:s,h:a,x:r.left,y:r.top},r),p=Dp(l.concat(c),h);Op(o.fullSize,f,h,p),Op(l,f,h,p),Op(c,f,h,p)&&Op(l,f,h,p),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),Rp(o.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Rp(o.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Zu(o.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class Fp{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class Vp extends Fp{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const zp="$chartjs",Bp={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Up=t=>null===t||""===t;const Hp=!!bf&&{passive:!0};function Wp(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Hp)}function qp(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Kp(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||qp(n.addedNodes,i),e=e&&!qp(n.removedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function Yp(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||qp(n.removedNodes,i),e=e&&!qp(n.addedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const Qp=new Map;let Gp=0;function $p(){const t=window.devicePixelRatio;t!==Gp&&(Gp=t,Qp.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function Xp(t,e,n){const i=t.canvas,r=i&&cf(i);if(!r)return;const s=Wh(((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()}),window),a=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||s(n,i)}));return a.observe(r),function(t,e){Qp.size||window.addEventListener("resize",$p),Qp.set(t,e)}(t,s),a}function Jp(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Qp.delete(t),Qp.size||window.removeEventListener("resize",$p)}(t)}function Zp(t,e,n){const i=t.canvas,r=Wh((e=>{null!==t.ctx&&n(function(t,e){const n=Bp[t.type]||t.type,{x:i,y:r}=pf(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(e,t))}),t);return function(t,e,n){t&&t.addEventListener(e,n,Hp)}(i,e,r),r}class tg extends Fp{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[zp]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Up(r)){const e=vf(t,"width");void 0!==e&&(t.width=e)}if(Up(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=vf(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[zp])return!1;const n=e[zp].initial;["height","width"].forEach((t=>{const i=n[t];qu(i)?e.removeAttribute(t):e.setAttribute(t,i)}));const i=n.style||{};return Object.keys(i).forEach((t=>{e.style[t]=i[t]})),e.width=e.width,delete e[zp],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:Kp,detach:Yp,resize:Xp}[e]||Zp;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:Jp,detach:Jp,resize:Jp}[e]||Wp)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return mf(t,e,n,i)}isAttached(t){const e=t&&cf(t);return!(!e||!e.isConnected)}}class eg{constructor(){o(this,"x",void 0),o(this,"y",void 0),o(this,"active",!1),o(this,"options",void 0),o(this,"$animations",void 0)}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Eh(this.x)&&Eh(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach((t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),i}}function ng(t,e){const n=t.options.ticks,i=function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>r)return function(t,e,n,i){let r,s=0,a=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===a&&(e.push(t[r]),s++,a=n[s*i])}(e,c,s,a/r),c;const u=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const s=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}(i);for(let a=0,o=s.length-1;a<o;a++){const t=s[a];if(t>r)return t}return Math.max(r,1)}(s,e,r);if(a>0){let t,n;const i=a>1?Math.round((l-o)/(a-1)):null;for(ig(e,c,u,qu(i)?0:o-i,o),t=0,n=a-1;t<n;t++)ig(e,c,u,s[t],s[t+1]);return ig(e,c,u,l,qu(i)?e.length:l+i),c}return ig(e,c,u),c}function ig(t,e,n,i,r){const s=$u(i,0),a=Math.min($u(r,t.length),t.length);let o,l,c,u=0;for(n=Math.ceil(n),r&&(o=r-i,n=o/Math.floor(o/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<a;l++)l===c&&(e.push(t[l]),u++,c=Math.round(s+u*n))}o(eg,"defaults",{}),o(eg,"defaultRoutes",void 0);const rg=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,sg=(t,e)=>Math.min(e||t,t);function ag(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function og(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,a=t._endPixel,o=1e-6;let l,c=t.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,a-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<s-o||c>a+o)))return c}function lg(t){return t.drawTicks?t.tickLength:0}function cg(t,e){if(!t.display)return 0;const n=jd(t.font,e),i=Rd(t.padding);return(Ku(t.text)?t.text.length:1)*n.lineHeight+i.height}function ug(t,e,n){let i=qh(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class hg extends eg{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=Gu(t,Number.POSITIVE_INFINITY),e=Gu(e,Number.NEGATIVE_INFINITY),n=Gu(n,Number.POSITIVE_INFINITY),i=Gu(i,Number.NEGATIVE_INFINITY),{min:Gu(t,n),max:Gu(e,i),minDefined:Qu(t),maxDefined:Qu(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)e=a[o].controller.getMinMax(this,t),r||(n=Math.min(n,e.min)),s||(i=Math.max(i,e.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Gu(n,Gu(i,n)),max:Gu(i,Gu(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ju(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:r}=t,s=Xu(e,(r-i)/2),a=(t,e)=>n&&0===t?0:t+e;return{min:a(i,-Math.abs(s)),max:a(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?ag(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=ng(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ju(this.options.afterUpdate,[this])}beforeSetDimensions(){Ju(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ju(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ju(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ju(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=Ju(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){Ju(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ju(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=sg(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let s,a,o,l=i;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=Lh(this.chart.width-u,0,this.maxWidth);s=t.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(t.offset?.5:1)),a=this.maxHeight-lg(t.grid)-e.padding-cg(t.title,this.chart.options.font),o=Math.sqrt(u*u+h*h),l=Nh(Math.min(Math.asin(Lh((c.highest.height+6)/s,-1,1)),Math.asin(Lh(a/o,-1,1))-Math.asin(Lh(h/o,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Ju(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ju(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=cg(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=lg(r)+s):(t.height=this.maxHeight,t.width=lg(r)+s),n.display&&this.ticks.length){const{first:e,last:i,widest:r,highest:s}=this._getLabelSizes(),o=2*n.padding,l=Th(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const e=n.mirror?0:u*r.width+c*s.height;t.height=Math.min(this.maxHeight,t.height+e+o)}else{const e=n.mirror?0:c*r.width+u*s.height;t.width=Math.min(this.maxWidth,t.width+e+o)}this._calculatePadding(e,i,u,c)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;o?l?(u=i*t.width,h=n*e.height):(u=n*t.height,h=i*e.width):"start"===r?h=e.width:"end"===r?u=t.width:"inner"!==r&&(u=t.width/2,h=e.width/2),this.paddingLeft=Math.max((u-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=e.height/2,i=t.height/2;"start"===r?(n=0,i=t.height):"end"===r&&(n=e.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ju(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)qu(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=ag(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:r}=this,s=[],a=[],o=Math.floor(e/sg(e,n));let l,c,u,h,d,f,p,g,m,y,b,v=0,x=0;for(l=0;l<e;l+=o){if(h=t[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,qu(h)||Ku(h)){if(Ku(h))for(c=0,u=h.length;c<u;++c)b=h[c],qu(b)||Ku(b)||(m=pd(i,p.data,p.gc,m,b),y+=g)}else m=pd(i,p.data,p.gc,m,h),y=g;s.push(m),a.push(y),v=Math.max(m,v),x=Math.max(y,x)}!function(t,e){Zu(t,(t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}}))}(r,e);const w=s.indexOf(v),_=a.indexOf(x),k=t=>({width:s[t]||0,height:a[t]||0});return{first:k(0),last:k(e-1),widest:k(w),highest:k(_),widths:s,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Lh(this._alignToPixels?md(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Vd(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Vd(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=Th(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),s=t.autoSkipPadding||0,a=r?r.widest.width+s:0,o=r?r.highest.height+s:0;return this.isHorizontal()?o*n>a*i?a/n:o/i:o*i<a*n?o/n:a/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:a}=i,o=r.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=lg(r),h=[],d=a.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(t){return md(n,t,f)};let m,y,b,v,x,w,_,k,S,E,C,T;if("top"===s)m=g(this.bottom),w=this.bottom-u,k=m-p,E=g(t.top)+p,T=t.bottom;else if("bottom"===s)m=g(this.top),E=t.top,T=g(t.bottom)-p,w=m+p,k=this.top+u;else if("left"===s)m=g(this.right),x=this.right-u,_=m-p,S=g(t.left)+p,C=t.right;else if("right"===s)m=g(this.left),S=t.left,C=g(t.right)-p,x=m+p,_=this.left+u;else if("x"===e){if("center"===s)m=g((t.top+t.bottom)/2+.5);else if(Yu(s)){const t=Object.keys(s)[0],e=s[t];m=g(this.chart.scales[t].getPixelForValue(e))}E=t.top,T=t.bottom,w=m+p,k=w+u}else if("y"===e){if("center"===s)m=g((t.left+t.right)/2);else if(Yu(s)){const t=Object.keys(s)[0],e=s[t];m=g(this.chart.scales[t].getPixelForValue(e))}x=m-p,_=x-u,S=t.left,C=t.right}const N=$u(i.ticks.maxTicksLimit,c),D=Math.max(1,Math.ceil(c/N));for(y=0;y<c;y+=D){const t=this.getContext(y),e=r.setContext(t),i=a.setContext(t),s=e.lineWidth,c=e.color,u=i.dash||[],d=i.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;b=og(this,y,o),void 0!==b&&(v=md(n,b,s),l?x=_=S=C=v:w=k=E=T=v,h.push({tx1:x,ty1:w,tx2:_,ty2:k,x1:S,y1:E,x2:C,y2:T,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=r,h=lg(n.grid),d=h+c,f=u?-c:d,p=-Th(this.labelRotation),g=[];let m,y,b,v,x,w,_,k,S,E,C,T,N="middle";if("top"===i)w=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===i)w=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(h);_=t.textAlign,x=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(h);_=t.textAlign,x=t.x}else if("x"===e){if("center"===i)w=(t.top+t.bottom)/2+d;else if(Yu(i)){const t=Object.keys(i)[0],e=i[t];w=this.chart.scales[t].getPixelForValue(e)+d}_=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)x=(t.left+t.right)/2-d;else if(Yu(i)){const t=Object.keys(i)[0],e=i[t];x=this.chart.scales[t].getPixelForValue(e)}_=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===o?N="top":"end"===o&&(N="bottom"));const D=this._getLabelSizes();for(m=0,y=a.length;m<y;++m){b=a[m],v=b.label;const t=r.setContext(this.getContext(m));k=this.getPixelForTick(m)+r.labelOffset,S=this._resolveTickFontOptions(m),E=S.lineHeight,C=Ku(v)?v.length:1;const e=C/2,n=t.color,o=t.textStrokeColor,c=t.textStrokeWidth;let h,d=_;if(s?(x=k,"inner"===_&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),T="top"===i?"near"===l||0!==p?-C*E+E/2:"center"===l?-D.highest.height/2-e*E+E:-D.highest.height+E/2:"near"===l||0!==p?E/2:"center"===l?D.highest.height/2-e*E:D.highest.height-C*E,u&&(T*=-1),0===p||t.showLabelBackdrop||(x+=E/2*Math.sin(p))):(w=k,T=(1-C)*E/2),t.showLabelBackdrop){const e=Rd(t.backdropPadding),n=D.heights[m],i=D.widths[m];let r=T-e.top,s=0-e.left;switch(N){case"middle":r-=n/2;break;case"bottom":r-=n}switch(_){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":m===y-1?s-=i:m>0&&(s-=i/2)}h={left:s,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:v,font:S,textOffset:T,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:d,textBaseline:N,translation:[x,w],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Th(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=t+r,a=this._getLabelSizes().widest.width;let o,l;return"left"===e?i?(l=this.right+r,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===e?i?(l=this.left+r,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,s;const a=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(r=0,s=i.length;r<s;++r){const t=i[r];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const a=i.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=md(t,this.left,s)-s/2,c=md(t,this.right,a)+a/2,u=h=o):(u=md(t,this.top,s)-s/2,h=md(t,this.bottom,a)+a/2,l=c=o),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&wd(e,n);const i=this.getLabelItems(t);for(const r of i){const t=r.options,n=r.font;Td(e,r.label,0,r.textOffset,n,t)}n&&_d(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=jd(n.font),s=Rd(n.padding),a=n.align;let o=r.lineHeight/2;"bottom"===e||"center"===e||Yu(e)?(o+=s.bottom,Ku(n.text)&&(o+=r.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(t,e,n,i){const{top:r,left:s,bottom:a,right:o,chart:l}=t,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=a-r,m=o-s;if(t.isHorizontal()){if(d=Kh(i,s,o),Yu(n)){const t=Object.keys(n)[0],i=n[t];f=u[t].getPixelForValue(i)+g-e}else f="center"===n?(c.bottom+c.top)/2+g-e:rg(t,n,e);h=o-s}else{if(Yu(n)){const t=Object.keys(n)[0],i=n[t];d=u[t].getPixelForValue(i)-m+e}else d="center"===n?(c.left+c.right)/2-m+e:rg(t,n,e);f=Kh(i,a,r),p="left"===n?-bh:bh}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,o,e,a);Td(t,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:ug(a,e,i),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=$u(t.grid&&t.grid.z,-1),i=$u(t.border&&t.border.z,0);return this._isVisible()&&this.draw===hg.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=e.length;r<s;++r){const s=e[r];s[n]!==this.id||t&&s.type!==t||i.push(s)}return i}_resolveTickFontOptions(t){return jd(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class dg{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,r=t.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,function(t,e,n){const i=rh(Object.create(null),[n?fd.get(n):{},fd.get(e),t.defaults]);fd.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),a=e[n].split("."),o=a.pop(),l=a.join(".");fd.route(s,r,l,o)}))}(e,t.defaultRoutes);t.descriptors&&fd.describe(e,t.descriptors)}(t,s,n),this.override&&fd.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in fd[i]&&(delete fd[i][n],this.override&&delete ld[n])}}class fg{constructor(){this.controllers=new dg(Jf,"datasets",!0),this.elements=new dg(eg,"elements"),this.plugins=new dg(Object,"plugins"),this.scales=new dg(hg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e)}remove(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e)}addControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.controllers)}addElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.elements)}addPlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.plugins)}addScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.controllers)}removeElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.elements)}removePlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.plugins)}removeScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.scales)}_each(t,e,n){[...e].forEach((e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):Zu(e,(e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)}))}))}_exec(t,e,n){const i=ch(t);Ju(n["before"+i],[],n),e[t](n),Ju(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var pg=new fg;class gg{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),s=this._notify(r,t,e,n);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin;if(!1===Ju(t[n],[e,i,r.options],t)&&i.cancelable)return!1}return!0}invalidate(){qu(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=$u(n.options&&n.options.plugins,{}),r=function(t){const e={},n=[],i=Object.keys(pg.plugins.items);for(let s=0;s<i.length;s++)n.push(pg.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const t=r[s];-1===n.indexOf(t)&&(n.push(t),e[t.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==i||e?function(t,e,n,i){let{plugins:r,localIds:s}=e;const a=[],o=t.getContext();for(const l of r){const e=l.id,r=mg(n[e],i);null!==r&&a.push({plugin:l,options:yg(t.config,{plugin:l,local:s[e]},r,o)})}return a}(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function mg(t,e){return e||!1!==t?!0===t?{}:t:null}function yg(t,e,n,i){let{plugin:r,local:s}=e;const a=t.pluginScopeKeys(r),o=t.getOptionScopes(n,a);return s&&r.defaults&&o.push(r.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function bg(t,e){const n=fd.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function vg(t){if("x"===t||"y"===t||"r"===t)return t}function xg(t){if(vg(t))return t;for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(const s of n){const e=s.axis||("top"===(r=s.position)||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0)||t.length>1&&vg(t[0].toLowerCase());if(e)return e}var r;throw new Error("Cannot determine type of '".concat(t,"' axis. Please provide 'axis' or 'position' option."))}function wg(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function _g(t,e){const n=ld[t.type]||{scales:{}},i=e.scales||{},r=bg(t.type,e),s=Object.create(null);return Object.keys(i).forEach((e=>{const a=i[e];if(!Yu(a))return console.error("Invalid scale configuration for scale: ".concat(e));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));const o=xg(e,a,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t));if(n.length)return wg(t,"x",n[0])||wg(t,"y",n[0])}return{}}(e,t),fd.scales[a.type]),l=function(t,e){return t===e?"_index_":"_value_"}(o,r),c=n.scales||{};s[e]=sh(Object.create(null),[{axis:o},a,c[o],c[l]])})),t.data.datasets.forEach((n=>{const r=n.type||t.type,a=n.indexAxis||bg(r,e),o=(ld[r]||{}).scales||{};Object.keys(o).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,a),r=n[e+"AxisID"]||e;s[r]=s[r]||Object.create(null),sh(s[r],[{axis:e},i[r],o[t]])}))})),Object.keys(s).forEach((t=>{const e=s[t];sh(e,[fd.scales[e.type],fd.scale])})),s}function kg(t){const e=t.options||(t.options={});e.plugins=$u(e.plugins,{}),e.scales=_g(t,e)}function Sg(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Eg=new Map,Cg=new Set;function Tg(t,e){let n=Eg.get(t);return n||(n=e(),Eg.set(t,n),Cg.add(n)),n}const Ng=(t,e,n)=>{const i=lh(e,n);void 0!==i&&t.add(i)};class Dg{constructor(t){this._config=function(t){return(t=t||{}).data=Sg(t.data),kg(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Sg(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),kg(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Tg(t,(()=>[["datasets.".concat(t),""]]))}datasetAnimationScopeKeys(t,e){return Tg("".concat(t,".transition.").concat(e),(()=>[["datasets.".concat(t,".transitions.").concat(e),"transitions.".concat(e)],["datasets.".concat(t),""]]))}datasetElementScopeKeys(t,e){return Tg("".concat(t,"-").concat(e),(()=>[["datasets.".concat(t,".elements.").concat(e),"datasets.".concat(t),"elements.".concat(e),""]]))}pluginScopeKeys(t){const e=t.id,n=this.type;return Tg("".concat(n,"-plugin-").concat(e),(()=>[["plugins.".concat(e),...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,s=this._cachedScopes(t,n),a=s.get(e);if(a)return a;const o=new Set;e.forEach((e=>{t&&(o.add(t),e.forEach((e=>Ng(o,t,e)))),e.forEach((t=>Ng(o,i,t))),e.forEach((t=>Ng(o,ld[r]||{},t))),e.forEach((t=>Ng(o,fd,t))),e.forEach((t=>Ng(o,cd,t)))}));const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),Cg.has(e)&&s.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,ld[e]||{},fd.datasets[e]||{},{type:e},fd,cd]}resolveNamedOptions(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:a}=Mg(this._resolverCache,t,i);let o=s;if(function(t,e){const{isScriptable:n,isIndexable:i}=Ud(t);for(const r of e){const e=n(r),s=i(r),a=(s||e)&&t[r];if(e&&(hh(a)||Ig(a))||s&&Ku(a))return!0}return!1}(s,e)){r.$shared=!1;o=Bd(s,n=hh(n)?n():n,this.createResolver(t,n,a))}for(const l of e)r[l]=o[l];return r}createResolver(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=Mg(this._resolverCache,t,n);return Yu(e)?Bd(r,e,void 0,i):r}}function Mg(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:zd(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(r,s)}return s}const Ig=t=>Yu(t)&&Object.getOwnPropertyNames(t).some((e=>hh(t[e])));const Ag=["top","bottom","left","right","chartArea"];function Pg(t,e){return"top"===t||"bottom"===t||-1===Ag.indexOf(t)&&"x"===e}function Og(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Lg(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ju(n&&n.onComplete,[t],e)}function Rg(t){const e=t.chart,n=e.options.animation;Ju(n&&n.onProgress,[t],e)}function jg(t){return lf()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Fg={},Vg=t=>{const e=jg(t);return Object.values(Fg).filter((t=>t.canvas===e)).pop()};function zg(t,e,n){const i=Object.keys(t);for(const r of i){const i=+r;if(i>=e){const s=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=s)}}}class Bg{static register(){pg.add(...arguments),Ug()}static unregister(){pg.remove(...arguments),Ug()}constructor(t,e){const n=this.config=new Dg(e),i=jg(t),r=Vg(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!lf()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Vp:tg}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=Wu(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new gg,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}((t=>this.update(t)),s.resizeDelay||0),this._dataChanges=[],Fg[this.id]=this,a&&o?(Rf.listen(this,"complete",Lg),Rf.listen(this,"progress",Rg),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return qu(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return pg}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():yf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return yd(this.canvas,this.ctx),this}stop(){return Rf.stop(this),this}resize(t,e){Rf.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,t,e,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,yf(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),Ju(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Zu(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let r=[];e&&(r=r.concat(Object.keys(e).map((t=>{const n=e[t],i=xg(t,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),Zu(r,(e=>{const r=e.options,s=r.id,a=xg(s,r),o=$u(r.type,e.dtype);void 0!==r.position&&Pg(r.position,a)===Pg(e.dposition)||(r.position=e.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(pg.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,t)})),Zu(i,((t,e)=>{t||delete n[e]})),Zu(n,(t=>{jp.configure(this,t,t.options),jp.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(Og("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||bg(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const e=pg.getController(s),{datasetElementType:i,dataElementType:a}=fd.datasets[s];Object.assign(e,{dataElementType:pg.getElement(a),datasetElementType:i&&pg.getElement(i)}),r.controller=new e(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){Zu(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:t}=this.getDatasetMeta(l),e=!i&&-1===r.indexOf(t);t.buildOrUpdateElements(e),s=Math.max(+t.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||Zu(r,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Og("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Zu(this.scales,(t=>{jp.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);dh(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e){zg(t,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),i=n(0);for(let r=1;r<e;r++)if(!dh(i,n(r)))return;return Array.from(i).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;jp.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],Zu(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,hh(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Rf.has(this)?this.attached&&!Rf.running(this)&&Rf.start(this):(this.draw(),Lg({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=Of(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&wd(e,i),t.controller.draw(),i&&_d(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return xd(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const r=Sp.modes[e];return"function"===typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter((t=>t&&t._dataset===e)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Vd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"===typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),s=r.controller._resolveAnimations(void 0,i);uh(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),s.update(r,{visible:n}),this.update((e=>e.datasetIndex===t?i:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Rf.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),yd(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Fg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};Zu(this.options.events,(t=>n(t,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let s;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():s()}unbindEvents(){Zu(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},Zu(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,s,a,o;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,o=t.length;a<o;++a){s=t[a];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((t=>{let{datasetIndex:e,index:n}=t;const i=this.getDatasetMeta(e);if(!i)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[n],index:n}}));!th(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),s=r(e,t),a=n?t:r(t,e);s.length&&this.updateHoverStyle(s,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,s=e,a=this._getActiveElements(t,i,n,s),o=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,o);n&&(this._lastEvent=null,Ju(r.onHover,[t,a,this],this),o&&Ju(r.onClick,[t,a,this],this));const c=!th(a,i);return(c||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function Ug(){return Zu(Bg.instances,(t=>t._plugins.invalidate()))}function Hg(t,e,n,i){const r=Pd(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-e)/2,a=Math.min(s,i*e/2),o=t=>{const e=(n-Math.min(s,t))*i/2;return Lh(t,0,Math.min(s,e))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:Lh(r.innerStart,0,a),innerEnd:Lh(r.innerEnd,0,a)}}function Wg(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function qg(t,e,n,i,r,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const t=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==t?p*t/(t+i):p))/2}const g=(p-Math.max(.001,p*h-n/fh)/h)/2,m=l+g+f,y=r-g-f,{outerStart:b,outerEnd:v,innerStart:x,innerEnd:w}=Hg(e,d,h,y-m),_=h-b,k=h-v,S=m+b/_,E=y-v/k,C=d+x,T=d+w,N=m+x/C,D=y-w/T;if(t.beginPath(),s){const e=(S+E)/2;if(t.arc(a,o,h,S,e),t.arc(a,o,h,e,E),v>0){const e=Wg(k,E,a,o);t.arc(e.x,e.y,v,E,y+bh)}const n=Wg(T,y,a,o);if(t.lineTo(n.x,n.y),w>0){const e=Wg(T,D,a,o);t.arc(e.x,e.y,w,y+bh,D+Math.PI)}const i=(y-w/d+(m+x/d))/2;if(t.arc(a,o,d,y-w/d,i,!0),t.arc(a,o,d,i,m+x/d,!0),x>0){const e=Wg(C,N,a,o);t.arc(e.x,e.y,x,N+Math.PI,m-bh)}const r=Wg(_,m,a,o);if(t.lineTo(r.x,r.y),b>0){const e=Wg(_,S,a,o);t.arc(e.x,e.y,b,m-bh,S)}}else{t.moveTo(a,o);const e=Math.cos(S)*h+a,n=Math.sin(S)*h+o;t.lineTo(e,n);const i=Math.cos(E)*h+a,r=Math.sin(E)*h+o;t.lineTo(i,r)}t.closePath()}function Kg(t,e,n,i,r){const{fullCircles:s,startAngle:a,circumference:o,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f="inner"===l.borderAlign;if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,f?(t.lineWidth=2*c,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(s){qg(t,e,n,i,p,r);for(let e=0;e<s;++e)t.stroke();isNaN(o)||(p=a+(o%ph||ph))}f&&function(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:a,outerRadius:o,innerRadius:l}=e;let c=r/o;t.beginPath(),t.arc(s,a,o,i-c,n+c),l>r?(c=r/l,t.arc(s,a,l,n+c,i-c,!0)):t.arc(s,a,r,n+bh,i-bh),t.closePath(),t.clip()}(t,e,p),s||(qg(t,e,n,i,p,r),t.stroke())}o(Bg,"defaults",fd),o(Bg,"instances",Fg),o(Bg,"overrides",ld),o(Bg,"registry",pg),o(Bg,"version","4.4.9"),o(Bg,"getChart",Vg);class Yg extends eg{constructor(t){super(),o(this,"circumference",void 0),o(this,"endAngle",void 0),o(this,"fullCircles",void 0),o(this,"innerRadius",void 0),o(this,"outerRadius",void 0),o(this,"pixelMargin",void 0),o(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=Mh(i,{x:t,y:e}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=$u(u,o-a),f=Oh(r,a,o)&&a!==o,p=d>=ph||f,g=Rh(s,l+h,c+h);return p&&g}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:o,spacing:l}=this.options,c=(i+r)/2,u=(s+a+l+o)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,r=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>ph?Math.floor(n/ph):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const o=i*(1-Math.sin(Math.min(fh,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,i,r){const{fullCircles:s,startAngle:a,circumference:o}=e;let l=e.endAngle;if(s){qg(t,e,n,i,l,r);for(let e=0;e<s;++e)t.fill();isNaN(o)||(l=a+(o%ph||ph))}qg(t,e,n,i,l,r),t.fill()}(t,this,o,r,s),Kg(t,this,o,r,s),t.restore()}}function Qg(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;t.lineCap=$u(n.borderCapStyle,e.borderCapStyle),t.setLineDash($u(n.borderDash,e.borderDash)),t.lineDashOffset=$u(n.borderDashOffset,e.borderDashOffset),t.lineJoin=$u(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=$u(n.borderWidth,e.borderWidth),t.strokeStyle=$u(n.borderColor,e.borderColor)}function Gg(t,e,n){t.lineTo(n.x,n.y)}function $g(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.length,{start:r=0,end:s=i-1}=n,{start:a,end:o}=e,l=Math.max(r,a),c=Math.min(s,o),u=r<a&&s<a||r>o&&s>o;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function Xg(t,e,n,i){const{points:r,options:s}=e,{count:a,start:o,loop:l,ilen:c}=$g(r,n,i),u=function(t){return t.stepped?kd:t.tension||"monotone"===t.cubicInterpolationMode?Sd:Gg}(s);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=c;++h)d=r[(o+(g?c-h:h))%a],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):u(t,f,d,g,s.stepped),f=d);return l&&(d=r[(o+(g?c:0))%a],u(t,f,d,g,s.stepped)),!!l}function Jg(t,e,n,i){const r=e.points,{count:s,start:a,ilen:o}=$g(r,n,i),{move:l=!0,reverse:c}=i||{};let u,h,d,f,p,g,m=0,y=0;const b=t=>(a+(c?o-t:t))%s,v=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(h=r[b(0)],t.moveTo(h.x,h.y)),u=0;u<=o;++u){if(h=r[b(u)],h.skip)continue;const e=h.x,n=h.y,i=0|e;i===d?(n<f?f=n:n>p&&(p=n),m=(y*m+e)/++y):(v(),t.lineTo(e,n),d=i,y=0,f=p=n),g=n}v()}function Zg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&"monotone"!==e.cubicInterpolationMode&&!e.stepped&&!n?Jg:Xg}o(Yg,"id","arc"),o(Yg,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),o(Yg,"defaultRoutes",{backgroundColor:"backgroundColor"}),o(Yg,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t});const tm="function"===typeof Path2D;function em(t,e,n,i){tm&&!e.options.segment?function(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),Qg(t,e.options),t.stroke(r)}(t,e,n,i):function(t,e,n,i){const{segments:r,options:s}=e,a=Zg(e);for(const o of r)Qg(t,s,o.style),t.beginPath(),a(t,e,o,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}class nm extends eg{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;of(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:a,end:o}=function(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}(n,r,s,i);return Mf(t,!0===i?[{start:a,end:o,loop:s}]:function(t,e,n,i){const r=t.length,s=[];let a,o=e,l=t[e];for(a=e+1;a<=n;++a){const n=t[a%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:e%r,end:(a-1)%r,loop:i}),e=o=n.stop?a:null):(o=a,l.skip&&(e=a)),l=n}return null!==o&&s.push({start:e%r,end:o%r,loop:i}),s}(n,a,o<a?o+r:o,!!t._fullLoop&&0===a&&o===r-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,s=Df(this,{property:e,start:i,end:i});if(!s.length)return;const a=[],o=function(t){return t.stepped?wf:t.tension||"monotone"===t.cubicInterpolationMode?_f:xf}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=r[c],d=r[u];if(h===d){a.push(h);continue}const f=o(h,d,Math.abs((i-h[e])/(d[e]-h[e])),n.stepped);f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return Zg(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=Zg(this);let s=this._loop;e=e||0,n=n||this.points.length-e;for(const a of i)s&=r(t,this,a,{start:e,end:e+n-1});return!!s}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),em(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function im(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}o(nm,"id","line"),o(nm,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),o(nm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),o(nm,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t});class rm extends eg{constructor(t){super(),o(this,"parsed",void 0),o(this,"skip",void 0),o(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return im(this,t,"x",e)}inYRange(t,e){return im(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!xd(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,bd(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function sm(t,e){const{x:n,y:i,base:r,width:s,height:a}=t.getProps(["x","y","base","width","height"],e);let o,l,c,u,h;return t.horizontal?(h=a/2,o=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,o=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:o,top:c,right:l,bottom:u}}function am(t,e,n,i){return t?0:Lh(e,n,i)}function om(t){const e=sm(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=Od(i);return{t:am(r.top,s.top,0,n),r:am(r.right,s.right,0,e),b:am(r.bottom,s.bottom,0,n),l:am(r.left,s.left,0,e)}}(t,n/2,i/2),s=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=Ld(r),a=Math.min(e,n),o=t.borderSkipped,l=i||Yu(r);return{topLeft:am(!l||o.top||o.left,s.topLeft,0,a),topRight:am(!l||o.top||o.right,s.topRight,0,a),bottomLeft:am(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:am(!l||o.bottom||o.right,s.bottomRight,0,a)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function lm(t,e,n,i){const r=null===e,s=null===n,a=t&&!(r&&s)&&sm(t,i);return a&&(r||Rh(e,a.left,a.right))&&(s||Rh(n,a.top,a.bottom))}function cm(t,e){t.rect(e.x,e.y,e.w,e.h)}function um(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,a=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+a,radius:t.radius}}o(rm,"id","point"),o(rm,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),o(rm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class hm extends eg{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=om(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?Nd:cm;var o;t.save(),s.w===r.w&&s.h===r.h||(t.beginPath(),a(t,um(s,e,r)),t.clip(),a(t,um(r,-e,s)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,um(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return lm(this,t,e,n)}inXRange(t,e){return lm(this,t,null,e)}inYRange(t,e){return lm(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}o(hm,"id","bar"),o(hm,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),o(hm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const dm=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class fm extends eg{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Ju(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=jd(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=dm(n,r);let l,c;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,i,a,o)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let u=t;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((t,f)=>{const p=n+e/2+r.measureText(t.text).width;(0===f||l[l.length-1]+p+2*a>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),o[f]={left:0,top:d,row:h,width:p,height:i},l[l.length-1]+=p+a})),u}_fitCols(t,e,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-t;let u=a,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((t,s)=>{const{itemWidth:g,itemHeight:m}=function(t,e,n,i,r){const s=function(t,e,n,i){let r=t.text;r&&"string"!==typeof r&&(r=r.reduce(((t,e)=>t.length>e.length?t:e)));return e+n.size/2+i.measureText(r).width}(i,t,e,n),a=function(t,e,n){let i=t;"string"!==typeof e.text&&(i=pm(e,n));return i}(r,i,e.lineHeight);return{itemWidth:s,itemHeight:a}}(n,e,r,t,i);s>0&&d+m+2*a>c&&(u+=h+a,l.push({width:h,height:d}),f+=h+a,p++,h=d=0),o[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+a})),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,s=kf(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=Kh(n,this.left+i,this.right-this.lineWidths[r]);for(const o of e)r!==o.row&&(r=o.row,a=Kh(n,this.left+i,this.right-this.lineWidths[r])),o.top+=this.top+t+i,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+i}else{let r=0,a=Kh(n,this.top+t+i,this.bottom-this.columnSizes[r].height);for(const o of e)o.col!==r&&(r=o.col,a=Kh(n,this.top+t+i,this.bottom-this.columnSizes[r].height)),o.top=a,o.left+=this.left+i,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;wd(t,this),this._draw(),_d(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:s}=t,a=fd.color,o=kf(t.rtl,this.left,this.width),l=jd(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=o.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=dm(s,u),m=this.isHorizontal(),y=this._computeTitleHeight();d=m?{x:Kh(r,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:Kh(r,this.top+y+c,this.bottom-e[0].height),line:0},Sf(this.ctx,t.textDirection);const b=g+c;this.legendItems.forEach(((v,x)=>{i.strokeStyle=v.fontColor,i.fillStyle=v.fontColor;const w=i.measureText(v.text).width,_=o.textAlign(v.textAlign||(v.textAlign=s.textAlign)),k=f+h+w;let S=d.x,E=d.y;o.setWidth(this.width),m?x>0&&S+k+c>this.right&&(E=d.y+=b,d.line++,S=d.x=Kh(r,this.left+c,this.right-n[d.line])):x>0&&E+b>this.bottom&&(S=d.x=S+e[d.line].width+c,d.line++,E=d.y=Kh(r,this.top+y+c,this.bottom-e[d.line].height));if(function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=$u(n.lineWidth,1);if(i.fillStyle=$u(n.fillStyle,a),i.lineCap=$u(n.lineCap,"butt"),i.lineDashOffset=$u(n.lineDashOffset,0),i.lineJoin=$u(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=$u(n.strokeStyle,a),i.setLineDash($u(n.lineDash,[])),s.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=o.xPlus(t,f/2);vd(i,a,l,e+h,s.pointStyleWidth&&f)}else{const s=e+Math.max((u-p)/2,0),a=o.leftForLtr(t,f),l=Ld(n.borderRadius);i.beginPath(),Object.values(l).some((t=>0!==t))?Nd(i,{x:a,y:s,w:f,h:p,radius:l}):i.rect(a,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(o.x(S),E,v),S=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(_,S+f+h,m?S+k:this.right,t.rtl),function(t,e,n){Td(i,n.text,t,e+g/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(S),E,v),m)d.x+=k+c;else if("string"!==typeof v.text){const t=l.lineHeight;d.y+=pm(v,t)+c}else d.y+=b})),Ef(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=jd(e.font),i=Rd(e.padding);if(!e.display)return;const r=kf(t.rtl,this.left,this.width),s=this.ctx,a=e.position,o=n.size/2,l=i.top+o;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=Kh(t.align,u,this.right-h);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);c=l+Kh(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=Kh(a,u,u+h);s.textAlign=r.textAlign(qh(a)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=n.string,Td(s,e.text,d,c,n)}_computeTitleHeight(){const t=this.options.title,e=jd(t.font),n=Rd(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(Rh(t,this.left,this.right)&&Rh(e,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Rh(t,i.left,i.left+i.width)&&Rh(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const i=this._hoveredItem,r=((t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index)(i,n);i&&!r&&Ju(e.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!r&&Ju(e.onHover,[t,n,this],this)}else n&&Ju(e.onClick,[t,n,this],this)}}function pm(t,e){return e*(t.text?t.text.length:0)}var gm={id:"legend",_element:fm,start(t,e,n){const i=t.legend=new fm({ctx:t.ctx,options:n,chart:t});jp.configure(t,i,n),jp.addBox(t,i)},stop(t){jp.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;jp.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:a,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const l=t.controller.getStyle(n?0:void 0),c=Rd(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class mm extends eg{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=Ku(n.text)?n.text.length:1;this._padding=Rd(n.padding);const r=i*jd(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:s}=this,a=s.align;let o,l,c,u=0;return this.isHorizontal()?(l=Kh(a,n,r),c=e+t,o=r-n):("left"===s.position?(l=n+t,c=Kh(a,i,e),u=-.5*fh):(l=r-t,c=Kh(a,e,i),u=.5*fh),o=i-e),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=jd(e.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:a,rotation:o}=this._drawArgs(i);Td(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:o,textAlign:qh(e.align),textBaseline:"middle",translation:[r,s]})}}var ym={id:"title",_element:mm,start(t,e,n){!function(t,e){const n=new mm({ctx:t.ctx,options:e,chart:t});jp.configure(t,n,e),jp.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;jp.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;jp.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const bm={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i.add(t.x),r+=t.y,++s}}if(0===s||0===i.size)return!1;const a=[...i].reduce(((t,e)=>t+e))/i.size;return{x:a,y:r/s}},nearest(t,e){if(!t.length)return!1;let n,i,r,s=e.x,a=e.y,o=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=Ih(e,i.getCenterPoint());t<o&&(o=t,r=i)}}if(r){const t=r.tooltipPosition();s=t.x,a=t.y}return{x:s,y:a}}};function vm(t,e){return e&&(Ku(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xm(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function wm(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:a,value:o}=s.getLabelAndValue(r);return{chart:t,label:a,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function _m(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:a,boxHeight:o}=e,l=jd(e.bodyFont),c=jd(e.titleFont),u=jd(e.footerFont),h=s.length,d=r.length,f=i.length,p=Rd(e.padding);let g=p.height,m=0,y=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){g+=f*(e.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let b=0;const v=function(t){m=Math.max(m,n.measureText(t).width+b)};return n.save(),n.font=c.string,Zu(t.title,v),n.font=l.string,Zu(t.beforeBody.concat(t.afterBody),v),b=e.displayColors?a+2+e.boxPadding:0,Zu(i,(t=>{Zu(t.before,v),Zu(t.lines,v),Zu(t.after,v)})),b=0,n.font=u.string,Zu(t.footer,v),n.restore(),m+=p.width,{width:m,height:g}}function km(t,e,n,i){const{x:r,width:s}=n,{width:a,chartArea:{left:o,right:l}}=t;let c="center";return"center"===i?c=r<=(o+l)/2?"left":"right":r<=s/2?c="left":r>=a-s/2&&(c="right"),function(t,e,n,i){const{x:r,width:s}=i,a=n.caretSize+n.caretPadding;return"left"===t&&r+s+a>e.width||"right"===t&&r-s-a<0||void 0}(c,t,e,n)&&(c="center"),c}function Sm(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||km(t,e,n,i),yAlign:i}}function Em(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:a}=t,{xAlign:o,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Ld(a);let p=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,o);const g=function(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(u,d)+r:"right"===o&&(p+=Math.max(h,f)+r),{x:Lh(p,0,i.width-e.width),y:Lh(g,0,i.height-e.height)}}function Cm(t,e,n){const i=Rd(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function Tm(t){return vm([],xm(t))}function Nm(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Dm={beforeTitle:Hu,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Hu,beforeBody:Hu,beforeLabel:Hu,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return qu(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Hu,afterBody:Hu,beforeFooter:Hu,footer:Hu,afterFooter:Hu};function Mm(t,e,n,i){const r=t[e].call(n,i);return"undefined"===typeof r?Dm[e].call(n,i):r}class Im extends eg{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new zf(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Vd(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,i=Mm(n,"beforeTitle",this,t),r=Mm(n,"title",this,t),s=Mm(n,"afterTitle",this,t);let a=[];return a=vm(a,xm(i)),a=vm(a,xm(r)),a=vm(a,xm(s)),a}getBeforeBody(t,e){return Tm(Mm(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return Zu(t,(t=>{const e={before:[],lines:[],after:[]},r=Nm(n,t);vm(e.before,xm(Mm(r,"beforeLabel",this,t))),vm(e.lines,Mm(r,"label",this,t)),vm(e.after,xm(Mm(r,"afterLabel",this,t))),i.push(e)})),i}getAfterBody(t,e){return Tm(Mm(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=Mm(n,"beforeFooter",this,t),r=Mm(n,"footer",this,t),s=Mm(n,"afterFooter",this,t);let a=[];return a=vm(a,xm(i)),a=vm(a,xm(r)),a=vm(a,xm(s)),a}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],s=[];let a,o,l=[];for(a=0,o=e.length;a<o;++a)l.push(wm(this.chart,e[a]));return t.filter&&(l=l.filter(((e,i,r)=>t.filter(e,i,r,n)))),t.itemSort&&(l=l.sort(((e,i)=>t.itemSort(e,i,n)))),Zu(l,(e=>{const n=Nm(t.callbacks,e);i.push(Mm(n,"labelColor",this,e)),r.push(Mm(n,"labelPointStyle",this,e)),s.push(Mm(n,"labelTextColor",this,e))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const t=bm[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const e=this._size=_m(this,n),a=Object.assign({},t,e),o=Sm(this.chart,n,a),l=Em(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,r={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=Ld(a),{x:h,y:d}=t,{width:f,height:p}=e;let g,m,y,b,v,x;return"center"===r?(v=d+p/2,"left"===i?(g=h,m=g-s,b=v+s,x=v-s):(g=h+f,m=g+s,b=v-s,x=v+s),y=g):(m="left"===i?h+Math.max(o,c)+s:"right"===i?h+f-Math.max(l,u)-s:this.caretX,"top"===r?(b=d,v=b-s,g=m-s,y=m+s):(b=d+p,v=b+s,g=m+s,y=m-s),x=b),{x1:g,x2:m,x3:y,y1:b,y2:v,y3:x}}drawTitle(t,e,n){const i=this.title,r=i.length;let s,a,o;if(r){const l=kf(n.rtl,this.x,this.width);for(t.x=Cm(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",s=jd(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=s.string,o=0;o<r;++o)e.fillText(i[o],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+a,o+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,r){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=r,c=jd(r.bodyFont),u=Cm(this,"left",r),h=i.x(u),d=o<c.lineHeight?(c.lineHeight-o)/2:0,f=e.y+d;if(r.usePointStyle){const e={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=f+o/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,bd(t,e,n,c),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,bd(t,e,n,c)}else{t.lineWidth=Yu(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const e=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),a=Ld(s.borderRadius);Object.values(a).some((t=>0!==t))?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Nd(t,{x:e,y:f,w:l,h:o,radius:a}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),Nd(t,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,f,l,o),t.strokeRect(e,f,l,o),t.fillStyle=s.backgroundColor,t.fillRect(n,f+1,l-2,o-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=jd(n.bodyFont);let h=u.lineHeight,d=0;const f=kf(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+r},g=f.textAlign(s);let m,y,b,v,x,w,_;for(e.textAlign=s,e.textBaseline="middle",e.font=u.string,t.x=Cm(this,g,n),e.fillStyle=n.bodyColor,Zu(this.beforeBody,p),d=a&&"right"!==g?"center"===s?l/2+c:l+2+c:0,v=0,w=i.length;v<w;++v){for(m=i[v],y=this.labelTextColors[v],e.fillStyle=y,Zu(m.before,p),b=m.lines,a&&b.length&&(this._drawColorBox(e,t,v,f,n),h=Math.max(u.lineHeight,o)),x=0,_=b.length;x<_;++x)p(b[x]),h=u.lineHeight;Zu(m.after,p)}d=0,h=u.lineHeight,Zu(this.afterBody,p),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let s,a;if(r){const o=kf(n.rtl,this.x,this.width);for(t.x=Cm(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=o.textAlign(n.footerAlign),e.textBaseline="middle",s=jd(n.footerFont),e.fillStyle=n.footerColor,e.font=s.string,a=0;a<r;++a)e.fillText(i[a],o.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:s}=this,{x:a,y:o}=t,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Ld(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+u,o),"top"===s&&this.drawCaret(t,e,n,i),e.lineTo(a+l-h,o),e.quadraticCurveTo(a+l,o,a+l,o+h),"center"===s&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(a+l,o+c-f),e.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===s&&this.drawCaret(t,e,n,i),e.lineTo(a+d,o+c),e.quadraticCurveTo(a,o+c,a,o+c-d),"center"===s&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(a,o+u),e.quadraticCurveTo(a,o,a+u,o),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=bm[t.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=_m(this,t),a=Object.assign({},n,this._size),o=Sm(e,t,a),l=Em(t,a,o,e);i._to===l.x&&r._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=Rd(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),Sf(t,e.textDirection),r.y+=s.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),Ef(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map((t=>{let{datasetIndex:e,index:n}=t;const i=this.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[n],index:n}})),r=!th(n,i),s=this._positionChanged(i,e);(r||s)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(t,r,e,n),a=this._positionChanged(s,t),o=e||!th(s,r)||a;return o&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),o}_getActiveElements(t,e,n,i){const r=this.options;if("mouseout"===t.type)return[];if(!i)return e.filter((t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index)));const s=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,s=bm[r.position].call(this,t,e);return!1!==s&&(n!==s.x||i!==s.y)}}o(Im,"positioners",bm);var Am={id:"tooltip",_element:Im,positioners:bm,afterInit(t,e,n){n&&(t.tooltip=new Im({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",c(c({},n),{},{cancelable:!0})))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Dm},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Pm(t,e,n,i){const r=t.indexOf(e);if(-1===r)return((t,e,n,i)=>("string"===typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i);return r!==t.lastIndexOf(e)?n:r}function Om(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Lm extends hg{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(qu(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Lh(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:Pm(n,t,$u(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=t;s<=e;s++)i.push({value:s});return i}getLabelForValue(t){return Om.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Rm(t,e){const n=[],{bounds:i,step:r,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=t,d=r||1,f=c-1,{min:p,max:g}=e,m=!qu(s),y=!qu(a),b=!qu(l),v=(g-p)/(u+1);let x,w,_,k,S=Sh((g-p)/f/d)*d;if(S<1e-14&&!m&&!y)return[{value:p},{value:g}];k=Math.ceil(g/S)-Math.floor(p/S),k>f&&(S=Sh(k*S/f/d)*d),qu(o)||(x=Math.pow(10,o),S=Math.ceil(S*x)/x),"ticks"===i?(w=Math.floor(p/S)*S,_=Math.ceil(g/S)*S):(w=p,_=g),m&&y&&r&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((a-s)/r,S/1e3)?(k=Math.round(Math.min((a-s)/S,c)),S=(a-s)/k,w=s,_=a):b?(w=m?s:w,_=y?a:_,k=l-1,S=(_-w)/k):(k=(_-w)/S,k=kh(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const E=Math.max(Dh(S),Dh(w));x=Math.pow(10,qu(o)?E:o),w=Math.round(w*x)/x,_=Math.round(_*x)/x;let C=0;for(m&&(h&&w!==s?(n.push({value:s}),w<s&&C++,kh(Math.round((w+C*S)*x)/x,s,jm(s,v,t))&&C++):w<s&&C++);C<k;++C){const t=Math.round((w+C*S)*x)/x;if(y&&t>a)break;n.push({value:t})}return y&&h&&_!==a?n.length&&kh(n[n.length-1].value,a,jm(a,v,t))?n[n.length-1].value=a:n.push({value:a}):y&&_!==a||n.push({value:_}),n}function jm(t,e,n){let{horizontal:i,minRotation:r}=n;const s=Th(r),a=(i?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/a,o)}o(Lm,"id","category"),o(Lm,"defaults",{ticks:{callback:Om}});class Fm extends hg{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return qu(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=t=>i=e?i:t,a=t=>r=n?r:t;if(t){const t=_h(i),e=_h(r);t<0&&e<0?a(0):t>0&&e>0&&s(0)}if(i===r){let e=0===r?1:Math.abs(.05*r);a(r+e),t||s(i-e)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=Rm({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Ch(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return sd(t,this.chart.options.locale,this.options.ticks.format)}}class Vm extends Fm{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Qu(t)?t:0,this.max=Qu(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=Th(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}o(Vm,"id","linear"),o(Vm,"defaults",{ticks:{callback:od.formatters.numeric}});const zm=t=>Math.floor(wh(t)),Bm=(t,e)=>Math.pow(10,zm(t)+e);function Um(t){return 1===t/Math.pow(10,zm(t))}function Hm(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function Wm(t,e){let{min:n,max:i}=e;n=Gu(t.min,n);const r=[],s=zm(n);let a=function(t,e){let n=zm(e-t);for(;Hm(t,e,n)>10;)n++;for(;Hm(t,e,n)<10;)n--;return Math.min(n,zm(t))}(n,i),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=s>a?Math.pow(10,s):0,u=Math.round((n-c)*o)/o,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,a)),f=Gu(t.min,Math.round((c+h+d*Math.pow(10,a))*o)/o);for(;f<i;)r.push({value:f,major:Um(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(a++,d=2,o=a>=0?1:o),f=Math.round((c+h+d*Math.pow(10,a))*o)/o;const p=Gu(t.max,f);return r.push({value:p,major:Um(p),significand:d}),r}class qm extends hg{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=Fm.prototype.parse.apply(this,[t,e]);if(0!==n)return Qu(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Qu(t)?Math.max(0,t):null,this.max=Qu(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Qu(this._userMin)&&(this.min=t===Bm(this.min,0)?Bm(this.min,-1):Bm(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=e=>n=t?n:e,s=t=>i=e?i:t;n===i&&(n<=0?(r(1),s(10)):(r(Bm(n,-1)),s(Bm(i,1)))),n<=0&&r(Bm(i,-1)),i<=0&&s(Bm(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=Wm({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Ch(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":sd(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=wh(t),this._valueRange=wh(this.max)-wh(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(wh(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function Km(t){const e=t.ticks;if(e.display&&t.display){const t=Rd(e.backdropPadding);return $u(e.font&&e.font.size,fd.font.size)+t.height}return 0}function Ym(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function Qm(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,a=t.options.pointLabels,o=a.centerPointLabels?fh/s:0;for(let h=0;h<s;h++){const s=a.setContext(t.getPointLabelContext(h));r[h]=s.padding;const d=t.getPointPosition(h,t.drawingArea+r[h],o),f=jd(s.font),p=(l=t.ctx,c=f,u=Ku(u=t._pointLabels[h])?u:[u],{w:gd(l,c.string,u),h:u.length*c.lineHeight});i[h]=p;const g=Ph(t.getIndexAngle(h)+o),m=Math.round(Nh(g));Gm(n,e,g,Ym(m,d.x,p.w,0,180),Ym(m,d.y,p.h,90,270))}var l,c,u;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:Km(s)/2,additionalAngle:a?fh/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];const r=$m(t,u,l);i.push(r),"auto"===o&&(r.visible=Xm(r,c),r.visible&&(c=r))}return i}(t,i,r)}function Gm(t,e,n,i,r){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;i.start<e.l?(o=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-o)):i.end>e.r&&(o=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+o)),r.start<e.t?(l=(e.t-r.start)/a,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function $m(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:a,size:o}=n,l=t.getPointPosition(e,i+r+a,s),c=Math.round(Nh(Ph(l.angle+bh))),u=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(l.y,o.h,c),h=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(c),d=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(l.x,o.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+o.w,bottom:u+o.h}}function Xm(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(xd({x:n,y:i},e)||xd({x:n,y:s},e)||xd({x:r,y:i},e)||xd({x:r,y:s},e))}function Jm(t,e,n){const{left:i,top:r,right:s,bottom:a}=n,{backdropColor:o}=e;if(!qu(o)){const n=Ld(e.borderRadius),l=Rd(e.backdropPadding);t.fillStyle=o;const c=i-l.left,u=r-l.top,h=s-i+l.width,d=a-r+l.height;Object.values(n).some((t=>0!==t))?(t.beginPath(),Nd(t,{x:c,y:u,w:h,h:d,radius:n}),t.fill()):t.fillRect(c,u,h,d)}}function Zm(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,ph);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=t.getPointPosition(s,e),r.lineTo(n.x,n.y)}}o(qm,"id","logarithmic"),o(qm,"defaults",{ticks:{callback:od.formatters.logarithmic,major:{enabled:!0}}});class ty extends Fm{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Rd(Km(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Qu(t)&&!isNaN(t)?t:0,this.max=Qu(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Km(this.options))}generateTickLabels(t){Fm.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=Ju(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?Qm(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return Ph(t*(ph/(this._pointLabels.length||1))+Th(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(qu(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(qu(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Vd(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(t)-bh+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Zm(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:r}=e,s=this._pointLabels.length;let a,o,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=t._pointLabelItems[r];if(!e.visible)continue;const s=i.setContext(t.getPointLabelContext(r));Jm(n,s,e);const a=jd(s.font),{x:o,y:l,textAlign:c}=e;Td(n,t._pointLabels[r],o,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach(((t,e)=>{if(0!==e||0===e&&this.min<0){o=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),a=i.setContext(n),l=r.setContext(n);!function(t,e,n,i,r){const s=t.ctx,a=e.circular,{color:o,lineWidth:l}=e;!a&&!i||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),Zm(t,n,a,i),s.closePath(),s.stroke(),s.restore())}(this,a,o,s,l)}})),n.display){for(t.save(),a=s-1;a>=0;a--){const i=n.setContext(this.getPointLabelContext(a)),{color:r,lineWidth:s}=i;s&&r&&(t.lineWidth=s,t.strokeStyle=r,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,o=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(a,o),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((i,a)=>{if(0===a&&this.min>=0&&!e.reverse)return;const o=n.setContext(this.getContext(a)),l=jd(o.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){t.font=l.string,s=t.measureText(i.label).width,t.fillStyle=o.backdropColor;const e=Rd(o.backdropPadding);t.fillRect(-s/2-e.left,-r-l.size/2-e.top,s+e.width,l.size+e.height)}Td(t,i.label,0,-r,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})})),t.restore()}drawTitle(){}}o(ty,"id","radialLinear"),o(ty,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:od.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}}),o(ty,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),o(ty,"descriptors",{angleLines:{_fallback:"grid"}});const ey={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ny=Object.keys(ey);function iy(t,e){return t-e}function ry(t,e){if(qu(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let a=e;return"function"===typeof i&&(a=i(a)),Qu(a)||(a="string"===typeof i?n.parse(a,i):n.parse(a)),null===a?null:(r&&(a="week"!==r||!Eh(s)&&!0!==s?n.startOf(a,r):n.startOf(a,"isoWeek",s)),+a)}function sy(t,e,n,i){const r=ny.length;for(let s=ny.indexOf(t);s<r-1;++s){const t=ey[ny[s]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return ny[s]}return ny[r-1]}function ay(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=jh(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function oy(t,e,n){const i=[],r={},s=e.length;let a,o;for(a=0;a<s;++a)o=e[a],r[o]=a,i.push({value:o,major:!1});return 0!==s&&n?function(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),a=e[e.length-1].value;let o,l;for(o=s;o<=a;o=+r.add(o,1,i))l=n[o],l>=0&&(e[l].major=!0);return e}(t,i,r,n):i}class ly extends hg{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.time||(t.time={}),i=this._adapter=new yp(t.adapters.date);i.init(e),sh(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:ry(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:a}=this.getUserBounds();function o(t){s||isNaN(t.min)||(i=Math.min(i,t.min)),a||isNaN(t.max)||(r=Math.max(r,t.max))}s&&a||(o(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||o(this.getMinMax(!1))),i=Qu(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=Qu(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}(i,r,this.max);return this._unit=e.unit||(n.autoSkip?sy(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(t,e,n,i,r){for(let s=ny.length-1;s>=ny.indexOf(n);s--){const n=ny[s];if(ey[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return ny[n?ny.indexOf(n):0]}(this,s.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=ny.indexOf(t)+1,n=ny.length;e<n;++e)if(ey[ny[e]].common)return ny[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&s.reverse(),oy(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(){let t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(t=this.getDecimalForValue(n[0]),i=1===n.length?1-t:(this.getDecimalForValue(n[1])-t)/2,e=this.getDecimalForValue(n[n.length-1]),r=1===n.length?e:(e-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=Lh(i,0,s),r=Lh(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||sy(r.minUnit,e,n,this._getLabelCapacity(e)),a=$u(i.ticks.stepSize,1),o="week"===s&&r.isoWeekday,l=Eh(o)||!0===o,c={};let u,h,d=e;if(l&&(d=+t.startOf(d,"isoWeek",o)),d=+t.startOf(d,l?"day":s),t.diff(n,e,s)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+t.add(u,a,s),h++)ay(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||ay(c,u,f),Object.keys(c).sort(iy).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,i=this._unit,r=e||n[i];return this._adapter.format(t,r)}_tickFormatFunction(t,e,n,i){const r=this.options,s=r.ticks.callback;if(s)return Ju(s,[t,e,n],this);const a=r.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],h=n[e],d=l&&u&&h&&h.major;return this._adapter.format(t,i||(d?u:c))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=Th(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),s=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*s,h:n*s+a*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,oy(this,[t],this._majorUnit),i),s=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(ry(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Uh(t.sort(iy))}}function cy(t,e,n){let i,r,s,a,o=0,l=t.length-1;n?(e>=t[o].pos&&e<=t[l].pos&&({lo:o,hi:l}=Fh(t,"pos",e)),({pos:i,time:s}=t[o]),({pos:r,time:a}=t[l])):(e>=t[o].time&&e<=t[l].time&&({lo:o,hi:l}=Fh(t,"time",e)),({time:i,pos:s}=t[o]),({time:r,pos:a}=t[l]));const c=r-i;return c?s+(a-s)*(e-i)/c:s}o(ly,"id","time"),o(ly,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class uy extends ly{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=cy(e,this.min),this._tableRange=cy(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let s,a,o,l,c;for(s=0,a=t.length;s<a;++s)l=t[s],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(s=0,a=i.length;s<a;++s)c=i[s+1],o=i[s-1],l=i[s],Math.round((c+o)/2)!==l&&r.push({time:l,pos:s/(a-1)});return r}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort(((t,e)=>t-e))}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(cy(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return cy(this._table,n*this._tableRange+this._minPos,!0)}}o(uy,"id","timeseries"),o(uy,"defaults",ly.defaults);const hy=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],dy="label";function fy(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function py(t,e){t.labels=e}function gy(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dy;const i=[];t.datasets=e.map((e=>{const r=t.datasets.find((t=>t[n]===e[n]));return r&&e.data&&!i.includes(r)?(i.push(r),Object.assign(r,e),r):c({},e)}))}function my(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dy;const n={labels:[],datasets:[]};return py(n,t.labels),gy(n,t.datasets,e),n}function yy(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:a,type:o,data:l,options:u,plugins:h=[],fallbackContent:d,updateMode:f}=t,p=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,hy),g=(0,i.useRef)(null),m=(0,i.useRef)(null),y=()=>{g.current&&(m.current=new Bg(g.current,{type:o,data:my(l,a),options:u&&c({},u),plugins:h}),fy(e,m.current))},b=()=>{fy(e,null),m.current&&(m.current.destroy(),m.current=null)};return(0,i.useEffect)((()=>{!s&&m.current&&u&&function(t,e){const n=t.options;n&&e&&Object.assign(n,e)}(m.current,u)}),[s,u]),(0,i.useEffect)((()=>{!s&&m.current&&py(m.current.config.data,l.labels)}),[s,l.labels]),(0,i.useEffect)((()=>{!s&&m.current&&l.datasets&&gy(m.current.config.data,l.datasets,a)}),[s,l.datasets]),(0,i.useEffect)((()=>{m.current&&(s?(b(),setTimeout(y)):m.current.update(f))}),[s,u,l.labels,l.datasets,f]),(0,i.useEffect)((()=>{m.current&&(b(),setTimeout(y))}),[o]),(0,i.useEffect)((()=>(y(),()=>b())),[]),i.createElement("canvas",c({ref:g,role:"img",height:n,width:r},p),d)}const by=(0,i.forwardRef)(yy);function vy(t,e){return Bg.register(e),(0,i.forwardRef)(((e,n)=>i.createElement(by,c(c({},e),{},{ref:n,type:t}))))}const xy=vy("bar",op);Bg.register(Lm,Vm,hm,ym,Am,gm);const wy=()=>{const[t,e]=(0,i.useState)([]),[n,r]=(0,i.useState)([]),[s,a]=(0,i.useState)([]);(0,i.useEffect)((()=>{const t=kc(Nl(Cc,"sales"),(t=>{e(t.docs.map((t=>c({id:t.id},t.data()))))})),n=kc(Nl(Cc,"purchases"),(t=>{r(t.docs.map((t=>c({id:t.id},t.data()))))})),i=kc(Nl(Cc,"plants"),(t=>{a(t.docs.map((t=>c({id:t.id},t.data()))))}));return()=>{t(),n(),i()}}),[]);const o=Array(12).fill(0),l=Array(12).fill(0);t.forEach((t=>{if(!t.date)return;const e=new Date(t.date);o[e.getMonth()]+=t.total||0})),n.forEach((t=>{if(!t.date)return;const e=new Date(t.date);l[e.getMonth()]+=t.total||0}));const u={labels:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],datasets:[{label:"Ventas",data:o,backgroundColor:"rgba(34,197,94,0.7)"},{label:"Compras",data:l,backgroundColor:"rgba(239,68,68,0.7)"}]};return(0,Tc.jsxs)("div",{children:[(0,Tc.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Reportes y Estad\xedsticas"}),(0,Tc.jsx)("div",{className:"mb-8",children:(0,Tc.jsx)(xy,{data:u,options:{responsive:!0,plugins:{legend:{position:"top"}}}})}),(0,Tc.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Tc.jsxs)("div",{className:"bg-green-100 rounded p-4",children:[(0,Tc.jsx)("div",{className:"font-bold",children:"Total Ventas"}),(0,Tc.jsxs)("div",{className:"text-2xl text-green-700",children:["$",t.reduce(((t,e)=>t+(e.total||0)),0).toFixed(2)]})]}),(0,Tc.jsxs)("div",{className:"bg-red-100 rounded p-4",children:[(0,Tc.jsx)("div",{className:"font-bold",children:"Total Compras"}),(0,Tc.jsxs)("div",{className:"text-2xl text-red-700",children:["$",n.reduce(((t,e)=>t+(e.total||0)),0).toFixed(2)]})]}),(0,Tc.jsxs)("div",{className:"bg-blue-100 rounded p-4",children:[(0,Tc.jsx)("div",{className:"font-bold",children:"Stock Total"}),(0,Tc.jsx)("div",{className:"text-2xl text-blue-700",children:s.reduce(((t,e)=>t+(e.stock||0)),0)})]})]})]})},_y=t=>(0,Tc.jsx)("div",{className:"relative min-h-screen bg-gray-50 pb-24",children:(0,Tc.jsx)("div",{className:"bg-white rounded-lg shadow p-3",children:(0,Tc.jsx)(ou,c(c({},t),{},{showOnlySalesOfDay:!0}))})});Bg.register(Lm,Vm,hm,ym,Am,gm);const ky=()=>{const[t,e]=(0,i.useState)([]),[n,r]=(0,i.useState)([]);(0,i.useEffect)((()=>{const t=kc(Nl(Cc,"movements"),(t=>{e(t.docs.map((t=>c({id:t.id},t.data()))))})),n=kc(Nl(Cc,"plants"),(t=>{r(t.docs.map((t=>c({id:t.id},t.data()))))}));return()=>{t(),n()}}),[]);const s=new Date,a=t.filter((t=>{if(!t.date)return!1;const e=new Date(t.date);return e.getDate()===s.getDate()&&e.getMonth()===s.getMonth()&&e.getFullYear()===s.getFullYear()})),o=a.filter((t=>"venta"===t.type)).reduce(((t,e)=>t+(Number(e.total)||0)),0),l=a.filter((t=>"compra"===t.type)).reduce(((t,e)=>t+(Number(e.total)||0)),0),u=a.filter((t=>"egreso"===t.type)).reduce(((t,e)=>t+(Number(e.total)||0)),0),h=a.filter((t=>"ingreso"===t.type)).reduce(((t,e)=>t+(Number(e.total)||0)),0),d=a.filter((t=>"efectivo"===t.paymentMethod)).reduce(((t,e)=>"venta"===e.type||"ingreso"===e.type?t+(Number(e.total)||0):"compra"===e.type||"egreso"===e.type?t-(Number(e.total)||0):t),0),f=a.filter((t=>"mercadoPago"===t.paymentMethod)).reduce(((t,e)=>"venta"===e.type||"ingreso"===e.type?t+(Number(e.total)||0):"compra"===e.type||"egreso"===e.type?t-(Number(e.total)||0):t),0),p=a.filter((t=>"venta"===t.type)).reduce(((t,e)=>t+(Number(e.quantity)||0)),0),g={};a.filter((t=>"venta"===t.type)).forEach((t=>{t.plantId&&(g[t.plantId]=(g[t.plantId]||0)+(Number(t.quantity)||0))}));const m=Object.entries(g).map((t=>{var e;let[i,r]=t;return{name:(null===(e=n.find((t=>String(t.id)===String(i))))||void 0===e?void 0:e.name)||"Producto eliminado",qty:r}})).sort(((t,e)=>e.qty-t.qty)).slice(0,10),y=n.filter((t=>Number(t.stock)<=5)).sort(((t,e)=>t.stock-e.stock)).slice(0,10),b={labels:m.map((t=>t.name)),datasets:[{label:"Cantidad vendida",data:m.map((t=>t.qty)),backgroundColor:"rgba(34,197,94,0.7)",borderColor:"rgba(34,197,94,1)",borderWidth:1}]},v=s.getMonth(),x=s.getFullYear(),w=t.filter((t=>{if(!t.date)return!1;const e=new Date(t.date);return e.getMonth()===v&&e.getFullYear()===x})),_={};w.filter((t=>"venta"===t.type)).forEach((t=>{t.plantId&&(_[t.plantId]=(_[t.plantId]||0)+(Number(t.quantity)||0))}));const k=Object.entries(_).map((t=>{var e;let[i,r]=t;return{name:(null===(e=n.find((t=>String(t.id)===String(i))))||void 0===e?void 0:e.name)||"Producto eliminado",qty:r}})).sort(((t,e)=>e.qty-t.qty)).slice(0,10),S={labels:k.map((t=>t.name)),datasets:[{label:"Cantidad vendida",data:k.map((t=>t.qty)),backgroundColor:"rgba(59,130,246,0.7)",borderColor:"rgba(59,130,246,1)",borderWidth:1}]};return(0,Tc.jsx)("div",{children:(0,Tc.jsxs)("div",{className:"relative min-h-screen bg-gray-50 pb-24",children:[(0,Tc.jsxs)("div",{className:"rounded-lg shadow bg-white p-3",children:[(0,Tc.jsx)("div",{className:"font-semibold text-green-700 mb-2",children:"Totales del d\xeda"}),(0,Tc.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center text-sm",children:[(0,Tc.jsxs)("div",{className:"bg-green-100 rounded px-3 py-1",children:["Ventas: ",(0,Tc.jsx)("b",{children:o.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,Tc.jsxs)("div",{className:"bg-red-100 rounded px-3 py-1",children:["Compras: ",(0,Tc.jsx)("b",{children:l.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,Tc.jsxs)("div",{className:"bg-orange-100 rounded px-3 py-1",children:["Egresos: ",(0,Tc.jsx)("b",{children:u.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,Tc.jsxs)("div",{className:"bg-lime-100 rounded px-3 py-1",children:["Ingresos: ",(0,Tc.jsx)("b",{children:h.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,Tc.jsxs)("div",{className:"bg-blue-100 rounded px-3 py-1",children:["Caja Efectivo: ",(0,Tc.jsx)("b",{children:d.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,Tc.jsxs)("div",{className:"bg-purple-100 rounded px-3 py-1",children:["Caja MP: ",(0,Tc.jsx)("b",{children:f.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,Tc.jsxs)("div",{className:"bg-gray-100 rounded px-3 py-1",children:["Productos vendidos: ",(0,Tc.jsx)("b",{children:p})]})]})]}),(0,Tc.jsxs)("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[(0,Tc.jsx)("div",{className:"font-semibold text-blue-700 mb-2",children:"Productos m\xe1s vendidos hoy"}),0===m.length?(0,Tc.jsx)("div",{className:"text-gray-400 text-sm",children:"No hay ventas registradas hoy."}):(0,Tc.jsxs)(Tc.Fragment,{children:[(0,Tc.jsx)(xy,{data:b,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Productos vendidos hoy"}},scales:{x:{title:{display:!1}},y:{beginAtZero:!0,title:{display:!0,text:"Cantidad"}}}},height:220}),(0,Tc.jsx)("ul",{className:"text-sm mt-2",children:m.map(((t,e)=>(0,Tc.jsxs)("li",{className:0===e?"font-bold text-green-700":"",children:[t.name,": ",t.qty]},t.name)))})]})]}),(0,Tc.jsxs)("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[(0,Tc.jsx)("div",{className:"font-semibold text-blue-700 mb-2",children:"Productos m\xe1s vendidos del mes"}),0===k.length?(0,Tc.jsx)("div",{className:"text-gray-400 text-sm",children:"No hay ventas registradas este mes."}):(0,Tc.jsxs)(Tc.Fragment,{children:[(0,Tc.jsx)(xy,{data:S,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Productos vendidos este mes"}},scales:{x:{title:{display:!1}},y:{beginAtZero:!0,title:{display:!0,text:"Cantidad"}}}},height:220}),(0,Tc.jsx)("ul",{className:"text-sm mt-2",children:k.map(((t,e)=>(0,Tc.jsxs)("li",{className:0===e?"font-bold text-blue-700":"",children:[t.name,": ",t.qty]},t.name)))})]})]}),(0,Tc.jsxs)("div",{className:"bg-white rounded-lg shadow p-3",children:[(0,Tc.jsx)("div",{className:"font-semibold text-orange-700 mb-2",children:"Productos a reponer (bajo stock)"}),0===y.length?(0,Tc.jsx)("div",{className:"text-gray-400 text-sm",children:"No hay productos con bajo stock."}):(0,Tc.jsx)("ul",{className:"text-sm",children:y.map((t=>(0,Tc.jsxs)("li",{children:[t.name," ",(0,Tc.jsxs)("span",{className:"text-gray-500",children:["(",t.stock," en stock)"]})]},t.id)))})]})]})})},Sy=n.p+"static/media/logo.002f0bc12656d05ad8e3.png",Ey=Sy,Cy=[{key:"inventory",label:"Inventario",icon:"\ud83d\udce6",color:"bg-green-100",onClick:null},{key:"cash",label:"Caja Diaria",icon:"\ud83d\udcb0",color:"bg-yellow-100",onClick:null},{key:"sales",label:"Ventas",icon:"\ud83d\uded2",color:"bg-blue-100",onClick:null},{key:"reports",label:"Reportes",icon:"\ud83d\udcca",color:"bg-purple-100",onClick:null}],Ty=t=>{let{onModuleClick:e,businessName:n="Mundo Floral",logoUrl:i=Ey,modulesConfig:r}=t;const s=r||Cy;return(0,Tc.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-green-50 to-white pb-24",children:[(0,Tc.jsxs)("header",{className:"sticky top-0 z-20 bg-gradient-to-b from-green-50 to-white/95 backdrop-blur px-4 py-1.5 shadow-md flex items-center justify-between rounded-xl mx-2 mt-2",children:[(0,Tc.jsxs)("div",{className:"flex items-center",children:[(0,Tc.jsx)("div",{className:"bg-white p-1 rounded-full border border-green-100",children:(0,Tc.jsx)("img",{src:i,alt:"Logo",className:"h-9 w-9 object-contain"})}),(0,Tc.jsx)("span",{className:"text-lg font-bold text-green-700 tracking-tight ml-2",children:n})]}),(0,Tc.jsx)("p",{className:"text-sm text-gray-600 bg-white/80 px-3 py-0.5 rounded-full border border-green-50",children:"Sistema de Gesti\xf3n"})]}),(0,Tc.jsx)("div",{className:"h-3"}),(0,Tc.jsx)("div",{className:"grid grid-cols-2 gap-4 px-4 mt-2",children:s.map((t=>(0,Tc.jsxs)("button",{className:"flex flex-col items-center justify-center rounded-xl shadow-md border border-gray-100 p-5 ".concat(t.color," hover:scale-102 transition-transform active:scale-98"),onClick:()=>e&&e(t.key),children:[(0,Tc.jsx)("span",{className:"text-3xl mb-2",children:t.icon}),(0,Tc.jsx)("span",{className:"text-base font-medium text-gray-700",children:t.label})]},t.key)))}),(0,Tc.jsxs)("footer",{className:"fixed bottom-0 left-0 right-0 mx-2 mb-1 text-center text-xs text-gray-400 py-2 bg-white/80 backdrop-blur border-t border-gray-100 rounded-t-xl shadow-md",children:["\xa9 ",(new Date).getFullYear()," ",n]})]})},Ny=()=>{const[t,e]=(0,i.useState)("home"),n=t=>t?(0,Tc.jsxs)("div",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur py-1.5 px-3 shadow-md flex justify-between items-center rounded-xl mx-2 mt-2 mb-3 border border-gray-100",children:[(0,Tc.jsx)("button",{className:"text-sm font-medium text-green-700 flex items-center bg-green-50 px-2 py-1 rounded-full border border-green-100",onClick:()=>e("home"),children:"\u2190 Inicio"}),(0,Tc.jsx)("h1",{className:"text-base font-bold text-gray-700",children:t}),(0,Tc.jsx)("div",{className:"w-16"})," "]}):null,r=(t,e)=>({active:"flex-1 flex flex-col items-center py-2 text-base font-semibold ".concat(e," text-white rounded-t-lg transition-all duration-200"),inactive:"flex-1 flex flex-col items-center py-2 text-base font-semibold bg-gray-50 text-gray-700 hover:bg-gray-100 rounded-t-lg transition-all duration-200"});return(0,Tc.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-24",children:[(0,Tc.jsxs)("div",{className:"max-w-2xl mx-auto pt-2 pb-28 px-2",children:["home"===t&&(0,Tc.jsx)(Ty,{onModuleClick:t=>{switch(t){case"inventory":e("inventario");break;case"cash":e("caja");break;case"sales":e("ventas");break;case"reports":e("reportes");break;default:e("home")}},businessName:"Mundo Floral",logoUrl:Sy}),"ventas"===t&&(0,Tc.jsxs)(Tc.Fragment,{children:[n("Movimientos de Caja"),(0,Tc.jsx)(_y,{})]}),"caja"===t&&(0,Tc.jsxs)(Tc.Fragment,{children:[n("Caja Diaria"),(0,Tc.jsx)(lu,{hideTitleInView:!0})]}),"inventario"===t&&(0,Tc.jsxs)(Tc.Fragment,{children:[n("Inventario"),(0,Tc.jsx)(Dc,{})]}),"reportes"===t&&(0,Tc.jsxs)(Tc.Fragment,{children:[n("Reportes"),(0,Tc.jsx)(ky,{})]})]}),"home"!==t&&(0,Tc.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-white flex z-50 shadow-md border-t border-gray-100",children:[(0,Tc.jsxs)("button",{className:"ventas"===t?r(0,"bg-blue-600").active:r().inactive,onClick:()=>e("ventas"),children:[(0,Tc.jsx)("span",{className:"text-xl",children:"\ud83d\uded2"}),(0,Tc.jsx)("span",{className:"text-xs mt-0.5",children:"Ventas"})]}),(0,Tc.jsxs)("button",{className:"caja"===t?r(0,"bg-green-600").active:r().inactive,onClick:()=>e("caja"),children:[(0,Tc.jsx)("span",{className:"text-xl",children:"\ud83d\udcb0"}),(0,Tc.jsx)("span",{className:"text-xs mt-0.5",children:"Caja"})]}),(0,Tc.jsxs)("button",{className:"inventario"===t?r(0,"bg-yellow-600").active:r().inactive,onClick:()=>e("inventario"),children:[(0,Tc.jsx)("span",{className:"text-xl",children:"\ud83d\udce6"}),(0,Tc.jsx)("span",{className:"text-xs mt-0.5",children:"Inventario"})]}),(0,Tc.jsxs)("button",{className:"reportes"===t?r(0,"bg-gray-800").active:r().inactive,onClick:()=>e("reportes"),children:[(0,Tc.jsx)("span",{className:"text-xl",children:"\ud83d\udcca"}),(0,Tc.jsx)("span",{className:"text-xs mt-0.5",children:"Reportes"})]}),(0,Tc.jsxs)("button",{className:r(0,"").inactive+" bg-gray-200 hover:bg-gray-300",onClick:()=>e("home"),children:[(0,Tc.jsx)("span",{className:"text-xl",children:"\ud83c\udfe0"}),(0,Tc.jsx)("span",{className:"text-xs mt-0.5",children:"Inicio"})]})]})]})},Dy=t=>{let{currentView:e,setCurrentView:n,sidebarMode:i}=t;const r=[{id:"plants",label:"Productos",icon:"\ud83d\udce6"},{id:"movements",label:"Caja",icon:"\ud83d\udcbc"},{id:"stats",label:"Estad\xedsticas",icon:"\ud83d\udcca"},{id:"reportes",label:"Reportes",icon:"\ud83d\udcc8"},{id:"carga-movil",label:"Carga M\xf3vil",icon:"\ud83d\udcf2",mobileOnly:!0}],s="undefined"!==typeof window&&window.innerWidth<768;return!s&&i?(0,Tc.jsx)("nav",{className:"flex flex-col gap-2 mt-4",children:r.filter((t=>!t.mobileOnly)).map((t=>(0,Tc.jsxs)("button",{onClick:()=>n(t.id),className:"flex items-center gap-3 px-3 py-2 rounded-lg font-semibold transition w-full text-left\n              ".concat(e===t.id?"bg-green-600 text-white shadow":"text-gray-700 hover:bg-green-100 hover:text-green-700"),title:t.label,children:[(0,Tc.jsx)("span",{className:"text-2xl",children:t.icon}),"full"===i&&(0,Tc.jsx)("span",{className:"text-base font-medium",children:t.label})]},t.id)))}):s?(0,Tc.jsx)("nav",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:(0,Tc.jsx)("ul",{className:"flex divide-x divide-gray-200 overflow-x-auto",children:r.filter((t=>s?t.mobileOnly||"carga-movil"===t.id||"plants"===t.id||"movements"===t.id:"carga-movil"!==t.id||t.mobileOnly)).map((t=>(0,Tc.jsx)("li",{className:"flex-1 min-w-[80px]",children:(0,Tc.jsxs)("button",{onClick:()=>n(t.id),className:"w-full py-3 px-4 text-center font-medium ".concat(e===t.id?"bg-green-50 text-green-600":"text-gray-600 hover:bg-gray-50"),children:[(0,Tc.jsx)("span",{className:"block text-lg",children:t.icon}),(0,Tc.jsx)("span",{children:t.label})]})},t.id)))})}):(0,Tc.jsx)("nav",{className:"bg-white shadow rounded-xl px-4 py-2 flex items-center gap-2 mb-6",children:r.filter((t=>!t.mobileOnly)).map((t=>(0,Tc.jsxs)("button",{onClick:()=>n(t.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition\n              ".concat(e===t.id?"bg-green-600 text-white shadow":"text-gray-700 hover:bg-green-100 hover:text-green-700"),children:[(0,Tc.jsx)("span",{className:"text-xl",children:t.icon}),(0,Tc.jsx)("span",{className:"hidden sm:inline",children:t.label})]},t.id)))})},My=[{name:"Instagram",url:"https://www.instagram.com/",icon:(0,Tc.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[(0,Tc.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75h9A3.75 3.75 0 0120.25 7.5v9a3.75 3.75 0 01-3.75 3.75h-9A3.75 3.75 0 013.75 16.5v-9A3.75 3.75 0 017.5 3.75zm0 0V3m9 0v.75m-9 0h9m-9 0A3.75 3.75 0 003.75 7.5v9A3.75 3.75 0 007.5 20.25h9A3.75 3.75 0 0020.25 16.5v-9A3.75 3.75 0 0016.5 3.75h-9z"}),(0,Tc.jsx)("circle",{cx:"12",cy:"12",r:"3.5",stroke:"currentColor",strokeWidth:"1.5"})]})},{name:"WhatsApp",url:"https://wa.me/",icon:(0,Tc.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[(0,Tc.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 13.487a6.5 6.5 0 10-2.375 2.375l2.122.53a.75.75 0 00.91-.91l-.53-2.122z"}),(0,Tc.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75h.008v.008H9.75V9.75zm4.5 0h.008v.008h-.008V9.75zm-2.25 2.25h.008v.008h-.008v-.008z"})]})}],Iy=t=>{let{currentView:e,setCurrentView:n,children:r}=t;const[s,a]=(0,i.useState)(!0);return(0,Tc.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,Tc.jsxs)("header",{className:"w-full bg-white shadow flex items-center justify-between px-6 py-3 sticky top-0 z-30 relative",children:[(0,Tc.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Tc.jsx)("img",{src:Sy,alt:"Logo",className:"h-10 w-10 rounded-full shadow border-2 border-gray-200 bg-white"}),(0,Tc.jsx)("span",{className:"text-2xl font-bold text-gray-800 tracking-tight drop-shadow",children:"Mundo Floral"})]}),"caja"===e&&(0,Tc.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none z-20",children:(0,Tc.jsx)("span",{className:"text-base font-semibold text-black bg-[#e6f0fa] px-4 py-1 rounded-lg shadow border border-blue-300",style:{letterSpacing:1,fontWeight:400,boxShadow:"0 2px 12px 0 rgba(0,0,0,0.10)"},children:"Caja y Movimientos"})}),(0,Tc.jsxs)("div",{className:"flex items-center gap-3",children:[My.map((t=>(0,Tc.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",title:t.name,className:"text-gray-400 hover:text-blue-500 transition",children:t.icon},t.name))),(0,Tc.jsx)("button",{className:"ml-2 text-gray-400 hover:text-blue-500",title:"Agregar red social",children:(0,Tc.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tc.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}),(0,Tc.jsxs)("div",{className:"flex flex-1 min-h-0",children:[(0,Tc.jsxs)("aside",{className:"transition-all duration-300 bg-white shadow-lg flex flex-col ".concat(s?"w-56":"w-16"," h-screen sticky top-0 min-h-0 z-20"),children:[(0,Tc.jsx)("button",{className:"p-2 m-2 rounded hover:bg-gray-100 text-gray-400 self-end",onClick:()=>a((t=>!t)),title:s?"Ocultar men\xfa":"Mostrar men\xfa",children:(0,Tc.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tc.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 12L6 6":"M6 6l12 6-12 6"})})}),(0,Tc.jsx)(Dy,{currentView:e,setCurrentView:n,sidebarMode:s?"full":"compact"})]}),(0,Tc.jsx)("main",{className:"flex-1 overflow-y-auto min-h-0 ".concat("caja"===e?"pt-0 pr-6 pb-6 pl-6":"p-6"),style:"caja"===e?{paddingTop:0}:{},children:r})]}),(0,Tc.jsxs)("footer",{className:"w-full bg-gray-800 text-center text-xs text-gray-100 py-2 border-t mt-2",children:["\xa9 ",(new Date).getFullYear()," Mundo Floral. Todos los derechos reservados."]})]})},Ay=()=>{const[t,e]=i.useState(window.innerWidth<768),[n,r]=i.useState("plants");if(i.useEffect((()=>{const t=()=>e(window.innerWidth<768);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),t)return(0,Tc.jsx)(Ny,{});return(0,Tc.jsx)(Iy,{currentView:"movements"===n?"caja":n,setCurrentView:r,children:(()=>{switch(n){case"plants":return(0,Tc.jsx)(Pc,{});case"movements":case"caja":return(0,Tc.jsx)(cu,{});case"reportes":return(0,Tc.jsx)(wy,{});default:return(0,Tc.jsx)("div",{className:"text-center text-gray-500",children:"Seleccione un m\xf3dulo."})}})()})},Py=document.getElementById("root");if(!Py)throw new Error("No se encontr\xf3 el elemento root en el HTML.");(0,r.H)(Py).render((0,Tc.jsx)(i.StrictMode,{children:(0,Tc.jsx)(Ay,{})}))})();
//# sourceMappingURL=main.a90ee2e9.js.map