/*! For license information please see main.4e7d5c80.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,g(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+T(l,0):s,w(a)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),I(a,t,i,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+T(o=e[c],c);l+=I(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,i,u=s+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},D={transition:null},R={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(m=!1,x(e),!g)if(null!==r(c))g=!0,D(_);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function _(e,n){g=!1,m&&(m=!1,v(C),C=-1),p=!0;var s=f;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(c)&&i(c),x(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&R(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,E=null,C=-1,N=5,T=-1;function I(){return!(t.unstable_now()-T<N)}function P(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?k():(S=!1,E=null)}}else S=!1}if("function"===typeof b)k=function(){b(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,M=A.port2;A.port1.onmessage=P,k=function(){M.postMessage(null)}}else k=function(){y(P,0)};function D(e){E=e,S||(S=!0,k())}function R(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(v(C),C=-1):m=!0,R(w,s-a))):(e.sortIndex=o,n(c,e),g||p||(g=!0,D(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.H=r.createRoot,r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var j,L=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Ui){return e.body}}function Q(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Se=null;function Ee(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ce(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ne(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Ie(){}var Pe=!1;function Ae(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Te(e,t,n)}finally{Pe=!1,(null!==ke||null!==Se)&&(Ie(),Ne())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){De=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){De=!1}function Oe(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var je=!1,Le=null,Fe=!1,Ve=null,ze={onError:function(e){je=!0,Le=e}};function Ue(e,t,n,r,i,s,a,o,l){je=!1,Le=null,Oe.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function qe(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return We(i),e;if(a===r)return We(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ht(o):0!==(s&=a)&&(r=ht(s))}else 0!==(a=n&~i)?r=ht(a):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,kt,St,Et,Ct=!1,Nt=[],Tt=null,It=null,Pt=null,At=new Map,Mt=new Map,Dt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function jt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function zt(){Ct=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==It&&Ft(It)&&(It=null),null!==Pt&&Ft(Pt)&&(Pt=null),At.forEach(Vt),Mt.forEach(Vt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Ut(t,e)}if(0<Nt.length){Ut(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ut(Tt,e),null!==It&&Ut(It,e),null!==Pt&&Ut(Pt,e),At.forEach(t),Mt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Dt.shift()}var Ht=x.ReactCurrentBatchConfig,Wt=!0;function qt(e,t,n,r){var i=bt,s=Ht.transition;Ht.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Ht.transition=s}}function Kt(e,t,n,r){var i=bt,s=Ht.transition;Ht.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Ht.transition=s}}function Gt(e,t,n,r){if(Wt){var i=Qt(e,t,n,r);if(null===i)Wr(e,t,r,Yt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=jt(Tt,e,t,n,r,i),!0;case"dragenter":return It=jt(It,e,t,n,r,i),!0;case"mouseover":return Pt=jt(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,jt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Mt.set(s,jt(Mt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&wt(s),null===(s=Qt(e,t,n,r))&&Wr(e,t,r,Yt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Yt=null;function Qt(e,t,n,r){if(Yt=null,null!==(e=vi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=L({},cn,{view:0,detail:0}),dn=sn(hn),fn=L({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),gn=sn(L({},fn,{dataTransfer:0})),mn=sn(L({},hn,{relatedTarget:0})),yn=sn(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),xn=sn(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Sn}var Cn=L({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(Cn),Tn=sn(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(L({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=sn(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=sn(An),Dn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var jn=u&&"TextEvent"in window&&!On,Ln=u&&(!Rn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function qn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Yn(e){Fr(e,0)}function Qn(e){if(G(xi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];qn(t,Gn,e,we(e)),Ae(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function sr(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Y(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Sr={};function Er(e){if(kr[e])return kr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=Er("animationend"),Nr=Er("animationiteration"),Tr=Er("animationstart"),Ir=Er("transitionend"),Pr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Pr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Ar.length;Dr++){var Rr=Ar[Dr];Mr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Mr(Cr,"onAnimationEnd"),Mr(Nr,"onAnimationIteration"),Mr(Tr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(Ue.apply(this,arguments),je){if(!je)throw Error(s(198));var u=Le;je=!1,Le=null,Fe||(Fe=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,o,c),s=l}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Ur]){e[Ur]=!0,a.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,zr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch($t(t)){case 1:var i=qt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=vi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Ae((function(){var r=s,i=we(n),a=[];e:{var o=Pr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Cr:case Nr:case Tr:l=yn;break;case Ir:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Me(p,d))&&u.push(qr(p,g,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:xi(l),f=null==c?o:xi(c),(o=new u(g,p+"leave",l,n,i)).target=h,o.relatedTarget=f,g=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,g=d;g;g=Gr(g))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Yr(a,o,l,u,!1),null!==c&&null!==h&&Yr(a,h,c,u,!0)}if("select"===(l=(o=r?xi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=$n;else if(Wn(o))if(Xn)m=ar;else{m=ir;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=sr);switch(m&&(m=m(e,r))?qn(a,m,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?xi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(a,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Un(n))&&(b.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Rn&&zn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Fr(a,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Me(e,n))&&r.unshift(qr(e,s,i)),null!=(s=Me(e,t))&&r.push(qr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Me(n,s))&&a.unshift(qr(n,l,o)):i||null!=(l=Me(n,s))&&a.push(qr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var _i=[],ki=-1;function Si(e){return{current:e}}function Ei(e){0>ki||(e.current=_i[ki],_i[ki]=null,ki--)}function Ci(e,t){ki++,_i[ki]=e.current,e.current=t}var Ni={},Ti=Si(Ni),Ii=Si(!1),Pi=Ni;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ii),Ei(Ti)}function Ri(e,t,n){if(Ti.current!==Ni)throw Error(s(168));Ci(Ti,t),Ci(Ii,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,H(e)||"Unknown",i));return L({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Pi=Ti.current,Ci(Ti,e),Ci(Ii,Ii.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oi(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ii),Ei(Ti),Ci(Ti,e)):Ei(Ii),Ci(Ii,n)}var Fi=null,Vi=!1,zi=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function Hi(){if(!zi&&null!==Fi){zi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Vi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,Hi),i}finally{bt=t,zi=!1}}return null}var Wi=[],qi=0,Ki=null,Gi=0,Yi=[],Qi=0,$i=null,Xi=1,Ji="";function Zi(e,t){Wi[qi++]=Gi,Wi[qi++]=Ki,Ki=e,Gi=t}function es(e,t,n){Yi[Qi++]=Xi,Yi[Qi++]=Ji,Yi[Qi++]=$i,$i=e;var r=Xi;e=Ji;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Ji=s+e}else Xi=1<<s|n<<i|r,Ji=e}function ts(e){null!==e.return&&(Zi(e,1),es(e,1,0))}function ns(e){for(;e===Ki;)Ki=Wi[--qi],Wi[qi]=null,Gi=Wi[--qi],Wi[qi]=null;for(;e===$i;)$i=Yi[--Qi],Yi[Qi]=null,Ji=Yi[--Qi],Yi[Qi]=null,Xi=Yi[--Qi],Yi[Qi]=null}var rs=null,is=null,ss=!1,as=null;function os(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,is=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,rs=e,is=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(ss){var t=is;if(t){var n=t;if(!ls(e,t)){if(cs(e))throw Error(s(418));t=ci(n.nextSibling);var r=rs;t&&ls(e,t)?os(r,n):(e.flags=-4097&e.flags|2,ss=!1,rs=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,rs=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function ds(e){if(e!==rs)return!1;if(!ss)return hs(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=is)){if(cs(e))throw fs(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=rs?ci(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=is;e;)e=ci(e.nextSibling)}function ps(){is=rs=null,ss=!1}function gs(e){null===as?as=[e]:as.push(e)}var ms=x.ReactCurrentBatchConfig;function ys(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===M&&bs(s)===t.type)?((r=i(t,n.props)).ref=ys(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=ys(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=jc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=ys(e,null,t),n.return=e,n;case _:return(t=Vc(t,e.mode,n)).return=e,t;case M:return d(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=jc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case M:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:h(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case M:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return h(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function g(i,s,o,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<o.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(i,h,o[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),s=a(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===o.length)return n(i,h),ss&&Zi(i,g),c;if(null===h){for(;g<o.length;g++)null!==(h=d(i,o[g],l))&&(s=a(h,s,g),null===u?c=h:u.sibling=h,u=h);return ss&&Zi(i,g),c}for(h=r(i,h);g<o.length;g++)null!==(m=p(h,i,g,o[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=a(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(i,e)})),ss&&Zi(i,g),c}function m(i,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=o,m=o=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),o=a(b,o,m),null===h?u=b:h.sibling=b,h=b,g=y}if(v.done)return n(i,g),ss&&Zi(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(i,v.value,c))&&(o=a(v,o,m),null===h?u=v:h.sibling=v,h=v);return ss&&Zi(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),o=a(v,o,m),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(i,e)})),ss&&Zi(i,m),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&bs(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=ys(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((s=jc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Oc(a.type,a.key,a.props,null,r.mode,l)).ref=ys(r,s,a),l.return=r,r=l)}return o(r);case _:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vc(a,r.mode,l)).return=r,r=s}return o(r);case M:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return g(r,s,a,l);if(O(a))return m(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Fc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ws=xs(!0),_s=xs(!1),ks=Si(null),Ss=null,Es=null,Cs=null;function Ns(){Cs=Es=Ss=null}function Ts(e){var t=ks.current;Ei(ks),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){Ss=e,Cs=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===Ss)throw Error(s(308));Es=e,Ss.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var Ms=null;function Ds(e){null===Ms?Ms=[e]:Ms.push(e)}function Rs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ds(t)):(n.next=i.next,i.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var js=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Os(e,n)}return null===(i=r.interleaved)?(t.next=t,Ds(r)):(t.next=i.next,i.next=t),r.interleaved=t,Os(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hs(e,t,n,r){var i=e.updateQueue;js=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,g=o;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=L({},h,d);break e;case 2:js=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=h}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var qs={},Ks=Si(qs),Gs=Si(qs),Ys=Si(qs);function Qs(e){if(e===qs)throw Error(s(174));return e}function $s(e,t){switch(Ci(Ys,t),Ci(Gs,e),Ci(Ks,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ks),Ci(Ks,t)}function Xs(){Ei(Ks),Ei(Gs),Ei(Ys)}function Js(e){Qs(Ys.current);var t=Qs(Ks.current),n=le(t,e.type);t!==n&&(Ci(Gs,e),Ci(Ks,n))}function Zs(e){Gs.current===e&&(Ei(Ks),Ei(Gs))}var ea=Si(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=x.ReactCurrentDispatcher,sa=x.ReactCurrentBatchConfig,aa=0,oa=null,la=null,ca=null,ua=!1,ha=!1,da=0,fa=0;function pa(){throw Error(s(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(aa=a,oa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Za:eo,e=n(r,i),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(s(301));a+=1,ca=la=null,t.updateQueue=null,ia.current=to,e=n(r,i)}while(ha)}if(ia.current=Ja,t=null!==la&&null!==la.next,aa=0,ca=la=oa=null,ua=!1,t)throw Error(s(300));return e}function ya(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?oa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=oa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?oa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(s(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?oa.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ba(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,oa.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,oa.lanes|=a,Ll|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=ba(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ka(){}function Sa(e,t){var n=oa,r=ba(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,xo=!0),r=r.queue,ja(Na.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Aa(9,Ca.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&aa)||Ea(n,t,i)}return i}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ca(e,t,n,r){t.value=n,t.getSnapshot=r,Ta(t)&&Ia(e)}function Na(e,t,n){return n((function(){Ta(t)&&Ia(e)}))}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ia(e){var t=Os(e,1);null!==t&&rc(t,e,1,-1)}function Pa(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,oa,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ma(){return ba().memoizedState}function Da(e,t,n,r){var i=va();oa.flags|=e,i.memoizedState=Aa(1|t,n,void 0,void 0===r?null:r)}function Ra(e,t,n,r){var i=ba();r=void 0===r?null:r;var s=void 0;if(null!==la){var a=la.memoizedState;if(s=a.destroy,null!==r&&ga(r,a.deps))return void(i.memoizedState=Aa(t,n,s,r))}oa.flags|=e,i.memoizedState=Aa(1|t,n,s,r)}function Oa(e,t){return Da(8390656,8,e,t)}function ja(e,t){return Ra(2048,8,e,t)}function La(e,t){return Ra(4,2,e,t)}function Fa(e,t){return Ra(4,4,e,t)}function Va(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,Va.bind(null,t,e),n)}function Ua(){}function Ba(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(or(n,t)||(n=gt(),oa.lanes|=n,Ll|=n,e.baseState=!0),t)}function qa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function Ka(){return ba().memoizedState}function Ga(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))$a(t,n);else if(null!==(n=Rs(e,t,n,r))){rc(n,e,r,tc()),Xa(n,t,r)}}function Ya(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))$a(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ds(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Rs(e,t,i,r))&&(rc(n,e,r,i=tc()),Xa(n,t,r))}}function Qa(e){var t=e.alternate;return e===oa||null!==t&&t===oa}function $a(e,t){ha=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Ja={readContext:As,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:As,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Oa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Va.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,oa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Pa,useDebugValue:Ua,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=qa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oa,i=va();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&aa)||Ea(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Oa(Na.bind(null,r,a,e),[e]),r.flags|=2048,Aa(9,Ca.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Pl.identifierPrefix;if(ss){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:As,useCallback:Ba,useContext:As,useEffect:ja,useImperativeHandle:za,useInsertionEffect:La,useLayoutEffect:Fa,useMemo:Ha,useReducer:wa,useRef:Ma,useState:function(){return wa(xa)},useDebugValue:Ua,useDeferredValue:function(e){return Wa(ba(),la.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ba().memoizedState]},useMutableSource:ka,useSyncExternalStore:Sa,useId:Ka,unstable_isNewReconciler:!1},to={readContext:As,useCallback:Ba,useContext:As,useEffect:ja,useImperativeHandle:za,useInsertionEffect:La,useLayoutEffect:Fa,useMemo:Ha,useReducer:_a,useRef:Ma,useState:function(){return _a(xa)},useDebugValue:Ua,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Wa(t,la.memoizedState,e)},useTransition:function(){return[_a(xa)[0],ba().memoizedState]},useMutableSource:ka,useSyncExternalStore:Sa,useId:Ka,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Vs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(rc(t,e,i,r),Us(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Vs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(rc(t,e,i,r),Us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Vs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zs(e,i,r))&&(rc(t,e,r,n),Us(t,e,r))}};function so(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function ao(e,t,n){var r=!1,i=Ni,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(i=Mi(t)?Pi:Ti.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ni),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function oo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=As(s):(s=Mi(t)?Pi:Ti.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&io.enqueueReplaceState(i,i.state,null),Hs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Vs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Kl=r),ho(0,t)},n}function go(e,t,n){(n=Vs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Vs(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bo=x.ReactCurrentOwner,xo=!1;function wo(e,t,n,r){t.child=null===e?_s(t,null,n,r):ws(t,e.child,n,r)}function _o(e,t,n,r,i){n=n.render;var s=t.ref;return Ps(t,i),r=ma(e,t,n,r,s,i),n=ya(),null===e||xo?(ss&&n&&ts(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function ko(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,So(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return qo(e,t,i)}return t.flags|=1,(e=Rc(s,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,qo(e,t,i);0!==(131072&e.flags)&&(xo=!0)}}return No(e,t,n,r,i)}function Eo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Rl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Rl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ci(Rl,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ci(Rl,Dl),Dl|=r;return wo(e,t,i,n),t.child}function Co(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,r,i){var s=Mi(n)?Pi:Ti.current;return s=Ai(t,s),Ps(t,i),n=ma(e,t,n,r,s,i),r=ya(),null===e||xo?(ss&&r&&ts(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function To(e,t,n,r,i){if(Mi(n)){var s=!0;ji(t)}else s=!1;if(Ps(t,i),null===t.stateNode)Wo(e,t),ao(t,n,r),lo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=As(c):c=Ai(t,c=Mi(n)?Pi:Ti.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&oo(t,a,r,c),js=!1;var d=t.memoizedState;a.state=d,Hs(t,r,a,i),l=t.memoizedState,o!==r||d!==l||Ii.current||js?("function"===typeof u&&(ro(t,n,u,r),l=t.memoizedState),(o=js||so(t,n,o,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=As(l):l=Ai(t,l=Mi(n)?Pi:Ti.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&oo(t,a,r,l),js=!1,d=t.memoizedState,a.state=d,Hs(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||Ii.current||js?("function"===typeof f&&(ro(t,n,f,r),p=t.memoizedState),(c=js||so(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Io(e,t,n,r,s,i)}function Io(e,t,n,r,i,s){Co(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Li(t,n,!1),qo(e,t,s);r=t.stateNode,bo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),$s(e,t.containerInfo)}function Ao(e,t,n,r,i){return ps(),gs(i),t.flags|=256,wo(e,t,n,r),t.child}var Mo,Do,Ro,Oo,jo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,n){var r,i=t.pendingProps,a=ea.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ci(ea,1&a),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,i,0,null),e=jc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=jo,e):Vo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=uo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(a=jc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=jo,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=uo(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=Pl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Os(e,i),rc(r,e,i,-1))}return mc(),zo(e,t,o,r=uo(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,is=ci(i.nextSibling),rs=t,ss=!0,as=null,null!==e&&(Yi[Qi++]=Xi,Yi[Qi++]=Ji,Yi[Qi++]=$i,Xi=e.id,Ji=e.overflow,$i=t),t=Vo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Rc(r,o):(o=jc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=jo,i}return e=(o=e.child).sibling,i=Rc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&gs(r),ws(t,e.child,null,n),(e=Vo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Bo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ho(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bo(t,!0,n,null,s);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yo(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Mi(t.type)&&Di(),Go(t),null;case 3:return r=t.stateNode,Xs(),Ei(Ii),Ei(Ti),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==as&&(oc(as),as=null))),Do(e,t),Go(t),null;case 5:Zs(t);var i=Qs(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)Ro(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Go(t),null}if(e=Qs(Ks.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Vr(Or[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,a),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Vr("invalid",r);break;case"textarea":ie(r,a),Vr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Mo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Vr(Or[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Q(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Vr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ys.current),Qs(Ks.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=rs))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Go(t),null;case 13:if(Ei(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ps(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[di]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),a=!1}else null!==as&&(oc(as),as=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ol&&(Ol=3):mc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Xs(),Do(e,t),null===e&&Br(t.stateNode.containerInfo),Go(t),null;case 10:return Ts(t.type._context),Go(t),null;case 19:if(Ei(ea),null===(a=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ko(a,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Ko(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Hl&&(t.flags|=128,r=!0,Ko(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ko(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ss)return Go(t),null}else 2*Xe()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Ko(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ea.current,Ci(ea,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qo(e,t){switch(ns(t),t.tag){case 1:return Mi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Ei(Ii),Ei(Ti),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Ei(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ea),null;case 4:return Xs(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Mo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},Ro=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ks.current);var s,a=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),a=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Oo=function(e,t,n,r){n!==r&&(t.flags|=4)};var $o=!1,Xo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Xo||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(n,t,a),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Xo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ec(n,t,o)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,fl(e,t,n),Xo=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(a,o,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(m){Ec(e,e.return,m)}try{rl(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":J(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(m){Ec(e,e.return,m)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Ec(e,e.return,m)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Xe())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(u=Xo)||h,ml(t,e),Xo=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Zo=e,h=e.child;null!==h;){for(d=Zo=h;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,Zo=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(m){Ec(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&r&&gl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(s(161))}}catch(o){Ec(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Zo=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var i=Zo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||$o;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=$o;var c=Xo;if($o=a,(Xo=l)&&!c)for(Zo=i;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?kl(i):null!==l?(l.return=a,Zo=l):kl(i);for(;null!==s;)Zo=s,xl(s,t,n),s=s.sibling;Zo=i,$o=o,Xo=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Zo=s):wl(e)}}function wl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:no(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ws(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Xo||512&t.flags&&sl(t)}catch(f){Ec(t,t.return,f)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function _l(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function kl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Ec(t,s,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Ec(t,a,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Sl,El=Math.ceil,Cl=x.ReactCurrentDispatcher,Nl=x.ReactCurrentOwner,Tl=x.ReactCurrentBatchConfig,Il=0,Pl=null,Al=null,Ml=0,Dl=0,Rl=Si(0),Ol=0,jl=null,Ll=0,Fl=0,Vl=0,zl=null,Ul=null,Bl=0,Hl=1/0,Wl=null,ql=!1,Kl=null,Gl=null,Yl=!1,Ql=null,$l=0,Xl=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Il)?Xe():-1!==Zl?Zl:Zl=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Ml?Ml&-Ml:null!==ms.transition?(0===ec&&(ec=gt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));yt(e,n,r),0!==(2&Il)&&e===Pl||(e===Pl&&(0===(2&Il)&&(Fl|=n),4===Ol&&lc(e,Ml)),ic(e,r),1===n&&0===Il&&0===(1&t.mode)&&(Hl=Xe()+500,Vi&&Hi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=dt(e,e===Pl?Ml:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),ai((function(){0===(6&Il)&&Hi()})),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=dt(e,e===Pl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Il;Il|=2;var a=gc();for(Pl===e&&Ml===t||(Wl=null,Hl=Xe()+500,fc(e,t));;)try{bc();break}catch(l){pc(e,l)}Ns(),Cl.current=a,Il=i,null!==Al?t=0:(Pl=null,Ml=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=jl,fc(e,0),lc(e,r),ic(e,Xe()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ac(e,a))),1===t))throw n=jl,fc(e,0),lc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,Ul,Wl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Ul,Wl),t);break}_c(e,Ul,Wl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Ul,Wl),r);break}_c(e,Ul,Wl);break;default:throw Error(s(329))}}}return ic(e,Xe()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Ul,Ul=n,null!==t&&oc(t)),e}function oc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lc(e,t){for(t&=~Vl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Il))throw Error(s(327));kc();var t=dt(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=jl,fc(e,0),lc(e,t),ic(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Ul,Wl),ic(e,Xe()),null}function uc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Hl=Xe()+500,Vi&&Hi())}}function hc(e){null!==Ql&&0===Ql.tag&&0===(6&Il)&&kc();var t=Il;Il|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,0===(6&(Il=t))&&Hi()}}function dc(){Dl=Rl.current,Ei(Rl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ns(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Xs(),Ei(Ii),Ei(Ti),ra();break;case 5:Zs(r);break;case 4:Xs();break;case 13:case 19:Ei(ea);break;case 10:Ts(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Al=e=Rc(e.current,null),Ml=Dl=t,Ol=0,jl=null,Vl=Fl=Ll=0,Ul=zl=null,null!==Ms){for(t=0;t<Ms.length;t++)if(null!==(r=(n=Ms[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ms=null}return e}function pc(e,t){for(;;){var n=Al;try{if(Ns(),ia.current=Ja,ua){for(var r=oa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=oa=null,ha=!1,da=0,Nl.current=null,null===n||null===n.return){Ol=1,jl=t,Al=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=yo(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(s(426))}else if(ss&&1&l.mode){var y=yo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vo(y,o,l,0,t),gs(co(c,l));break e}}a=c=co(c,l),4!==Ol&&(Ol=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,po(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,go(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(x){t=x,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function gc(){var e=Cl.current;return Cl.current=Ja,null===e?Ja:e}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Pl||0===(268435455&Ll)&&0===(268435455&Fl)||lc(Pl,Ml)}function yc(e,t){var n=Il;Il|=2;var r=gc();for(Pl===e&&Ml===t||(Wl=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(Ns(),Il=n,Cl.current=r,null!==Al)throw Error(s(261));return Pl=null,Ml=0,Ol}function vc(){for(;null!==Al;)xc(Al)}function bc(){for(;null!==Al&&!Qe();)xc(Al)}function xc(e){var t=Sl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?wc(e):Al=t,Nl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Dl)))return void(Al=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ol=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ol&&(Ol=5)}function _c(e,t,n){var r=bt,i=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Ql);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Pl&&(Al=Pl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Pc(tt,(function(){return kc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var o=bt;bt=1;var l=Il;Il|=4,Nl.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=o+i),d!==a||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++h===r&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:no(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}g=nl,nl=!1}(e,n),yl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,bl(n,e,i),$e(),Il=l,bt=o,Tl.transition=a}else e.current=n;if(Yl&&(Yl=!1,Ql=e,$l=i),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Kl,Kl=null,e;0!==(1&$l)&&0!==e.tag&&kc(),a=e.pendingLanes,0!==(1&a)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Hi()}(e,t,n,r)}finally{Tl.transition=i,bt=r}return null}function kc(){if(null!==Ql){var e=xt($l),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,$l=0,0!==(6&Il))throw Error(s(331));var i=Il;for(Il|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var h=Zo;switch(h.tag){case 0:case 11:case 15:rl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Zo=d;else for(;null!==Zo;){var f=(h=Zo).sibling,p=h.return;if(al(h),h===u){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zo=v;break e}Zo=a.return}}var b=e.current;for(Zo=b;null!==Zo;){var x=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Zo=x;else e:for(o=b;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(_){Ec(l,l.return,_)}if(l===o){Zo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break e}Zo=l.return}}if(Il=i,Hi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function Sc(e,t,n){e=zs(e,t=po(0,t=co(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=zs(t,e=go(t,e=co(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Ml&n)===n&&(4===Ol||3===Ol&&(130023424&Ml)===Ml&&500>Xe()-Bl?fc(e,0):Vl|=n),ic(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Os(e,t))&&(yt(e,t,n),ic(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Nc(e,n)}function Pc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new Ac(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return jc(n.children,i,a,t);case S:o=8,i|=8;break;case E:return(e=Mc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case I:return(e=Mc(13,n,t,i)).elementType=I,e.lanes=a,e;case P:return(e=Mc(19,n,t,i)).elementType=P,e.lanes=a,e;case D:return Lc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case N:o=9;break e;case T:o=11;break e;case A:o=14;break e;case M:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Mc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function jc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,s,a,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Mc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Bc(e){if(!e)return Ni;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Mi(n))return Oi(e,n,t)}return t}function Hc(e,t,n,r,i,s,a,o,l){return(e=Uc(n,r,!0,e,0,s,0,o,l)).context=Bc(null),n=e.current,(s=Vs(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,s=tc(),a=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Vs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zs(i,t,a))&&(rc(e,i,a,s),Us(e,i,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),ps();break;case 5:Js(t);break;case 1:Mi(t.type)&&ji(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ks,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(Ci(ea,1&ea.current),null!==(e=qo(e,t,n))?e.sibling:null);Ci(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ho(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Eo(e,t,n)}return qo(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,ss&&0!==(1048576&t.flags)&&es(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var i=Ai(t,Ti.current);Ps(t,n),i=ma(null,t,r,e,i,n);var a=ya();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mi(r)?(a=!0,ji(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=io,t.stateNode=i,i._reactInternals=t,lo(t,r,e,n),t=Io(null,t,r,!0,a,n)):(t.tag=0,ss&&a&&ts(t),wo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===A)return 14}return 2}(r),e=no(r,e),i){case 0:t=No(null,t,r,e,n);break e;case 1:t=To(null,t,r,e,n);break e;case 11:t=_o(null,t,r,e,n);break e;case 14:t=ko(null,t,r,no(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,No(e,t,r,i=t.elementType===r?i:no(r,i),n);case 1:return r=t.type,i=t.pendingProps,To(e,t,r,i=t.elementType===r?i:no(r,i),n);case 3:e:{if(Po(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Fs(e,t),Hs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,r,n,i=co(Error(s(423)),t));break e}if(r!==i){t=Ao(e,t,r,n,i=co(Error(s(424)),t));break e}for(is=ci(t.stateNode.containerInfo.firstChild),rs=t,ss=!0,as=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=qo(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&us(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),Co(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&us(t),null;case 13:return Fo(e,t,n);case 4:return $s(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_o(e,t,r,i=t.elementType===r?i:no(r,i),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ci(ks,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ii.current){t=qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Vs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Is(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Is(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ps(t,n),r=r(i=As(i)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return i=no(r=t.type,t.pendingProps),ko(e,t,r,i=no(r.type,i),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:no(r,i),Wo(e,t),t.tag=1,Mi(r)?(e=!0,ji(t)):e=!1,Ps(t,n),ao(t,r,i),lo(t,r,i,n),Io(null,t,r,!0,e,n);case 19:return Ho(e,t,n);case 22:return Eo(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=qc(a);o.call(e)}}Wc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=qc(a);s.call(e)}}var a=Hc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[pi]=a.current,Br(8===e.nodeType?e.parentNode:e),hc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=qc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return qc(a)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Xe()),0===(6&Il)&&(Hl=Xe()+500,Hi()))}break;case 13:hc((function(){var t=Os(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=Os(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},St=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));G(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=uc,Ie=hc;var tu={usingClientEntryPoint:!1,Events:[bi,xi,wi,Ce,Ne,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",i=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.p="/";var r=n(43),i=n(391);const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==l)throw new o;const c=t<<2|s>>4;if(r.push(c),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=s(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const u=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,h=()=>{try{return u()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyCK8Rmtti1TrKRCR_sUzhncm4ebk7OoUXs",REACT_APP_APP_ID:"1:274684476540:web:5dc96795cee6e8c81d5df9",REACT_APP_AUTH_DOMAIN:"mruh2-398d6.firebaseapp.com",REACT_APP_DATABASE_URL:"https://mruh2-398d6.firebaseio.com",REACT_APP_MESSAGING_SENDER_ID:"274684476540",REACT_APP_PROJECT_ID:"mruh2-398d6",REACT_APP_STORAGE_BUCKET:"mruh2-398d6.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=e=>{var t,n;return null===(n=null===(t=h())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},f=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=h())||void 0===t?void 0:t["_".concat(e)]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function m(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return!function(){var e;const t=null===(e=h())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v(){try{return"object"===typeof indexedDB}catch(e){return!1}}class b extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,x.prototype.create)}}class x{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(w,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new b(n,s,t)}}const w=/\{\$([^}]+)}/g;function _(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(k(n)&&k(s)){if(!_(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function k(e){return null!==e&&"object"===typeof e}function S(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function E(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function C(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class N{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function T(){}function I(e){return e&&e._delegate?e._delegate:e}class P{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const A="[DEFAULT]";class M{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new g;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:A})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===A?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;return this.component?this.component.multipleInstances?e:A:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class D{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new M(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const R=[];var O;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(O||(O={}));const j={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},L=O.INFO,F={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},V=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=F[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class z{constructor(e){this.name=e,this._logLevel=L,this._logHandler=V,this._userLogHandler=null,R.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in O))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?j[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...t),this._logHandler(this,O.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...t),this._logHandler(this,O.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.INFO,...t),this._logHandler(this,O.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.WARN,...t),this._logHandler(this,O.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.ERROR,...t),this._logHandler(this,O.ERROR,...t)}}function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function B(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U(t)?t:t+""}function H(e,t,n){return(t=B(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let K,G;const Y=new WeakMap,Q=new WeakMap,$=new WeakMap,X=new WeakMap,J=new WeakMap;let Z={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Q.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ne(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ee(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(re(this),n),ne(Y.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ne(e.apply(re(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(re(this),t,...r);return $.set(s,t.sort?t.sort():[t]),ne(s)}}function te(e){return"function"===typeof e?ee(e):(e instanceof IDBTransaction&&function(e){if(Q.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Q.set(e,t)}(e),t=e,(K||(K=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Z):e);var t}function ne(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ne(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Y.set(t,e)})).catch((()=>{})),J.set(t,e),t}(e);if(X.has(e))return X.get(e);const t=te(e);return t!==e&&(X.set(e,t),J.set(t,e)),t}const re=e=>J.get(e);const ie=["get","getKey","getAll","getAllKeys","count"],se=["put","add","delete","clear"],ae=new Map;function oe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ae.get(t))return ae.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=se.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ie.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return ae.set(t,s),s}!function(e){Z=e(Z)}((e=>q(q({},e),{},{get:(t,n,r)=>oe(t,n)||e.get(t,n,r),has:(t,n)=>!!oe(t,n)||e.has(t,n)})));class le{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ce="@firebase/app",ue="0.10.13",he=new z("@firebase/app"),de="@firebase/app-compat",fe="@firebase/analytics-compat",pe="@firebase/analytics",ge="@firebase/app-check-compat",me="@firebase/app-check",ye="@firebase/auth",ve="@firebase/auth-compat",be="@firebase/database",xe="@firebase/data-connect",we="@firebase/database-compat",_e="@firebase/functions",ke="@firebase/functions-compat",Se="@firebase/installations",Ee="@firebase/installations-compat",Ce="@firebase/messaging",Ne="@firebase/messaging-compat",Te="@firebase/performance",Ie="@firebase/performance-compat",Pe="@firebase/remote-config",Ae="@firebase/remote-config-compat",Me="@firebase/storage",De="@firebase/storage-compat",Re="@firebase/firestore",Oe="@firebase/vertexai-preview",je="@firebase/firestore-compat",Le="firebase",Fe="[DEFAULT]",Ve={[ce]:"fire-core",[de]:"fire-core-compat",[pe]:"fire-analytics",[fe]:"fire-analytics-compat",[me]:"fire-app-check",[ge]:"fire-app-check-compat",[ye]:"fire-auth",[ve]:"fire-auth-compat",[be]:"fire-rtdb",[xe]:"fire-data-connect",[we]:"fire-rtdb-compat",[_e]:"fire-fn",[ke]:"fire-fn-compat",[Se]:"fire-iid",[Ee]:"fire-iid-compat",[Ce]:"fire-fcm",[Ne]:"fire-fcm-compat",[Te]:"fire-perf",[Ie]:"fire-perf-compat",[Pe]:"fire-rc",[Ae]:"fire-rc-compat",[Me]:"fire-gcs",[De]:"fire-gcs-compat",[Re]:"fire-fst",[je]:"fire-fst-compat",[Oe]:"fire-vertex","fire-js":"fire-js",[Le]:"fire-js-all"},ze=new Map,Ue=new Map,Be=new Map;function He(e,t){try{e.container.addComponent(t)}catch(n){he.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function We(e){const t=e.name;if(Be.has(t))return he.debug("There were multiple attempts to register component ".concat(t,".")),!1;Be.set(t,e);for(const n of ze.values())He(n,e);for(const n of Ue.values())He(n,e);return!0}function qe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ke(e){return void 0!==e.settings}const Ge=new x("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ye{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new P("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ge.create("app-deleted",{appName:this._name})}}const Qe="10.14.1";function $e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Fe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ge.create("bad-app-name",{appName:String(i)});if(n||(n=f()),!n)throw Ge.create("no-options");const s=ze.get(i);if(s){if(_(n,s.options)&&_(r,s.config))return s;throw Ge.create("duplicate-app",{appName:i})}const a=new D(i);for(const l of Be.values())a.addComponent(l);const o=new Ye(n,r,a);return ze.set(i,o),o}function Xe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;const t=ze.get(e);if(!t&&e===Fe&&f())return $e();if(!t)throw Ge.create("no-app",{appName:e});return t}function Je(e,t,n){var r;let i=null!==(r=Ve[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void he.warn(e.join(" "))}We(new P("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const Ze="firebase-heartbeat-store";let et=null;function tt(){return et||(et=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ne(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(ne(a.result),e.oldVersion,e.newVersion,ne(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ze)}catch(n){console.warn(n)}}}).catch((e=>{throw Ge.create("idb-open",{originalErrorMessage:e.message})}))),et}async function nt(e,t){try{const n=(await tt()).transaction(Ze,"readwrite"),r=n.objectStore(Ze);await r.put(t,rt(e)),await n.done}catch(n){if(n instanceof b)he.warn(n.message);else{const e=Ge.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});he.warn(e.message)}}}function rt(e){return"".concat(e.name,"!").concat(e.options.appId)}class it{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new at(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=st();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){he.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=st(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ot(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ot(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=l(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return he.warn(t),""}}}function st(){return(new Date).toISOString().substring(0,10)}class at{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!v()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await tt()).transaction(Ze),n=await t.objectStore(Ze).get(rt(e));return await t.done,n}catch(t){if(t instanceof b)he.warn(t.message);else{const e=Ge.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});he.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return nt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return nt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ot(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var lt;lt="",We(new P("platform-logger",(e=>new le(e)),"PRIVATE")),We(new P("heartbeat",(e=>new it(e)),"PRIVATE")),Je(ce,ue,lt),Je(ce,ue,"esm2017"),Je("fire-js","");function ct(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function ut(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ht=ut,dt=new x("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ft=new z("@firebase/auth");function pt(e){if(ft.logLevel<=O.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ft.error("Auth (".concat(Qe,"): ").concat(e),...n)}}function gt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw bt(e,...n)}function mt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return bt(e,...n)}function yt(e,t,n){const r=Object.assign(Object.assign({},ht()),{[t]:n});return new x("auth","Firebase",r).create(t,{appName:e.name})}function vt(e){return yt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return dt.create(e,...n)}function xt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw bt(t,...r)}}function wt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw pt(t),new Error(t)}function _t(e,t){e||wt(t)}function kt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function St(){return"http:"===Et()||"https:"===Et()}function Et(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Ct(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(St()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Nt{constructor(e,t){this.shortDelay=e,this.longDelay=t,_t(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Ct()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tt(e,t){_t(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class It{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void wt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void wt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void wt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},At=new Nt(3e4,6e4);function Mt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Dt(e,t,n,r){return Rt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=S(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),It.fetch()(jt(e,e.config.apiHost,n,a),l)}))}async function Rt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Pt),t);try{const t=new Ft(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Vt(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Vt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Vt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Vt(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw yt(e,o,a);gt(e,o)}}catch(i){if(i instanceof b)throw i;gt(e,"network-request-failed",{message:String(i)})}}async function Ot(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Dt(e,t,n,r,i);return"mfaPendingCredential"in s&&gt(e,"multi-factor-auth-required",{_serverResponse:s}),s}function jt(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Tt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Lt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ft{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(mt(this.auth,"network-request-failed"))),At.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=mt(e,t,r);return i.customData._tokenResponse=n,i}function zt(e){return void 0!==e&&void 0!==e.enterprise}class Ut{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Lt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Bt(e,t){return Dt(e,"GET","/v2/recaptchaConfig",Mt(e,t))}async function Ht(e,t){return Dt(e,"POST","/v1/accounts:lookup",t)}function Wt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function qt(e){return 1e3*Number(e)}function Kt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return pt("JWT malformed, contained fewer than 3 sections"),null;try{const e=c(n);return e?JSON.parse(e):(pt("Failed to decode base64 JWT payload"),null)}catch(i){return pt("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function Gt(e){const t=Kt(e);return xt(t,"internal-error"),xt("undefined"!==typeof t.exp,"internal-error"),xt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Yt(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof b&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Qt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class $t{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wt(this.lastLoginAt),this.creationTime=Wt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Yt(e,Ht(n,{idToken:r}));xt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Jt(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new $t(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function Jt(e){return e.map((e=>{var{providerId:t}=e,n=ct(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Zt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xt(e.idToken,"internal-error"),xt("undefined"!==typeof e.idToken,"internal-error"),xt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Gt(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xt(0!==e.length,"internal-error");const t=Gt(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(xt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Rt(e,{},(async()=>{const n=S({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=jt(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",It.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Zt;return n&&(xt("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(xt("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(xt("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zt,this.toJSON())}_performRefresh(){return wt("not implemented")}}function en(e,t){xt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class tn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=ct(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $t(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Yt(this,this.stsTokenManager.getToken(this.auth,e));return xt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=I(e),r=await n.getIdToken(t),i=Kt(r);xt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Wt(qt(i.auth_time)),issuedAtTime:Wt(qt(i.iat)),expirationTime:Wt(qt(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=I(e);await Xt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(xt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new tn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){xt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Xt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ke(this.auth.app))return Promise.reject(vt(this.auth));const e=await this.getIdToken();return await Yt(this,async function(e,t){return Dt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:_}=t;xt(v&&_,e,"internal-error");const k=Zt.fromJSON(this.name,_);xt("string"===typeof v,e,"internal-error"),en(u,e.name),en(h,e.name),xt("boolean"===typeof b,e,"internal-error"),xt("boolean"===typeof x,e,"internal-error"),en(d,e.name),en(f,e.name),en(p,e.name),en(g,e.name),en(m,e.name),en(y,e.name);const S=new tn({uid:v,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:m,lastLoginAt:y});return w&&Array.isArray(w)&&(S.providerData=w.map((e=>Object.assign({},e)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Zt;r.updateFromServerResponse(t);const i=new tn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Xt(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];xt(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Jt(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new Zt;a.updateFromIdToken(n);const o=new tn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new $t(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const nn=new Map;function rn(e){_t(e instanceof Function,"Expected a class definition");let t=nn.get(e);return t?(_t(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,nn.set(e,t),t)}class sn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sn.type="NONE";const an=sn;function on(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ln{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=on(this.userKey,r.apiKey,i),this.fullPersistenceKey=on("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?tn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ln(rn(an),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||rn(an);const s=on(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=tn._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new ln(i,e,n)):new ln(i,e,n)}}function cn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(un(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gn(t))return"Blackberry";if(mn(t))return"Webos";if(hn(t))return"Safari";if((t.includes("chrome/")||dn(t))&&!t.includes("edge/"))return"Chrome";if(pn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function un(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/firefox\//i.test(e)}function hn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:m()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/crios\//i.test(e)}function fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/iemobile/i.test(e)}function pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/android/i.test(e)}function gn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/blackberry/i.test(e)}function mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/webos/i.test(e)}function yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function vn(){return function(){const e=m();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function bn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return yn(e)||pn(e)||mn(e)||gn(e)||/windows phone/i.test(e)||fn(e)}function xn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=cn(m());break;case"Worker":t="".concat(cn(m()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Qe,"/").concat(r)}class wn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class _n{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class kn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new En(this),this.idTokenSubscription=new En(this),this.beforeStateQueue=new wn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rn(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ln.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Ht(this,{idToken:e}),n=await tn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ke(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return xt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xt(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ke(this.app))return Promise.reject(vt(this));const t=e?I(e):null;return t&&xt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&xt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Ke(this.app)?Promise.reject(vt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ke(this.app)?Promise.reject(vt(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(rn(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Dt(e,"GET","/v2/passwordPolicy",Mt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new _n(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new x("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Dt(e,"POST","/v2/accounts:revokeToken",Mt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&rn(e)||this._popupRedirectResolver;xt(t,this,"argument-error"),this.redirectPersistenceManager=await ln.create(this,[rn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(xt(a,this,"internal-error"),a.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ft.logLevel<=O.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ft.warn("Auth (".concat(Qe,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Sn(e){return I(e)}class En{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new N(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return xt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Cn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nn(e){return Cn.loadJS(e)}function Tn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class In{constructor(e){this.type="recaptcha-enterprise",this.auth=Sn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;zt(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Bt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Ut(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&zt(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Cn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Nn(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Pn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new In(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function An(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Pn(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Pn(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Mn(e,t,n){const r=Sn(e);xt(r._canInitEmulator,r,"emulator-config-failed"),xt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Dn(t),{host:a,port:o}=function(e){const t=Dn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Rn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Rn(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(s,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Dn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Rn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class On{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wt("not implemented")}_getIdTokenResponse(e){return wt("not implemented")}_linkToIdToken(e,t){return wt("not implemented")}_getReauthenticationResolver(e){return wt("not implemented")}}async function jn(e,t){return Dt(e,"POST","/v1/accounts:signUp",t)}async function Ln(e,t){return Ot(e,"POST","/v1/accounts:signInWithPassword",Mt(e,t))}class Fn extends On{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Fn(e,t,"password")}static _fromEmailAndCode(e,t){return new Fn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return An(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ln);case"emailLink":return async function(e,t){return Ot(e,"POST","/v1/accounts:signInWithEmailLink",Mt(e,t))}(e,{email:this._email,oobCode:this._password});default:gt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return An(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jn);case"emailLink":return async function(e,t){return Ot(e,"POST","/v1/accounts:signInWithEmailLink",Mt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:gt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vn(e,t){return Ot(e,"POST","/v1/accounts:signInWithIdp",Mt(e,t))}class zn extends On{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=ct(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new zn(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Vn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Vn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=S(t)}return e}}const Un={USER_NOT_FOUND:"user-not-found"};class Bn extends On{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Bn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Bn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ot(e,"POST","/v1/accounts:signInWithPhoneNumber",Mt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ot(e,"POST","/v1/accounts:signInWithPhoneNumber",Mt(e,t));if(n.temporaryProof)throw Vt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ot(e,"POST","/v1/accounts:signInWithPhoneNumber",Mt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Un)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Bn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Hn{constructor(e){var t,n,r,i,s,a;const o=E(C(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);xt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=E(C(e)).link,n=t?E(C(t)).deep_link_id:null,r=E(C(e)).deep_link_id;return(r?E(C(r)).link:null)||r||n||t||e}(e);try{return new Hn(t)}catch(n){return null}}}class Wn{constructor(){this.providerId=Wn.PROVIDER_ID}static credential(e,t){return Fn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Hn.parseLink(t);return xt(n,"argument-error"),Fn._fromEmailAndCode(e,n.code,n.tenantId)}}Wn.PROVIDER_ID="password",Wn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Wn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class qn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Kn extends qn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Gn extends Kn{constructor(){super("facebook.com")}static credential(e){return zn._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Gn.credential(t.oauthAccessToken)}catch(n){return null}}}Gn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Gn.PROVIDER_ID="facebook.com";class Yn extends Kn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zn._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Yn.credential(n,r)}catch(i){return null}}}Yn.GOOGLE_SIGN_IN_METHOD="google.com",Yn.PROVIDER_ID="google.com";class Qn extends Kn{constructor(){super("github.com")}static credential(e){return zn._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qn.credential(t.oauthAccessToken)}catch(n){return null}}}Qn.GITHUB_SIGN_IN_METHOD="github.com",Qn.PROVIDER_ID="github.com";class $n extends Kn{constructor(){super("twitter.com")}static credential(e,t){return zn._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return $n.credential(n,r)}catch(i){return null}}}async function Xn(e,t){return Ot(e,"POST","/v1/accounts:signUp",Mt(e,t))}$n.TWITTER_SIGN_IN_METHOD="twitter.com",$n.PROVIDER_ID="twitter.com";class Jn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await tn._fromIdTokenResponse(e,n,r),s=Zn(n);return new Jn({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Zn(n);return new Jn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Zn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class er extends b{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,er.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new er(e,t,n,r)}}function tr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw er._fromErrorAndOperation(e,n,t,r);throw n}))}async function nr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Yt(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Jn._forOperation(e,"link",r)}async function rr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Ke(r.app))return Promise.reject(vt(r));const i="reauthenticate";try{const s=await Yt(e,tr(r,i,t,e),n);xt(s.idToken,r,"internal-error");const a=Kt(s.idToken);xt(a,r,"internal-error");const{sub:o}=a;return xt(e.uid===o,r,"user-mismatch"),Jn._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&gt(r,"user-mismatch"),s}}async function ir(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ke(e.app))return Promise.reject(vt(e));const r="signIn",i=await tr(e,r,t),s=await Jn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function sr(e,t){return ir(Sn(e),t)}async function ar(e){const t=Sn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const or="__sak";class lr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(or,"1"),this.storage.removeItem(or),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class cr extends lr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);vn()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cr.type="LOCAL";const ur=cr;class hr extends lr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}hr.type="SESSION";const dr=hr;class fr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new fr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function pr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}fr.receivers=[];class gr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const l=pr("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function mr(){return window}function yr(){return"undefined"!==typeof mr().WorkerGlobalScope&&"function"===typeof mr().importScripts}const vr="firebaseLocalStorageDb",br="firebaseLocalStorage",xr="fbase_key";class wr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function _r(e,t){return e.transaction([br],t?"readwrite":"readonly").objectStore(br)}function kr(){const e=indexedDB.open(vr,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(br,{keyPath:xr})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(br)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(vr);return new wr(e).toPromise()}(),t(await kr()))}))}))}async function Sr(e,t,n){const r=_r(e,!0).put({[xr]:t,value:n});return new wr(r).toPromise()}function Er(e,t){const n=_r(e,!0).delete(t);return new wr(n).toPromise()}class Cr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await kr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fr._getInstance(yr()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new gr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kr();return await Sr(e,or,"1"),await Er(e,or),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Sr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=_r(e,!1).get(t),r=await new wr(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Er(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=_r(e,!1).getAll();return new wr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Cr.type="LOCAL";const Nr=Cr;Tn("rcb"),new Nt(3e4,6e4);const Tr="recaptcha";async function Ir(e,t,n){var r;const i=await n.verify();try{let s;if(xt("string"===typeof i,e,"argument-error"),xt(n.type===Tr,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){xt("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Dt(e,"POST","/v2/accounts/mfaEnrollment:start",Mt(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{xt("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;xt(n,e,"missing-multi-factor-info");const a=await function(e,t){return Dt(e,"POST","/v2/accounts/mfaSignIn:start",Mt(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Dt(e,"POST","/v1/accounts:sendVerificationCode",Mt(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Pr{constructor(e){this.providerId=Pr.PROVIDER_ID,this.auth=Sn(e)}verifyPhoneNumber(e,t){return Ir(this.auth,e,I(t))}static credential(e,t){return Bn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Pr.credentialFromTaggedObject(t)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Bn._fromTokenResponse(n,r):null}}function Ar(e,t){return t?rn(t):(xt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Pr.PROVIDER_ID="phone",Pr.PHONE_SIGN_IN_METHOD="phone";class Mr extends On{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Dr(e){return ir(e.auth,new Mr(e),e.bypassAuthState)}function Rr(e){const{auth:t,user:n}=e;return xt(n,t,"internal-error"),rr(n,new Mr(e),e.bypassAuthState)}async function Or(e){const{auth:t,user:n}=e;return xt(n,t,"internal-error"),nr(n,new Mr(e),e.bypassAuthState)}class jr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dr;case"linkViaPopup":case"linkViaRedirect":return Or;case"reauthViaPopup":case"reauthViaRedirect":return Rr;default:gt(this.auth,"internal-error")}}resolve(e){_t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Lr=new Nt(2e3,1e4);class Fr extends jr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Fr.currentPopupAction&&Fr.currentPopupAction.cancel(),Fr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xt(e,this.auth,"internal-error"),e}async onExecution(){_t(1===this.filter.length,"Popup operations only handle one event");const e=pr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(mt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(mt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(mt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Lr.get())};e()}}Fr.currentPopupAction=null;const Vr=new Map;class zr extends jr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Vr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Hr(t),r=Br(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Vr.set(this.auth._key(),e)}return this.bypassAuthState||Vr.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ur(e,t){Vr.set(e._key(),t)}function Br(e){return rn(e._redirectPersistence)}function Hr(e){return on("pendingRedirect",e.config.apiKey,e.name)}async function Wr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ke(e.app))return Promise.reject(vt(e));const r=Sn(e),i=Ar(r,t),s=new zr(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class qr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Gr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(mt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kr(e))}saveEventToCache(e){this.cachedEventUids.add(Kr(e)),this.lastProcessedEventTime=Date.now()}}function Kr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Gr(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qr=/^https?/;async function $r(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Dt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Xr(r))return}catch(n){}gt(e,"unauthorized-domain")}function Xr(e){const t=kt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Qr.test(n))return!1;if(Yr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Jr=new Nt(3e4,6e4);function Zr(){const e=mr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ei(e){return new Promise(((t,n)=>{var r,i,s;function a(){Zr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Zr(),n(mt(e,"network-request-failed"))},timeout:Jr.get()})}if(null===(i=null===(r=mr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=mr().gapi)||void 0===s?void 0:s.load)){const t=Tn("iframefcb");return mr()[t]=()=>{gapi.load?a():n(mt(e,"network-request-failed"))},Nn("".concat(Cn.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}a()}})).catch((e=>{throw ti=null,e}))}let ti=null;const ni=new Nt(5e3,15e3),ri={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ii=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function si(e){const t=e.config;xt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Tt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Qe},i=ii.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(S(r).slice(1))}async function ai(e){const t=await function(e){return ti=ti||ei(e),ti}(e),n=mr().gapi;return xt(n,e,"internal-error"),t.open({where:document.body,url:si(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ri,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=mt(e,"network-request-failed"),s=mr().setTimeout((()=>{r(i)}),ni.get());function a(){mr().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const oi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class li{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ci(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},oi),{width:r.toString(),height:i.toString(),top:s,left:a}),c=m().toLowerCase();n&&(o=dn(c)?"_blank":n),un(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return yn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:m())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new li(null);const h=window.open(t||"",o,u);xt(h,e,"popup-blocked");try{h.focus()}catch(d){}return new li(h)}const ui="__/auth/handler",hi="emulator/auth/handler",di=encodeURIComponent("fac");async function fi(e,t,n,r,i,s){xt(e.config.authDomain,e,"auth-domain-config-required"),xt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Qe,eventId:i};if(t instanceof qn){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof Kn){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(di,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ui);return Tt(t,hi)}(e),"?").concat(S(o).slice(1)).concat(c)}const pi="webStorageSupport";const gi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dr,this._completeRedirectFn=Wr,this._overrideRedirectResult=Ur}async _openPopup(e,t,n,r){var i;_t(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return ci(e,await fi(e,t,n,kt(),r),pr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){mr().location.href=e}(await fi(e,t,n,kt(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(_t(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await ai(e),n=new qr(e);return t.register("authEvent",(t=>{xt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pi,{type:pi},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[pi];void 0!==i&&t(!!i),gt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$r(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bn()||hn()||yn()}};var mi="@firebase/auth",yi="1.7.9";class vi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const bi=p("authIdTokenMaxAge")||300;let xi=null;function wi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();const t=qe(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=qe(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(_(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;gt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:gi,persistence:[Nr,ur,dr]}),r=p("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>bi)return;const r=null===t||void 0===t?void 0:t.token;xi!==r&&(xi=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){I(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){I(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=d("auth");return s&&Mn(n,"http://".concat(s)),n}var _i,ki;_i={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=mt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Cn=_i,ki="Browser",We(new P("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;xt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:ki,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xn(ki)},c=new kn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),We(new P("auth-internal",(e=>(e=>new vi(e))(Sn(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Je(mi,yi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ki)),Je(mi,yi,"esm2017");var Si,Ei,Ci="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ni={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return d(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(o,o);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);h(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,p(n,2*i+2*s),n[2*i+2*s+1]+=l*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Ei=Ni.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},Si=Ni.Integer=r}).apply("undefined"!==typeof Ci?Ci:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ti,Ii,Pi,Ai,Mi,Di,Ri,Oi,ji="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Li={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ji&&ji];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout((()=>{throw e}),0)}function S(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new C),(e=>e.reset()));class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let N,T=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=i.Promise.resolve(void 0);N=()=>{e.then(A)}};var A=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){k(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function M(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:j[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}h(O,D);var j={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function U(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function H(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}U.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=H(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new V(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),q={};function K(e,t,n,r,i){if(r&&r.once)return Y(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[L]?e.K(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[W]=l=new U(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Y(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);return null}return n=te(n),e&&e[L]?e.L(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=H(s=e.g[t],n,r,i))&&(z(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=H(t,n,r,i)),(n=-1<e?t[e]:null)&&$(n))}function $(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[W]=null)):z(e)}}}function X(e){return e in q?q[e]:q[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&$(e),e=n.call(r,t)}return e}function Z(e){return(e=e[W])instanceof U?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){M.call(this),this.i=new U(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;w(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,M),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends M{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){M.call(this),this.h=e,this.g={}}h(le,M);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function be(){D.call(this,"c")}h(ve,D),h(be,D);var xe={},we=null;function _e(){return we=we||new ne}function ke(e){D.call(this,xe.La,e)}function Se(e){const t=_e();re(t,new ke(t))}function Ee(e,t){D.call(this,xe.STAT_EVENT,e),this.stat=t}function Ce(e){const t=_e();re(t,new Ee(t,e))}function Ne(e,t){D.call(this,xe.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ie(){this.g=!0}function Pe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return he(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}xe.La="serverreachability",h(ke,D),xe.STAT_EVENT="statevent",h(Ee,D),xe.Ma="timingevent",h(Ne,D),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Ae,Me={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new je}function je(){this.i=null,this.g="",this.h=!1}h(Re,pe),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ae=new Re;var Le={},Fe={};function Ve(e,t,n){e.L=1,e.v=ht(at(t)),e.m=n,e.P=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),He(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new je,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var a=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function He(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ye(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),$t(n)}rn(n),Ce(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(qe(o),He(o)),r.g=a}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const d=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=d||7==t||Se(),qe(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var r=Kt(this.g);e="";var s=r.length,a=4==qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ce(12),Ge(this),Ke(this);break e}Pe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ye(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==d&&(this.s=4,Ce(14),n=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Ce(15),Pe(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Pe(this.i,this.l,e,null),Ye(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(h),h.M=!0,Ce(11))}}else Pe(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Pe(this.i,this.l,o,null),Ye(this,o);4==d&&Ge(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,He(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=_(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Ge(this),Ke(this)}}}catch(Fi){}},Oe.prototype.cancel=function(){this.J=!0,Ge(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Se(),Ce(17)),Ge(this),this.s=2,Ke(this)):We(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function $e(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}$e.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(_t(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),Et(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,xt)),e.join("")};var gt,mt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,xt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _t(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function kt(e,t){_t(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return _t(e),t=Ct(e,t),e.g.has(t)}function Et(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),d(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Nt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Tt(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;a(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Pt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Mt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function jt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Lt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){_t(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){_t(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){_t(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){_t(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return _t(this),this.i=null,St(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},h(Pt,pe),Pt.prototype.g=function(){return new At(this.l,this.j)},Pt.prototype.i=(gt={},function(){return gt}),h(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Rt(this),3==this.readyState&&Mt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Lt,ne);var Ft=/^https?$/i,Vt=["POST","PUT"];function zt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),Ht(e)}function Ut(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Ft.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<qt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Ut(e)}}finally{Ht(e)}}}function Ht(e,t){if(e.g){Wt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Wt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ui){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Yt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Xt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=ht(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),He(t)}hn(e)}function $t(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Xt(e){$t(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;N||P(),T||(N(),T=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&jt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{It(o,e,"req"+n+"_")}catch(Fi){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;N||P(),T||(N(),T=!0),I.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&jt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(at(t)),n.m=null,n.P=!0,ze(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=_e(),new Ne(r,n)),Jt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),ht(r),t?function(e,t){const n=new Ie;if(i.Image){const r=new Image;r.onload=u(Nt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Nt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Nt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Nt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout((()=>{n.abort(),Nt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Nt(0,0,!0,t):Nt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Nt(0,0,!1,t)}))}(r.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),hn(e),Xt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Lt(new Pt({eb:n})):new Lt(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Yt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Lt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?ge(this.o):ge(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void zt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Vt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){zt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Ht(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ht(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Yt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ce(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Oe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ot(s)))+"&"+t:this.m&&jt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ve(i,n,null)):Ve(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),$t(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,$t(this),rn(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Qt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,mn.aa.N.call(this)},h(yn,ve),h(vn,be),h(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new yn(e))},bn.prototype.sa=function(e){re(this.g,new vn)},bn.prototype.ra=function(){re(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Oi=Li.createWebChannelTransport=function(){return new gn},Ri=Li.getStatEventTarget=function(){return _e()},Di=Li.Event=xe,Mi=Li.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Me.NO_ERROR=0,Me.TIMEOUT=8,Me.HTTP_ERROR=6,Ai=Li.ErrorCode=Me,De.COMPLETE="complete",Pi=Li.EventType=De,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ii=Li.WebChannel=me,Li.FetchXmlHttpFactory=Pt,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,Ti=Li.XhrIo=Lt}).apply("undefined"!==typeof ji?ji:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Fi="@firebase/firestore";class Vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vi.UNAUTHENTICATED=new Vi(null),Vi.GOOGLE_CREDENTIALS=new Vi("google-credentials-uid"),Vi.FIRST_PARTY=new Vi("first-party-uid"),Vi.MOCK_USER=new Vi("mock-user");let zi="10.14.0";const Ui=new z("@firebase/firestore");function Bi(){return Ui.logLevel}function Hi(e){if(Ui.logLevel<=O.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ki);Ui.debug("Firestore (".concat(zi,"): ").concat(e),...i)}}function Wi(e){if(Ui.logLevel<=O.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ki);Ui.error("Firestore (".concat(zi,"): ").concat(e),...i)}}function qi(e){if(Ui.logLevel<=O.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ki);Ui.warn("Firestore (".concat(zi,"): ").concat(e),...i)}}function Ki(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(zi,") INTERNAL ASSERTION FAILED: ")+e;throw Wi(t),new Error(t)}function Yi(e,t){e||Gi()}function Qi(e,t){return e}const $i={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xi extends b{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Ji{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Zi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class es{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Vi.UNAUTHENTICATED)))}shutdown(){}}class ts{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ns{constructor(e){this.t=e,this.currentUser=Vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Yi(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Ji;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ji,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{Hi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Hi("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ji)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Hi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Yi("string"==typeof t.accessToken),new Zi(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Yi(null===e||"string"==typeof e),new Vi(e)}}class rs{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Vi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class is{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new rs(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Vi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ss{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class as{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Yi(void 0===this.o);const n=e=>{null!=e.error&&Hi("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Hi("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Hi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Hi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Yi("string"==typeof e.token),this.R=e.token,new ss(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function os(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ls{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=os(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function cs(e,t){return e<t?-1:e>t?1:0}function us(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class hs{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xi($i.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xi($i.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xi($i.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xi($i.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hs.fromMillis(Date.now())}static fromDate(e){return hs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new hs(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?cs(this.nanoseconds,e.nanoseconds):cs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ds{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ds(e)}static min(){return new ds(new hs(0,0))}static max(){return new ds(new hs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class fs{constructor(e,t,n){void 0===t?t=0:t>e.length&&Gi(),void 0===n?n=e.length-t:n>e.length-t&&Gi(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===fs.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fs?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ps extends fs{construct(e,t,n){return new ps(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Xi($i.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ps(e)}static emptyPath(){return new ps([])}}const gs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ms extends fs{construct(e,t,n){return new ms(e,t,n)}static isValidIdentifier(e){return gs.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ms.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ms(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Xi($i.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Xi($i.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Xi($i.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Xi($i.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ms(t)}static emptyPath(){return new ms([])}}class ys{constructor(e){this.path=e}static fromPath(e){return new ys(ps.fromString(e))}static fromName(e){return new ys(ps.fromString(e).popFirst(5))}static empty(){return new ys(ps.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ps.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ps.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ys(new ps(e.slice()))}}class vs{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}vs.UNKNOWN_ID=-1;function bs(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ds.fromTimestamp(1e9===r?new hs(n+1,0):new hs(n,r));return new ws(i,ys.empty(),t)}function xs(e){return new ws(e.readTime,e.key,-1)}class ws{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ws(ds.min(),ys.empty(),-1)}static max(){return new ws(ds.max(),ys.empty(),-1)}}function _s(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ys.comparator(e.documentKey,t.documentKey),0!==n?n:cs(e.largestBatchId,t.largestBatchId))}const ks="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ss{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Es(e){if(e.code!==$i.FAILED_PRECONDITION||e.message!==ks)throw e;Hi("LocalStore","Unexpectedly lost primary lease")}class Cs{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Gi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Cs(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Cs?t:Cs.resolve(t)}catch(e){return Cs.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Cs.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Cs.reject(t)}static resolve(e){return new Cs(((t,n)=>{t(e)}))}static reject(e){return new Cs(((t,n)=>{n(e)}))}static waitFor(e){return new Cs(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Cs.resolve(!1);for(const n of e)t=t.next((e=>e?Cs.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Cs(((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next((e=>{s[l]=e,++a,a===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Cs(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Ns(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ts(e){return"IndexedDbTransactionError"===e.name}class Is{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Ps(e){return null==e}function As(e){return 0===e&&1/e==-1/0}function Ms(e){return"number"==typeof e&&Number.isInteger(e)&&!As(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Is.oe=-1;const Ds=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Rs=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Os=Rs,js=[...Os,"indexConfiguration","indexState","indexEntries"];function Ls(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fs(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vs(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class zs{constructor(e,t){this.comparator=e,this.root=t||Bs.EMPTY}insert(e,t){return new zs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bs.BLACK,null,null))}remove(e){return new zs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Us(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Us(this.root,e,this.comparator,!1)}getReverseIterator(){return new Us(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Us(this.root,e,this.comparator,!0)}}class Us{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bs{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Bs.RED,this.left=null!=r?r:Bs.EMPTY,this.right=null!=i?i:Bs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Bs(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Bs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Bs.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Gi();if(this.right.isRed())throw Gi();const e=this.left.check();if(e!==this.right.check())throw Gi();return e+(this.isRed()?0:1)}}Bs.EMPTY=null,Bs.RED=!0,Bs.BLACK=!1,Bs.EMPTY=new class{constructor(){this.size=0}get key(){throw Gi()}get value(){throw Gi()}get color(){throw Gi()}get left(){throw Gi()}get right(){throw Gi()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Bs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hs{constructor(e){this.comparator=e,this.data=new zs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ws(this.data.getIterator())}getIteratorFrom(e){return new Ws(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Hs))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Hs(this.comparator);return t.data=e,t}}class Ws{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class qs{constructor(e){this.fields=e,e.sort(ms.comparator)}static empty(){return new qs([])}unionWith(e){let t=new Hs(ms.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new qs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return us(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ks extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ks("Invalid base64 string: "+e):e}}(e);return new Gs(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Gs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gs.EMPTY_BYTE_STRING=new Gs("");const Ys=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(e){if(Yi(!!e),"string"==typeof e){let t=0;const n=Ys.exec(e);if(Yi(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:$s(e.seconds),nanos:$s(e.nanos)}}function $s(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xs(e){return"string"==typeof e?Gs.fromBase64String(e):Gs.fromUint8Array(e)}function Js(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zs(e){const t=e.mapValue.fields.__previous_value__;return Js(t)?Zs(t):t}function ea(e){const t=Qs(e.mapValue.fields.__local_write_time__.timestampValue);return new hs(t.seconds,t.nanos)}class ta{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class na{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new na("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof na&&e.projectId===this.projectId&&e.database===this.database}}const ra={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ia(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Js(e)?4:ba(e)?9007199254740991:ya(e)?10:11:Gi()}function sa(e,t){if(e===t)return!0;const n=ia(e);if(n!==ia(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ea(e).isEqual(ea(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Qs(e.timestampValue),r=Qs(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xs(e.bytesValue).isEqual(Xs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return $s(e.geoPointValue.latitude)===$s(t.geoPointValue.latitude)&&$s(e.geoPointValue.longitude)===$s(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return $s(e.integerValue)===$s(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=$s(e.doubleValue),r=$s(t.doubleValue);return n===r?As(n)===As(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return us(e.arrayValue.values||[],t.arrayValue.values||[],sa);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ls(n)!==Ls(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sa(n[i],r[i])))return!1;return!0}(e,t);default:return Gi()}}function aa(e,t){return void 0!==(e.values||[]).find((e=>sa(e,t)))}function oa(e,t){if(e===t)return 0;const n=ia(e),r=ia(t);if(n!==r)return cs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cs(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=$s(e.integerValue||e.doubleValue),r=$s(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return la(e.timestampValue,t.timestampValue);case 4:return la(ea(e),ea(t));case 5:return cs(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Xs(e),r=Xs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=cs(n[i],r[i]);if(0!==e)return e}return cs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=cs($s(e.latitude),$s(t.latitude));return 0!==n?n:cs($s(e.longitude),$s(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ca(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=cs((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:ca(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ra.mapValue&&t===ra.mapValue)return 0;if(e===ra.mapValue)return 1;if(t===ra.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=cs(r[a],s[a]);if(0!==e)return e;const t=oa(n[r[a]],i[s[a]]);if(0!==t)return t}return cs(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Gi()}}function la(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return cs(e,t);const n=Qs(e),r=Qs(t),i=cs(n.seconds,r.seconds);return 0!==i?i:cs(n.nanos,r.nanos)}function ca(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=oa(n[i],r[i]);if(e)return e}return cs(n.length,r.length)}function ua(e){return ha(e)}function ha(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Qs(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Xs(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ys.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ha(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ha(e.fields[i]));return n+"}"}(e.mapValue):Gi()}function da(e){return!!e&&"integerValue"in e}function fa(e){return!!e&&"arrayValue"in e}function pa(e){return!!e&&"nullValue"in e}function ga(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ma(e){return!!e&&"mapValue"in e}function ya(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function va(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Fs(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=va(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=va(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ba(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class xa{constructor(e){this.value=e}static empty(){return new xa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ma(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=va(t)}setAll(e){let t=ms.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=va(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ma(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ma(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Fs(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new xa(va(this.value))}}function wa(e){const t=[];return Fs(e.fields,((e,n)=>{const r=new ms([e]);if(ma(n)){const e=wa(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new qs(t)}class _a{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new _a(e,0,ds.min(),ds.min(),ds.min(),xa.empty(),0)}static newFoundDocument(e,t,n,r){return new _a(e,1,t,ds.min(),n,r,0)}static newNoDocument(e,t){return new _a(e,2,t,ds.min(),ds.min(),xa.empty(),0)}static newUnknownDocument(e,t){return new _a(e,3,t,ds.min(),ds.min(),xa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ds.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ds.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _a&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _a(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ka{constructor(e,t){this.position=e,this.inclusive=t}}function Sa(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?ys.comparator(ys.fromName(a.referenceValue),n.key):oa(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Ea(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!sa(e.position[n],t.position[n]))return!1;return!0}class Ca{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Na(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ta{}class Ia extends Ta{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new La(e,t,n):"array-contains"===t?new Ua(e,n):"in"===t?new Ba(e,n):"not-in"===t?new Ha(e,n):"array-contains-any"===t?new Wa(e,n):new Ia(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Fa(e,n):new Va(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(oa(t,this.value)):null!==t&&ia(this.value)===ia(t)&&this.matchesComparison(oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Gi()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pa extends Ta{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Pa(e,t)}matches(e){return Aa(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Aa(e){return"and"===e.op}function Ma(e){return Da(e)&&Aa(e)}function Da(e){for(const t of e.filters)if(t instanceof Pa)return!1;return!0}function Ra(e){if(e instanceof Ia)return e.field.canonicalString()+e.op.toString()+ua(e.value);if(Ma(e))return e.filters.map((e=>Ra(e))).join(",");{const t=e.filters.map((e=>Ra(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Oa(e,t){return e instanceof Ia?function(e,t){return t instanceof Ia&&e.op===t.op&&e.field.isEqual(t.field)&&sa(e.value,t.value)}(e,t):e instanceof Pa?function(e,t){return t instanceof Pa&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Oa(n,t.filters[r])),!0)}(e,t):void Gi()}function ja(e){return e instanceof Ia?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ua(e.value))}(e):e instanceof Pa?function(e){return e.op.toString()+" {"+e.getFilters().map(ja).join(" ,")+"}"}(e):"Filter"}class La extends Ia{constructor(e,t,n){super(e,t,n),this.key=ys.fromName(n.referenceValue)}matches(e){const t=ys.comparator(e.key,this.key);return this.matchesComparison(t)}}class Fa extends Ia{constructor(e,t){super(e,"in",t),this.keys=za("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Va extends Ia{constructor(e,t){super(e,"not-in",t),this.keys=za("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function za(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ys.fromName(e.referenceValue)))}class Ua extends Ia{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fa(t)&&aa(t.arrayValue,this.value)}}class Ba extends Ia{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&aa(this.value.arrayValue,t)}}class Ha extends Ia{constructor(e,t){super(e,"not-in",t)}matches(e){if(aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!aa(this.value.arrayValue,t)}}class Wa extends Ia{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fa(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>aa(this.value.arrayValue,e)))}}class qa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function Ka(e){return new qa(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ga(e){const t=Qi(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Ra(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ps(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>ua(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>ua(e))).join(",")),t.ue=e}return t.ue}function Ya(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Na(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Oa(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ea(e.startAt,t.startAt)&&Ea(e.endAt,t.endAt)}function Qa(e){return ys.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class $a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Xa(e,t,n,r,i,s,a,o){return new $a(e,t,n,r,i,s,a,o)}function Ja(e){return new $a(e)}function Za(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function eo(e){return null!==e.collectionGroup}function to(e){const t=Qi(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Hs(ms.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Ca(r,n))})),e.has(ms.keyField().canonicalString())||t.ce.push(new Ca(ms.keyField(),n))}return t.ce}function no(e){const t=Qi(e);return t.le||(t.le=ro(t,to(e))),t.le}function ro(e,t){if("F"===e.limitType)return Ka(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Ca(e.field,t)}));const n=e.endAt?new ka(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ka(e.startAt.position,e.startAt.inclusive):null;return Ka(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function io(e,t,n){return new $a(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function so(e,t){return Ya(no(e),no(t))&&e.limitType===t.limitType}function ao(e){return"".concat(Ga(no(e)),"|lt:").concat(e.limitType)}function oo(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>ja(e))).join(", "),"]")),Ps(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>ua(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>ua(e))).join(",")),"Target(".concat(t,")")}(no(e)),"; limitType=").concat(e.limitType,")")}function lo(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ys.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of to(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Sa(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,to(e),t))&&!(e.endAt&&!function(e,t,n){const r=Sa(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,to(e),t))}(e,t)}function co(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function uo(e){return(t,n)=>{let r=!1;for(const i of to(e)){const e=ho(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ho(e,t,n){const r=e.field.isKeyField()?ys.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?oa(r,i):Gi()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Gi()}}class fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Vs(this.inner)}size(){return this.innerSize}}const po=new zs(ys.comparator);function go(){return po}const mo=new zs(ys.comparator);function yo(){let e=mo;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function vo(e){let t=mo;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function bo(){return wo()}function xo(){return wo()}function wo(){return new fo((e=>e.toString()),((e,t)=>e.isEqual(t)))}const _o=new zs(ys.comparator),ko=new Hs(ys.comparator);function So(){let e=ko;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Eo=new Hs(cs);function Co(){return Eo}function No(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:As(t)?"-0":t}}function To(e){return{integerValue:""+e}}function Io(e,t){return Ms(t)?To(t):No(e,t)}class Po{constructor(){this._=void 0}}function Ao(e,t,n){return e instanceof Ro?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Js(t)&&(t=Zs(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Oo?jo(e,t):e instanceof Lo?Fo(e,t):function(e,t){const n=Do(e,t),r=zo(n)+zo(e.Pe);return da(n)&&da(e.Pe)?To(r):No(e.serializer,r)}(e,t)}function Mo(e,t,n){return e instanceof Oo?jo(e,t):e instanceof Lo?Fo(e,t):n}function Do(e,t){return e instanceof Vo?function(e){return da(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ro extends Po{}class Oo extends Po{constructor(e){super(),this.elements=e}}function jo(e,t){const n=Uo(t);for(const r of e.elements)n.some((e=>sa(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Lo extends Po{constructor(e){super(),this.elements=e}}function Fo(e,t){let n=Uo(t);for(const r of e.elements)n=n.filter((e=>!sa(e,r)));return{arrayValue:{values:n}}}class Vo extends Po{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function zo(e){return $s(e.integerValue||e.doubleValue)}function Uo(e){return fa(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Bo{constructor(e,t){this.version=e,this.transformResults=t}}class Ho{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ho}static exists(e){return new Ho(void 0,e)}static updateTime(e){return new Ho(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wo(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class qo{}function Ko(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new nl(e.key,Ho.none()):new Xo(e.key,e.data,Ho.none());{const n=e.data,r=xa.empty();let i=new Hs(ms.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Jo(e.key,r,new qs(i.toArray()),Ho.none())}}function Go(e,t,n){e instanceof Xo?function(e,t,n){const r=e.value.clone(),i=el(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Jo?function(e,t,n){if(!Wo(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=el(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Zo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Yo(e,t,n,r){return e instanceof Xo?function(e,t,n,r){if(!Wo(e.precondition,t))return n;const i=e.value.clone(),s=tl(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Jo?function(e,t,n,r){if(!Wo(e.precondition,t))return n;const i=tl(e.fieldTransforms,r,t),s=t.data;return s.setAll(Zo(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Wo(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Qo(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Do(r.transform,e||null);null!=i&&(null===n&&(n=xa.empty()),n.set(r.field,i))}return n||null}function $o(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&us(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Oo&&t instanceof Oo||e instanceof Lo&&t instanceof Lo?us(e.elements,t.elements,sa):e instanceof Vo&&t instanceof Vo?sa(e.Pe,t.Pe):e instanceof Ro&&t instanceof Ro}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Xo extends qo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Jo extends qo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Zo(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function el(e,t,n){const r=new Map;Yi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Mo(a,o,n[i]))}return r}function tl(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ao(e,s,t))}return r}class nl extends qo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rl extends qo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class il{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Go(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Yo(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Yo(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=xo();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Ko(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(ds.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),So())}isEqual(e){return this.batchId===e.batchId&&us(this.mutations,e.mutations,((e,t)=>$o(e,t)))&&us(this.baseMutations,e.baseMutations,((e,t)=>$o(e,t)))}}class sl{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Yi(e.mutations.length===n.length);let r=_o;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new sl(e,t,n,r)}}class al{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ol{constructor(e,t){this.count=e,this.unchangedNames=t}}var ll,cl;function ul(e){switch(e){default:return Gi();case $i.CANCELLED:case $i.UNKNOWN:case $i.DEADLINE_EXCEEDED:case $i.RESOURCE_EXHAUSTED:case $i.INTERNAL:case $i.UNAVAILABLE:case $i.UNAUTHENTICATED:return!1;case $i.INVALID_ARGUMENT:case $i.NOT_FOUND:case $i.ALREADY_EXISTS:case $i.PERMISSION_DENIED:case $i.FAILED_PRECONDITION:case $i.ABORTED:case $i.OUT_OF_RANGE:case $i.UNIMPLEMENTED:case $i.DATA_LOSS:return!0}}function hl(e){if(void 0===e)return Wi("GRPC error has no .code"),$i.UNKNOWN;switch(e){case ll.OK:return $i.OK;case ll.CANCELLED:return $i.CANCELLED;case ll.UNKNOWN:return $i.UNKNOWN;case ll.DEADLINE_EXCEEDED:return $i.DEADLINE_EXCEEDED;case ll.RESOURCE_EXHAUSTED:return $i.RESOURCE_EXHAUSTED;case ll.INTERNAL:return $i.INTERNAL;case ll.UNAVAILABLE:return $i.UNAVAILABLE;case ll.UNAUTHENTICATED:return $i.UNAUTHENTICATED;case ll.INVALID_ARGUMENT:return $i.INVALID_ARGUMENT;case ll.NOT_FOUND:return $i.NOT_FOUND;case ll.ALREADY_EXISTS:return $i.ALREADY_EXISTS;case ll.PERMISSION_DENIED:return $i.PERMISSION_DENIED;case ll.FAILED_PRECONDITION:return $i.FAILED_PRECONDITION;case ll.ABORTED:return $i.ABORTED;case ll.OUT_OF_RANGE:return $i.OUT_OF_RANGE;case ll.UNIMPLEMENTED:return $i.UNIMPLEMENTED;case ll.DATA_LOSS:return $i.DATA_LOSS;default:return Gi()}}(cl=ll||(ll={}))[cl.OK=0]="OK",cl[cl.CANCELLED=1]="CANCELLED",cl[cl.UNKNOWN=2]="UNKNOWN",cl[cl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cl[cl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cl[cl.NOT_FOUND=5]="NOT_FOUND",cl[cl.ALREADY_EXISTS=6]="ALREADY_EXISTS",cl[cl.PERMISSION_DENIED=7]="PERMISSION_DENIED",cl[cl.UNAUTHENTICATED=16]="UNAUTHENTICATED",cl[cl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cl[cl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cl[cl.ABORTED=10]="ABORTED",cl[cl.OUT_OF_RANGE=11]="OUT_OF_RANGE",cl[cl.UNIMPLEMENTED=12]="UNIMPLEMENTED",cl[cl.INTERNAL=13]="INTERNAL",cl[cl.UNAVAILABLE=14]="UNAVAILABLE",cl[cl.DATA_LOSS=15]="DATA_LOSS";let dl=null;function fl(){return new TextEncoder}const pl=new Si([4294967295,4294967295],0);function gl(e){const t=fl().encode(e),n=new Ei;return n.update(t),new Uint8Array(n.digest())}function ml(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Si([n,r],0),new Si([i,s],0)]}class yl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new vl("Invalid padding: ".concat(t));if(n<0)throw new vl("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new vl("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new vl("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Si.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Si.fromNumber(n)));return 1===r.compare(pl)&&(r=new Si([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=gl(e),[n,r]=ml(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new yl(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=gl(e),[n,r]=ml(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bl{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new bl(ds.min(),r,new zs(cs),go(),So())}}class xl{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new xl(n,t,So(),So(),So())}}class wl{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class _l{constructor(e,t){this.targetId=e,this.me=t}}class kl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gs.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Sl{constructor(){this.fe=0,this.ge=Nl(),this.pe=Gs.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=So(),t=So(),n=So();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Gi()}})),new xl(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Nl()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Yi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class El{constructor(e){this.Le=e,this.Be=new Map,this.ke=go(),this.qe=Cl(),this.Qe=new zs(cs)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Gi()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Qa(i))if(0===n){const e=new ys(i.path);this.Ue(t,e,_a.newNoDocument(e,ds.min()))}else Yi(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==dl||dl.et(function(e,t,n,r,i){var s,a,o,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==d?void 0:d.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Xs(n).toUint8Array()}catch(e){if(e instanceof Ks)return qi("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new yl(s,r,i)}catch(e){return qi(e instanceof vl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Qa(i.target)){const t=new ys(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,_a.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}}));let n=So();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new bl(e,t,this.Qe,this.ke,n);return this.ke=go(),this.qe=Cl(),this.Qe=new zs(cs),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Sl,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Hs(cs),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Hi("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Sl),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Cl(){return new zs(ys.comparator)}function Nl(){return new zs(ys.comparator)}const Tl={asc:"ASCENDING",desc:"DESCENDING"},Il={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pl={and:"AND",or:"OR"};class Al{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ml(e,t){return e.useProto3Json||Ps(t)?t:{value:t}}function Dl(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ol(e,t){return Dl(e,t.toTimestamp())}function jl(e){return Yi(!!e),ds.fromTimestamp(function(e){const t=Qs(e);return new hs(t.seconds,t.nanos)}(e))}function Ll(e,t){return Fl(e,t).canonicalString()}function Fl(e,t){const n=function(e){return new ps(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Vl(e){const t=ps.fromString(e);return Yi(sc(t)),t}function zl(e,t){return Ll(e.databaseId,t.path)}function Ul(e,t){const n=Vl(t);if(n.get(1)!==e.databaseId.projectId)throw new Xi($i.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xi($i.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ys(ql(n))}function Bl(e,t){return Ll(e.databaseId,t)}function Hl(e){const t=Vl(e);return 4===t.length?ps.emptyPath():ql(t)}function Wl(e){return new ps(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ql(e){return Yi(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Kl(e,t,n){return{name:zl(e,t),fields:n.value.mapValue.fields}}function Gl(e,t){let n;if(t instanceof Xo)n={update:Kl(e,t.key,t.value)};else if(t instanceof nl)n={delete:zl(e,t.key)};else if(t instanceof Jo)n={update:Kl(e,t.key,t.data),updateMask:ic(t.fieldMask)};else{if(!(t instanceof rl))return Gi();n={verify:zl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ro)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Oo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Lo)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vo)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Gi()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ol(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Gi()}(e,t.precondition)),n}function Yl(e,t){return{documents:[Bl(e,t.path)]}}function Ql(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Bl(e,i);const s=function(e){if(0!==e.length)return rc(Pa.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:tc(e.field),direction:Jl(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Ml(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function $l(e){let t=Hl(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Yi(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Xl(e);return t instanceof Pa&&Ma(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new Ca(nc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Ps(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ka(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ka(n,t)}(n.endAt)),Xa(t,i,a,s,o,"F",l,c)}function Xl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=nc(e.unaryFilter.field);return Ia.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=nc(e.unaryFilter.field);return Ia.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=nc(e.unaryFilter.field);return Ia.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=nc(e.unaryFilter.field);return Ia.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Gi()}}(e):void 0!==e.fieldFilter?function(e){return Ia.create(nc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Gi()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Pa.create(e.compositeFilter.filters.map((e=>Xl(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Gi()}}(e.compositeFilter.op))}(e):Gi()}function Jl(e){return Tl[e]}function Zl(e){return Il[e]}function ec(e){return Pl[e]}function tc(e){return{fieldPath:e.canonicalString()}}function nc(e){return ms.fromServerFormat(e.fieldPath)}function rc(e){return e instanceof Ia?function(e){if("=="===e.op){if(ga(e.value))return{unaryFilter:{field:tc(e.field),op:"IS_NAN"}};if(pa(e.value))return{unaryFilter:{field:tc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ga(e.value))return{unaryFilter:{field:tc(e.field),op:"IS_NOT_NAN"}};if(pa(e.value))return{unaryFilter:{field:tc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tc(e.field),op:Zl(e.op),value:e.value}}}(e):e instanceof Pa?function(e){const t=e.getFilters().map((e=>rc(e)));return 1===t.length?t[0]:{compositeFilter:{op:ec(e.op),filters:t}}}(e):Gi()}function ic(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function sc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ac{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ds.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ds.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Gs.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new ac(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ac(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ac(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ac(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class oc{constructor(e){this.ct=e}}function lc(e){const t=$l({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?io(t,t.limit,"L"):t}class cc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At($s(e.integerValue));else if("doubleValue"in e){const n=$s(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),As(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Qs(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Xs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?ba(e)?this.dt(t,Number.MAX_SAFE_INTEGER):ya(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Gi()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",a=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At($s(a)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),ys.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}cc.vt=new cc;class uc{constructor(){this.un=new hc}addToCollectionParentIndex(e,t){return this.un.add(t),Cs.resolve()}getCollectionParents(e,t){return Cs.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Cs.resolve()}deleteFieldIndex(e,t){return Cs.resolve()}deleteAllFieldIndexes(e){return Cs.resolve()}createTargetIndexes(e,t){return Cs.resolve()}getDocumentsMatchingTarget(e,t){return Cs.resolve(null)}getIndexType(e,t){return Cs.resolve(0)}getFieldIndexes(e,t){return Cs.resolve([])}getNextCollectionGroupToUpdate(e){return Cs.resolve(null)}getMinOffset(e,t){return Cs.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,t){return Cs.resolve(ws.min())}updateCollectionGroup(e,t,n){return Cs.resolve()}updateIndexEntries(e,t){return Cs.resolve()}}class hc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Hs(ps.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Hs(ps.comparator)).toArray()}}new Uint8Array(0);class dc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new dc(e,dc.DEFAULT_COLLECTION_PERCENTILE,dc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}dc.DEFAULT_COLLECTION_PERCENTILE=10,dc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dc.DEFAULT=new dc(41943040,dc.DEFAULT_COLLECTION_PERCENTILE,dc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dc.DISABLED=new dc(-1,0,0);class fc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fc(0)}static kn(){return new fc(-1)}}class pc{constructor(){this.changes=new fo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_a.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Cs.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class mc{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Yo(n.mutation,e,qs.empty(),hs.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,So()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:So();const r=bo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=yo();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=bo();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,So())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=go();const s=wo(),a=wo();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Jo)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Yo(a.mutation,t,a.mutation.getFieldMask(),hs.now())):s.set(t.key,qs.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new gc(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=wo();let r=new zs(((e,t)=>e-t)),i=So();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||qs.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||So()).add(e);r=r.insert(i.batchId,o)}))})).next((()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=xo();l.forEach((e=>{if(!i.has(e)){const r=Ko(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Cs.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ys.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):eo(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Cs.resolve(bo());let a=-1,o=i;return s.next((t=>Cs.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Cs.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,So()))).next((e=>({batchId:a,changes:vo(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ys(t)).next((e=>{let t=yo();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=yo();return this.indexManager.getCollectionParents(e,i).next((a=>Cs.forEach(a,(a=>{const o=function(e,t){return new $a(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,_a.newInvalidDocument(r)))}));let n=yo();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Yo(s.mutation,r,qs.empty(),hs.now()),lo(t,r)&&(n=n.insert(e,r))})),n}))}}class yc{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Cs.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:jl(e.createTime)}}(t)),Cs.resolve()}getNamedQuery(e,t){return Cs.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:lc(e.bundledQuery),readTime:jl(e.readTime)}}(t)),Cs.resolve()}}class vc{constructor(){this.overlays=new zs(ys.comparator),this.Ir=new Map}getOverlay(e,t){return Cs.resolve(this.overlays.get(t))}getOverlays(e,t){const n=bo();return Cs.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Cs.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),Cs.resolve()}getOverlaysForCollection(e,t,n){const r=bo(),i=t.length+1,s=new ys(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Cs.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new zs(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=bo(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=bo(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return Cs.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new al(t,n));let i=this.Ir.get(t);void 0===i&&(i=So(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class bc{constructor(){this.sessionToken=Gs.EMPTY_BYTE_STRING}getSessionToken(e){return Cs.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Cs.resolve()}}class xc{constructor(){this.Tr=new Hs(wc.Er),this.dr=new Hs(wc.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new wc(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new wc(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new ys(new ps([])),n=new wc(t,e),r=new wc(t,e+1),i=[];return this.dr.forEachInRange([n,r],(e=>{this.Vr(e),i.push(e.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ys(new ps([])),n=new wc(t,e),r=new wc(t,e+1);let i=So();return this.dr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new wc(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class wc{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ys.comparator(e.key,t.key)||cs(e.wr,t.wr)}static Ar(e,t){return cs(e.wr,t.wr)||ys.comparator(e.key,t.key)}}class _c{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Hs(wc.Er)}checkEmpty(e){return Cs.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new il(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.br=this.br.add(new wc(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Cs.resolve(s)}lookupMutationBatch(e,t){return Cs.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Cs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Cs.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Cs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new wc(t,0),r=new wc(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],(e=>{const t=this.Dr(e.wr);i.push(t)})),Cs.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Hs(cs);return t.forEach((e=>{const t=new wc(e,0),r=new wc(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],(e=>{n=n.add(e.wr)}))})),Cs.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ys.isDocumentKey(i)||(i=i.child(""));const s=new wc(new ys(i),0);let a=new Hs(cs);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)}),s),Cs.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Yi(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Cs.forEach(t.mutations,(r=>{const i=new wc(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new wc(t,0),r=this.br.firstAfterOrEqual(n);return Cs.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Cs.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kc{constructor(e){this.Mr=e,this.docs=new zs(ys.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Cs.resolve(n?n.document.mutableCopy():_a.newInvalidDocument(t))}getEntries(e,t){let n=go();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():_a.newInvalidDocument(e))})),Cs.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=go();const s=t.path,a=new ys(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||_s(xs(a),n)<=0||(r.has(a.key)||lo(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Cs.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Gi()}Or(e,t){return Cs.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Sc(this)}getSize(e){return Cs.resolve(this.size)}}class Sc extends pc{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)})),Cs.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Ec{constructor(e){this.persistence=e,this.Nr=new fo((e=>Ga(e)),Ya),this.lastRemoteSnapshotVersion=ds.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xc,this.targetCount=0,this.kr=fc.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),Cs.resolve()}getLastRemoteSnapshotVersion(e){return Cs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Cs.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Cs.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Cs.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new fc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Cs.resolve()}updateTargetData(e,t){return this.Kn(t),Cs.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Cs.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),Cs.waitFor(i).next((()=>r))}getTargetCount(e){return Cs.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Cs.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Cs.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Cs.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Cs.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Cs.resolve(n)}containsKey(e,t){return Cs.resolve(this.Br.containsKey(t))}}class Cc{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Is(0),this.Kr=!1,this.Kr=!0,this.$r=new bc,this.referenceDelegate=e(this),this.Ur=new Ec(this),this.indexManager=new uc,this.remoteDocumentCache=function(e){return new kc(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new oc(t),this.Gr=new yc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new _c(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Hi("MemoryPersistence","Starting transaction:",e);const r=new Nc(this.Qr.next());return this.referenceDelegate.zr(),n(r).next((e=>this.referenceDelegate.jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Hr(e,t){return Cs.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class Nc extends Ss{constructor(e){super(),this.currentSequenceNumber=e}}class Tc{constructor(e){this.persistence=e,this.Jr=new xc,this.Yr=null}static Zr(e){return new Tc(e)}get Xr(){if(this.Yr)return this.Yr;throw Gi()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Cs.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Cs.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Cs.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cs.forEach(this.Xr,(n=>{const r=ys.fromPath(n);return this.ei(e,r).next((e=>{e||t.removeEntry(r,ds.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Cs.or([()=>Cs.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Ic{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=So(),r=So();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ic(e,t.fromCache,n,r)}}class Pc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ac{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=y()?8:Ns(m())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Zi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Pc;return this.Xi(e,t,n).next((r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)}))})).next((()=>i.result))}es(e,t,n,r){return n.documentReadCount<this.ji?(Bi()<=O.DEBUG&&Hi("QueryEngine","SDK will not create cache indexes for query:",oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Cs.resolve()):(Bi()<=O.DEBUG&&Hi("QueryEngine","Query:",oo(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Bi()<=O.DEBUG&&Hi("QueryEngine","The SDK decides to create cache indexes for query:",oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,no(t))):Cs.resolve())}Yi(e,t){if(Za(t))return Cs.resolve(null);let n=no(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=io(t,null,"F"),n=no(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=So(...r);return this.Ji.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,io(t,null,"F")):this.rs(e,s,t,n)}))))})))))}Zi(e,t,n,r){return Za(t)||r.isEqual(ds.min())?Cs.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?Cs.resolve(null):(Bi()<=O.DEBUG&&Hi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),oo(t)),this.rs(e,s,t,bs(r,-1)).next((e=>e)))}))}ts(e,t){let n=new Hs(uo(e));return t.forEach(((t,r)=>{lo(e,r)&&(n=n.add(r))})),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return Bi()<=O.DEBUG&&Hi("QueryEngine","Using full collection scan to execute query:",oo(t)),this.Ji.getDocumentsMatchingQuery(e,t,ws.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Mc{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new zs(cs),this._s=new fo((e=>Ga(e)),Ya),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mc(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function Dc(e,t,n,r){return new Mc(e,t,n,r)}async function Rc(e,t){const n=Qi(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let a=So();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({hs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Oc(e){const t=Qi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function jc(e,t,n){let r=So(),i=So();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=go();return n.forEach(((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ds.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Hi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{Ps:r,Is:i}}))}function Lc(e,t){const n=Qi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Fc(e,t){const n=Qi(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ur.getTargetData(e,t).next((i=>i?(r=i,Cs.resolve(r)):n.Ur.allocateTargetId(e).next((i=>(r=new ac(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}async function Vc(e,t,n){const r=Qi(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Ts(e))throw e;Hi("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(i.target)}function zc(e,t,n){const r=Qi(e);let i=ds.min(),s=So();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Qi(e),i=r._s.get(n);return void 0!==i?Cs.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,no(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:ds.min(),n?s:So()))).next((e=>(Uc(r,co(t),e),{documents:e,Ts:s})))))}function Uc(e,t,n){let r=e.us.get(t)||ds.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.us.set(t,r)}class Bc{constructor(){this.activeTargetIds=Co()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hc{constructor(){this.so=new Bc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Bc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wc{_o(e){}shutdown(){}}class qc{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Hi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Hi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Kc=null;function Gc(){return null===Kc?Kc=268435456+Math.round(2147483648*Math.random()):Kc++,"0x"+Kc.toString(16)}const Yc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qc{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const $c="WebChannelConnection";class Xc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,i){const s=Gc(),a=this.xo(e,t.toUriEncodedString());Hi("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,i),this.No(e,a,o,n).then((t=>(Hi("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw qi("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t}))}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+zi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=Yc[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=Gc();return new Promise(((s,a)=>{const o=new Ti;o.setWithCredentials(!0),o.listenOnce(Pi.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Ai.NO_ERROR:const t=o.getResponseJson();Hi($c,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Ai.TIMEOUT:Hi($c,"RPC '".concat(e,"' ").concat(i," timed out")),a(new Xi($i.DEADLINE_EXCEEDED,"Request time out"));break;case Ai.HTTP_ERROR:const n=o.getStatus();if(Hi($c,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values($i).indexOf(t)>=0?t:$i.UNKNOWN}(t.status);a(new Xi(e,t.message))}else a(new Xi($i.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Xi($i.UNAVAILABLE,"Connection failed."));break;default:Gi()}}finally{Hi($c,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Hi($c,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)}))}Bo(e,t,n){const r=Gc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Oi(),a=Ri(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");Hi($c,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);let h=!1,d=!1;const f=new Qc({Io:t=>{d?Hi($c,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Hi($c,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Hi($c,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Ii.EventType.OPEN,(()=>{d||(Hi($c,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.yo())})),p(u,Ii.EventType.CLOSE,(()=>{d||(d=!0,Hi($c,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.So())})),p(u,Ii.EventType.ERROR,(t=>{d||(d=!0,qi($c,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.So(new Xi($i.UNAVAILABLE,"The operation could not be completed")))})),p(u,Ii.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Yi(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){Hi($c,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=ll[e];if(void 0!==t)return hl(t)}(t),i=a.message;void 0===n&&(n=$i.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,f.So(new Xi(n,i)),u.close()}else Hi($c,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.bo(i)}})),p(a,Di.STAT_EVENT,(t=>{t.stat===Mi.PROXY?Hi($c,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Mi.NOPROXY&&Hi($c,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.wo()}),0),f}}function Jc(){return"undefined"!=typeof document?document:null}function Zc(e){return new Al(e,!0)}class eu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Hi("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class tu{constructor(e,t,n,r,i,s,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eu(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===$i.RESOURCE_EXHAUSTED?(Wi(t.toString()),Wi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===$i.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)}),(t=>{e((()=>{const e=new Xi($i.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Hi("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(Hi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nu extends tu{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Gi()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Yi(void 0===t||"string"==typeof t),Gs.fromBase64String(t||"")):(Yi(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Gs.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?$i.UNKNOWN:hl(e.code);return new Xi(t,e.message||"")}(a);n=new kl(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ul(e,r.document.name),s=jl(r.document.updateTime),a=r.document.createTime?jl(r.document.createTime):ds.min(),o=new xa({mapValue:{fields:r.document.fields}}),l=_a.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new wl(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ul(e,r.document),s=r.readTime?jl(r.readTime):ds.min(),a=_a.newNoDocument(i,s),o=r.removedTargetIds||[];n=new wl([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ul(e,r.document),s=r.removedTargetIds||[];n=new wl([],s,i,null)}else{if(!("filter"in t))return Gi();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ol(r,i),a=e.targetId;n=new _l(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ds.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ds.min():t.readTime?jl(t.readTime):ds.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Wl(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Qa(r)?{documents:Yl(e,r)}:{query:Ql(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Rl(e,t.resumeToken);const r=Ml(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ds.min())>0){n.readTime=Dl(e,t.snapshotVersion.toTimestamp());const r=Ml(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Gi()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Wl(this.serializer),t.removeTarget=e,this.a_(t)}}class ru extends tu{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Yi(!!e.streamToken),this.lastStreamToken=e.streamToken,Yi(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Yi(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Yi(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?jl(e.updateTime):jl(t);return n.isEqual(ds.min())&&(n=jl(t)),new Bo(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=jl(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Wl(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Gl(this.serializer,e)))};this.a_(t)}}class iu extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Xi($i.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,a]=i;return this.connection.Mo(e,Fl(t,n),r,s,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===$i.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xi($i.UNKNOWN,e.toString())}))}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[a,o]=s;return this.connection.Lo(e,Fl(t,n),r,a,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===$i.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xi($i.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class su{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(Wi(t),this.D_=!1):Hi("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class au{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((e=>{n.enqueueAndForget((async()=>{gu(this)&&(Hi("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Qi(e);t.L_.add(4),await lu(t),t.q_.set("Unknown"),t.L_.delete(4),await ou(t)}(this))}))})),this.q_=new su(n,r)}}async function ou(e){if(gu(e))for(const t of e.B_)await t(!0)}async function lu(e){for(const t of e.B_)await t(!1)}function cu(e,t){const n=Qi(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),pu(n)?fu(n):Ru(n).r_()&&hu(n,t))}function uu(e,t){const n=Qi(e),r=Ru(n);n.N_.delete(t),r.r_()&&du(n,t),0===n.N_.size&&(r.r_()?r.o_():gu(n)&&n.q_.set("Unknown"))}function hu(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ds.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ru(e).A_(t)}function du(e,t){e.Q_.xe(t),Ru(e).R_(t)}function fu(e){e.Q_=new El({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Ru(e).start(),e.q_.v_()}function pu(e){return gu(e)&&!Ru(e).n_()&&e.N_.size>0}function gu(e){return 0===Qi(e).L_.size}function mu(e){e.Q_=void 0}async function yu(e){e.q_.set("Online")}async function vu(e){e.N_.forEach(((t,n)=>{hu(e,t)}))}async function bu(e,t){mu(e),pu(e)?(e.q_.M_(t),fu(e)):e.q_.set("Unknown")}async function xu(e,t,n){if(e.q_.set("Online"),t instanceof kl&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){Hi("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await wu(e,n)}else if(t instanceof wl?e.Q_.Ke(t):t instanceof _l?e.Q_.He(t):e.Q_.We(t),!n.isEqual(ds.min()))try{const t=await Oc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Gs.EMPTY_BYTE_STRING,r.snapshotVersion)),du(e,t);const i=new ac(r.target,t,n,r.sequenceNumber);hu(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Hi("RemoteStore","Failed to raise snapshot:",t),await wu(e,t)}}async function wu(e,t,n){if(!Ts(t))throw t;e.L_.add(1),await lu(e),e.q_.set("Offline"),n||(n=()=>Oc(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Hi("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await ou(e)}))}function _u(e,t){return t().catch((n=>wu(e,n,t)))}async function ku(e){const t=Qi(e),n=Ou(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Su(t);)try{const e=await Lc(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Eu(t,e)}catch(e){await wu(t,e)}Cu(t)&&Nu(t)}function Su(e){return gu(e)&&e.O_.length<10}function Eu(e,t){e.O_.push(t);const n=Ou(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Cu(e){return gu(e)&&!Ou(e).n_()&&e.O_.length>0}function Nu(e){Ou(e).start()}async function Tu(e){Ou(e).p_()}async function Iu(e){const t=Ou(e);for(const n of e.O_)t.m_(n.mutations)}async function Pu(e,t,n){const r=e.O_.shift(),i=sl.from(r,t,n);await _u(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ku(e)}async function Au(e,t){t&&Ou(e).V_&&await async function(e,t){if(function(e){return ul(e)&&e!==$i.ABORTED}(t.code)){const n=e.O_.shift();Ou(e).s_(),await _u(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ku(e)}}(e,t),Cu(e)&&Nu(e)}async function Mu(e,t){const n=Qi(e);n.asyncQueue.verifyOperationInProgress(),Hi("RemoteStore","RemoteStore received new credentials");const r=gu(n);n.L_.add(3),await lu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await ou(n)}async function Du(e,t){const n=Qi(e);t?(n.L_.delete(2),await ou(n)):t||(n.L_.add(2),await lu(n),n.q_.set("Unknown"))}function Ru(e){return e.K_||(e.K_=function(e,t,n){const r=Qi(e);return r.w_(),new nu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:yu.bind(null,e),Ro:vu.bind(null,e),mo:bu.bind(null,e),d_:xu.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),pu(e)?fu(e):e.q_.set("Unknown")):(await e.K_.stop(),mu(e))}))),e.K_}function Ou(e){return e.U_||(e.U_=function(e,t,n){const r=Qi(e);return r.w_(),new ru(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Tu.bind(null,e),mo:Au.bind(null,e),f_:Iu.bind(null,e),g_:Pu.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await ku(e)):(await e.U_.stop(),e.O_.length>0&&(Hi("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))}))),e.U_}class ju{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new ju(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xi($i.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lu(e,t){if(Wi("AsyncQueue","".concat(t,": ").concat(e)),Ts(e))return new Xi($i.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Fu{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ys.comparator(t.key,n.key):(e,t)=>ys.comparator(e.key,t.key),this.keyedMap=yo(),this.sortedSet=new zs(this.comparator)}static emptySet(e){return new Fu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fu))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Fu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Vu{constructor(){this.W_=new zs(ys.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Gi():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class zu{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new zu(e,t,Fu.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&so(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Uu{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Bu{constructor(){this.queries=Hu(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Qi(e),r=n.queries;n.queries=Hu(),r.forEach(((e,n)=>{for(const r of n.j_)r.onError(t)}))}(this,new Xi($i.ABORTED,"Firestore shutting down"))}}function Hu(){return new fo((e=>ao(e)),so)}async function Wu(e,t){const n=Qi(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new Uu,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Lu(e,"Initialization of query '".concat(oo(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&Yu(n)}async function qu(e,t){const n=Qi(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ku(e,t){const n=Qi(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&Yu(n)}function Gu(e,t,n){const r=Qi(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function Yu(e){e.Y_.forEach((e=>{e.next()}))}var Qu,$u;($u=Qu||(Qu={})).ea="default",$u.Cache="cache";class Xu{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new zu(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=zu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qu.Cache}}class Ju{constructor(e){this.key=e}}class Zu{constructor(e){this.key=e}}class eh{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=So(),this.mutatedKeys=So(),this.Aa=uo(e),this.Ra=new Fu(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Vu,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=lo(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gi()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==s.length||l?{snapshot:new zu(this.query,e.Ra,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vu,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=So(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new Zu(e))})),this.da.forEach((n=>{e.has(n)||t.push(new Ju(n))})),t}ba(e){this.Ta=e.Ts,this.da=So();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return zu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class th{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class nh{constructor(e){this.key=e,this.va=!1}}class rh{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new fo((e=>ao(e)),so),this.Ma=new Map,this.xa=new Set,this.Oa=new zs(ys.comparator),this.Na=new Map,this.La=new xc,this.Ba={},this.ka=new Map,this.qa=fc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function ih(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Eh(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await ah(r,t,n,!0),i}async function sh(e,t){const n=Eh(e);await ah(n,t,!0,!1)}async function ah(e,t,n,r){const i=await Fc(e.localStore,no(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await oh(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&cu(e.remoteStore,i),o}async function oh(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await zc(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ma(n,i)})));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return bh(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const s=await zc(e.localStore,t,!0),a=new eh(t,s.Ts),o=a.ma(s.documents),l=xl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);bh(e,n,c.wa);const u=new th(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function lh(e,t,n){const r=Qi(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter((e=>!so(e,t)))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Vc(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&uu(r.remoteStore,i.targetId),yh(r,i.targetId)})).catch(Es)):(yh(r,i.targetId),await Vc(r.localStore,i.targetId,!0))}async function ch(e,t){const n=Qi(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uu(n.remoteStore,r.targetId))}async function uh(e,t){const n=Qi(e);try{const e=await function(e,t){const n=Qi(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach(((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.Ur.addMatchingKeys(e,s.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Gs.EMPTY_BYTE_STRING,ds.min()).withLastLimboFreeSnapshotVersion(ds.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&a.push(n.Ur.updateTargetData(e,c))}));let o=go(),l=So();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(jc(e,s,t.documentUpdates).next((e=>{o=e.Ps,l=e.Is}))),!r.isEqual(ds.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return Cs.waitFor(a).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.os=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Na.get(t);r&&(Yi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Yi(r.va):e.removedDocuments.size>0&&(Yi(r.va),r.va=!1))})),await _h(n,e,t)}catch(e){await Es(e)}}function hh(e,t,n){const r=Qi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach(((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Qi(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)})),r&&Yu(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function dh(e,t,n){const r=Qi(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new zs(ys.comparator);e=e.insert(s,_a.newNoDocument(s,ds.min()));const n=So().add(s),i=new bl(ds.min(),new Map,new zs(cs),e,n);await uh(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),wh(r)}else await Vc(r.localStore,t,!1).then((()=>yh(r,t,n))).catch(Es)}async function fh(e,t){const n=Qi(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Qi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Cs.resolve();return s.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Yi(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=So();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);mh(n,r,null),gh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _h(n,e)}catch(e){await Es(e)}}async function ph(e,t,n){const r=Qi(e);try{const e=await function(e,t){const n=Qi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Yi(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);mh(r,t,n),gh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await _h(r,e)}catch(n){await Es(n)}}function gh(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function mh(e,t,n){const r=Qi(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function yh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||vh(e,t)}))}function vh(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(uu(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),wh(e))}function bh(e,t,n){for(const r of n)r instanceof Ju?(e.La.addReference(r.key,t),xh(e,r)):r instanceof Zu?(Hi("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||vh(e,r.key)):Gi()}function xh(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Hi("SyncEngine","New document in limbo: "+n),e.xa.add(r),wh(e))}function wh(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new ys(ps.fromString(t)),r=e.qa.next();e.Na.set(r,new nh(n)),e.Oa=e.Oa.insert(n,r),cu(e.remoteStore,new ac(no(Ja(n.path)),r,"TargetPurposeLimboResolution",Is.oe))}}async function _h(e,t,n){const r=Qi(e),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach(((e,o)=>{a.push(r.Ka(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Ic.Wi(o.targetId,e);s.push(t)}})))})),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=Qi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Cs.forEach(t,(t=>Cs.forEach(t.$i,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Cs.forEach(t.Ui,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Ts(e))throw e;Hi("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function kh(e,t){const n=Qi(e);if(!n.currentUser.isEqual(t)){Hi("SyncEngine","User change. New user:",t.toKey());const e=await Rc(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new Xi($i.CANCELLED,t))}))})),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await _h(n,e.hs)}}function Sh(e,t){const n=Qi(e),r=n.Na.get(t);if(r&&r.va)return So().add(r.key);{let e=So();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Eh(e){const t=Qi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=uh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=dh.bind(null,t),t.Ca.d_=Ku.bind(null,t.eventManager),t.Ca.$a=Gu.bind(null,t.eventManager),t}function Ch(e){const t=Qi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ph.bind(null,t),t}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Dc(this.persistence,new Ac,e.initialUser,this.serializer)}Ga(e){return new Cc(Tc.Zr,this.serializer)}Wa(e){return new Hc}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class Th{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>hh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=kh.bind(null,this.syncEngine),await Du(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Bu}createDatastore(e){const t=Zc(e.databaseInfo.databaseId),n=function(e){return new Xc(e)}(e.databaseInfo);return function(e,t,n,r){return new iu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new au(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>hh(this.syncEngine,e,0)),qc.D()?new qc:new Wc)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new rh(e,t,n,r,i,s);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Qi(e);Hi("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await lu(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Th.provider={build:()=>new Th};class Ih{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Wi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class Ph{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Vi.UNAUTHENTICATED,this.clientId=ls.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Hi("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Hi("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Lu(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Ah(e,t){e.asyncQueue.verifyOperationInProgress(),Hi("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Rc(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Mh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Dh(e);Hi("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Mu(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Mu(t.remoteStore,n))),e._onlineComponents=t}async function Dh(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Hi("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ah(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===$i.FAILED_PRECONDITION||e.code===$i.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;qi("Error using user provided cache. Falling back to memory cache: "+n),await Ah(e,new Nh)}}else Hi("FirestoreClient","Using default OfflineComponentProvider"),await Ah(e,new Nh);return e._offlineComponents}async function Rh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Hi("FirestoreClient","Using user provided OnlineComponentProvider"),await Mh(e,e._uninitializedComponentsProvider._online)):(Hi("FirestoreClient","Using default OnlineComponentProvider"),await Mh(e,new Th))),e._onlineComponents}function Oh(e){return Rh(e).then((e=>e.syncEngine))}async function jh(e){const t=await Rh(e),n=t.eventManager;return n.onListen=ih.bind(null,t.syncEngine),n.onUnlisten=lh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=sh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ch.bind(null,t.syncEngine),n}function Lh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ji;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Ih({next:o=>{s.Za(),t.enqueueAndForget((()=>qu(e,a)));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Xi($i.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new Xi($i.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Xu(Ja(n.path),s,{includeMetadataChanges:!0,_a:!0});return Wu(e,a)}(await jh(e),e.asyncQueue,t,n,r))),r.promise}function Fh(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Vh=new Map;function zh(e,t,n){if(!n)throw new Xi($i.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Uh(e){if(!ys.isDocumentKey(e))throw new Xi($i.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Bh(e){if(ys.isDocumentKey(e))throw new Xi($i.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Hh(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Gi()}function Wh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xi($i.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hh(e);throw new Xi($i.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class qh{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Xi($i.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Xi($i.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Xi($i.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fh(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Xi($i.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Xi($i.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Xi($i.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kh{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xi($i.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xi($i.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qh(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new es;switch(e.type){case"firstParty":return new is(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Xi($i.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Vh.get(e);t&&(Hi("ComponentProvider","Removing Datastore"),Vh.delete(e),t.terminate())}(this),Promise.resolve()}}function Gh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Wh(e,Kh))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==a&&qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Vi.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Xi($i.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Vi(s)}e._authCredentials=new ts(new Zi(t,n))}}class Yh{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Yh(this.firestore,e,this._query)}}class Qh{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $h(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qh(this.firestore,e,this._key)}}class $h extends Yh{constructor(e,t,n){super(e,t,Ja(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qh(this.firestore,null,new ys(e))}withConverter(e){return new $h(this.firestore,e,this._path)}}function Xh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=I(e),zh("collection","path",t),e instanceof Kh){const n=ps.fromString(t,...r);return Bh(n),new $h(e,null,n)}{if(!(e instanceof Qh||e instanceof $h))throw new Xi($i.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ps.fromString(t,...r));return Bh(n),new $h(e.firestore,null,n)}}function Jh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=I(e),1===arguments.length&&(t=ls.newId()),zh("doc","path",t),e instanceof Kh){const n=ps.fromString(t,...r);return Uh(n),new Qh(e,null,new ys(n))}{if(!(e instanceof Qh||e instanceof $h))throw new Xi($i.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ps.fromString(t,...r));return Uh(n),new Qh(e.firestore,e instanceof $h?e.converter:null,new ys(n))}}class Zh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eu(this,"async_queue_retry"),this.Vu=()=>{const e=Jc();e&&Hi("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Jc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Jc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Ji;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ts(e))throw e;Hi("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Wi("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=ju.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(r),r}fu(){this.Eu&&Gi()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function ed(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class td extends Kh{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Zh,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zh(e),this._firestoreClient=void 0,await e}}}function nd(e){if(e._terminated)throw new Xi($i.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||rd(e),e._firestoreClient}function rd(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new ta(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Fh(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Ph(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class id{constructor(e){this._byteString=e}static fromBase64String(e){try{return new id(Gs.fromBase64String(e))}catch(e){throw new Xi($i.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new id(Gs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class sd{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Xi($i.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ms(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ad{constructor(e){this._methodName=e}}class od{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xi($i.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xi($i.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cs(this._lat,e._lat)||cs(this._long,e._long)}}class ld{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const cd=/^__.*__$/;class ud{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Jo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xo(e,this.data,t,this.fieldTransforms)}}class hd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Jo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dd(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gi()}}class fd{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new fd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Nd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(dd(this.Cu)&&cd.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class pd{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Zc(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fd({Cu:e,methodName:t,qu:n,path:ms.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gd(e){const t=e._freezeSettings(),n=Zc(e._databaseId);return new pd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function md(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);kd("Data must be an object, but it was:",a,r);const o=wd(r,a);let l,c;if(s.merge)l=new qs(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Sd(t,r,n);if(!a.contains(i))throw new Xi($i.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Td(e,i)||e.push(i)}l=new qs(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new ud(new xa(o),l,c)}class yd extends ad{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yd}}function vd(e,t,n,r){const i=e.Qu(1,t,n);kd("Data must be an object, but it was:",i,r);const s=[],a=xa.empty();Fs(r,((e,r)=>{const o=Cd(t,e,n);r=I(r);const l=i.Nu(o);if(r instanceof yd)s.push(o);else{const e=xd(r,l);null!=e&&(s.push(o),a.set(o,e))}}));const o=new qs(s);return new hd(a,o,i.fieldTransforms)}function bd(e,t,n,r,i,s){const a=e.Qu(1,t,n),o=[Sd(t,r,n)],l=[i];if(s.length%2!=0)throw new Xi($i.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)o.push(Sd(t,s[d])),l.push(s[d+1]);const c=[],u=xa.empty();for(let d=o.length-1;d>=0;--d)if(!Td(c,o[d])){const e=o[d];let t=l[d];t=I(t);const n=a.Nu(e);if(t instanceof yd)c.push(e);else{const r=xd(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new qs(c);return new hd(u,h,a.fieldTransforms)}function xd(e,t){if(_d(e=I(e)))return kd("Unsupported field value:",t,e),wd(e,t);if(e instanceof ad)return function(e,t){if(!dd(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=xd(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=I(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Io(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=hs.fromDate(e);return{timestampValue:Dl(t.serializer,n)}}if(e instanceof hs){const n=new hs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Dl(t.serializer,n)}}if(e instanceof od)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof id)return{bytesValue:Rl(t.serializer,e._byteString)};if(e instanceof Qh){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ll(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof ld)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return No(t.serializer,e)}))}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(Hh(e)))}(e,t)}function wd(e,t){const n={};return Vs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fs(e,((e,r)=>{const i=xd(r,t.Mu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function _d(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof hs||e instanceof od||e instanceof id||e instanceof Qh||e instanceof ad||e instanceof ld)}function kd(e,t,n){if(!_d(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Hh(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Sd(e,t,n){if((t=I(t))instanceof sd)return t._internalPath;if("string"==typeof t)return Cd(e,t);throw Nd("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ed=new RegExp("[~\\*/\\[\\]]");function Cd(e,t,n){if(t.search(Ed)>=0)throw Nd("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new sd(...t.split("."))._internalPath}catch(r){throw Nd("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Nd(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new Xi($i.INVALID_ARGUMENT,o+e+l)}function Td(e,t){return e.some((e=>e.isEqual(t)))}class Id{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Pd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ad("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Pd extends Id{data(){return super.data()}}function Ad(e,t){return"string"==typeof t?Cd(e,t):t instanceof sd?t._internalPath:t._delegate._internalPath}function Md(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Xi($i.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dd{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ia(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $s(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Gi()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Fs(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>$s(e.doubleValue)));return new ld(i)}convertGeoPoint(e){return new od($s(e.latitude),$s(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Zs(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ea(e));default:return null}}convertTimestamp(e){const t=Qs(e);return new hs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ps.fromString(e);Yi(sc(n));const r=new na(n.get(1),n.get(3)),i=new ys(n.popFirst(5));return r.isEqual(t)||Wi("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Rd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Od{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jd extends Id{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ad("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ld extends jd{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Fd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Od(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Ld(this._firestore,this._userDataWriter,n.key,n,new Od(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xi($i.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Ld(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Od(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Ld(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Od(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Vd(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Vd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gi()}}function zd(e){e=Wh(e,Qh);const t=Wh(e.firestore,td);return Lh(nd(t),e._key).then((n=>Yd(t,e,n)))}class Ud extends Dd{constructor(e){super(),this.firestore=e}convertBytes(e){return new id(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qh(this.firestore,null,t)}}function Bd(e,t,n){e=Wh(e,Qh);const r=Wh(e.firestore,td),i=Rd(e.converter,t,n);return Gd(r,[md(gd(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ho.none())])}function Hd(e,t,n){e=Wh(e,Qh);const r=Wh(e.firestore,td),i=gd(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=I(t))||t instanceof sd?bd(i,"updateDoc",e._key,t,n,o):vd(i,"updateDoc",e._key,t),Gd(r,[s.toMutation(e._key,Ho.exists(!0))])}function Wd(e){return Gd(Wh(e.firestore,td),[new nl(e._key,Ho.none())])}function qd(e,t){const n=Wh(e.firestore,td),r=Jh(e),i=Rd(e.converter,t);return Gd(n,[md(gd(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ho.exists(!1))]).then((()=>r))}function Kd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,a;e=I(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||ed(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(ed(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,h,d;if(e instanceof Qh)h=Wh(e.firestore,td),d=Ja(e._key.path),u={next:t=>{n[l]&&n[l](Yd(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Wh(e,Yh);h=Wh(t.firestore,td),d=t._query;const r=new Ud(h);u={next:e=>{n[l]&&n[l](new Fd(h,r,t,e))},error:n[l+1],complete:n[l+2]},Md(e._query)}return function(e,t,n,r){const i=new Ih(r),s=new Xu(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Wu(await jh(e),s))),()=>{i.Za(),e.asyncQueue.enqueueAndForget((async()=>qu(await jh(e),s)))}}(nd(h),d,c,u)}function Gd(e,t){return function(e,t){const n=new Ji;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Ch(e);try{const e=await function(e,t){const n=Qi(e),r=hs.now(),i=t.reduce(((e,t)=>e.add(t.key)),So());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=go(),l=So();return n.cs.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{s=i;const a=[];for(const e of t){const t=Qo(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Jo(e.key,t,wa(t.value.mapValue),Ho.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:vo(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new zs(cs)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await _h(r,e.changes),await ku(r.remoteStore)}catch(e){const t=Lu(e,"Failed to persist write");n.reject(t)}}(await Oh(e),t,n))),n.promise}(nd(e),t)}function Yd(e,t,n){const r=n.docs.get(t._key),i=new Ud(e);return new jd(e,i,t._key,r,new Od(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){zi=e}(Qe),We(new P("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new td(new ns(e.getProvider("auth-internal")),new as(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xi($i.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new na(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Je(Fi,"4.7.3",e),Je(Fi,"4.7.3","esm2017")}();Je("firebase","10.14.1","app");const Qd=function(e,t){const n="string"==typeof e?e:t||"(default)",r=qe("object"==typeof e?e:Xe(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Gh(r,...e)}return r}($e({apiKey:"AIzaSyCK8Rmtti1TrKRCR_sUzhncm4ebk7OoUXs",authDomain:"mruh2-398d6.firebaseapp.com",databaseURL:"https://mruh2-398d6.firebaseio.com",projectId:"mruh2-398d6",storageBucket:"mruh2-398d6.appspot.com",messagingSenderId:"274684476540",appId:"1:274684476540:web:5dc96795cee6e8c81d5df9"})),$d=wi();async function Xd(e){let t,{email:n,password:r,nombre:i,apellido:s,telefono:a,modules:o=["basico"],rol:l="usuario",uid:c=null}=e;return c||(t=await async function(e,t,n){if(Ke(e.app))return Promise.reject(vt(e));const r=Sn(e),i=An(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xn),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ar(e),t})),a=await Jn._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}($d,n,r),c=t.user.uid),await Bd(Jh(Qd,"users",c),{uid:c,email:n,nombre:i,apellido:s,telefono:a,rol:l,modules:o,creado:(new Date).toISOString()}),c}async function Jd(e){const t=await zd(Jh(Qd,"users",e));return t.exists()?t.data():null}var Zd=n(579);const ef=e=>{let{onClose:t}=e;const[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)("");(0,r.useEffect)((()=>{const e=Kd(Xh(Qd,"productTypes"),(e=>{i(e.docs.map((e=>q({id:e.id},e.data()))))}));return()=>e()}),[]);return(0,Zd.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:(0,Zd.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-xs border border-gray-200",children:[(0,Zd.jsx)("h3",{className:"text-lg font-bold mb-2 text-green-700",children:"Gestionar Tipos de Producto"}),(0,Zd.jsxs)("div",{className:"mb-4",children:[(0,Zd.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),className:"border rounded p-1 w-full text-xs mb-2",placeholder:"Nuevo tipo..."}),(0,Zd.jsx)("button",{onClick:async()=>{s.trim()&&(await qd(Xh(Qd,"productTypes"),{name:s.trim()}),a(""))},className:"bg-green-600 text-white px-2 py-1 rounded text-xs w-full",children:"Agregar"})]}),(0,Zd.jsx)("ul",{className:"mb-4 max-h-40 overflow-y-auto divide-y divide-gray-100",children:n.map((e=>(0,Zd.jsx)("li",{className:"flex items-center gap-2 py-1",children:o===e.id?(0,Zd.jsxs)(Zd.Fragment,{children:[(0,Zd.jsx)("input",{value:c,onChange:e=>u(e.target.value),className:"border rounded p-1 text-xs flex-1"}),(0,Zd.jsx)("button",{onClick:()=>(async e=>{c.trim()&&(await Hd(Jh(Qd,"productTypes",e),{name:c.trim()}),l(null),u(""))})(e.id),className:"text-green-700 text-xs font-bold",children:"\u2714"}),(0,Zd.jsx)("button",{onClick:()=>l(null),className:"text-gray-500 text-xs",children:"\u2715"})]}):(0,Zd.jsxs)(Zd.Fragment,{children:[(0,Zd.jsx)("span",{className:"flex-1 text-xs",children:e.name}),(0,Zd.jsx)("button",{onClick:()=>{return t=e.id,n=e.name,l(t),void u(n);var t,n},className:"text-blue-600 text-xs",children:"Editar"}),(0,Zd.jsx)("button",{onClick:()=>(async e=>{window.confirm("\xbfEliminar este tipo?")&&await Wd(Jh(Qd,"productTypes",e))})(e.id),className:"text-red-600 text-xs",children:"Eliminar"})]})},e.id)))}),(0,Zd.jsx)("button",{onClick:t,className:"bg-gray-200 text-gray-700 px-3 py-1 rounded w-full mt-2",children:"Cerrar"})]})})},tf={name:"",type:"",stock:0,basePrice:0,purchasePrice:0,purchaseDate:"",supplier:""},nf=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(tf),[s,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)("cards"),[h,d]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1),[g,m]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=Kd(Xh(Qd,"plants"),(e=>{const n=e.docs.map((e=>q({id:e.id},e.data())));t(n)}));return()=>e()}),[]),(0,r.useEffect)((()=>{const e=Kd(Xh(Qd,"productTypes"),(e=>{m(e.docs.map((e=>q({id:e.id},e.data()))))}));return()=>e()}),[]);const y=e=>{const{name:t,value:n}=e.target;i((e=>q(q({},e),{},{[t]:"stock"===t||"basePrice"===t||"purchasePrice"===t?Number(n):n})))},v=e=>{i({name:e.name,type:e.type,stock:e.stock,basePrice:e.basePrice,purchasePrice:e.purchasePrice,purchaseDate:e.purchaseDate,supplier:e.supplier}),a(e.id),l(!0)},b=async e=>{window.confirm("\xbfEliminar esta planta?")&&await Wd(Jh(Xh(Qd,"plants"),e))},x=e.filter((e=>{var t,n,r;const i=h.trim().toLowerCase();return!i||((null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(i))||(null===(n=e.type)||void 0===n?void 0:n.toLowerCase().includes(i))||String(e.stock).includes(i)||String(e.basePrice).includes(i)||String(e.purchasePrice).includes(i)||(null===(r=e.supplier)||void 0===r?void 0:r.toLowerCase().includes(i))||"")}));return(0,Zd.jsx)("div",{className:"relative min-h-screen bg-gray-50 pb-24",children:(0,Zd.jsxs)("div",{className:"rounded-lg shadow bg-white p-3",children:[(0,Zd.jsx)("div",{className:"mb-4 max-w-md mx-auto",children:(0,Zd.jsx)("input",{type:"text",className:"border rounded p-2 w-full",placeholder:"Buscar por nombre, tipo, proveedor...",value:h,onChange:e=>d(e.target.value)})}),(0,Zd.jsxs)("div",{className:"flex justify-center mb-2 gap-2",children:[(0,Zd.jsx)("button",{className:"px-3 py-1 rounded font-semibold text-sm ".concat("cards"===c?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>u("cards"),children:"Vista de tarjetas"}),(0,Zd.jsx)("button",{className:"px-3 py-1 rounded font-semibold text-sm ".concat("table"===c?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>u("table"),children:"Vista de tabla"}),(0,Zd.jsx)("button",{className:"px-3 py-1 rounded font-semibold text-xs bg-green-100 hover:bg-green-200 text-green-700 border border-green-300",onClick:()=>p(!0),children:"Gestionar tipos"})]}),f&&(0,Zd.jsx)(ef,{onClose:()=>p(!1)}),(0,Zd.jsx)("button",{type:"button",className:"fixed bottom-20 right-4 z-50 bg-green-600 text-white rounded-full shadow-lg p-4 text-3xl md:hidden hover:bg-green-700 transition",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},onClick:()=>l(!0),"aria-label":"Nuevo producto",children:"+"}),o&&(0,Zd.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-30",children:(0,Zd.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!n.name.trim()||!n.type.trim()||n.stock<0||n.basePrice<0||n.purchasePrice<0)return void alert("Todos los campos son obligatorios y deben ser v\xe1lidos.");if(n.basePrice>n.purchasePrice)return void alert("El precio de compra no puede ser mayor al precio de venta.");const r=new Date,o=r.getFullYear(),c=String(r.getMonth()+1).padStart(2,"0"),u=String(r.getDate()).padStart(2,"0"),h="".concat(o,"-").concat(c,"-").concat(u),d={id:s||(Math.max(0,...e.map((e=>Number(e.id)||0)))+1).toString(),name:n.name,type:n.type,stock:n.stock,basePrice:n.basePrice,purchasePrice:n.purchasePrice,purchaseDate:n.purchaseDate||h,supplier:n.supplier||""};try{await Bd(Jh(Xh(Qd,"plants"),d.id),d),i(tf),a(null),l(!1)}catch(f){alert("Error guardando la planta.")}},className:"bg-white p-4 rounded-lg shadow-md",children:[(0,Zd.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Nombre"}),(0,Zd.jsx)("input",{name:"name",value:n.name,onChange:y,className:"border rounded p-2 w-full",placeholder:"Nombre",required:!0}),(0,Zd.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Tipo"}),(0,Zd.jsxs)("select",{name:"type",value:n.type,onChange:y,className:"border rounded p-2 w-full",required:!0,children:[(0,Zd.jsx)("option",{value:"",children:"Tipo..."}),g.map((e=>(0,Zd.jsx)("option",{value:e.name,children:e.name},e.id)))]}),(0,Zd.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Stock"}),(0,Zd.jsx)("input",{name:"stock",type:"number",min:"0",value:n.stock,onChange:y,className:"border rounded p-2 w-full",placeholder:"Stock",required:!0}),(0,Zd.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Precio de Venta"}),(0,Zd.jsx)("input",{name:"purchasePrice",type:"number",min:"0",value:n.purchasePrice,onChange:y,className:"border rounded p-2 w-full",placeholder:"Precio de Venta",required:!0}),(0,Zd.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Precio de Compra"}),(0,Zd.jsx)("input",{name:"basePrice",type:"number",min:"0",value:n.basePrice,onChange:y,className:"border rounded p-2 w-full",placeholder:"Precio de Compra",required:!0}),(0,Zd.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Fecha de Compra"}),(0,Zd.jsx)("input",{name:"purchaseDate",type:"date",value:n.purchaseDate,onChange:y,className:"border rounded p-2 w-full"}),(0,Zd.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Proveedor (opcional)"}),(0,Zd.jsx)("input",{name:"supplier",value:n.supplier,onChange:y,className:"border rounded p-2 w-full",placeholder:"Proveedor (opcional)"}),(0,Zd.jsxs)("div",{className:"fixed left-0 right-0 bottom-0 z-[110] flex gap-2 p-4 bg-white border-t border-gray-300 shadow-lg",style:{height:70},children:[(0,Zd.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-4 py-3 rounded flex-1 text-lg font-semibold shadow",children:s?"Actualizar":"Agregar"}),(0,Zd.jsx)("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-3 rounded flex-1 text-lg font-semibold shadow",onClick:()=>{i(tf),a(null),l(!1)},children:"Cancelar"})]})]})}),"cards"===c?(0,Zd.jsx)("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4",children:x.slice().sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>{const t=Number(e.stock)<=1,n=t?"bg-red-100 border-red-300":"bg-green-50 border-green-200";return(0,Zd.jsxs)("div",{className:"rounded-lg shadow p-3 flex flex-col items-start border ".concat(n," transition-colors duration-300"),children:[(0,Zd.jsx)("div",{className:"font-bold text-base text-green-700 mb-1",children:e.name}),(0,Zd.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:e.type}),(0,Zd.jsxs)("div",{className:"text-sm mb-1 ".concat(t?"text-red-700 font-bold":"text-green-800"),children:["Stock: ",(0,Zd.jsx)("b",{children:e.stock})]}),(0,Zd.jsxs)("div",{className:"text-sm mb-1",children:["Venta: ",(0,Zd.jsxs)("b",{children:["$",e.purchasePrice]})]}),(0,Zd.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,Zd.jsx)("button",{className:"text-blue-600 underline text-xs",onClick:()=>v(e),children:"Editar"}),(0,Zd.jsx)("button",{className:"text-red-600 underline text-xs",onClick:()=>b(e.id),children:"Eliminar"})]})]},e.id)}))}):(0,Zd.jsx)("div",{className:"bg-white rounded-lg shadow p-2",children:(0,Zd.jsxs)("table",{className:"min-w-full text-xs",children:[(0,Zd.jsx)("thead",{children:(0,Zd.jsxs)("tr",{className:"bg-green-100",children:[(0,Zd.jsx)("th",{className:"p-1",children:"Nombre"}),(0,Zd.jsx)("th",{className:"p-1",children:"Tipo"}),(0,Zd.jsx)("th",{className:"p-1",children:"Stock"}),(0,Zd.jsx)("th",{className:"p-1",children:"Venta"}),(0,Zd.jsx)("th",{className:"p-1",children:"Compra"}),(0,Zd.jsx)("th",{className:"p-1",children:"Acciones"})]})}),(0,Zd.jsx)("tbody",{children:x.slice().sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>(0,Zd.jsxs)("tr",{className:"border-t",children:[(0,Zd.jsx)("td",{className:"p-1",children:e.name}),(0,Zd.jsx)("td",{className:"p-1",children:e.type}),(0,Zd.jsx)("td",{className:"p-1",children:e.stock}),(0,Zd.jsxs)("td",{className:"p-1",children:["$",e.purchasePrice]}),(0,Zd.jsxs)("td",{className:"p-1",children:["$",e.basePrice]}),(0,Zd.jsxs)("td",{className:"p-1 flex gap-1",children:[(0,Zd.jsx)("button",{className:"text-blue-600 underline text-xs",onClick:()=>v(e),children:"Editar"}),(0,Zd.jsx)("button",{className:"text-red-600 underline text-xs",onClick:()=>b(e.id),children:"Eliminar"})]})]},e.id)))})]})})]})})},rf=["Plantas de Interior","Plantas de Exterior","Macetas","Otros"],sf=e=>{let{plant:t,onEdit:n,onDelete:i}=e;const[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)(t.type),[f,p]=(0,r.useState)(t.stock),[g,m]=(0,r.useState)(t.purchasePrice),[y,v]=(0,r.useState)(!1);let b="/img/plants/generic_plants.jpg";t.image&&"string"===typeof t.image&&""!==t.image.trim()&&(b=t.image);const x=async(e,r)=>{v(!0),await n(q(q({},t),{},{[e]:r})),setTimeout((()=>{v(!1)}),500)};return(0,Zd.jsx)("div",{className:"bg-[#f7f7fa] rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow border border-gray-300",children:(0,Zd.jsxs)("div",{className:"flex flex-col items-center p-4",children:[(0,Zd.jsx)("img",{src:b,alt:t.name,className:"h-32 w-32 object-cover rounded-lg border border-gray-200 bg-gray-50 mb-2",loading:"lazy"}),(0,Zd.jsx)("h3",{className:"text-xl font-semibold text-gray-800 truncate w-full text-center mb-1",children:t.name}),(0,Zd.jsx)("div",{className:"mb-2 w-full text-center",children:s?(0,Zd.jsx)("select",{className:"border rounded p-1 text-xs w-32 border-gray-300 focus:ring-blue-400",value:h,autoFocus:!0,disabled:y,onChange:e=>d(e.target.value),onBlur:async()=>{a(!1),h!==t.type&&await x("type",h)},onKeyDown:async e=>{"Enter"!==e.key&&"Tab"!==e.key||(a(!1),h!==t.type&&await x("type",h))},children:rf.map((e=>(0,Zd.jsx)("option",{value:e,children:e},e)))}):(0,Zd.jsx)("span",{onClick:()=>a(!0),className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full cursor-pointer",children:h})}),(0,Zd.jsxs)("div",{className:"grid grid-cols-2 gap-2 w-full mb-2",children:[(0,Zd.jsxs)("div",{className:"text-center",children:[(0,Zd.jsx)("p",{className:"text-sm text-gray-500",children:"Precio venta"}),(0,Zd.jsx)("span",{className:"font-medium cursor-pointer text-gray-800",onClick:()=>u(!0),children:c?(0,Zd.jsx)("input",{type:"number",className:"border rounded p-1 text-xs w-20 text-center border-gray-300 focus:ring-blue-400",value:g,min:0,autoFocus:!0,disabled:y,onChange:e=>m(e.target.value),onBlur:async()=>{u(!1),String(g)!==String(t.purchasePrice)&&await x("purchasePrice",Number(g))},onKeyDown:async e=>{"Enter"!==e.key&&"Tab"!==e.key||(u(!1),String(g)!==String(t.purchasePrice)&&await x("purchasePrice",Number(g)))}}):(0,Zd.jsxs)("b",{children:["$",t.purchasePrice]})})]}),(0,Zd.jsxs)("div",{className:"text-center",children:[(0,Zd.jsx)("p",{className:"text-sm text-gray-500",children:"Stock"}),(0,Zd.jsxs)("span",{className:"font-medium cursor-pointer ".concat(Number(t.stock)<=1?"text-red-700":"text-gray-800"),onClick:()=>l(!0),children:[o?(0,Zd.jsx)("input",{type:"number",className:"border rounded p-1 text-xs w-16 text-center border-gray-300 focus:ring-blue-400",value:f,min:0,autoFocus:!0,disabled:y,onChange:e=>p(e.target.value),onBlur:async()=>{l(!1),String(f)!==String(t.stock)&&await x("stock",Number(f))},onKeyDown:async e=>{"Enter"!==e.key&&"Tab"!==e.key||(l(!1),String(f)!==String(t.stock)&&await x("stock",Number(f)))}}):(0,Zd.jsx)("b",{children:t.stock}),(0,Zd.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:"unidades"})]})]})]}),(0,Zd.jsxs)("div",{className:"mt-2 flex space-x-2 w-full justify-center",children:[(0,Zd.jsx)("button",{onClick:()=>n(t),className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100",children:"Editar"}),(0,Zd.jsx)("button",{onClick:()=>i(t.id),className:"px-3 py-1 bg-red-50 text-red-600 rounded-md hover:bg-red-100",children:"Eliminar"})]}),y&&(0,Zd.jsx)("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center text-xs text-gray-500",children:"Guardando..."})]})})};const af=e=>{let{onClose:t}=e;const[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)("");(0,r.useEffect)((()=>{const e=Kd(Xh(Qd,"productTypes"),(e=>{i(e.docs.map((e=>q({id:e.id},e.data()))))}));return()=>e()}),[]);return(0,Zd.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:(0,Zd.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-xs border border-gray-200",children:[(0,Zd.jsx)("h3",{className:"text-lg font-bold mb-2 text-green-700",children:"Gestionar Tipos de Producto"}),(0,Zd.jsxs)("div",{className:"mb-4",children:[(0,Zd.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),className:"border rounded p-1 w-full text-xs mb-2",placeholder:"Nuevo tipo..."}),(0,Zd.jsx)("button",{onClick:async()=>{s.trim()&&(await qd(Xh(Qd,"productTypes"),{name:s.trim()}),a(""))},className:"bg-green-600 text-white px-2 py-1 rounded text-xs w-full",children:"Agregar"})]}),(0,Zd.jsx)("ul",{className:"mb-4 max-h-40 overflow-y-auto divide-y divide-gray-100",children:n.map((e=>(0,Zd.jsx)("li",{className:"flex items-center gap-2 py-1",children:o===e.id?(0,Zd.jsxs)(Zd.Fragment,{children:[(0,Zd.jsx)("input",{value:c,onChange:e=>u(e.target.value),className:"border rounded p-1 text-xs flex-1"}),(0,Zd.jsx)("button",{onClick:()=>(async e=>{c.trim()&&(await Hd(Jh(Qd,"productTypes",e),{name:c.trim()}),l(null),u(""))})(e.id),className:"text-green-700 text-xs font-bold",children:"\u2714"}),(0,Zd.jsx)("button",{onClick:()=>l(null),className:"text-gray-500 text-xs",children:"\u2715"})]}):(0,Zd.jsxs)(Zd.Fragment,{children:[(0,Zd.jsx)("span",{className:"flex-1 text-xs",children:e.name}),(0,Zd.jsx)("button",{onClick:()=>{return t=e.id,n=e.name,l(t),void u(n);var t,n},className:"text-blue-600 text-xs",children:"Editar"}),(0,Zd.jsx)("button",{onClick:()=>(async e=>{window.confirm("\xbfEliminar este tipo?")&&await Wd(Jh(Qd,"productTypes",e))})(e.id),className:"text-red-600 text-xs",children:"Eliminar"})]})},e.id)))}),(0,Zd.jsx)("button",{onClick:t,className:"bg-gray-200 text-gray-700 px-3 py-1 rounded w-full mt-2",children:"Cerrar"})]})})},of={name:"",type:"",stock:0,basePrice:0,purchasePrice:0,purchaseDate:"",supplier:""},lf=()=>{const[e,t]=(0,r.useState)(window.innerWidth<768),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)(of),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)("table"),f=(0,r.useRef)(null),p=(0,r.useRef)(null),g=(0,r.useRef)(null),[m,y]=(0,r.useState)({open:!1,id:null,name:""}),[v,b]=(0,r.useState)(null),[x,w]=(0,r.useState)(null),[_,k]=(0,r.useState)(!1),[S,E]=(0,r.useState)(0),[C,N]=(0,r.useState)(!1),[T,I]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=()=>t(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,r.useEffect)((()=>{k(!0);const e=Kd(Xh(Qd,"plants"),(e=>{const t=e.docs.map((e=>q({id:e.id},e.data())));i(t),k(!1)}));return()=>e()}),[S]),(0,r.useEffect)((()=>{const e=Kd(Xh(Qd,"productTypes"),(e=>{I(e.docs.map((e=>q({id:e.id},e.data()))))}));return()=>e()}),[]);const P=n.filter((e=>{var t,n,r;const i=c.trim().toLowerCase();return!i||((null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(i))||(null===(n=e.type)||void 0===n?void 0:n.toLowerCase().includes(i))||String(e.stock).includes(i)||String(e.basePrice).includes(i)||String(e.purchasePrice).includes(i)||(null===(r=e.supplier)||void 0===r?void 0:r.toLowerCase().includes(i))||"")})),A=e=>{const{name:t,value:n,type:r,files:i}=e.target;if("file"!==r)a((e=>q(q({},e),{},{[t]:"stock"===t||"basePrice"===t||"purchasePrice"===t?Number(n):n})));else{const e=i[0];if(w(e),e){const t=new FileReader;t.onloadend=()=>b(t.result),t.readAsDataURL(e)}else b(null)}},M=e=>{a({name:e.name,type:e.type,stock:e.stock,basePrice:e.basePrice,purchasePrice:e.purchasePrice,purchaseDate:e.purchaseDate,supplier:e.supplier}),l(e.id),setTimeout((()=>{if(g.current&&g.current.scrollIntoView({behavior:"smooth",block:"start"}),p.current&&p.current.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout((()=>{var e;const t=null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect();t&&window.scrollTo({top:window.scrollY+t.top-24,behavior:"smooth"})}),200),f.current){const e=f.current.querySelector("input,select,textarea");e&&e.focus(),f.current.classList.add("ring-2","ring-green-400"),setTimeout((()=>f.current.classList.remove("ring-2","ring-green-400")),1200)}}),100)},D=(e,t)=>{y({open:!0,id:e,name:t})};return e?(0,Zd.jsx)(nf,{}):(0,Zd.jsxs)("div",{className:"w-full max-w-7xl mx-auto p-4",children:[(0,Zd.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Zd.jsx)("h2",{className:"text-2xl font-bold",children:"Inventario de Plantas"})}),(0,Zd.jsxs)("div",{className:"sticky top-2 z-20 bg-white/90 backdrop-blur rounded-xl shadow-md border border-gray-100 px-4 py-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-4",children:[(0,Zd.jsxs)("div",{className:"flex gap-2 order-1 md:order-none",children:[(0,Zd.jsx)("button",{className:"px-3 py-1 rounded font-semibold text-sm ".concat("table"===h?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>d("table"),children:"Tabla"}),(0,Zd.jsx)("button",{className:"px-3 py-1 rounded font-semibold text-sm ".concat("cards"===h?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>d("cards"),children:"Widgets"})]}),(0,Zd.jsx)("div",{className:"flex-1 flex justify-center order-3 md:order-none",children:(0,Zd.jsx)("input",{type:"text",className:"border rounded p-2 w-full max-w-xs text-sm",placeholder:"Buscar por nombre, tipo, proveedor...",value:c,onChange:e=>u(e.target.value)})}),(0,Zd.jsxs)("div",{className:"flex items-center gap-2 order-2 md:order-none min-w-[220px] justify-end",children:[(0,Zd.jsx)("button",{className:"px-3 py-1 rounded text-xs bg-green-100 hover:bg-green-200 text-green-700 border border-green-200",onClick:()=>{if(!n.length)return;const e=["id","name","type","stock","basePrice","purchasePrice","purchaseDate","supplier","image"],t=[e.join(",")].concat(n.map((t=>e.map((e=>{var n;let r=null!==(n=t[e])&&void 0!==n?n:"";return"string"===typeof r&&(r.includes(",")||r.includes('"'))&&(r='"'+r.replace(/"/g,'""')+'"'),r})).join(",")))),r=t.join("\r\n"),i=new Blob([r],{type:"text/csv"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download="plantas_export.csv",a.click(),URL.revokeObjectURL(s)},children:"Exportar CSV"}),(0,Zd.jsxs)("label",{className:"px-3 py-1 rounded text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 border border-gray-200 cursor-pointer mb-0",children:["Importar CSV",(0,Zd.jsx)("input",{type:"file",accept:".csv,text/csv",className:"hidden",onChange:async e=>{const t=e.target.files[0];if(!t)return;const r=await t.text();try{const e=r.split(/\r?\n/).filter(Boolean),t=e[0].split(",").map((e=>e.trim())),i=e.slice(1).map((e=>{const n=[];let r="",i=!1;for(let t=0;t<e.length;t++){const s=e[t];'"'===s?i&&'"'===e[t+1]?(r+='"',t++):i=!i:","!==s||i?r+=s:(n.push(r),r="")}n.push(r);const s={};return t.forEach(((e,t)=>{var r;let i=null!==(r=n[t])&&void 0!==r?r:"";"stock"!==e&&"basePrice"!==e&&"purchasePrice"!==e||(i=Number(i)||0),s[e]=i})),s}));if(!window.confirm("\xbfSobrescribir todas las plantas actuales con las importadas?"))return;for(const r of n)await Wd(Jh(Xh(Qd,"plants"),r.id));for(const n of i)await Bd(Jh(Xh(Qd,"plants"),n.id),n);alert("Importaci\xf3n completada. Recargue la p\xe1gina para ver los cambios.")}catch(i){alert("Error al importar CSV: "+i.message)}}})]})]})]}),(0,Zd.jsxs)("section",{className:"bg-white rounded-xl shadow p-6 border border-gray-100",children:[(0,Zd.jsxs)("h2",{ref:p,className:"text-2xl font-bold mb-2 text-green-700 flex items-center gap-2",children:["Carga - Actualizaci\xf3n de productos",(0,Zd.jsx)("button",{type:"button",className:"ml-2 px-2 py-1 text-xs bg-green-100 hover:bg-green-200 rounded border border-green-300 text-green-700",onClick:()=>N(!0),children:"Gestionar tipos"})]}),C&&(0,Zd.jsx)(af,{onClose:()=>N(!1)}),o&&(0,Zd.jsxs)("div",{className:"mb-2 px-2 py-1 rounded bg-green-50 border border-green-200 text-green-800 text-xs font-semibold flex items-center gap-2",children:[(0,Zd.jsx)("span",{className:"material-icons text-base align-middle",children:"edit"}),"Editando: ",(0,Zd.jsx)("b",{className:"ml-1",children:s.name})]}),(0,Zd.jsxs)("form",{ref:f,onSubmit:async e=>{if(e.preventDefault(),!s.name.trim()||!s.type.trim()||s.stock<0||s.basePrice<0||s.purchasePrice<0)return void alert("Todos los campos son obligatorios y deben ser v\xe1lidos.");if(s.basePrice>s.purchasePrice)return void alert("El precio de compra no puede ser mayor al precio de venta.");const t=new Date,r=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),c=String(t.getDate()).padStart(2,"0"),u="".concat(r,"-").concat(i,"-").concat(c),h={id:o||(Math.max(0,...n.map((e=>Number(e.id)||0)))+1).toString(),name:s.name,type:s.type,stock:s.stock,basePrice:s.basePrice,purchasePrice:s.purchasePrice,purchaseDate:s.purchaseDate||u,supplier:s.supplier||""};try{if(x){const e="plant_".concat(h.id,".jpg"),t="/img/plants/".concat(e);h.image=t,alert("La imagen se asociar\xe1 al producto, pero para que se vea en producci\xf3n debe copiarse manualmente a public/img/plants/ con el nombre sugerido: "+e)}await Bd(Jh(Xh(Qd,"plants"),h.id),h),a(of),l(null),w(null),b(null)}catch(d){alert("Error guardando la planta.")}},className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zd.jsxs)("div",{className:"w-full grid grid-cols-1 md:grid-cols-8 gap-2 items-end",children:[(0,Zd.jsxs)("div",{children:[(0,Zd.jsx)("label",{className:"block text-xs font-medium",children:"Nombre"}),(0,Zd.jsx)("input",{name:"name",value:s.name,onChange:A,className:"border rounded p-1 w-full text-xs",required:!0})]}),(0,Zd.jsxs)("div",{children:[(0,Zd.jsx)("label",{className:"block text-xs font-medium",children:"Tipo"}),(0,Zd.jsxs)("select",{name:"type",value:s.type,onChange:A,className:"border rounded p-1 w-full text-xs",required:!0,children:[(0,Zd.jsx)("option",{value:"",children:"Seleccionar..."}),T.map((e=>(0,Zd.jsx)("option",{value:e.name,children:e.name},e.id)))]})]}),(0,Zd.jsxs)("div",{children:[(0,Zd.jsx)("label",{className:"block text-xs font-medium",children:"Stock"}),(0,Zd.jsx)("input",{name:"stock",type:"number",min:"0",value:s.stock,onChange:A,className:"border rounded p-1 w-full text-xs",required:!0,style:{maxWidth:"80px"}})]}),(0,Zd.jsxs)("div",{children:[(0,Zd.jsx)("label",{className:"block text-xs font-medium",children:"Precio Compra"}),(0,Zd.jsx)("input",{name:"basePrice",type:"number",min:"0",value:s.basePrice,onChange:A,className:"border rounded p-1 w-full text-xs",required:!0,style:{maxWidth:"100px"}})]}),(0,Zd.jsxs)("div",{children:[(0,Zd.jsx)("label",{className:"block text-xs font-medium",children:"Precio Venta"}),(0,Zd.jsx)("input",{name:"purchasePrice",type:"number",min:"0",value:s.purchasePrice,onChange:A,className:"border rounded p-1 w-full text-xs",required:!0,style:{maxWidth:"100px"}})]}),(0,Zd.jsxs)("div",{children:[(0,Zd.jsx)("label",{className:"block text-xs font-medium",children:"Fecha Compra"}),(0,Zd.jsx)("input",{name:"purchaseDate",type:"date",value:s.purchaseDate,onChange:A,className:"border rounded p-1 w-full text-xs",style:{maxWidth:"120px"}})]}),(0,Zd.jsxs)("div",{children:[(0,Zd.jsx)("label",{className:"block text-xs font-medium",children:"Proveedor"}),(0,Zd.jsx)("input",{name:"supplier",value:s.supplier,onChange:A,className:"border rounded p-1 w-full text-xs",placeholder:"(opcional)",style:{maxWidth:"120px"}})]}),(0,Zd.jsxs)("div",{children:[(0,Zd.jsx)("label",{className:"block text-xs font-medium",children:"Imagen"}),(0,Zd.jsxs)("div",{className:"relative",children:[(0,Zd.jsxs)("button",{type:"button",className:"px-2 py-1 rounded text-xs bg-green-600 hover:bg-green-700 text-white border border-green-700 cursor-pointer md:w-auto md:text-xs md:px-2 md:py-1 shadow flex items-center gap-2",style:{maxWidth:"160px",width:"100%"},onClick:()=>document.getElementById("input-img-producto").click(),children:[(0,Zd.jsx)("span",{role:"img","aria-label":"imagen",className:"text-base",children:"\ud83d\uddbc\ufe0f"}),"Buscar imagen"]}),(0,Zd.jsx)("input",{id:"input-img-producto",type:"file",accept:"image/*",className:"hidden",onChange:e=>{const t=e.target.files[0];w(t||null),b(null)}}),x&&(0,Zd.jsx)("span",{className:"block text-green-700 text-[11px] mt-1 font-semibold",children:"Imagen cargada"})]})]})]}),(0,Zd.jsxs)("div",{className:"text-xs text-yellow-700 bg-yellow-50 border border-yellow-200 rounded p-2 mt-2 mb-2",children:[(0,Zd.jsx)("b",{children:"Nota:"})," Para asociar una imagen personalizada al producto, debes copiar manualmente el archivo a ",(0,Zd.jsxs)("code",{children:["/public/img/plants/plant_",o||"[id]",".jpg"]}),".",(0,Zd.jsx)("br",{}),"El nombre del archivo debe coincidir exactamente con el ID del producto. Puedes exportar el CSV para ver todos los IDs actuales.",(0,Zd.jsx)("br",{}),"Si no se sube una imagen, se mostrar\xe1 una imagen gen\xe9rica."]}),(0,Zd.jsxs)("div",{className:"flex gap-2 mt-3 justify-start border-t border-gray-100 pt-3",children:[(0,Zd.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-3 py-1 rounded font-semibold text-xs",children:o?"Actualizar":"Agregar"}),o&&(0,Zd.jsx)("button",{type:"button",className:"bg-gray-200 text-gray-700 px-3 py-1 rounded font-semibold border border-gray-400 hover:bg-gray-300 transition text-xs",onClick:()=>{a(of),l(null),w(null),b(null)},children:"Cancelar"})]})]})]}),(0,Zd.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,Zd.jsx)("section",{children:"table"===h?(0,Zd.jsxs)("table",{className:"min-w-full bg-white border rounded shadow text-sm",children:[(0,Zd.jsx)("thead",{children:(0,Zd.jsxs)("tr",{className:"bg-green-100",children:[(0,Zd.jsx)("th",{className:"p-2",children:"Nombre"}),(0,Zd.jsx)("th",{className:"p-2",children:"Tipo"}),(0,Zd.jsx)("th",{className:"p-2",children:"Stock"}),(0,Zd.jsx)("th",{className:"p-2",children:"Precio de Venta"}),(0,Zd.jsx)("th",{className:"p-2",children:"Precio de Compra"}),(0,Zd.jsx)("th",{className:"p-2",children:"Fecha de Compra"}),(0,Zd.jsx)("th",{className:"p-2",children:"Proveedor"}),(0,Zd.jsx)("th",{className:"p-2",children:"Acciones"})]})}),(0,Zd.jsx)("tbody",{children:P.slice().sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>(0,Zd.jsxs)("tr",{className:"border-t",children:[(0,Zd.jsx)("td",{className:"p-2",children:e.name}),(0,Zd.jsx)("td",{className:"p-2",children:e.type}),(0,Zd.jsx)("td",{className:"p-2",children:e.stock}),(0,Zd.jsxs)("td",{className:"p-2",children:["$",e.purchasePrice]}),(0,Zd.jsxs)("td",{className:"p-2",children:["$",e.basePrice]}),(0,Zd.jsx)("td",{className:"p-2",children:e.purchaseDate||"-"}),(0,Zd.jsx)("td",{className:"p-2",children:e.supplier||"-"}),(0,Zd.jsxs)("td",{className:"p-2 flex gap-2",children:[(0,Zd.jsx)("button",{className:"px-2 py-1 rounded text-xs bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300",onClick:()=>M(e),children:"Editar"}),(0,Zd.jsx)("button",{className:"px-2 py-1 rounded text-xs bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-300",onClick:()=>D(e.id,e.name),children:"Eliminar"})]})]},e.id)))})]}):(0,Zd.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:P.slice().sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>(0,Zd.jsx)(sf,{plant:e,onEdit:M,onDelete:()=>D(e.id,e.name)},e.id)))})}),m.open&&(0,Zd.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:(0,Zd.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-xs w-full border border-gray-200",children:[(0,Zd.jsxs)("h3",{className:"text-lg font-bold mb-2 text-red-700 flex items-center gap-2",children:[(0,Zd.jsx)("span",{className:"material-icons text-2xl",children:"warning"})," Confirmar eliminaci\xf3n"]}),(0,Zd.jsxs)("p",{className:"mb-4 text-gray-700 text-sm",children:["\xbfSeguro que deseas eliminar el producto ",(0,Zd.jsx)("b",{children:m.name}),"? Esta acci\xf3n no se puede deshacer."]}),(0,Zd.jsxs)("div",{className:"flex gap-2 justify-end mt-4",children:[(0,Zd.jsx)("button",{className:"px-3 py-1 rounded border border-gray-300 bg-gray-100 text-gray-700 hover:bg-gray-200",onClick:()=>{y({open:!1,id:null,name:""})},children:"Cancelar"}),(0,Zd.jsx)("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:async()=>{await Wd(Jh(Xh(Qd,"plants"),m.id)),y({open:!1,id:null,name:""})},children:"Eliminar"})]})]})}),(0,Zd.jsx)("button",{type:"button",className:"fixed bottom-20 right-4 z-50 bg-green-600 text-white rounded-full shadow-lg p-4 text-3xl md:hidden hover:bg-green-700 transition",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},onClick:()=>{const e=document.getElementById("form-alta-producto");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},"aria-label":"Nuevo producto",children:"+"})]})},cf=e=>{let{plants:t=[],value:n,onChange:i,label:s="Producto",required:a=!1,disabled:o=!1,classNameInput:l="",classNameSelect:c=""}=e;const[u,h]=(0,r.useState)(""),[d,f]=(0,r.useState)(t),[p,g]=(0,r.useState)(!1),m=(0,r.useRef)(),y=(0,r.useRef)();(0,r.useEffect)((()=>{const e=t.find((e=>String(e.id)===String(n)));h(e?e.name:"")}),[n,t]),(0,r.useEffect)((()=>{f(""===u?t:t.filter((e=>e.name.toLowerCase().includes(u.toLowerCase()))))}),[u,t]),(0,r.useEffect)((()=>{function e(e){m.current&&!m.current.contains(e.target)&&g(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const[v,b]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=()=>b(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,Zd.jsxs)("div",{ref:m,className:"relative",children:[(0,Zd.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:s}),(0,Zd.jsx)("input",{type:"text",value:u,onChange:e=>{h(e.target.value),g(!0)},onFocus:()=>g(!0),onBlur:e=>{setTimeout((()=>g(!1)),100)},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 ".concat(v?"bg-[#f5f6fa] text-gray-800":""," ").concat(l),placeholder:"Buscar producto...",disabled:o,autoComplete:"off",required:a}),p&&u&&d.length>0&&(0,Zd.jsx)("ul",{className:"border border-gray-200 rounded bg-white max-h-40 overflow-y-auto mt-1 absolute z-10 w-full shadow-lg",children:d.slice(0,8).map((e=>(0,Zd.jsxs)("li",{className:"px-3 py-1 hover:bg-blue-100 cursor-pointer text-sm",onMouseDown:()=>(e=>{h(e.name),i(e.id),g(!1),y.current&&y.current.focus()})(e),children:[e.name," (Stock: ",e.stock,")"]},e.id)))}),(0,Zd.jsxs)("select",{ref:y,className:"mt-2 block w-full border border-gray-300 rounded-md shadow-sm p-2 ".concat(v?"bg-[#f5f6fa] text-gray-800":""," ").concat(c),value:n||"",onChange:e=>(e=>{const t=e.target.value;i(t),g(!1)})(e),required:a,disabled:o,children:[(0,Zd.jsx)("option",{value:"",children:"Seleccionar producto"}),d.map((e=>(0,Zd.jsxs)("option",{value:e.id,children:[e.name," (Stock: ",e.stock,")"]},e.id)))]})]})};function uf(e,t){const n=function(e){df[e]||(df[e]=pf?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));return df[e]}(t);return"formatToParts"in n?function(e,t){try{const n=e.formatToParts(t),r=[];for(let e=0;e<n.length;e++){const t=hf[n[e].type];void 0!==t&&(r[t]=parseInt(n[e].value,10))}return r}catch(n){if(n instanceof RangeError)return[NaN];throw n}}(n,e):function(e,t){const n=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}(n,e)}const hf={year:0,month:1,day:2,hour:3,minute:4,second:5};const df={},ff=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),pf="06/25/2014, 00:00:00"===ff||"\u200e06\u200e/\u200e25\u200e/\u200e2014\u200e \u200e00\u200e:\u200e00\u200e:\u200e00"===ff;function gf(e,t,n,r,i,s,a){const o=new Date(0);return o.setUTCFullYear(e,t,n),o.setUTCHours(r,i,s,a),o}const mf=36e5,yf={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function vf(e,t,n){if(!e)return 0;let r,i,s=yf.timezoneZ.exec(e);if(s)return 0;if(s=yf.timezoneHH.exec(e),s)return r=parseInt(s[1],10),xf(r)?-r*mf:NaN;if(s=yf.timezoneHHMM.exec(e),s){r=parseInt(s[2],10);const e=parseInt(s[3],10);return xf(r,e)?(i=Math.abs(r)*mf+6e4*e,"+"===s[1]?-i:i):NaN}if(function(e){if(wf[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),wf[e]=!0,!0}catch(t){return!1}}(e)){t=new Date(t||Date.now());const r=n?t:function(e){return gf(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}(t),i=bf(r,e),s=n?i:function(e,t,n){const r=e.getTime();let i=r-t;const s=bf(new Date(i),n);if(t===s)return t;i-=s-t;const a=bf(new Date(i),n);if(s===a)return s;return Math.max(s,a)}(t,i,e);return-s}return NaN}function bf(e,t){const n=uf(e,t),r=gf(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let i=e.getTime();const s=i%1e3;return i-=s>=0?s:1e3+s,r-i}function xf(e,t){return-23<=e&&e<=23&&(null==t||0<=t&&t<=59)}const wf={};function _f(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const kf=36e5,Sf=6e4,Ef={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/};function Cf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);const n=null==t.additionalDigits?2:Number(t.additionalDigits);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"===typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);const r=function(e){const t={};let n,r=Ef.dateTimePattern.exec(e);r?(t.date=r[1],n=r[3]):(r=Ef.datePattern.exec(e),r?(t.date=r[1],n=r[2]):(t.date=null,n=e));if(n){const e=Ef.timeZone.exec(n);e?(t.time=n.replace(e[1],""),t.timeZone=e[1].trim()):t.time=n}return t}(e),{year:i,restDateString:s}=function(e,t){if(e){const n=Ef.YYY[t],r=Ef.YYYYY[t];let i=Ef.YYYY.exec(e)||r.exec(e);if(i){const t=i[1];return{year:parseInt(t,10),restDateString:e.slice(t.length)}}if(i=Ef.YY.exec(e)||n.exec(e),i){const t=i[1];return{year:100*parseInt(t,10),restDateString:e.slice(t.length)}}}return{year:null}}(r.date,n),a=function(e,t){if(null===t)return null;let n,r,i;if(!e||!e.length)return n=new Date(0),n.setUTCFullYear(t),n;let s=Ef.MM.exec(e);if(s)return n=new Date(0),r=parseInt(s[1],10)-1,Af(t,r)?(n.setUTCFullYear(t,r),n):new Date(NaN);if(s=Ef.DDD.exec(e),s){n=new Date(0);const e=parseInt(s[1],10);return function(e,t){if(t<1)return!1;const n=Pf(e);if(n&&t>366)return!1;if(!n&&t>365)return!1;return!0}(t,e)?(n.setUTCFullYear(t,0,e),n):new Date(NaN)}if(s=Ef.MMDD.exec(e),s){n=new Date(0),r=parseInt(s[1],10)-1;const e=parseInt(s[2],10);return Af(t,r,e)?(n.setUTCFullYear(t,r,e),n):new Date(NaN)}if(s=Ef.Www.exec(e),s)return i=parseInt(s[1],10)-1,Mf(i)?Nf(t,i):new Date(NaN);if(s=Ef.WwwD.exec(e),s){i=parseInt(s[1],10)-1;const e=parseInt(s[2],10)-1;return Mf(i,e)?Nf(t,i,e):new Date(NaN)}return null}(s,i);if(null===a||isNaN(a.getTime()))return new Date(NaN);if(a){const e=a.getTime();let n,i=0;if(r.time&&(i=function(e){let t,n,r=Ef.HH.exec(e);if(r)return t=parseFloat(r[1].replace(",",".")),Df(t)?t%24*kf:NaN;if(r=Ef.HHMM.exec(e),r)return t=parseInt(r[1],10),n=parseFloat(r[2].replace(",",".")),Df(t,n)?t%24*kf+n*Sf:NaN;if(r=Ef.HHMMSS.exec(e),r){t=parseInt(r[1],10),n=parseInt(r[2],10);const e=parseFloat(r[3].replace(",","."));return Df(t,n,e)?t%24*kf+n*Sf+1e3*e:NaN}return null}(r.time),null===i||isNaN(i)))return new Date(NaN);if(r.timeZone||t.timeZone){if(n=vf(r.timeZone||t.timeZone,new Date(e+i)),isNaN(n))return new Date(NaN)}else n=_f(new Date(e+i)),n=_f(new Date(e+i+n));return new Date(e+i+n)}return new Date(NaN)}function Nf(e,t,n){t=t||0,n=n||0;const r=new Date(0);r.setUTCFullYear(e,0,4);const i=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}const Tf=[31,28,31,30,31,30,31,31,30,31,30,31],If=[31,29,31,30,31,30,31,31,30,31,30,31];function Pf(e){return e%400===0||e%4===0&&e%100!==0}function Af(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;const r=Pf(e);if(r&&n>If[t])return!1;if(!r&&n>Tf[t])return!1}return!0}function Mf(e,t){return!(e<0||e>52)&&(null==t||!(t<0||t>6))}function Df(e,t,n){return!(e<0||e>=25)&&((null==t||!(t<0||t>=60))&&(null==n||!(n<0||n>=60)))}function Rf(e,t,n){const r=vf(t,e=Cf(e,n),!0),i=new Date(e.getTime()-r),s=new Date(0);return s.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),s.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),s}const Of=[{value:"venta",label:"Venta"},{value:"compra",label:"Compra"},{value:"ingreso",label:"Ingreso"},{value:"egreso",label:"Egreso"},{value:"gasto",label:"Gasto"}],jf=[{value:"efectivo",label:"Efectivo (E)"},{value:"mercadoPago",label:"Mercado Pago (MP)"}],Lf=e=>{let{plants:t,hideForm:n,showOnlyForm:i,renderTotals:s,onMovementAdded:a,selectedMonth:o,selectedYear:l,showOnlySalesOfDay:c}=e;const[u,h]=(0,r.useState)(t||[]),[d,f]=(0,r.useState)([]),[p,g]=(0,r.useState)({type:"venta",detail:"",plantId:"",quantity:1,price:"",total:"",paymentMethod:"efectivo",date:(new Date).toISOString().slice(0,16),location:"",notes:""}),[m,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(""),[x,w]=(0,r.useState)(!1),[_,k]=(0,r.useState)(!1),[S,E]=(0,r.useState)(""),[C,N]=(0,r.useState)(null),[T,I]=(0,r.useState)(!1),[P,A]=(0,r.useState)(null),[M,D]=(0,r.useState)(null),[R,O]=(0,r.useState)(!1),[j,L]=(0,r.useState)(0),F=new Date,V="number"===typeof o?o:F.getMonth(),z="number"===typeof l?l:F.getFullYear(),U=d.filter((e=>{if(!e.date)return!1;const t=new Date(e.date);return!isNaN(t.getTime())&&(t.getMonth()===V&&t.getFullYear()===z)})),[B,H]=(0,r.useState)([]),[W,K]=(0,r.useState)({plantId:"",quantity:1,price:""});(0,r.useEffect)((()=>{const e=Kd(Xh(Qd,"plants"),(e=>{const t=e.docs.map((e=>q({id:e.id},e.data())));h(t)})),t=Kd(Xh(Qd,"movements"),(e=>{const t=e.docs.map((e=>q({id:e.id},e.data())));f(t.sort(((e,t)=>new Date(t.date)-new Date(e.date))))}));return()=>{e(),t()}}),[j]);const G=e=>{const{name:t,value:n}=e.target;g((e=>q(q({},e),{},{[t]:n})))},Y=d.filter((e=>"efectivo"===e.paymentMethod)).reduce(((e,t)=>"venta"===t.type||"ingreso"===t.type?e+(Number(t.total)||0):"compra"===t.type||"egreso"===t.type?e-(Number(t.total)||0):e),0),Q=d.filter((e=>"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>"venta"===t.type||"ingreso"===t.type?e+(Number(t.total)||0):"compra"===t.type||"egreso"===t.type?e-(Number(t.total)||0):e),0),$=e=>{const{name:t,value:n}=e.target;K((e=>q(q({},e),{},{[t]:n})))},X=B.reduce(((e,t)=>e+t.total),0),J=F.getDate(),Z=d.filter((e=>{if(!e.date)return!1;const t=new Date(e.date);return!isNaN(t.getTime())&&(t.getDate()===J&&t.getMonth()===V&&t.getFullYear()===z)}));Z.filter((e=>"venta"===e.type)).reduce(((e,t)=>e+(t.total||0)),0),Z.filter((e=>"compra"===e.type)).reduce(((e,t)=>e+(t.total||0)),0),Z.filter((e=>"egreso"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),Z.filter((e=>"egreso"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),Z.filter((e=>"venta"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),Z.filter((e=>"venta"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),Z.filter((e=>"compra"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),Z.filter((e=>"compra"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),Z.filter((e=>"ingreso"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),Z.filter((e=>"ingreso"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),Z.filter((e=>"venta"===e.type)).reduce(((e,t)=>e+(Number(t.quantity)||0)),0);(0,r.useEffect)((()=>{const e=()=>k(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const ee=_,te=e=>{N(e),I("error"===e.type),"success"===e.type&&(window.innerWidth<768&&window.scrollTo({top:0,behavior:"smooth"}),setTimeout((()=>N(null)),4e3))},ne=e=>{const{name:t,value:n}=e.target;D((e=>q(q({},e),{},{[t]:n})))},re=()=>{A(null),D(null)},ie=async()=>{if(M){O(!0),console.log("DEBUG: handleEditSave called",M,P);try{if(("venta"===M.type||"compra"===M.type)&&(!M.plantId||!M.quantity))return te({type:"error",text:"Producto y cantidad requeridos para ventas/compras."}),void O(!1);const e=q({},M);"venta"!==M.type&&"compra"!==M.type?(delete e.quantity,delete e.price,delete e.plantId):(e.quantity=Number(M.quantity),e.price=Number(M.price),e.plantId=M.plantId),e.total=M.total?Number(M.total):0;const t=Jh(Qd,"movements",P);console.log("DEBUG: updateDoc",t,e),await Hd(t,e),te({type:"success",text:"Movimiento actualizado."}),A(null),D(null)}catch(e){console.error("ERROR en handleEditSave:",e),te({type:"error",text:"Error al actualizar el movimiento."})}O(!1)}},se=e=>{if(!e)return"";const t=new Date(e);if(isNaN(t.getTime()))return"";const n=e=>String(e).padStart(2,"0");return"".concat(t.getFullYear(),"-").concat(n(t.getMonth()+1),"-").concat(n(t.getDate()),"T").concat(n(t.getHours()),":").concat(n(t.getMinutes()))};return(0,r.useEffect)((()=>{if(!W.plantId)return;const e=u.find((e=>String(e.id)===String(W.plantId)));if(!e)return;let t="";"venta"===p.type?t=e.purchasePrice||e.basePrice||"":"compra"===p.type&&(t=e.basePrice||e.purchasePrice||""),W.price||K((e=>q(q({},e),{},{price:t})))}),[W.plantId,p.type,u]),(0,Zd.jsxs)("div",{children:[(0,Zd.jsx)("div",{className:"sticky top-0 z-20 bg-white border border-gray-100 rounded-xl shadow-md px-2 py-1 w-full mx-0 mt-6 ".concat(ee?"block":""),children:!n&&(0,Zd.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),E(""),console.log("[MovementsView] handleSubmit called",{form:p,products:B,productForm:W});let t=p.total,n=p.price,r=B,i=null;if(("venta"===p.type||"compra"===p.type)&&0===B.length){if(!(W.plantId&&W.quantity&&W.price))return E("Agregue al menos un producto."),void console.log("[MovementsView] ERROR: Campos incompletos para agregar producto autom\xe1ticamente",{productForm:W});{const e=u.find((e=>String(e.id)===String(W.plantId)));if("venta"===p.type){if(!e)return E("Producto no encontrado en inventario."),void console.log("[MovementsView] ERROR: Producto no encontrado",{productForm:W,plants:u});const t=e.stock||0;if(t<Number(W.quantity))return E("Stock insuficiente para ".concat(e.name,". Disponible: ").concat(t)),void console.log("[MovementsView] ERROR: Stock insuficiente",{plant:e,productForm:W})}i={plantId:W.plantId,name:(null===e||void 0===e?void 0:e.name)||"",quantity:Number(W.quantity),price:Number(W.price),total:Number(W.quantity)*Number(W.price)},r=[i],K({plantId:"",quantity:1,price:""}),console.log("[MovementsView] Producto agregado autom\xe1ticamente (m\xf3vil, submit directo)",i)}}if("venta"===p.type||"compra"===p.type){if(0===r.length)return void E("Agregue al menos un producto.");t=r.reduce(((e,t)=>e+t.total),0)}if("venta"===p.type||"compra"===p.type?(t||(t=0),n=""):(!t&&p.price&&(t=Number(p.price).toFixed(2)),n=p.price?Number(p.price).toFixed(2):""),("venta"===p.type||"compra"===p.type)&&0===r.length)return void E("Agregue al menos un producto.");if("egreso"===p.type){const e=Number(p.price);if("mercadoPago"===p.paymentMethod&&e>Q)return E("No hay saldo suficiente en Mercado Pago para realizar esta operaci\xf3n."),te({type:"error",text:"No hay saldo suficiente en Mercado Pago para realizar esta operaci\xf3n."}),void I(!0);if("efectivo"===p.paymentMethod&&e>Y)return E("No hay saldo suficiente en Efectivo para realizar esta operaci\xf3n."),te({type:"error",text:"No hay saldo suficiente en Efectivo para realizar esta operaci\xf3n."}),void I(!0)}let s,o=p.date;if("venta"===p.type&&ee){const e=Rf((new Date).toISOString().slice(0,16),"America/Argentina/Buenos_Aires");s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()))}else if(o&&10===o.length){const e=Rf(o+"T00:00","America/Argentina/Buenos_Aires");s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()))}else if(o&&16===o.length){const e=Rf(o,"America/Argentina/Buenos_Aires");s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()))}else{const e=Rf((new Date).toISOString().slice(0,16),"America/Argentina/Buenos_Aires");s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()))}const l=s.toISOString();try{if(console.log("DEBUG: Intentando guardar movimiento",p,B),"venta"===p.type||"compra"===p.type){for(const e of r){if("venta"===p.type){const t=Jh(Qd,"plants",String(e.plantId)),n=await zd(t);if(!n.exists())return void E("Producto no encontrado en inventario.");const r=n.data().stock||0;if(r<e.quantity)return void E("Stock insuficiente para ".concat(e.name,". Disponible: ").concat(r));await Hd(t,{stock:r-e.quantity})}if("compra"===p.type){const t=Jh(Qd,"plants",String(e.plantId)),n=await zd(t);if(!n.exists())return void E("Producto no encontrado en inventario.");const r=n.data().stock||0;await Hd(t,{stock:r+e.quantity})}const t=q(q({},p),{},{plantId:e.plantId,quantity:e.quantity,price:e.price,total:e.total,detail:p.notes||"",date:l});delete t.products,await qd(Xh(Qd,"movements"),t)}te({type:"success",text:("venta"===p.type?"Venta":"Compra")+" registrada correctamente"}),H([]),K({plantId:"",quantity:1,price:""}),a&&a()}else{let e=q(q({},p),{},{total:Number(t),date:l});""===n||void 0===n||isNaN(Number(n))||(e.price=Number(n)),delete e.quantity,delete e.plantId,await qd(Xh(Qd,"movements"),e),te({type:"success",text:"Movimiento registrado correctamente"}),a&&a()}g({type:"venta",detail:"",plantId:"",quantity:1,price:"",total:"",paymentMethod:"efectivo",date:(new Date).toISOString().slice(0,16),location:"",notes:""})}catch(c){E("Error al registrar el movimiento"),te({type:"error",text:"Error al registrar el movimiento"}),I(!0),console.error("ERROR al guardar movimiento:",c)}},className:"w-full ".concat(ee?"flex flex-col gap-3 items-stretch":"flex flex-row flex-wrap gap-1 items-end"," text-xs"),children:[(0,Zd.jsxs)("div",{className:"flex flex-col w-full sm:min-w-[110px] sm:max-w-[130px]",children:[(0,Zd.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Tipo"}),(0,Zd.jsx)("select",{name:"type",value:p.type,onChange:G,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs",children:Of.map((e=>(0,Zd.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),"venta"===p.type||"compra"===p.type?(0,Zd.jsxs)(Zd.Fragment,{children:[(0,Zd.jsxs)("div",{className:"flex flex-col w-full sm:min-w-[120px] sm:max-w-[160px]",children:[(0,Zd.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Producto"}),(0,Zd.jsx)(cf,{plants:u,value:W.plantId,onChange:e=>K((t=>q(q({},t),{},{plantId:e}))),placeholder:"Buscar producto...",label:""}),W.plantId&&(()=>{const e=u.find((e=>String(e.id)===String(W.plantId)));return e?(0,Zd.jsxs)("div",{className:"text-[10px] text-gray-500 mt-1",children:["Stock: ",(0,Zd.jsx)("b",{children:e.stock})," | Precio sugerido: ",(0,Zd.jsxs)("b",{children:["$","venta"===p.type?e.purchasePrice||e.basePrice||"-":e.basePrice||e.purchasePrice||"-"]})]}):null})()]}),(0,Zd.jsxs)("div",{className:"flex flex-col w-full sm:min-w-[60px] sm:max-w-[80px]",children:[(0,Zd.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Cantidad"}),(0,Zd.jsx)("input",{type:"number",name:"quantity",min:"1",value:W.quantity,onChange:$,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs"})]}),(0,Zd.jsxs)("div",{className:"flex flex-col w-full sm:min-w-[70px] sm:max-w-[90px]",children:[(0,Zd.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Precio"}),(0,Zd.jsx)("input",{type:"number",name:"price",min:"0",step:"0.01",value:W.price,onChange:$,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs"})]}),(0,Zd.jsx)("button",{type:"button",onClick:()=>(async e=>{if((null===e||void 0===e?void 0:e.preventDefault)&&e.preventDefault(),!W.plantId||!W.quantity||!W.price)return;if("venta"===p.type){const e=u.find((e=>String(e.id)===String(W.plantId)));if(!e)return void E("Producto no encontrado en inventario.");const t=e.stock||0;if(t<Number(W.quantity))return void E("Stock insuficiente para ".concat(e.name,". Disponible: ").concat(t))}const t=u.find((e=>String(e.id)===String(W.plantId)));H((e=>[...e,{plantId:W.plantId,name:(null===t||void 0===t?void 0:t.name)||"",quantity:Number(W.quantity),price:Number(W.price),total:Number(W.quantity)*Number(W.price)}])),K({plantId:"",quantity:1,price:""}),E("")})(),className:"bg-blue-600 text-white px-2 py-1 rounded text-xs mt-4 w-full sm:w-auto",id:"btn-agregar-producto",children:"Agregar"}),(0,Zd.jsxs)("div",{className:"w-full mt-2",children:[B.length>0&&(0,Zd.jsxs)("table",{className:"w-full text-xs border border-gray-200 mb-2",children:[(0,Zd.jsx)("thead",{children:(0,Zd.jsxs)("tr",{children:[(0,Zd.jsx)("th",{className:"border px-1",children:"Producto"}),(0,Zd.jsx)("th",{className:"border px-1",children:"Cantidad"}),(0,Zd.jsx)("th",{className:"border px-1",children:"Precio"}),(0,Zd.jsx)("th",{className:"border px-1",children:"Subtotal"}),(0,Zd.jsx)("th",{className:"border px-1"})]})}),(0,Zd.jsx)("tbody",{children:B.map(((e,t)=>(0,Zd.jsxs)("tr",{children:[(0,Zd.jsx)("td",{className:"border px-1",children:e.name}),(0,Zd.jsx)("td",{className:"border px-1 text-right",children:e.quantity}),(0,Zd.jsxs)("td",{className:"border px-1 text-right",children:["$",Number(e.price).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,Zd.jsxs)("td",{className:"border px-1 text-right",children:["$",Number(e.total).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,Zd.jsx)("td",{className:"border px-1 text-center",children:(0,Zd.jsx)("button",{type:"button",onClick:()=>(e=>{H((t=>t.filter(((t,n)=>n!==e))))})(t),className:"text-red-600",children:"\u2715"})})]},t)))})]}),B.length>0&&(0,Zd.jsxs)("div",{className:"text-right font-bold text-green-700 pr-2",children:["Total: $",X]})]}),S&&(0,Zd.jsx)("div",{className:"w-full text-xs text-red-600 font-semibold bg-red-100 rounded p-1 mb-2",id:"error-msg-caja",children:S})]}):(0,Zd.jsxs)(Zd.Fragment,{children:[(0,Zd.jsxs)("div",{className:"flex flex-col w-full sm:min-w-[70px] sm:max-w-[90px]",children:[(0,Zd.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Precio"}),(0,Zd.jsx)("input",{type:"number",name:"price",min:"0",step:"0.01",value:p.price,onChange:G,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs"})]}),(0,Zd.jsxs)("div",{className:"flex flex-col w-full",children:[(0,Zd.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Detalle"}),(0,Zd.jsx)("input",{name:"notes",value:p.notes,onChange:G,placeholder:"Detalle del movimiento...",className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs"})]})]}),(0,Zd.jsxs)("div",{className:"flex flex-col w-full sm:min-w-[90px] sm:max-w-[110px]",children:[(0,Zd.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Pago"}),(0,Zd.jsx)("select",{name:"paymentMethod",value:p.paymentMethod,onChange:G,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs",children:jf.map((e=>(0,Zd.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,Zd.jsxs)("div",{className:"flex flex-col w-full sm:min-w-[80px] sm:max-w-[100px]",children:[(0,Zd.jsx)("label",{className:"text-[11px] font-medium text-gray-700",children:"Lugar"}),(0,Zd.jsx)("input",{name:"location",value:p.location,onChange:G,className:"mt-1 w-full border border-gray-300 rounded-md shadow-sm p-1 text-xs"})]}),(0,Zd.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-2 py-2 rounded font-semibold text-base mt-2 w-full sm:w-auto",id:"btn-registrar-venta",children:"venta"===p.type?"Registrar Venta":"Registrar"})]})}),i?null:(0,Zd.jsx)(Zd.Fragment,{children:(0,Zd.jsxs)("div",{className:"mt-6 p-3 bg-white rounded-lg shadow w-full mx-0",children:[(0,Zd.jsx)("h2",{className:"text-base font-bold mb-2",children:"Hist\xf3rico de Movimientos del Mes"}),U.length>0?(0,Zd.jsxs)("table",{className:"w-full border-collapse border border-gray-200 text-xs",children:[(0,Zd.jsx)("thead",{children:(0,Zd.jsxs)("tr",{children:[(0,Zd.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Fecha"}),(0,Zd.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Producto"}),(0,Zd.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Cantidad"}),(0,Zd.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Precio"}),(0,Zd.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Total"}),(0,Zd.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"M\xe9todo de Pago"}),(0,Zd.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Tipo"}),(0,Zd.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Lugar"}),(0,Zd.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Notas"}),(0,Zd.jsx)("th",{className:"border border-gray-200 px-2 py-1",children:"Acciones"})]})}),(0,Zd.jsx)("tbody",{children:U.map((e=>{var t,n,r,i,s,a,o,l;let c="";"ingreso"===e.type&&(c="bg-green-100 text-green-900"),"egreso"===e.type&&(c="bg-black text-white"),"compra"===e.type&&(c="bg-red-600 text-white"),"gasto"===e.type&&(c="bg-orange-500 text-white");const h=P===e.id;return(0,Zd.jsx)("tr",{className:c,children:h?(0,Zd.jsxs)(Zd.Fragment,{children:[(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Zd.jsx)("input",{type:"datetime-local",name:"date",value:se(M.date),onChange:ne,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5"})}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:"venta"===M.type||"compra"===M.type?(0,Zd.jsxs)("select",{name:"plantId",value:M.plantId||"",onChange:ne,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5",children:[(0,Zd.jsx)("option",{value:"",children:"-"}),u.map((e=>(0,Zd.jsx)("option",{value:e.id,children:e.name},e.id)))]}):"-"}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:"venta"===M.type||"compra"===M.type?(0,Zd.jsx)("input",{type:"number",name:"quantity",min:"1",value:null!==(t=M.quantity)&&void 0!==t?t:"",onChange:ne,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5"}):""}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Zd.jsx)("input",{type:"number",name:"price",value:null!==(n=M.price)&&void 0!==n?n:"",onChange:ne,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5"})}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Zd.jsx)("input",{type:"number",name:"total",value:null!==(r=M.total)&&void 0!==r?r:"",onChange:ne,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5"})}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Zd.jsx)("select",{name:"paymentMethod",value:M.paymentMethod||"",onChange:ne,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5",children:jf.map((e=>(0,Zd.jsx)("option",{value:e.value,children:e.label},e.value)))})}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Zd.jsx)("select",{name:"type",value:M.type||"",onChange:ne,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5",children:Of.map((e=>(0,Zd.jsx)("option",{value:e.value,children:e.label},e.value)))})}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Zd.jsx)("input",{name:"location",value:null!==(i=M.location)&&void 0!==i?i:"",onChange:ne,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5"})}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Zd.jsx)("input",{name:"notes",value:null!==(s=M.notes)&&void 0!==s?s:"",onChange:ne,className:"w-full text-xs border border-gray-300 rounded bg-white text-black px-1 py-0.5"})}),(0,Zd.jsxs)("td",{className:"border border-gray-200 px-2 py-1 flex gap-1",children:[(0,Zd.jsx)("button",{type:"button",onClick:ie,className:"bg-green-600 text-white px-2 py-1 rounded text-xs",disabled:R,children:R?"Guardando...":"Guardar"}),(0,Zd.jsx)("button",{type:"button",onClick:re,className:"bg-gray-400 text-white px-2 py-1 rounded text-xs",disabled:R,children:"Cancelar"})]})]}):(0,Zd.jsxs)(Zd.Fragment,{children:[(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:e.date?new Date(e.date).toLocaleString("es-AR",{timeZone:"America/Argentina/Buenos_Aires",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:u&&e.plantId&&((null===(a=u.find((t=>String(t.id)===String(e.plantId))))||void 0===a?void 0:a.name)||e.plantId)||"-"}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1 text-right",children:("venta"===e.type||"compra"===e.type)&&e.products&&Array.isArray(e.products)?e.products.reduce(((e,t)=>e+(Number(t.quantity)||0)),0):"venta"===e.type||"compra"===e.type?e.quantity:""}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1 text-right",children:("venta"===e.type||"compra"===e.type)&&e.products&&Array.isArray(e.products)?"":e.price?"$".concat(e.price):""}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1 text-right",children:e.total?"$".concat(e.total):""}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(null===(o=jf.find((t=>t.value===e.paymentMethod)))||void 0===o?void 0:o.label)||e.paymentMethod}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(null===(l=Of.find((t=>t.value===e.type)))||void 0===l?void 0:l.label)||e.type}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:e.location}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:e.notes}),(0,Zd.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:(0,Zd.jsx)("button",{onClick:()=>(e=>{A(e.id),D(q({},e))})(e),className:"bg-blue-500 text-white px-2 py-1 rounded text-xs",children:"Editar"})})]})},e.id)}))})]}):(0,Zd.jsx)("p",{className:"text-gray-500 text-xs",children:"No hay movimientos registrados este mes."})]})}),(0,Zd.jsx)("div",{style:{display:"none"},children:(0,r.useEffect)((()=>{console.log("PLANTS:",u),console.log("MOVEMENTS:",d)}),[u,d])})]})},Ff=e=>{const[t,n]=(0,r.useState)([]),i=new Date,[s,a]=(0,r.useState)(i),[o,l]=(0,r.useState)(i.getMonth()),[c,u]=(0,r.useState)(i.getFullYear()),[h,d]=(0,r.useState)([]),[f,p]=(0,r.useState)(0);(0,r.useEffect)((()=>{a(new Date);const e=Kd(Xh(Qd,"movements"),(e=>{const t=e.docs.map((e=>q({id:e.id},e.data())));d(t);const r=new Date,i=r.getDate(),s=r.getMonth(),a=r.getFullYear(),o=t.filter((e=>{if(!e.date)return!1;const t=new Date(e.date);return!isNaN(t.getTime())&&(("compra"===e.type||"egreso"===e.type)&&t.getDate()===i&&t.getMonth()===s&&t.getFullYear()===a)}));n(o)}));return()=>e()}),[f]);const g=h.filter((e=>{if(!e.date)return!1;const t=new Date(e.date);return!isNaN(t.getTime())&&(t.getMonth()===o&&t.getFullYear()===c)})),m=o===s.getMonth()&&c===s.getFullYear(),y=s.getDate(),v=m?g.filter((e=>new Date(e.date).getDate()===y)):[],b=e=>{const t=e.filter((e=>"venta"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),n=e.filter((e=>"venta"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),r=e.filter((e=>"compra"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),i=e.filter((e=>"compra"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),s=e.filter((e=>"ingreso"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),a=e.filter((e=>"ingreso"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),o=e.filter((e=>"egreso"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),l=e.filter((e=>"egreso"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),c=s+t-r-o,u=a+n-i-l,h=c+u,d=e.filter((e=>"venta"===e.type)).reduce(((e,t)=>e+(Number(t.quantity)||0)),0);return{cajaFisica:c,cajaMP:u,totalGeneral:h,cantidadProductosVendidos:d,ventasEfectivo:t,ventasMP:n,comprasEfectivo:r,comprasMP:i,ingresosEfectivo:s,ingresosMP:a,egresosEfectivo:o,egresosMP:l}},x=m&&v.length>0,w=b(x?v:g),_={sucursal:{bg:"bg-blue-50",border:"border-blue-400",text:"text-blue-700"},deposito:{bg:"bg-yellow-50",border:"border-yellow-400",text:"text-yellow-700"},online:{bg:"bg-purple-50",border:"border-purple-400",text:"text-purple-700"},"":{bg:"bg-green-50",border:"border-green-400",text:"text-green-700"}};e.lugar||e.location;return(0,Zd.jsx)("div",{className:"relative min-h-screen bg-gray-50 pb-24",children:(0,Zd.jsxs)("div",{className:"rounded-lg shadow bg-white p-3",children:[(0,Zd.jsxs)("div",{className:"w-full max-w-xl mx-auto flex flex-wrap gap-2 sm:gap-4 justify-center mb-2",children:[(0,Zd.jsxs)("div",{className:"flex-1 min-w-[110px] rounded-lg shadow p-2 sm:p-4 flex flex-col items-center border ".concat(x?"bg-green-100 border-green-300":"bg-blue-50 border-blue-200"),children:[(0,Zd.jsx)("span",{className:"text-xs sm:text-sm ".concat(x?"text-green-700":"text-blue-700"),children:x?"Efectivo":"Saldo Efectivo"}),(0,Zd.jsxs)("span",{className:"text-lg sm:text-2xl font-bold ".concat(x?"text-green-700":"text-blue-700"," truncate"),children:["$",w.cajaFisica.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,Zd.jsxs)("div",{className:"flex-1 min-w-[110px] rounded-lg shadow p-2 sm:p-4 flex flex-col items-center border ".concat(x?"bg-blue-100 border-blue-300":"bg-purple-50 border-purple-200"),children:[(0,Zd.jsx)("span",{className:"text-xs sm:text-sm ".concat(x?"text-blue-700":"text-purple-700"),children:x?"Mercado Pago":"Saldo MP"}),(0,Zd.jsxs)("span",{className:"text-lg sm:text-2xl font-bold ".concat(x?"text-blue-700":"text-purple-700"," truncate"),children:["$",w.cajaMP.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,Zd.jsxs)("div",{className:"flex-1 min-w-[110px] rounded-lg shadow p-2 sm:p-4 flex flex-col items-center border ".concat(x?"bg-yellow-100 border-yellow-300":"bg-yellow-50 border-yellow-200"),children:[(0,Zd.jsx)("span",{className:"text-xs sm:text-sm ".concat("text-yellow-700"),children:x?"Total":"Saldo Total"}),(0,Zd.jsxs)("span",{className:"text-lg sm:text-2xl font-bold text-yellow-700 truncate",children:["$",w.totalGeneral.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),(0,Zd.jsx)("div",{className:"text-center text-xs mb-2",children:x?(0,Zd.jsx)("span",{className:"text-green-700 font-semibold",children:"Totales del d\xeda actual"}):(0,Zd.jsx)("span",{className:"text-blue-700 font-semibold",children:"Saldo disponible actualizado"})}),(0,Zd.jsx)("div",{className:"mt-2 w-full max-w-xl mx-auto flex flex-row gap-4 justify-center",children:(0,Zd.jsxs)("div",{className:"flex-1 bg-purple-100 rounded-lg shadow p-4 flex flex-col items-center border border-purple-300",children:[(0,Zd.jsx)("span",{className:"text-gray-500 text-sm",children:x?"Art\xedculos vendidos hoy":"Art\xedculos vendidos en el mes"}),(0,Zd.jsx)("span",{className:"text-2xl font-bold text-purple-700",children:w.cantidadProductosVendidos})]})}),(0,Zd.jsx)(Lf,q(q({},e),{},{showOnlyForm:!0,renderTotals:null,onMovementAdded:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("[CashMovilView] Movimiento registrado. Args:",t,"Fecha:",new Date),p((e=>e+1)),a(new Date)}})),m&&(0,Zd.jsx)("div",{className:"mt-8 w-full max-w-xl mx-auto",children:t.length>0&&(0,Zd.jsxs)("div",{className:"rounded-lg bg-red-50 border border-red-200 shadow-sm p-2 mt-2",children:[(0,Zd.jsx)("div",{className:"text-xs font-semibold text-red-700 mb-2 text-center",children:"Compras y egresos de hoy"}),(0,Zd.jsxs)("ul",{className:"divide-y divide-red-100",children:[(0,Zd.jsxs)("li",{className:"flex flex-row items-center justify-between px-1 py-1 text-xs font-semibold text-red-800 bg-red-100 rounded mb-1",children:[(0,Zd.jsx)("span",{className:"w-14 text-left",children:"Fecha"}),(0,Zd.jsx)("span",{className:"flex-1 px-2 text-left",children:"Detalle"}),(0,Zd.jsx)("span",{className:"w-20 text-center",children:"Precio"}),(0,Zd.jsx)("span",{className:"w-14 text-center",children:"M\xe9todo"}),(0,Zd.jsx)("span",{className:"max-w-[80px] text-left",children:"Lugar"})]}),t.map(((e,t)=>{var n;return(0,Zd.jsxs)("li",{className:"flex flex-row items-center justify-between px-1 py-1 text-xs",children:[(0,Zd.jsx)("span",{className:"text-gray-700 w-14 text-left",children:new Date(e.date).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit"})}),(0,Zd.jsx)("span",{className:"text-gray-600 flex-1 px-2 truncate text-left",children:e.detail||"-"}),(0,Zd.jsxs)("span",{className:"font-semibold text-red-700 w-20 text-center",children:["$",null===(n=e.total)||void 0===n?void 0:n.toLocaleString("es-AR",{minimumFractionDigits:2})]}),(0,Zd.jsx)("span",{className:"text-gray-700 w-14 text-center",children:"efectivo"===e.paymentMethod?"Efectivo":"mercadoPago"===e.paymentMethod?"MP":"-"}),(0,Zd.jsx)("span",{className:"text-gray-500 max-w-[80px] truncate text-left ml-2",children:e.location||"-"})]},e.id||t)}))]})]})})]})})},Vf=e=>{const[t,n]=(0,r.useState)(window.innerWidth<768);return(0,r.useEffect)((()=>{const e=()=>n(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),t?(0,Zd.jsx)(Ff,q({},e)):(0,Zd.jsx)("div",{className:"max-w-full mx-auto px-6 space-y-8",children:(0,Zd.jsx)(Lf,q({},e))})};function zf(e){return e+.5|0}const Uf=(e,t,n)=>Math.max(Math.min(e,n),t);function Bf(e){return Uf(zf(2.55*e),0,255)}function Hf(e){return Uf(zf(255*e),0,255)}function Wf(e){return Uf(zf(e/2.55)/100,0,1)}function qf(e){return Uf(zf(100*e),0,100)}const Kf={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Gf=[..."0123456789ABCDEF"],Yf=e=>Gf[15&e],Qf=e=>Gf[(240&e)>>4]+Gf[15&e],$f=e=>(240&e)>>4===(15&e);function Xf(e){var t=(e=>$f(e.r)&&$f(e.g)&&$f(e.b)&&$f(e.a))(e)?Yf:Qf;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Jf=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Zf(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function ep(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function tp(e,t,n){const r=Zf(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function np(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),s=Math.min(t,n,r),a=(i+s)/2;let o,l,c;return i!==s&&(c=i-s,l=a>.5?c/(2-i-s):c/(i+s),o=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),o=60*o+.5),[0|o,l||0,a]}function rp(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Hf)}function ip(e,t,n){return rp(Zf,e,t,n)}function sp(e){return(e%360+360)%360}function ap(e){const t=Jf.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?Bf(+t[5]):Hf(+t[5]));const i=sp(+t[2]),s=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return rp(tp,e,t,n)}(i,s,a):"hsv"===t[1]?function(e,t,n){return rp(ep,e,t,n)}(i,s,a):ip(i,s,a),{r:n[0],g:n[1],b:n[2],a:r}}const op={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},lp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let cp;function up(e){cp||(cp=function(){const e={},t=Object.keys(lp),n=Object.keys(op);let r,i,s,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],i=0;i<n.length;i++)s=n[i],o=o.replace(s,op[s]);s=parseInt(lp[a],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),cp.transparent=[0,0,0,0]);const t=cp[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const hp=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const dp=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,fp=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function pp(e,t,n){if(e){let r=np(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=ip(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function gp(e,t){return e?Object.assign(t||{},e):e}function mp(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Hf(e[3]))):(t=gp(e,{r:0,g:0,b:0,a:1})).a=Hf(t.a),t}function yp(e){return"r"===e.charAt(0)?function(e){const t=hp.exec(e);let n,r,i,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?Bf(e):Uf(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?Bf(n):Uf(n,0,255)),r=255&(t[4]?Bf(r):Uf(r,0,255)),i=255&(t[6]?Bf(i):Uf(i,0,255)),{r:n,g:r,b:i,a:s}}}(e):ap(e)}class vp{constructor(e){if(e instanceof vp)return e;const t=typeof e;let n;"object"===t?n=mp(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Kf[e[1]],g:255&17*Kf[e[2]],b:255&17*Kf[e[3]],a:5===n?17*Kf[e[4]]:255}:7!==n&&9!==n||(t={r:Kf[e[1]]<<4|Kf[e[2]],g:Kf[e[3]]<<4|Kf[e[4]],b:Kf[e[5]]<<4|Kf[e[6]],a:9===n?Kf[e[7]]<<4|Kf[e[8]]:255})),t}(e)||up(e)||yp(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=gp(this._rgb);return e&&(e.a=Wf(e.a)),e}set rgb(e){this._rgb=mp(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Wf(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?Xf(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=np(e),n=t[0],r=qf(t[1]),i=qf(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(Wf(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const s=t===i?.5:t,a=2*s-1,o=n.a-r.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=fp(Wf(e.r)),i=fp(Wf(e.g)),s=fp(Wf(e.b));return{r:Hf(dp(r+n*(fp(Wf(t.r))-r))),g:Hf(dp(i+n*(fp(Wf(t.g))-i))),b:Hf(dp(s+n*(fp(Wf(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new vp(this.rgb)}alpha(e){return this._rgb.a=Hf(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=zf(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return pp(this._rgb,2,e),this}darken(e){return pp(this._rgb,2,-e),this}saturate(e){return pp(this._rgb,1,e),this}desaturate(e){return pp(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=np(e);n[0]=sp(n[0]+t),n=ip(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function bp(){}const xp=(()=>{let e=0;return()=>e++})();function wp(e){return null===e||void 0===e}function _p(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function kp(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Sp(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Ep(e,t){return Sp(e)?e:t}function Cp(e,t){return"undefined"===typeof e?t:e}const Np=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Tp(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Ip(e,t,n,r){let i,s,a;if(_p(e))if(s=e.length,r)for(i=s-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<s;i++)t.call(n,e[i],i);else if(kp(e))for(a=Object.keys(e),s=a.length,i=0;i<s;i++)t.call(n,e[a[i]],a[i])}function Pp(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Ap(e){if(_p(e))return e.map(Ap);if(kp(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=Ap(e[n[i]]);return t}return e}function Mp(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Dp(e,t,n,r){if(!Mp(e))return;const i=t[e],s=n[e];kp(i)&&kp(s)?Rp(i,s,r):t[e]=Ap(s)}function Rp(e,t,n){const r=_p(t)?t:[t],i=r.length;if(!kp(e))return e;const s=(n=n||{}).merger||Dp;let a;for(let o=0;o<i;++o){if(a=r[o],!kp(a))continue;const t=Object.keys(a);for(let r=0,i=t.length;r<i;++r)s(t[r],e,a,n)}return e}function Op(e,t){return Rp(e,t,{merger:jp})}function jp(e,t,n){if(!Mp(e))return;const r=t[e],i=n[e];kp(r)&&kp(i)?Op(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Ap(i))}const Lp={"":e=>e,x:e=>e.x,y:e=>e.y};function Fp(e,t){const n=Lp[t]||(Lp[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Vp(e){return e.charAt(0).toUpperCase()+e.slice(1)}const zp=e=>"undefined"!==typeof e,Up=e=>"function"===typeof e,Bp=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Hp=Math.PI,Wp=2*Hp,qp=Wp+Hp,Kp=Number.POSITIVE_INFINITY,Gp=Hp/180,Yp=Hp/2,Qp=Hp/4,$p=2*Hp/3,Xp=Math.log10,Jp=Math.sign;function Zp(e,t,n){return Math.abs(e-t)<n}function eg(e){const t=Math.round(e);e=Zp(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Xp(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function tg(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function ng(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function rg(e){return e*(Hp/180)}function ig(e){return e*(180/Hp)}function sg(e){if(!Sp(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function ag(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Hp&&(s+=Wp),{angle:s,distance:i}}function og(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function lg(e,t){return(e-t+qp)%Wp-Hp}function cg(e){return(e%Wp+Wp)%Wp}function ug(e,t,n,r){const i=cg(e),s=cg(t),a=cg(n),o=cg(s-i),l=cg(a-i),c=cg(i-s),u=cg(i-a);return i===s||i===a||r&&s===a||o>l&&c<u}function hg(e,t,n){return Math.max(t,Math.min(n,e))}function dg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function fg(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const pg=(e,t,n,r)=>fg(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),gg=(e,t,n)=>fg(e,n,(r=>e[r][t]>=n));const mg=["push","pop","shift","splice","unshift"];function yg(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(mg.forEach((t=>{delete e[t]})),delete e._chartjs)}function vg(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const bg="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function xg(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];n=s,r||(r=!0,bg.call(window,(()=>{r=!1,e.apply(t,n)})))}}const wg=e=>"start"===e?"left":"end"===e?"right":"center",_g=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function kg(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=a.axis,{min:h,max:d,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(i=Math.min(pg(l,u,h).lo,n?r:pg(t,u,a.getPixelForValue(h)).lo),c){const e=l.slice(0,i+1).reverse().findIndex((e=>!wp(e[o.axis])));i-=Math.max(0,e)}i=hg(i,0,r-1)}if(p){let e=Math.max(pg(l,a.axis,d,!0).hi+1,n?0:pg(t,u,a.getPixelForValue(d),!0).hi+1);if(c){const t=l.slice(e-1).findIndex((e=>!wp(e[o.axis])));e+=Math.max(0,t)}s=hg(e,i,r)-i}else s=r-i}return{start:i,count:s}}function Sg(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Eg=e=>0===e||1===e,Cg=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Wp/n),Ng=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Wp/n)+1,Tg={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Yp),easeOutSine:e=>Math.sin(e*Yp),easeInOutSine:e=>-.5*(Math.cos(Hp*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Eg(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Eg(e)?e:Cg(e,.075,.3),easeOutElastic:e=>Eg(e)?e:Ng(e,.075,.3),easeInOutElastic(e){const t=.1125;return Eg(e)?e:e<.5?.5*Cg(2*e,t,.45):.5+.5*Ng(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Tg.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Tg.easeInBounce(2*e):.5*Tg.easeOutBounce(2*e-1)+.5};function Ig(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Pg(e){return Ig(e)?e:new vp(e)}function Ag(e){return Ig(e)?e:new vp(e).saturate(.5).darken(.1).hexString()}const Mg=["x","y","borderWidth","radius","tension"],Dg=["color","borderColor","backgroundColor"];const Rg=new Map;function Og(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=Rg.get(n);return r||(r=new Intl.NumberFormat(e,t),Rg.set(n,r)),r}(t,n).format(e)}const jg={values:e=>_p(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=Xp(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Og(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(Xp(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?jg.numeric.call(this,e,t,n):""}};var Lg={formatters:jg};const Fg=Object.create(null),Vg=Object.create(null);function zg(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function Ug(e,t,n){return"string"===typeof t?Rp(zg(e,t),n):Rp(zg(e,""),t)}class Bg{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Ag(t.backgroundColor),this.hoverBorderColor=(e,t)=>Ag(t.borderColor),this.hoverColor=(e,t)=>Ag(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Ug(this,e,t)}get(e){return zg(this,e)}describe(e,t){return Ug(Vg,e,t)}override(e,t){return Ug(Fg,e,t)}route(e,t,n,r){const i=zg(this,e),s=zg(this,n),a="_"+t;Object.defineProperties(i,{[a]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[r];return kp(e)?Object.assign({},t,e):Cp(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach((e=>e(this)))}}var Hg=new Bg({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Dg},numbers:{type:"number",properties:Mg}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Lg.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Wg(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function qg(e,t,n,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},s=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,u,h,d;for(l=0;l<o;l++)if(h=n[l],void 0===h||null===h||_p(h)){if(_p(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||_p(d)||(a=Wg(e,i,s,a,d))}else a=Wg(e,i,s,a,h);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return a}function Kg(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function Gg(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Yg(e,t,n,r){Qg(e,t,n,r,null)}function Qg(e,t,n,r,i){let s,a,o,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*Gp;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,r),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,g,0,0,Wp):e.arc(n,r,g,0,Wp),e.closePath();break;case"triangle":u=i?i/2:g,e.moveTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=$p,e.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=$p,e.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,a=Math.cos(m+Qp)*l,h=Math.cos(m+Qp)*(i?i/2-c:l),o=Math.sin(m+Qp)*l,d=Math.sin(m+Qp)*(i?i/2-c:l),e.arc(n-h,r-o,c,m-Hp,m-Yp),e.arc(n+d,r-a,c,m-Yp,m),e.arc(n+h,r+o,c,m,m+Yp),e.arc(n-d,r+a,c,m+Yp,m+Hp),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}m+=Qp;case"rectRot":h=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-o),e.lineTo(n+d,r-a),e.lineTo(n+h,r+o),e.lineTo(n-d,r+a),e.closePath();break;case"crossRot":m+=Qp;case"cross":h=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-o),e.lineTo(n+h,r+o),e.moveTo(n+d,r-a),e.lineTo(n-d,r+a);break;case"star":h=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-o),e.lineTo(n+h,r+o),e.moveTo(n+d,r-a),e.lineTo(n-d,r+a),m+=Qp,h=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-o),e.lineTo(n+h,r+o),e.moveTo(n+d,r-a),e.lineTo(n-d,r+a);break;case"line":a=i?i/2:Math.cos(m)*g,o=Math.sin(m)*g,e.moveTo(n-a,r-o),e.lineTo(n+a,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(m)*(i?i/2:g),r+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function $g(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Xg(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Jg(e){e.restore()}function Zg(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function em(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function tm(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function nm(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function rm(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=_p(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),wp(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&nm(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),wp(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,r,s.maxWidth)),e.fillText(c,n,r,s.maxWidth),tm(e,n,r,c,s),r+=Number(i.lineHeight);e.restore()}function im(e,t){const{x:n,y:r,w:i,h:s,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*Hp,Hp,!0),e.lineTo(n,r+s-a.bottomLeft),e.arc(n+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,Hp,Yp,!0),e.lineTo(n+i-a.bottomRight,r+s),e.arc(n+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,Yp,0,!0),e.lineTo(n+i,r+a.topRight),e.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-Yp,!0),e.lineTo(n+a.topLeft,r)}const sm=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,am=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function om(e,t){const n=(""+e).match(sm);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const lm=e=>+e||0;function cm(e,t){const n={},r=kp(t),i=r?Object.keys(t):t,s=kp(e)?r?n=>Cp(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of i)n[a]=lm(s(a));return n}function um(e){return cm(e,{top:"y",right:"x",bottom:"y",left:"x"})}function hm(e){return cm(e,["topLeft","topRight","bottomLeft","bottomRight"])}function dm(e){const t=um(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function fm(e,t){e=e||{},t=t||Hg.font;let n=Cp(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=Cp(e.style,t.style);r&&!(""+r).match(am)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Cp(e.family,t.family),lineHeight:om(Cp(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:Cp(e.weight,t.weight),string:""};return i.string=function(e){return!e||wp(e.size)||wp(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function pm(e,t,n,r){let i,s,a,o=!0;for(i=0,s=e.length;i<s;++i)if(a=e[i],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&_p(a)&&(a=a[n%a.length],o=!1),void 0!==a))return r&&!o&&(r.cacheable=!1),a}function gm(e,t){return Object.assign(Object.create(e),t)}function mm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Nm("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>mm([r,...e],t,i,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>wm(n,r,(()=>function(e,t,n,r){let i;for(const s of t)if(i=Nm(bm(s,e),n),"undefined"!==typeof i)return xm(e,i)?Em(n,r,e,i):i}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Tm(e).includes(t),ownKeys:e=>Tm(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function ym(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:vm(e,r),setContext:t=>ym(e,t,n,r),override:i=>ym(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>wm(e,t,(()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=e;let o=r[t];Up(o)&&a.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,a||r);o.delete(e),xm(e,l)&&(l=Em(i._scopes,i,e,l));return l}(t,o,e,n));_p(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof s.index&&r(e))return t[s.index%t.length];if(kp(t[0])){const n=t,r=i._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=Em(r,i,e,l);t.push(ym(n,s,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));xm(t,o)&&(o=ym(o,i,s&&s[t],a));return o}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function vm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Up(n)?n:()=>n,isIndexable:Up(r)?r:()=>r}}const bm=(e,t)=>e?e+Vp(t):t,xm=(e,t)=>kp(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function wm(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function _m(e,t,n){return Up(e)?e(t,n):e}const km=(e,t)=>!0===e?t:"string"===typeof e?Fp(t,e):void 0;function Sm(e,t,n,r,i){for(const s of t){const t=km(n,s);if(t){e.add(t);const s=_m(t._fallback,n,i);if("undefined"!==typeof s&&s!==n&&s!==r)return s}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function Em(e,t,n,r){const i=t._rootScopes,s=_m(t._fallback,n,r),a=[...e,...i],o=new Set;o.add(r);let l=Cm(o,a,n,s||n,r);return null!==l&&(("undefined"===typeof s||s===n||(l=Cm(o,a,s,l,r),null!==l))&&mm(Array.from(o),[""],i,s,(()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(_p(i)&&kp(n))return n;return i||{}}(t,n,r))))}function Cm(e,t,n,r,i){for(;n;)n=Sm(e,t,n,r,i);return n}function Nm(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Tm(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function Im(e,t,n,r){const{iScale:i}=e,{key:s="r"}=this._parsing,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],a[o]={r:i.parse(Fp(u,s),c)};return a}const Pm=Number.EPSILON||1e-14,Am=(e,t)=>t<e.length&&!e[t].skip&&e[t],Mm=e=>"x"===e?"y":"x";function Dm(e,t,n,r){const i=e.skip?t:e,s=t,a=n.skip?t:n,o=og(s,i),l=og(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,d=r*u;return{previous:{x:s.x-h*(a.x-i.x),y:s.y-h*(a.y-i.y)},next:{x:s.x+d*(a.x-i.x),y:s.y+d*(a.y-i.y)}}}function Rm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Mm(t),r=e.length,i=Array(r).fill(0),s=Array(r);let a,o,l,c=Am(e,0);for(a=0;a<r;++a)if(o=l,l=c,c=Am(e,a+1),l){if(c){const e=c[t]-l[t];i[a]=0!==e?(c[n]-l[n])/e:0}s[a]=o?c?Jp(i[a-1])!==Jp(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}!function(e,t,n){const r=e.length;let i,s,a,o,l,c=Am(e,0);for(let u=0;u<r-1;++u)l=c,c=Am(e,u+1),l&&c&&(Zp(t[u],0,Pm)?n[u]=n[u+1]=0:(i=n[u]/t[u],s=n[u+1]/t[u],o=Math.pow(i,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[u]=i*a*t[u],n[u+1]=s*a*t[u])))}(e,i,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=Mm(n),i=e.length;let s,a,o,l=Am(e,0);for(let c=0;c<i;++c){if(a=o,o=l,l=Am(e,c+1),!o)continue;const i=o[n],u=o[r];a&&(s=(i-a[n])/3,o["cp1".concat(n)]=i-s,o["cp1".concat(r)]=u-s*t[c]),l&&(s=(l[n]-i)/3,o["cp2".concat(n)]=i+s,o["cp2".concat(r)]=u+s*t[c])}}(e,s,t)}function Om(e,t,n){return Math.max(Math.min(e,n),t)}function jm(e,t,n,r,i){let s,a,o,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)Rm(e,i);else{let n=r?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)o=e[s],l=Dm(n,o,e[Math.min(s+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,i,s,a,o=$g(e[0],t);for(n=0,r=e.length;n<r;++n)a=s,s=o,o=n<r-1&&$g(e[n+1],t),s&&(i=e[n],a&&(i.cp1x=Om(i.cp1x,t.left,t.right),i.cp1y=Om(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=Om(i.cp2x,t.left,t.right),i.cp2y=Om(i.cp2y,t.top,t.bottom)))}(e,n)}function Lm(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Fm(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Vm(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const zm=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Um=["top","right","bottom","left"];function Bm(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=Um[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Hm(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=zm(n),s="border-box"===i.boxSizing,a=Bm(i,"padding"),o=Bm(i,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(i,s,e.target))a=i,o=s;else{const e=t.getBoundingClientRect();a=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),h=a.left+(u&&o.left),d=a.top+(u&&o.top);let{width:f,height:p}=t;return s&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-h)/f*n.width/r),y:Math.round((c-d)/p*n.height/r)}}const Wm=e=>Math.round(10*e)/10;function qm(e,t,n,r){const i=zm(e),s=Bm(i,"margin"),a=Vm(i.maxWidth,e,"clientWidth")||Kp,o=Vm(i.maxHeight,e,"clientHeight")||Kp,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const s=e&&Fm(e);if(s){const e=s.getBoundingClientRect(),a=zm(s),o=Bm(a,"border","width"),l=Bm(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=Vm(a.maxWidth,s,"clientWidth"),i=Vm(a.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||Kp,maxHeight:i||Kp}}(e,t,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const e=Bm(i,"border","width"),t=Bm(i,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=Wm(Math.min(c,a,l.maxWidth)),u=Wm(Math.min(u,o,l.maxHeight)),c&&!u&&(u=Wm(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=Wm(Math.floor(u*r))),{width:c,height:u}}function Km(e,t,n){const r=t||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||a.height!==i||a.width!==s)&&(e.currentDevicePixelRatio=r,a.height=i,a.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0)}const Gm=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Lm()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function Ym(e,t){const n=function(e,t){return zm(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Qm(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function $m(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function Xm(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=Qm(e,i,n),o=Qm(i,s,n),l=Qm(s,t,n),c=Qm(a,o,n),u=Qm(o,l,n);return Qm(c,u,n)}function Jm(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Zm(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function ey(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function ty(e){return"angle"===e?{between:ug,compare:lg,normalize:cg}:{between:dg,compare:(e,t)=>e-t,normalize:e=>e}}function ny(e){let{start:t,end:n,count:r,loop:i,style:s}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:s}}function ry(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,a=t.length,{compare:o,between:l,normalize:c}=ty(r),{start:u,end:h,loop:d,style:f}=function(e,t,n){const{property:r,start:i,end:s}=n,{between:a,normalize:o}=ty(r),l=t.length;let c,u,{start:h,end:d,loop:f}=e;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&a(o(t[h%l][r]),i,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:e.style}}(e,t,n),p=[];let g,m,y,v=!1,b=null;const x=()=>v||l(i,y,g)&&0!==o(i,y),w=()=>!v||0===o(s,g)||l(s,y,g);for(let _=u,k=u;_<=h;++_)m=t[_%a],m.skip||(g=c(m[r]),g!==y&&(v=l(g,i,s),null===b&&x()&&(b=0===o(g,i)?_:k),null!==b&&w()&&(p.push(ny({start:b,end:_,loop:d,count:a,style:f})),b=null),k=_,y=g));return null!==b&&p.push(ny({start:b,end:h,loop:d,count:a,style:f})),p}function iy(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=ry(r[i],e.points,t);s.length&&n.push(...s)}return n}function sy(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),s=ay(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=s,h=t[0].start,d=h;function f(e,t,r,i){const s=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),u=i,h=t%l)}}for(const p of t){h=o?h:p.start;let e,t=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];e=ay(r.setContext(gm(i,{type:"segment",p0:t,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),oy(e,u)&&f(h,d-1,p.loop,u),t=s,u=e}h<d-1&&f(h,d-1,p.loop,u)}return c}(e,t,n,r):t}function ay(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function oy(e,t){if(!t)return!1;const n=[],r=function(e,t){return Ig(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function ly(e,t,n){return e.options.clip?e[n]:t[n]}function cy(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:ly(n,t,"left"),right:ly(n,t,"right"),top:ly(r,t,"top"),bottom:ly(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class uy{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],s=t.duration;i.forEach((r=>r({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=bg.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,a=i.length-1,o=!1;for(;a>=0;--a)s=i[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var hy=new uy;const dy="transparent",fy={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=Pg(e||dy),i=r.valid&&Pg(t||dy);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class py{constructor(e,t,n,r){const i=t[n];r=pm([e.to,r,i,e.from]);const s=pm([e.from,i,r]);this._active=!0,this._fn=e.fn||fy[e.type||typeof s],this._easing=Tg[e.easing]||Tg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=pm([e.to,t,r,e.from]),this._from=pm([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,a=this._to;let o;if(this._active=i!==a&&(s||t<n),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=i:(o=t/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(i,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class gy{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!kp(e))return;const t=Object.keys(Hg.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((r=>{const i=e[r];if(!kp(i))return;const s={};for(const e of t)s[e]=i[e];(_p(i.properties)&&i.properties||[r]).forEach((e=>{e!==r&&n.has(e)||n.set(e,s)}))}))}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=i[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,a);continue}u.cancel()}h&&h.duration?(i[l]=u=new py(h,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(hy.add(this._chart,n),!0):void 0}}function my(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:r?s:i,end:r?i:s}}function yy(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function vy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,s="single"===r.mode;let a,o,l,c;if(null===t)return;let u=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===n){if(u=!0,r.all)continue;break}c=e.values[l],Sp(c)&&(s||0===t||Jp(t)===Jp(c))&&(t+=c)}return u||r.all?t:0}function by(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function xy(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function wy(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function _y(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=r,l=s.axis,c=a.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,a,r),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:s}=e;d=(e._stacks||(e._stacks={}))[c]=xy(i,u,n),d[o]=s,d._top=wy(d,a,!0,r.type),d._bottom=wy(d,a,!1,r.type);(d._visualValues||(d._visualValues={}))[o]=s}}function ky(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function Sy(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const Ey=e=>"reset"===e||"none"===e,Cy=(e,t)=>t?e:Object.assign({},e);class Ny{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=by(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Sy(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=Cp(n.xAxisID,ky(e,"x")),s=t.yAxisID=Cp(n.yAxisID,ky(e,"y")),a=t.rAxisID=Cp(n.rAxisID,ky(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,i,s,a),c=t.vAxisID=r(o,s,i,a);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&yg(this._data,this),e._stacked&&Sy(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(kp(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",s="x"===r.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[i]:u,[s]:e[u]};return o}(t,e)}else if(n!==t){if(n){yg(n,this);const e=this._cachedMeta;Sy(e),e._parsed=[]}t&&Object.isExtensible(t)&&(i=this,(r=t)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),mg.forEach((e=>{const t="_onData"+Vp(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const a=n.apply(this,i);return r._chartjs.listeners.forEach((e=>{"function"===typeof e[t]&&e[t](...i)})),a}})})))),this._syncList=[],this._data=t}var r,i}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=by(t.vScale,t),t.stack!==n.stack&&(r=!0,Sy(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(_y(this,t._parsed),t._stacked=by(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,a=i.axis;let o,l,c,u=0===e&&t===r.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=_p(r[e])?this.parseArrayData(n,r,e,t):kp(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[a]||h&&l[a]<h[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(i()&&(u=!1),h=l);n._sorted=u}s&&_y(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:s}=e,a=i.axis,o=s.axis,l=i.getLabels(),c=i===s,u=new Array(r);let h,d,f;for(h=0,d=r;h<d;++h)f=h+n,u[h]={[a]:c||i.parse(l[f],f),[o]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,r){const{xScale:i,yScale:s}=e,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],a[o]={x:i.parse(u[0],c),y:s.parse(u[1],c)};return a}parseObjectData(e,t,n,r){const{xScale:i,yScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,u,h,d;for(c=0,u=r;c<u;++c)h=c+n,d=t[h],l[c]={x:i.parse(Fp(d,a),h),y:s.parse(Fp(d,o),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,s=t[e.axis];return vy({keys:yy(r,!0),values:t._stacks[e.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let s=null===i?NaN:i;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,s=vy(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,s=r.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:yy(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(a);let h,d;function f(){d=r[h];const t=d[a.axis];return!Sp(d[e.axis])||c>t||u<t}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,e,d,o),!i));++h);if(i)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r][e.axis],Sp(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return kp(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(Cp(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=my(e,n),i=my(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,a,o),c=a;c<a+o;++c){const t=r[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,i))}for(c=0;c<s.length;++c)s[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return gm(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return gm(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,s=e+"-"+t,a=i[s],o=this.enableOptionSharing&&zp(n);if(a)return Cy(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(Hg.elements[e]),f=l.resolveNamedOptions(h,d,(()=>this.getContext(n,r,t)),u);return f.$shared&&(f.$shared=o,i[s]=Object.freeze(Cy(f,o))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,s="animation-".concat(t),a=i[s];if(a)return a;let o;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),s=r.getOptionScopes(this.getDataset(),i);o=r.createResolver(s,this.getContext(e,n,t))}const l=new gy(r,o&&o.animations);return o&&o._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Ey(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:s}}updateElement(e,t,n,r){Ey(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!Ey(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const r=n.length,i=t.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,s=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=s;a--)e[a]=e[a-t]};for(o(i),a=e;a<s;++a)i[a]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&Sy(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Ty(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=vg(r.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let r,i,s,a,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(zp(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(r=0,i=n.length;r<i;++r)s=t.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=t.ticks.length;r<i;++r)s=t.getPixelForTick(r),l();return o}function Iy(e,t,n,r){return _p(e)?function(e,t,n,r){const i=n.parse(e[0],r),s=n.parse(e[1],r),a=Math.min(i,s),o=Math.max(i,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:s,min:a,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function Py(e,t,n,r){const i=e.iScale,s=e.vScale,a=i.getLabels(),o=i===s,l=[];let c,u,h,d;for(c=n,u=n+r;c<u;++c)d=t[c],h={},h[i.axis]=o||i.parse(a[c],c),l.push(Iy(d,h,s,c));return l}function Ay(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function My(e,t,n,r){let i=t.borderSkipped;const s={};if(!i)return void(e.borderSkipped=s);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,r,i,s;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:t,top:i,bottom:s}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[Dy(u,a,o,l)]=!0,i=c)),s[Dy(i,a,o,l)]=!0,e.borderSkipped=s}function Dy(e,t,n,r){var i,s,a;return r?(a=n,e=Ry(e=(i=e)===(s=t)?a:i===a?s:i,n,t)):e=Ry(e,t,n),e}function Ry(e,t,n){return"start"===e?t:"end"===e?n:e}function Oy(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}H(Ny,"defaults",{}),H(Ny,"datasetElementType",null),H(Ny,"dataElementType",null);class jy extends Ny{parsePrimitiveData(e,t,n,r){return Py(e,t,n,r)}parseArrayData(e,t,n,r){return Py(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===i.axis?a:o,c="x"===s.axis?a:o,u=[];let h,d,f,p;for(h=n,d=n+r;h<d;++h)p=t[h],f={},f[i.axis]=i.parse(Fp(p,l),h),u.push(Iy(Fp(p,c),f,s,h));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),s=i._custom,a=Ay(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,r);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=i||wp(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(t._stacks||{})[a.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||Ay(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,e[d].active?"active":r));const m=g.options||e[d].options;My(g,m,p,s),Oy(g,m,c.ratio),this.updateElement(e[d],d,g,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),i=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find((e=>e[n.axis]===o)),r=t&&t[e.vScale.axis];if(wp(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===i||-1===s.indexOf(c.stack)||void 0===i&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,s;for(i=0,s=t.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const a=e.barThickness;return{min:a||Ty(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,a=i||0,o=this.getParsed(e),l=o._custom,c=Ay(l);let u,h,d=o[t.axis],f=0,p=n?this.applyStack(t,o,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&Jp(d)!==Jp(l.barEnd)&&(f=0),f+=d);const g=wp(i)||c?f:i;let m=t.getPixelForValue(g);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(e,t,n){return 0!==e?Jp(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,a)*s,d===a&&(m-=h/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),f=Math.max(e,i);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(m))}if(m===t.getPixelForValue(a)){const e=Jp(h)*t.getLineWidthForValue(a)/2;m+=e,h-=e}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,s=Cp(r.maxBarThickness,1/0);let a,o;if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,s=i[e];let a=e>0?i[e-1]:null,o=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n):function(e,t,n,r){const i=n.barThickness;let s,a;return wp(i)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[e]-s/2}}(e,t,r,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);a=l.start+l.chunk*c+l.chunk/2,o=Math.min(s,l.chunk*l.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(s,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[t.axis]||n[i].hidden||n[i].draw(this._ctx)}}H(jy,"id","bar"),H(jy,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),H(jy,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Ly extends Ny{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let s=0;s<i.length;s++)i[s]._custom=this.resolveDataElementOptions(s+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=Cp(e[2],this.resolveDataElementOptions(s+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=Cp(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=s.axis,u=a.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!i&&this.getParsed(h),d={},f=d[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=i?a.getBasePixel():a.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=o||this.resolveDataElementOptions(h,t.active?"active":r),i&&(d.options.radius=0)),this.updateElement(t,h,d,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=Cp(n&&n._custom,i),r}}H(Ly,"id","bubble"),H(Ly,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),H(Ly,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Fy extends Ny{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,a=e=>+n[e];if(kp(n[e])){const{key:e="value"}=this._parsing;a=t=>+Fp(n[t],e)}for(i=e,s=e+t;i<s;++i)r._parsed[i]=a(i)}}_getRotation(){return rg(this.options.rotation-90)}_getCircumference(){return rg(this.options.circumference)}_getRotationExtents(){let e=Wp,t=-Wp;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(e,t,n){let r=1,i=1,s=0,a=0;if(t<Wp){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),h=Math.cos(l),d=Math.sin(l),f=(e,t,r)=>ug(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),p=(e,t,r)=>ug(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),g=f(0,c,h),m=f(Yp,u,d),y=p(Hp,c,h),v=p(Hp+Yp,u,d);r=(g-y)/2,i=(m-v)/2,s=-(g+y)/2,a=-(m+v)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}(d,h,o),y=(n.width-s)/f,v=(n.height-s)/p,b=Math.max(Math.min(y,v)/2,0),x=Np(this.options.radius,b),w=(x-Math.max(x*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=m*x,r.total=this.calculateTotal(),this.outerRadius=x-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/Wp)}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=i&&o.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,r);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,i);for(g=t;g<t+n;++g){const t=this._circumference(g,i),n=e[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":r)),m+=t,this.updateElement(n,g,s,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Wp*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Og(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,s,a,o;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),e=s.data,a=s.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)o=a.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(Cp(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}H(Fy,"id","doughnut"),H(Fy,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),H(Fy,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),H(Fy,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class Vy extends Ny{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,s=this.chart._animationsDisabled;let{start:a,count:o}=kg(t,r,s);this._drawStart=a,this._drawCount=o,Sg(t)&&(a=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(r,a,o,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),h=s.axis,d=a.axis,{spanGaps:f,segment:p}=this.options,g=tg(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r,y=t+n,v=e.length;let b=t>0&&this.getParsed(t-1);for(let x=0;x<v;++x){const n=e[x],f=m?n:{};if(x<t||x>=y){f.skip=!0;continue}const v=this.getParsed(x),w=wp(v[d]),_=f[h]=s.getPixelForValue(v[h],x),k=f[d]=i||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,v,o):v[d],x);f.skip=isNaN(_)||isNaN(k)||w,f.stop=x>0&&Math.abs(v[h]-b[h])>g,p&&(f.parsed=v,f.raw=l.data[x]),u&&(f.options=c||this.resolveDataElementOptions(x,n.active?"active":r)),m||this.updateElement(n,x,f,r),b=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}H(Vy,"id","line"),H(Vy,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),H(Vy,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class zy extends Ny{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Og(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return Im.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),s=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*Hp;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,r,f);for(h=t;h<t+n;h++){const t=e[h];let n=d,p=d+this._computeAngle(h,r,f),g=s.getDataVisibility(h)?o.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,i&&(a.animateScale&&(g=0),a.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,t.active?"active":r)};this.updateElement(t,h,m,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?rg(this.resolveDataElementOptions(e,t).angle||n):0}}H(zy,"id","polarArea"),H(zy,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),H(zy,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Uy extends Fy{}H(Uy,"id","pie"),H(Uy,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class By extends Ny{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return Im.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":r),o=i.getPointPositionForValue(a,this.getParsed(a).r),l=s?i.xCenter:o.x,c=s?i.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,u,r)}}}H(By,"id","radar"),H(By,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),H(By,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Hy extends Ny{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:s}=kg(t,n,r);if(this._drawStart=i,this._drawCount=s,Sg(t)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:s}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),h=this.includeOptions(r,u),d=s.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=tg(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||"none"===r;let v=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=y?t:{},p=wp(n[f]),x=c[d]=s.getPixelForValue(n[d],b),w=c[f]=i||p?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],b);c.skip=isNaN(x)||isNaN(w)||p,c.stop=b>0&&Math.abs(n[d]-v[d])>m,g&&(c.parsed=n,c.raw=l.data[b]),h&&(c.options=u||this.resolveDataElementOptions(b,t.active?"active":r)),y||this.updateElement(t,b,c,r),v=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,s)/2}}H(Hy,"id","scatter"),H(Hy,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),H(Hy,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Wy(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class qy{static override(e){Object.assign(qy.prototype,e)}constructor(e){H(this,"options",void 0),this.options=e||{}}init(){}formats(){return Wy()}parse(){return Wy()}format(){return Wy()}add(){return Wy()}diff(){return Wy()}startOf(){return Wy()}endOf(){return Wy()}}var Ky=qy;function Gy(e,t,n,r){const{controller:i,data:s,_sorted:a}=e,o=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&s.length){const a=o._reversePixels?gg:pg;if(!r){const r=a(s,t,n);if(l){const{vScale:t}=i._cachedMeta,{_parsed:n}=e,s=n.slice(0,r.lo+1).reverse().findIndex((e=>!wp(e[t.axis])));r.lo-=Math.max(0,s);const a=n.slice(r.hi).findIndex((e=>!wp(e[t.axis])));r.hi+=Math.max(0,a)}return r}if(i._sharedOptions){const e=s[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=a(s,t,n-r),i=a(s,t,n+r);return{lo:e.lo,hi:i.hi}}}}return{lo:0,hi:s.length-1}}function Yy(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:n}=s[o],{lo:l,hi:c}=Gy(s[o],t,a,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function Qy(e,t,n,r,i){const s=[];if(!i&&!e.isPointInArea(t))return s;return Yy(e,n,t,(function(n,a,o){(i||$g(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&s.push({element:n,datasetIndex:a,index:o})}),!0),s}function $y(e,t,n,r,i,s){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,s=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return Yy(e,n,t,(function(n,c,u){const h=n.inRange(t.x,t.y,i);if(r&&!h)return;const d=n.getCenterPoint(i);if(!(!!s||e.isPointInArea(d))&&!h)return;const f=o(t,d);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})})),a}function Xy(e,t,n,r,i,s){return s||e.isPointInArea(t)?"r"!==n||r?$y(e,t,n,r,i,s):function(e,t,n,r){let i=[];return Yy(e,n,t,(function(e,n,s){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=ag(e,{x:t.x,y:t.y});ug(l,a,o)&&i.push({element:e,datasetIndex:n,index:s})})),i}(e,t,n,i):[]}function Jy(e,t,n,r,i){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return Yy(e,n,t,((e,r,l)=>{e[a]&&e[a](t[n],i)&&(s.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,i))})),r&&!o?[]:s}var Zy={evaluateInteractionItems:Yy,modes:{index(e,t,n,r){const i=Hm(t,e),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?Qy(e,i,s,r,a):Xy(e,i,s,!1,r,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,r){const i=Hm(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?Qy(e,i,s,r,a):Xy(e,i,s,!1,r,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>Qy(e,Hm(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=Hm(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return Xy(e,i,s,n.intersect,r,a)},x:(e,t,n,r)=>Jy(e,Hm(t,e),"x",n.intersect,r),y:(e,t,n,r)=>Jy(e,Hm(t,e),"y",n.intersect,r)}};const ev=["left","top","right","bottom"];function tv(e,t){return e.filter((e=>e.pos===t))}function nv(e,t){return e.filter((e=>-1===ev.indexOf(e.pos)&&e.box.axis===t))}function rv(e,t){return e.sort(((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function iv(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!ev.includes(r))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=e.length;s<a;++s){o=e[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:a&&t.availableWidth,o.height=i):(o.width=r,o.height=c?c*i:a&&t.availableHeight)}return n}function sv(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function av(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ov(e,t,n,r){const{pos:i,box:s}=n,a=e.maxPadding;if(!kp(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[i]+=n.size}s.getPadding&&av(a,s.getPadding());const o=Math.max(0,t.outerWidth-sv(a,e,"left","right")),l=Math.max(0,t.outerHeight-sv(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function lv(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function cv(e,t,n,r){const i=[];let s,a,o,l,c,u;for(s=0,a=e.length,c=0;s<a;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,lv(o.horizontal,t));const{same:a,other:h}=ov(t,n,o,r);c|=a&&i.length,u=u||h,l.fullSize||i.push(o)}return c&&cv(i,t,n,r)||u}function uv(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function hv(e,t,n,r){const i=n.padding;let{x:s,y:a}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,s=l.size||e.height;zp(l.start)&&(a=l.start),e.fullSize?uv(e,i.left,a,n.outerWidth-i.right-i.left,s):uv(e,t.left+l.placed,a,r,s),l.start=a,l.placed+=r,a=e.bottom}else{const r=t.h*c,a=l.size||e.width;zp(l.start)&&(s=l.start),e.fullSize?uv(e,s,i.top,a,n.outerHeight-i.bottom-i.top):uv(e,s,t.top+l.placed,a,r),l.start=s,l.placed+=r,s=e.right}}t.x=s,t.y=a}var dv={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=dm(e.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(n-i.height,0),o=function(e){const t=function(e){const t=[];let n,r,i,s,a,o;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:s,options:{stack:a,stackWeight:o=1}}=i),t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}(e),n=rv(t.filter((e=>e.box.fullSize)),!0),r=rv(tv(t,"left"),!0),i=rv(tv(t,"right")),s=rv(tv(t,"top"),!0),a=rv(tv(t,"bottom")),o=nv(t,"x"),l=nv(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:tv(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;Ip(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),d=Object.assign({},i);av(d,dm(r));const f=Object.assign({maxPadding:d,w:s,h:a,x:i.left,y:i.top},i),p=iv(l.concat(c),h);cv(o.fullSize,f,h,p),cv(l,f,h,p),cv(c,f,h,p)&&cv(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),hv(o.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,hv(o.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Ip(o.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class fv{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class pv extends fv{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const gv="$chartjs",mv={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},yv=e=>null===e||""===e;const vv=!!Gm&&{passive:!0};function bv(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,vv)}function xv(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function wv(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||xv(n.addedNodes,r),t=t&&!xv(n.removedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function _v(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||xv(n.removedNodes,r),t=t&&!xv(n.addedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const kv=new Map;let Sv=0;function Ev(){const e=window.devicePixelRatio;e!==Sv&&(Sv=e,kv.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function Cv(e,t,n){const r=e.canvas,i=r&&Fm(r);if(!i)return;const s=xg(((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()}),window),a=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||s(n,r)}));return a.observe(i),function(e,t){kv.size||window.addEventListener("resize",Ev),kv.set(e,t)}(e,s),a}function Nv(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){kv.delete(e),kv.size||window.removeEventListener("resize",Ev)}(e)}function Tv(e,t,n){const r=e.canvas,i=xg((t=>{null!==e.ctx&&n(function(e,t){const n=mv[e.type]||e.type,{x:r,y:i}=Hm(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,vv)}(r,t,i),i}class Iv extends fv{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[gv]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",yv(i)){const t=Ym(e,"width");void 0!==t&&(e.width=t)}if(yv(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Ym(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[gv])return!1;const n=t[gv].initial;["height","width"].forEach((e=>{const r=n[e];wp(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[gv],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:wv,detach:_v,resize:Cv}[t]||Tv;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:Nv,detach:Nv,resize:Nv}[t]||bv)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return qm(e,t,n,r)}isAttached(e){const t=e&&Fm(e);return!(!t||!t.isConnected)}}class Pv{constructor(){H(this,"x",void 0),H(this,"y",void 0),H(this,"active",!1),H(this,"options",void 0),H(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return tg(this.x)&&tg(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}function Av(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>i)return function(e,t,n,r){let i,s=0,a=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===a&&(t.push(e[i]),s++,a=n[s*r])}(t,c,s,a/i),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const s=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let a=0,o=s.length-1;a<o;a++){const e=s[a];if(e>i)return e}return Math.max(i,1)}(s,t,i);if(a>0){let e,n;const r=a>1?Math.round((l-o)/(a-1)):null;for(Mv(t,c,u,wp(r)?0:o-r,o),e=0,n=a-1;e<n;e++)Mv(t,c,u,s[e],s[e+1]);return Mv(t,c,u,l,wp(r)?t.length:l+r),c}return Mv(t,c,u),c}function Mv(e,t,n,r,i){const s=Cp(r,0),a=Math.min(Cp(i,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),i&&(o=i-r,n=o/Math.floor(o/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}H(Pv,"defaults",{}),H(Pv,"defaultRoutes",void 0);const Dv=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,Rv=(e,t)=>Math.min(t||e,e);function Ov(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function jv(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<s-o||c>a+o)))return c}function Lv(e){return e.drawTicks?e.tickLength:0}function Fv(e,t){if(!e.display)return 0;const n=fm(e.font,t),r=dm(e.padding);return(_p(e.text)?e.text.length:1)*n.lineHeight+r.height}function Vv(e,t,n){let r=wg(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class zv extends Pv{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=Ep(e,Number.POSITIVE_INFINITY),t=Ep(t,Number.NEGATIVE_INFINITY),n=Ep(n,Number.POSITIVE_INFINITY),r=Ep(r,Number.NEGATIVE_INFINITY),{min:Ep(e,n),max:Ep(t,r),minDefined:Sp(e),maxDefined:Sp(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),s||(r=Math.max(r,t.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Ep(n,Ep(r,n)),max:Ep(r,Ep(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Tp(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,s=Np(t,(i-r)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(r,-Math.abs(s)),max:a(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?Ov(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Av(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Tp(this.options.afterUpdate,[this])}beforeSetDimensions(){Tp(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Tp(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Tp(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Tp(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=Tp(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Tp(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Tp(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=Rv(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let s,a,o,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=hg(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(e.offset?.5:1)),a=this.maxHeight-Lv(e.grid)-t.padding-Fv(e.title,this.chart.options.font),o=Math.sqrt(u*u+h*h),l=ig(Math.min(Math.asin(hg((c.highest.height+6)/s,-1,1)),Math.asin(hg(a/o,-1,1))-Math.asin(hg(h/o,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Tp(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Tp(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=Fv(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=Lv(i)+s):(e.height=this.maxHeight,e.width=Lv(i)+s),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:s}=this._getLabelSizes(),o=2*n.padding,l=rg(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*i.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*i.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;o?l?(u=r*e.width,h=n*t.height):(u=n*e.height,h=r*t.width):"start"===i?h=t.width:"end"===i?u=e.width:"inner"!==i&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Tp(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)wp(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Ov(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,s=[],a=[],o=Math.floor(t/Rv(t,n));let l,c,u,h,d,f,p,g,m,y,v,b=0,x=0;for(l=0;l<t;l+=o){if(h=e[l].label,d=this._resolveTickFontOptions(l),r.font=f=d.string,p=i[f]=i[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,wp(h)||_p(h)){if(_p(h))for(c=0,u=h.length;c<u;++c)v=h[c],wp(v)||_p(v)||(m=Wg(r,p.data,p.gc,m,v),y+=g)}else m=Wg(r,p.data,p.gc,m,h),y=g;s.push(m),a.push(y),b=Math.max(m,b),x=Math.max(y,x)}!function(e,t){Ip(e,(e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}}))}(i,t);const w=s.indexOf(b),_=a.indexOf(x),k=e=>({width:s[e]||0,height:a[e]||0});return{first:k(0),last:k(t-1),widest:k(w),highest:k(_),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return hg(this._alignToPixels?Kg(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return gm(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=gm(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=rg(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,a=i?i.widest.width+s:0,o=i?i.highest.height+s:0;return this.isHorizontal()?o*n>a*r?a/n:o/r:o*r<a*n?o/n:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:a}=r,o=i.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=Lv(i),h=[],d=a.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(e){return Kg(n,e,f)};let m,y,v,b,x,w,_,k,S,E,C,N;if("top"===s)m=g(this.bottom),w=this.bottom-u,k=m-p,E=g(e.top)+p,N=e.bottom;else if("bottom"===s)m=g(this.top),E=e.top,N=g(e.bottom)-p,w=m+p,k=this.top+u;else if("left"===s)m=g(this.right),x=this.right-u,_=m-p,S=g(e.left)+p,C=e.right;else if("right"===s)m=g(this.left),S=e.left,C=g(e.right)-p,x=m+p,_=this.left+u;else if("x"===t){if("center"===s)m=g((e.top+e.bottom)/2+.5);else if(kp(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}E=e.top,N=e.bottom,w=m+p,k=w+u}else if("y"===t){if("center"===s)m=g((e.left+e.right)/2);else if(kp(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}x=m-p,_=x-u,S=e.left,C=e.right}const T=Cp(r.ticks.maxTicksLimit,c),I=Math.max(1,Math.ceil(c/T));for(y=0;y<c;y+=I){const e=this.getContext(y),t=i.setContext(e),r=a.setContext(e),s=t.lineWidth,c=t.color,u=r.dash||[],d=r.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;v=jv(this,y,o),void 0!==v&&(b=Kg(n,v,s),l?x=_=S=C=b:w=k=E=N=b,h.push({tx1:x,ty1:w,tx2:_,ty2:k,x1:S,y1:E,x2:C,y2:N,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=i,h=Lv(n.grid),d=h+c,f=u?-c:d,p=-rg(this.labelRotation),g=[];let m,y,v,b,x,w,_,k,S,E,C,N,T="middle";if("top"===r)w=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(h);_=e.textAlign,x=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(h);_=e.textAlign,x=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+d;else if(kp(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+d}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)x=(e.left+e.right)/2-d;else if(kp(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===o?T="top":"end"===o&&(T="bottom"));const I=this._getLabelSizes();for(m=0,y=a.length;m<y;++m){v=a[m],b=v.label;const e=i.setContext(this.getContext(m));k=this.getPixelForTick(m)+i.labelOffset,S=this._resolveTickFontOptions(m),E=S.lineHeight,C=_p(b)?b.length:1;const t=C/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let h,d=_;if(s?(x=k,"inner"===_&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),N="top"===r?"near"===l||0!==p?-C*E+E/2:"center"===l?-I.highest.height/2-t*E+E:-I.highest.height+E/2:"near"===l||0!==p?E/2:"center"===l?I.highest.height/2-t*E:I.highest.height-C*E,u&&(N*=-1),0===p||e.showLabelBackdrop||(x+=E/2*Math.sin(p))):(w=k,N=(1-C)*E/2),e.showLabelBackdrop){const t=dm(e.backdropPadding),n=I.heights[m],r=I.widths[m];let i=N-t.top,s=0-t.left;switch(T){case"middle":i-=n/2;break;case"bottom":i-=n}switch(_){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":m===y-1?s-=r:m>0&&(s-=r/2)}h={left:s,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:b,font:S,textOffset:N,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:d,textBaseline:T,translation:[x,w],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-rg(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=e+i,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,s;const a=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,s=r.length;i<s;++i){const e=r[i];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const a=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=Kg(e,this.left,s)-s/2,c=Kg(e,this.right,a)+a/2,u=h=o):(u=Kg(e,this.top,s)-s/2,h=Kg(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Xg(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;rm(t,i.label,0,i.textOffset,n,e)}n&&Jg(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=fm(n.font),s=dm(n.padding),a=n.align;let o=i.lineHeight/2;"bottom"===t||"center"===t||kp(t)?(o+=s.bottom,_p(n.text)&&(o+=i.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,r){const{top:i,left:s,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=a-i,m=o-s;if(e.isHorizontal()){if(d=_g(r,s,o),kp(n)){const e=Object.keys(n)[0],r=n[e];f=u[e].getPixelForValue(r)+g-t}else f="center"===n?(c.bottom+c.top)/2+g-t:Dv(e,n,t);h=o-s}else{if(kp(n)){const e=Object.keys(n)[0],r=n[e];d=u[e].getPixelForValue(r)-m+t}else d="center"===n?(c.left+c.right)/2-m+t:Dv(e,n,t);f=_g(r,a,i),p="left"===n?-Yp:Yp}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,o,t,a);rm(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:h,textAlign:Vv(a,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=Cp(e.grid&&e.grid.z,-1),r=Cp(e.border&&e.border.z,0);return this._isVisible()&&this.draw===zv.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=t.length;i<s;++i){const s=t[i];s[n]!==this.id||e&&s.type!==e||r.push(s)}return r}_resolveTickFontOptions(e){return fm(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Uv{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=Rp(Object.create(null),[n?Hg.get(n):{},Hg.get(t),e.defaults]);Hg.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");Hg.route(s,i,l,o)}))}(t,e.defaultRoutes);e.descriptors&&Hg.describe(t,e.descriptors)}(e,s,n),this.override&&Hg.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Hg[r]&&(delete Hg[r][n],this.override&&delete Fg[n])}}class Bv{constructor(){this.controllers=new Uv(Ny,"datasets",!0),this.elements=new Uv(Pv,"elements"),this.plugins=new Uv(Object,"plugins"),this.scales=new Uv(zv,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):Ip(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=Vp(e);Tp(n["before"+r],[],n),t[e](n),Tp(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var Hv=new Bv;class Wv{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===Tp(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){wp(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=Cp(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(Hv.plugins.items);for(let s=0;s<r.length;s++)n.push(Hv.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const e=i[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:s}=t;const a=[],o=e.getContext();for(const l of i){const t=l.id,i=qv(n[t],r);null!==i&&a.push({plugin:l,options:Kv(e.config,{plugin:l,local:s[t]},i,o)})}return a}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function qv(e,t){return t||!1!==e?!0===e?{}:e:null}function Kv(e,t,n,r){let{plugin:i,local:s}=t;const a=e.pluginScopeKeys(i),o=e.getOptionScopes(n,a);return s&&i.defaults&&o.push(i.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gv(e,t){const n=Hg.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Yv(e){if("x"===e||"y"===e||"r"===e)return e}function Qv(e){if(Yv(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const s of n){const t=s.axis||("top"===(i=s.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||e.length>1&&Yv(e[0].toLowerCase());if(t)return t}var i;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function $v(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Xv(e,t){const n=Fg[e.type]||{scales:{}},r=t.scales||{},i=Gv(e.type,t),s=Object.create(null);return Object.keys(r).forEach((t=>{const a=r[t];if(!kp(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=Qv(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return $v(e,"x",n[0])||$v(e,"y",n[0])}return{}}(t,e),Hg.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,i),c=n.scales||{};s[t]=Op(Object.create(null),[{axis:o},a,c[o],c[l]])})),e.data.datasets.forEach((n=>{const i=n.type||e.type,a=n.indexAxis||Gv(i,t),o=(Fg[i]||{}).scales||{};Object.keys(o).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),i=n[t+"AxisID"]||t;s[i]=s[i]||Object.create(null),Op(s[i],[{axis:t},r[i],o[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];Op(t,[Hg.scales[t.type],Hg.scale])})),s}function Jv(e){const t=e.options||(e.options={});t.plugins=Cp(t.plugins,{}),t.scales=Xv(e,t)}function Zv(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const eb=new Map,tb=new Set;function nb(e,t){let n=eb.get(e);return n||(n=t(),eb.set(e,n),tb.add(n)),n}const rb=(e,t,n)=>{const r=Fp(t,n);void 0!==r&&e.add(r)};class ib{constructor(e){this._config=function(e){return(e=e||{}).data=Zv(e.data),Jv(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Zv(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Jv(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return nb(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return nb("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return nb("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return nb("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;const o=new Set;t.forEach((t=>{e&&(o.add(e),t.forEach((t=>rb(o,e,t)))),t.forEach((e=>rb(o,r,e))),t.forEach((e=>rb(o,Fg[i]||{},e))),t.forEach((e=>rb(o,Hg,e))),t.forEach((e=>rb(o,Vg,e)))}));const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),tb.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Fg[t]||{},Hg.datasets[t]||{},{type:t},Hg,Vg]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:s,subPrefixes:a}=sb(this._resolverCache,e,r);let o=s;if(function(e,t){const{isScriptable:n,isIndexable:r}=vm(e);for(const i of t){const t=n(i),s=r(i),a=(s||t)&&e[i];if(t&&(Up(a)||ab(a))||s&&_p(a))return!0}return!1}(s,t)){i.$shared=!1;o=ym(s,n=Up(n)?n():n,this.createResolver(e,n,a))}for(const l of t)i[l]=o[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=sb(this._resolverCache,e,n);return kp(t)?ym(i,t,void 0,r):i}}function sb(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:mm(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(i,s)}return s}const ab=e=>kp(e)&&Object.getOwnPropertyNames(e).some((t=>Up(e[t])));const ob=["top","bottom","left","right","chartArea"];function lb(e,t){return"top"===e||"bottom"===e||-1===ob.indexOf(e)&&"x"===t}function cb(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function ub(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Tp(n&&n.onComplete,[e],t)}function hb(e){const t=e.chart,n=t.options.animation;Tp(n&&n.onProgress,[e],t)}function db(e){return Lm()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const fb={},pb=e=>{const t=db(e);return Object.values(fb).filter((e=>e.canvas===t)).pop()};function gb(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const s=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=s)}}}class mb{static register(){Hv.add(...arguments),yb()}static unregister(){Hv.remove(...arguments),yb()}constructor(e,t){const n=this.config=new ib(t),r=db(e),i=pb(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Lm()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?pv:Iv}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=xp(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Wv,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],fb[this.id]=this,a&&o?(hy.listen(this,"complete",ub),hy.listen(this,"progress",hb),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return wp(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Hv}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Km(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Gg(this.canvas,this.ctx),this}stop(){return hy.stop(this),this}resize(e,t){hy.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,i),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Km(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),Tp(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Ip(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let i=[];t&&(i=i.concat(Object.keys(t).map((e=>{const n=t[e],r=Qv(e,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}})))),Ip(i,(t=>{const i=t.options,s=i.id,a=Qv(s,i),o=Cp(i.type,t.dtype);void 0!==i.position&&lb(i.position,a)===lb(t.dposition)||(i.position=t.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(Hv.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)})),Ip(r,((e,t)=>{e||delete n[t]})),Ip(n,(e=>{dv.configure(this,e,e.options),dv.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(cb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||Gv(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=Hv.getController(s),{datasetElementType:r,dataElementType:a}=Hg.datasets[s];Object.assign(t,{dataElementType:Hv.getElement(a),datasetElementType:r&&Hv.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){Ip(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||Ip(i,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(cb("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ip(this.scales,(e=>{dv.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Bp(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){gb(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let i=1;i<t;i++)if(!Bp(r,n(i)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;dv.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Ip(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Up(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(hy.has(this)?this.attached&&!hy.running(this)&&hy.start(this):(this.draw(),ub({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=cy(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&Xg(t,r),e.controller.draw(),r&&Jg(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return $g(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=Zy.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=gm(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),s=i.controller._resolveAnimations(void 0,r);zp(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(i,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),hy.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Gg(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete fb[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Ip(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():s()}unbindEvents(){Ip(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},Ip(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,s,a,o;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){s=e[a];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}));!Pp(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=i(t,e),a=n?e:i(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,s=t,a=this._getActiveElements(e,r,n,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,Tp(i.onHover,[e,a,this],this),o&&Tp(i.onClick,[e,a,this],this));const c=!Pp(a,r);return(c||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function yb(){return Ip(mb.instances,(e=>e._plugins.invalidate()))}function vb(e,t,n,r){const i=cm(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,a=Math.min(s,r*t/2),o=e=>{const t=(n-Math.min(s,e))*r/2;return hg(e,0,Math.min(s,t))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:hg(i.innerStart,0,a),innerEnd:hg(i.innerEnd,0,a)}}function bb(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function xb(e,t,n,r,i,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+r+n-c,0),d=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const e=((u>0?u-r:0)+(h>0?h-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const g=(p-Math.max(.001,p*h-n/Hp)/h)/2,m=l+g+f,y=i-g-f,{outerStart:v,outerEnd:b,innerStart:x,innerEnd:w}=vb(t,d,h,y-m),_=h-v,k=h-b,S=m+v/_,E=y-b/k,C=d+x,N=d+w,T=m+x/C,I=y-w/N;if(e.beginPath(),s){const t=(S+E)/2;if(e.arc(a,o,h,S,t),e.arc(a,o,h,t,E),b>0){const t=bb(k,E,a,o);e.arc(t.x,t.y,b,E,y+Yp)}const n=bb(N,y,a,o);if(e.lineTo(n.x,n.y),w>0){const t=bb(N,I,a,o);e.arc(t.x,t.y,w,y+Yp,I+Math.PI)}const r=(y-w/d+(m+x/d))/2;if(e.arc(a,o,d,y-w/d,r,!0),e.arc(a,o,d,r,m+x/d,!0),x>0){const t=bb(C,T,a,o);e.arc(t.x,t.y,x,T+Math.PI,m-Yp)}const i=bb(_,m,a,o);if(e.lineTo(i.x,i.y),v>0){const t=bb(_,S,a,o);e.arc(t.x,t.y,v,m-Yp,S)}}else{e.moveTo(a,o);const t=Math.cos(S)*h+a,n=Math.sin(S)*h+o;e.lineTo(t,n);const r=Math.cos(E)*h+a,i=Math.sin(E)*h+o;e.lineTo(r,i)}e.closePath()}function wb(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(s){xb(e,t,n,r,p,i);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(p=a+(o%Wp||Wp))}f&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:l}=t;let c=i/o;e.beginPath(),e.arc(s,a,o,r-c,n+c),l>i?(c=i/l,e.arc(s,a,l,n+c,r-c,!0)):e.arc(s,a,i,n+Yp,r-Yp),e.closePath(),e.clip()}(e,t,p),s||(xb(e,t,n,r,p,i),e.stroke())}H(mb,"defaults",Hg),H(mb,"instances",fb),H(mb,"overrides",Fg),H(mb,"registry",Hv),H(mb,"version","4.4.9"),H(mb,"getChart",pb);class _b extends Pv{constructor(e){super(),H(this,"circumference",void 0),H(this,"endAngle",void 0),H(this,"fullCircles",void 0),H(this,"innerRadius",void 0),H(this,"outerRadius",void 0),H(this,"pixelMargin",void 0),H(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=ag(r,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=Cp(u,o-a),f=ug(i,a,o)&&a!==o,p=d>=Wp||f,g=dg(s,l+h,c+h);return p&&g}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+i)/2,u=(s+a+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Wp?Math.floor(n/Wp):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const o=r*(1-Math.sin(Math.min(Hp,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){xb(e,t,n,r,l,i);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=a+(o%Wp||Wp))}xb(e,t,n,r,l,i),e.fill()}(e,this,o,i,s),wb(e,this,o,i,s),e.restore()}}function kb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Cp(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Cp(n.borderDash,t.borderDash)),e.lineDashOffset=Cp(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Cp(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Cp(n.borderWidth,t.borderWidth),e.strokeStyle=Cp(n.borderColor,t.borderColor)}function Sb(e,t,n){e.lineTo(n.x,n.y)}function Eb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:s=r-1}=n,{start:a,end:o}=t,l=Math.max(i,a),c=Math.min(s,o),u=i<a&&s<a||i>o&&s>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function Cb(e,t,n,r){const{points:i,options:s}=t,{count:a,start:o,loop:l,ilen:c}=Eb(i,n,r),u=function(e){return e.stepped?Zg:e.tension||"monotone"===e.cubicInterpolationMode?em:Sb}(s);let h,d,f,{move:p=!0,reverse:g}=r||{};for(h=0;h<=c;++h)d=i[(o+(g?c-h:h))%a],d.skip||(p?(e.moveTo(d.x,d.y),p=!1):u(e,f,d,g,s.stepped),f=d);return l&&(d=i[(o+(g?c:0))%a],u(e,f,d,g,s.stepped)),!!l}function Nb(e,t,n,r){const i=t.points,{count:s,start:a,ilen:o}=Eb(i,n,r),{move:l=!0,reverse:c}=r||{};let u,h,d,f,p,g,m=0,y=0;const v=e=>(a+(c?o-e:e))%s,b=()=>{f!==p&&(e.lineTo(m,p),e.lineTo(m,f),e.lineTo(m,g))};for(l&&(h=i[v(0)],e.moveTo(h.x,h.y)),u=0;u<=o;++u){if(h=i[v(u)],h.skip)continue;const t=h.x,n=h.y,r=0|t;r===d?(n<f?f=n:n>p&&(p=n),m=(y*m+t)/++y):(b(),e.lineTo(t,n),d=r,y=0,f=p=n),g=n}b()}function Tb(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Nb:Cb}H(_b,"id","arc"),H(_b,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),H(_b,"defaultRoutes",{backgroundColor:"backgroundColor"}),H(_b,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const Ib="function"===typeof Path2D;function Pb(e,t,n,r){Ib&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),kb(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:s}=t,a=Tb(t);for(const o of i)kb(e,s,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class Ab extends Pv{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;jm(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:a,end:o}=function(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}(n,i,s,r);return sy(e,!0===r?[{start:a,end:o,loop:s}]:function(e,t,n,r){const i=e.length,s=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:t%i,end:(a-1)%i,loop:r}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&s.push({start:t%i,end:o%i,loop:r}),s}(n,a,o<a?o+i:o,!!e._fullLoop&&0===a&&o===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,s=iy(this,{property:t,start:r,end:r});if(!s.length)return;const a=[],o=function(e){return e.stepped?$m:e.tension||"monotone"===e.cubicInterpolationMode?Xm:Qm}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=i[c],d=i[u];if(h===d){a.push(h);continue}const f=o(h,d,Math.abs((r-h[t])/(d[t]-h[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return Tb(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=Tb(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)s&=i(e,this,a,{start:t,end:t+n-1});return!!s}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),Pb(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Mb(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}H(Ab,"id","line"),H(Ab,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),H(Ab,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),H(Ab,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Db extends Pv{constructor(e){super(),H(this,"parsed",void 0),H(this,"skip",void 0),H(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return Mb(this,e,"x",t)}inYRange(e,t){return Mb(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!$g(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Yg(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Rb(e,t){const{x:n,y:r,base:i,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,h;return e.horizontal?(h=a/2,o=Math.min(n,i),l=Math.max(n,i),c=r-h,u=r+h):(h=s/2,o=n-h,l=n+h,c=Math.min(r,i),u=Math.max(r,i)),{left:o,top:c,right:l,bottom:u}}function Ob(e,t,n,r){return e?0:hg(t,n,r)}function jb(e){const t=Rb(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,s=um(r);return{t:Ob(i.top,s.top,0,n),r:Ob(i.right,s.right,0,t),b:Ob(i.bottom,s.bottom,0,n),l:Ob(i.left,s.left,0,t)}}(e,n/2,r/2),s=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=hm(i),a=Math.min(t,n),o=e.borderSkipped,l=r||kp(i);return{topLeft:Ob(!l||o.top||o.left,s.topLeft,0,a),topRight:Ob(!l||o.top||o.right,s.topRight,0,a),bottomLeft:Ob(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:Ob(!l||o.bottom||o.right,s.bottomRight,0,a)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Lb(e,t,n,r){const i=null===t,s=null===n,a=e&&!(i&&s)&&Rb(e,r);return a&&(i||dg(t,a.left,a.right))&&(s||dg(n,a.top,a.bottom))}function Fb(e,t){e.rect(t.x,t.y,t.w,t.h)}function Vb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+s,h:e.h+a,radius:e.radius}}H(Db,"id","point"),H(Db,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),H(Db,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class zb extends Pv{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=jb(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?im:Fb;var o;e.save(),s.w===i.w&&s.h===i.h||(e.beginPath(),a(e,Vb(s,t,i)),e.clip(),a(e,Vb(i,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,Vb(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return Lb(this,e,t,n)}inXRange(e,t){return Lb(this,e,null,t)}inYRange(e,t){return Lb(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}H(zb,"id","bar"),H(zb,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),H(zb,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Ub=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class Bb extends Pv{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Tp(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=fm(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=Ub(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,i,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,r,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+a;let u=e;i.textAlign="left",i.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((e,f)=>{const p=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+p+2*a>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),o[f]={left:0,top:d,row:h,width:p,height:r},l[l.length-1]+=p+a})),u}_fitCols(e,t,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=a,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:g,itemHeight:m}=function(e,t,n,r,i){const s=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+r.measureText(i).width}(r,e,t,n),a=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=Hb(t,n));return r}(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}(n,t,i,e,r);s>0&&d+m+2*a>c&&(u+=h+a,l.push({width:h,height:d}),f+=h+a,p++,h=d=0),o[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+a})),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,s=Jm(i,this.left,this.width);if(this.isHorizontal()){let i=0,a=_g(n,this.left+r,this.right-this.lineWidths[i]);for(const o of t)i!==o.row&&(i=o.row,a=_g(n,this.left+r,this.right-this.lineWidths[i])),o.top+=this.top+e+r,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+r}else{let i=0,a=_g(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const o of t)o.col!==i&&(i=o.col,a=_g(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),o.top=a,o.left+=this.left+r,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Xg(e,this),this._draw(),Jg(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:s}=e,a=Hg.color,o=Jm(e.rtl,this.left,this.width),l=fm(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Ub(s,u),m=this.isHorizontal(),y=this._computeTitleHeight();d=m?{x:_g(i,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:_g(i,this.top+y+c,this.bottom-t[0].height),line:0},Zm(this.ctx,e.textDirection);const v=g+c;this.legendItems.forEach(((b,x)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const w=r.measureText(b.text).width,_=o.textAlign(b.textAlign||(b.textAlign=s.textAlign)),k=f+h+w;let S=d.x,E=d.y;o.setWidth(this.width),m?x>0&&S+k+c>this.right&&(E=d.y+=v,d.line++,S=d.x=_g(i,this.left+c,this.right-n[d.line])):x>0&&E+v>this.bottom&&(S=d.x=S+t[d.line].width+c,d.line++,E=d.y=_g(i,this.top+y+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=Cp(n.lineWidth,1);if(r.fillStyle=Cp(n.fillStyle,a),r.lineCap=Cp(n.lineCap,"butt"),r.lineDashOffset=Cp(n.lineDashOffset,0),r.lineJoin=Cp(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=Cp(n.strokeStyle,a),r.setLineDash(Cp(n.lineDash,[])),s.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=o.xPlus(e,f/2);Qg(r,a,l,t+h,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),a=o.leftForLtr(e,f),l=hm(n.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?im(r,{x:a,y:s,w:f,h:p,radius:l}):r.rect(a,s,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(o.x(S),E,b),S=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(_,S+f+h,m?S+k:this.right,e.rtl),function(e,t,n){rm(r,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(S),E,b),m)d.x+=k+c;else if("string"!==typeof b.text){const e=l.lineHeight;d.y+=Hb(b,e)+c}else d.y+=v})),ey(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=fm(t.font),r=dm(t.padding);if(!t.display)return;const i=Jm(e.rtl,this.left,this.width),s=this.ctx,a=t.position,o=n.size/2,l=r.top+o;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=_g(e.align,u,this.right-h);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+_g(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=_g(a,u,u+h);s.textAlign=i.textAlign(wg(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,rm(s,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=fm(e.font),n=dm(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(dg(e,this.left,this.right)&&dg(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],dg(e,r.left,r.left+r.width)&&dg(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,i=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!i&&Tp(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&Tp(t.onHover,[e,n,this],this)}else n&&Tp(t.onClick,[e,n,this],this)}}function Hb(e,t){return t*(e.text?e.text.length:0)}var Wb={id:"legend",_element:Bb,start(e,t,n){const r=e.legend=new Bb({ctx:e.ctx,options:n,chart:e});dv.configure(e,r,n),dv.addBox(e,r)},stop(e){dv.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;dv.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=dm(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class qb extends Pv{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=_p(n.text)?n.text.length:1;this._padding=dm(n.padding);const i=r*fm(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:s}=this,a=s.align;let o,l,c,u=0;return this.isHorizontal()?(l=_g(a,n,i),c=t+e,o=i-n):("left"===s.position?(l=n+e,c=_g(a,r,t),u=-.5*Hp):(l=i-e,c=_g(a,t,r),u=.5*Hp),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=fm(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:s,maxWidth:a,rotation:o}=this._drawArgs(r);rm(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:wg(t.align),textBaseline:"middle",translation:[i,s]})}}var Kb={id:"title",_element:qb,start(e,t,n){!function(e,t){const n=new qb({ctx:e.ctx,options:t,chart:e});dv.configure(e,n,t),dv.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;dv.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;dv.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Gb={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++s}}if(0===s||0===r.size)return!1;const a=[...r].reduce(((e,t)=>e+t))/r.size;return{x:a,y:i/s}},nearest(e,t){if(!e.length)return!1;let n,r,i,s=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=og(t,r.getCenterPoint());e<o&&(o=e,i=r)}}if(i){const e=i.tooltipPosition();s=e.x,a=e.y}return{x:s,y:a}}};function Yb(e,t){return t&&(_p(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Qb(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function $b(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:e,label:a,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Xb(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:a,boxHeight:o}=t,l=fm(t.bodyFont),c=fm(t.titleFont),u=fm(t.footerFont),h=s.length,d=i.length,f=r.length,p=dm(t.padding);let g=p.height,m=0,y=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){g+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let v=0;const b=function(e){m=Math.max(m,n.measureText(e).width+v)};return n.save(),n.font=c.string,Ip(e.title,b),n.font=l.string,Ip(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?a+2+t.boxPadding:0,Ip(r,(e=>{Ip(e.before,b),Ip(e.lines,b),Ip(e.after,b)})),v=0,n.font=u.string,Ip(e.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function Jb(e,t,n,r){const{x:i,width:s}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=i<=(o+l)/2?"left":"right":i<=s/2?c="left":i>=a-s/2&&(c="right"),function(e,t,n,r){const{x:i,width:s}=r,a=n.caretSize+n.caretPadding;return"left"===e&&i+s+a>t.width||"right"===e&&i-s-a<0||void 0}(c,e,t,n)&&(c="center"),c}function Zb(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Jb(e,t,n,r),yAlign:r}}function ex(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=i+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=hm(a);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const g=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(u,d)+i:"right"===o&&(p+=Math.max(h,f)+i),{x:hg(p,0,r.width-t.width),y:hg(g,0,r.height-t.height)}}function tx(e,t,n){const r=dm(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function nx(e){return Yb([],Qb(e))}function rx(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const ix={beforeTitle:bp,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:bp,beforeBody:bp,beforeLabel:bp,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return wp(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:bp,afterBody:bp,beforeFooter:bp,footer:bp,afterFooter:bp};function sx(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?ix[t].call(n,r):i}class ax extends Pv{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new gy(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,gm(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=sx(n,"beforeTitle",this,e),i=sx(n,"title",this,e),s=sx(n,"afterTitle",this,e);let a=[];return a=Yb(a,Qb(r)),a=Yb(a,Qb(i)),a=Yb(a,Qb(s)),a}getBeforeBody(e,t){return nx(sx(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return Ip(e,(e=>{const t={before:[],lines:[],after:[]},i=rx(n,e);Yb(t.before,Qb(sx(i,"beforeLabel",this,e))),Yb(t.lines,sx(i,"label",this,e)),Yb(t.after,Qb(sx(i,"afterLabel",this,e))),r.push(t)})),r}getAfterBody(e,t){return nx(sx(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=sx(n,"beforeFooter",this,e),i=sx(n,"footer",this,e),s=sx(n,"afterFooter",this,e);let a=[];return a=Yb(a,Qb(r)),a=Yb(a,Qb(i)),a=Yb(a,Qb(s)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],s=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push($b(this.chart,t[a]));return e.filter&&(l=l.filter(((t,r,i)=>e.filter(t,r,i,n)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,n)))),Ip(l,(t=>{const n=rx(e.callbacks,t);r.push(sx(n,"labelColor",this,t)),i.push(sx(n,"labelPointStyle",this,t)),s.push(sx(n,"labelTextColor",this,t))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const e=Gb[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=Xb(this,n),a=Object.assign({},e,t),o=Zb(this.chart,n,a),l=ex(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=hm(a),{x:h,y:d}=e,{width:f,height:p}=t;let g,m,y,v,b,x;return"center"===i?(b=d+p/2,"left"===r?(g=h,m=g-s,v=b+s,x=b-s):(g=h+f,m=g+s,v=b-s,x=b+s),y=g):(m="left"===r?h+Math.max(o,c)+s:"right"===r?h+f-Math.max(l,u)-s:this.caretX,"top"===i?(v=d,b=v-s,g=m-s,y=m+s):(v=d+p,b=v+s,g=m+s,y=m-s),x=v),{x1:g,x2:m,x3:y,y1:v,y2:b,y3:x}}drawTitle(e,t,n){const r=this.title,i=r.length;let s,a,o;if(i){const l=Jm(n.rtl,this.x,this.width);for(e.x=tx(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=fm(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,o=0;o<i;++o)t.fillText(r[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,o+1===i&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,i){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=i,c=fm(i.bodyFont),u=tx(this,"left",i),h=r.x(u),d=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+d;if(i.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(h,l)+l/2,c=f+o/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Yg(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Yg(e,t,n,c)}else{e.lineWidth=kp(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=r.leftForLtr(h,l),n=r.leftForLtr(r.xPlus(h,1),l-2),a=hm(s.borderRadius);Object.values(a).some((e=>0!==e))?(e.beginPath(),e.fillStyle=i.multiKeyBackground,im(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),im(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=fm(n.bodyFont);let h=u.lineHeight,d=0;const f=Jm(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+i},g=f.textAlign(s);let m,y,v,b,x,w,_;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=tx(this,g,n),t.fillStyle=n.bodyColor,Ip(this.beforeBody,p),d=a&&"right"!==g?"center"===s?l/2+c:l+2+c:0,b=0,w=r.length;b<w;++b){for(m=r[b],y=this.labelTextColors[b],t.fillStyle=y,Ip(m.before,p),v=m.lines,a&&v.length&&(this._drawColorBox(t,e,b,f,n),h=Math.max(u.lineHeight,o)),x=0,_=v.length;x<_;++x)p(v[x]),h=u.lineHeight;Ip(m.after,p)}d=0,h=u.lineHeight,Ip(this.afterBody,p),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let s,a;if(i){const o=Jm(n.rtl,this.x,this.width);for(e.x=tx(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",s=fm(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,a=0;a<i;++a)t.fillText(r[a],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:s}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=hm(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+l-h,o),t.quadraticCurveTo(a+l,o,a+l,o+h),"center"===s&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+d,o+c),t.quadraticCurveTo(a,o+c,a,o+c-d),"center"===s&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=Gb[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=Xb(this,e),a=Object.assign({},n,this._size),o=Zb(t,e,a),l=ex(e,a,o,t);r._to===l.x&&i._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=dm(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),Zm(e,t.textDirection),i.y+=s.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),ey(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}})),i=!Pp(n,r),s=this._positionChanged(r,t);(i||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(e,i,t,n),a=this._positionChanged(s,e),o=t||!Pp(s,i)||a;return o&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,s=Gb[i.position].call(this,e,t);return!1!==s&&(n!==s.x||r!==s.y)}}H(ax,"positioners",Gb);var ox={id:"tooltip",_element:ax,positioners:Gb,afterInit(e,t,n){n&&(e.tooltip=new ax({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",q(q({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ix},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function lx(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function cx(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ux extends zv{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(wp(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:hg(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:lx(n,e,Cp(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)r.push({value:s});return r}getLabelForValue(e){return cx.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function hx(e,t){const n=[],{bounds:r,step:i,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=i||1,f=c-1,{min:p,max:g}=t,m=!wp(s),y=!wp(a),v=!wp(l),b=(g-p)/(u+1);let x,w,_,k,S=eg((g-p)/f/d)*d;if(S<1e-14&&!m&&!y)return[{value:p},{value:g}];k=Math.ceil(g/S)-Math.floor(p/S),k>f&&(S=eg(k*S/f/d)*d),wp(o)||(x=Math.pow(10,o),S=Math.ceil(S*x)/x),"ticks"===r?(w=Math.floor(p/S)*S,_=Math.ceil(g/S)*S):(w=p,_=g),m&&y&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-s)/i,S/1e3)?(k=Math.round(Math.min((a-s)/S,c)),S=(a-s)/k,w=s,_=a):v?(w=m?s:w,_=y?a:_,k=l-1,S=(_-w)/k):(k=(_-w)/S,k=Zp(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const E=Math.max(sg(S),sg(w));x=Math.pow(10,wp(o)?E:o),w=Math.round(w*x)/x,_=Math.round(_*x)/x;let C=0;for(m&&(h&&w!==s?(n.push({value:s}),w<s&&C++,Zp(Math.round((w+C*S)*x)/x,s,dx(s,b,e))&&C++):w<s&&C++);C<k;++C){const e=Math.round((w+C*S)*x)/x;if(y&&e>a)break;n.push({value:e})}return y&&h&&_!==a?n.length&&Zp(n[n.length-1].value,a,dx(a,b,e))?n[n.length-1].value=a:n.push({value:a}):y&&_!==a||n.push({value:_}),n}function dx(e,t,n){let{horizontal:r,minRotation:i}=n;const s=rg(i),a=(r?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}H(ux,"id","category"),H(ux,"defaults",{ticks:{callback:cx}});class fx extends zv{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return wp(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=e=>r=t?r:e,a=e=>i=n?i:e;if(e){const e=Jp(r),t=Jp(i);e<0&&t<0?a(0):e>0&&t>0&&s(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);a(i+t),e||s(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=hx({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&ng(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Og(e,this.chart.options.locale,this.options.ticks.format)}}class px extends fx{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Sp(e)?e:0,this.max=Sp(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=rg(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}H(px,"id","linear"),H(px,"defaults",{ticks:{callback:Lg.formatters.numeric}});const gx=e=>Math.floor(Xp(e)),mx=(e,t)=>Math.pow(10,gx(e)+t);function yx(e){return 1===e/Math.pow(10,gx(e))}function vx(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function bx(e,t){let{min:n,max:r}=t;n=Ep(e.min,n);const i=[],s=gx(n);let a=function(e,t){let n=gx(t-e);for(;vx(e,t,n)>10;)n++;for(;vx(e,t,n)<10;)n--;return Math.min(n,gx(e))}(n,r),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=s>a?Math.pow(10,s):0,u=Math.round((n-c)*o)/o,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,a)),f=Ep(e.min,Math.round((c+h+d*Math.pow(10,a))*o)/o);for(;f<r;)i.push({value:f,major:yx(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(a++,d=2,o=a>=0?1:o),f=Math.round((c+h+d*Math.pow(10,a))*o)/o;const p=Ep(e.max,f);return i.push({value:p,major:yx(p),significand:d}),i}class xx extends zv{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=fx.prototype.parse.apply(this,[e,t]);if(0!==n)return Sp(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Sp(e)?Math.max(0,e):null,this.max=Sp(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Sp(this._userMin)&&(this.min=e===mx(this.min,0)?mx(this.min,-1):mx(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,s=e=>r=t?r:e;n===r&&(n<=0?(i(1),s(10)):(i(mx(n,-1)),s(mx(r,1)))),n<=0&&i(mx(r,-1)),r<=0&&s(mx(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=bx({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&ng(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Og(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Xp(e),this._valueRange=Xp(this.max)-Xp(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Xp(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function wx(e){const t=e.ticks;if(t.display&&e.display){const e=dm(t.backdropPadding);return Cp(t.font&&t.font.size,Hg.font.size)+e.height}return 0}function _x(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function kx(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],s=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?Hp/s:0;for(let h=0;h<s;h++){const s=a.setContext(e.getPointLabelContext(h));i[h]=s.padding;const d=e.getPointPosition(h,e.drawingArea+i[h],o),f=fm(s.font),p=(l=e.ctx,c=f,u=_p(u=e._pointLabels[h])?u:[u],{w:qg(l,c.string,u),h:u.length*c.lineHeight});r[h]=p;const g=cg(e.getIndexAngle(h)+o),m=Math.round(ig(g));Sx(n,t,g,_x(m,d.x,p.w,0,180),_x(m,d.y,p.h,90,270))}var l,c,u;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,s=e.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:wx(s)/2,additionalAngle:a?Hp/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const i=Ex(e,u,l);r.push(i),"auto"===o&&(i.visible=Cx(i,c),i.visible&&(c=i))}return r}(e,r,i)}function Sx(e,t,n,r,i){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/s,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),i.start<t.t?(l=(t.t-i.start)/a,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function Ex(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:s,padding:a,size:o}=n,l=e.getPointPosition(t,r+i+a,s),c=Math.round(ig(cg(l.angle+Yp))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+o.w,bottom:u+o.h}}function Cx(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:s}=e;return!($g({x:n,y:r},t)||$g({x:n,y:s},t)||$g({x:i,y:r},t)||$g({x:i,y:s},t))}function Nx(e,t,n){const{left:r,top:i,right:s,bottom:a}=n,{backdropColor:o}=t;if(!wp(o)){const n=hm(t.borderRadius),l=dm(t.backdropPadding);e.fillStyle=o;const c=r-l.left,u=i-l.top,h=s-r+l.width,d=a-i+l.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),im(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function Tx(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,Wp);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=e.getPointPosition(s,t),i.lineTo(n.x,n.y)}}H(xx,"id","logarithmic"),H(xx,"defaults",{ticks:{callback:Lg.formatters.logarithmic,major:{enabled:!0}}});class Ix extends fx{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=dm(wx(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Sp(e)&&!isNaN(e)?e:0,this.max=Sp(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/wx(this.options))}generateTickLabels(e){fx.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=Tp(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?kx(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return cg(e*(Wp/(this._pointLabels.length||1))+rg(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(wp(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(wp(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return gm(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-Yp+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Tx(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,s=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const s=r.setContext(e.getPointLabelContext(i));Nx(n,s,t);const a=fm(s.font),{x:o,y:l,textAlign:c}=t;rm(n,e._pointLabels[i],o,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const s=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!r||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),Tx(e,n,a,r),s.closePath(),s.stroke(),s.restore())}(this,a,o,s,l)}})),n.display){for(e.save(),a=s-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:i,lineWidth:s}=r;s&&i&&(e.lineWidth=s,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((r,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=fm(o.font);if(i=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=dm(o.backdropPadding);e.fillRect(-s/2-t.left,-i-l.size/2-t.top,s+t.width,l.size+t.height)}rm(e,r.label,0,-i,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})})),e.restore()}drawTitle(){}}H(Ix,"id","radialLinear"),H(Ix,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Lg.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),H(Ix,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),H(Ix,"descriptors",{angleLines:{_fallback:"grid"}});const Px={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ax=Object.keys(Px);function Mx(e,t){return e-t}function Dx(e,t){if(wp(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let a=t;return"function"===typeof r&&(a=r(a)),Sp(a)||(a="string"===typeof r?n.parse(a,r):n.parse(a)),null===a?null:(i&&(a="week"!==i||!tg(s)&&!0!==s?n.startOf(a,i):n.startOf(a,"isoWeek",s)),+a)}function Rx(e,t,n,r){const i=Ax.length;for(let s=Ax.indexOf(e);s<i-1;++s){const e=Px[Ax[s]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return Ax[s]}return Ax[i-1]}function Ox(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=fg(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function jx(e,t,n){const r=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,r.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class Lx extends zv{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new Ky(e.adapters.date);r.init(t),Op(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Dx(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:a}=this.getUserBounds();function o(e){s||isNaN(e.min)||(r=Math.min(r,e.min)),a||isNaN(e.max)||(i=Math.max(i,e.max))}s&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=Sp(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=Sp(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?Rx(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let s=Ax.length-1;s>=Ax.indexOf(n);s--){const n=Ax[s];if(Px[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return Ax[n?Ax.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=Ax.indexOf(e)+1,n=Ax.length;t<n;++t)if(Px[Ax[t]].common)return Ax[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&s.reverse(),jx(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;r=hg(r,0,s),i=hg(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||Rx(i.minUnit,t,n,this._getLabelCapacity(t)),a=Cp(r.ticks.stepSize,1),o="week"===s&&i.isoWeekday,l=tg(o)||!0===o,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",o)),d=+e.startOf(d,l?"day":s),e.diff(n,t,s)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,a,s),h++)Ox(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==h||Ox(c,u,f),Object.keys(c).sort(Mx).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,s=i.ticks.callback;if(s)return Tp(s,[e,t,n],this);const a=i.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,r||(d?u:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=rg(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),s=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*i+a*s,h:n*s+a*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,jx(this,[e],this._majorUnit),r),s=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(Dx(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return vg(e.sort(Mx))}}function Fx(e,t,n){let r,i,s,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=pg(e,"pos",t)),({pos:r,time:s}=e[o]),({pos:i,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=pg(e,"time",t)),({time:r,pos:s}=e[o]),({time:i,pos:a}=e[l]));const c=i-r;return c?s+(a-s)*(t-r)/c:s}H(Lx,"id","time"),H(Lx,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Vx extends Lx{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Fx(t,this.min),this._tableRange=Fx(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,a=r.length;s<a;++s)c=r[s+1],o=r[s-1],l=r[s],Math.round((c+o)/2)!==l&&i.push({time:l,pos:s/(a-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Fx(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Fx(this._table,n*this._tableRange+this._minPos,!0)}}H(Vx,"id","timeseries"),H(Vx,"defaults",Lx.defaults);const zx=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],Ux="label";function Bx(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Hx(e,t){e.labels=t}function Wx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ux;const r=[];e.datasets=t.map((t=>{const i=e.datasets.find((e=>e[n]===t[n]));return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):q({},t)}))}function qx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ux;const n={labels:[],datasets:[]};return Hx(n,e.labels),Wx(n,e.datasets,t),n}function Kx(e,t){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:a,type:o,data:l,options:c,plugins:u=[],fallbackContent:h,updateMode:d}=e,f=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,zx),p=(0,r.useRef)(null),g=(0,r.useRef)(null),m=()=>{p.current&&(g.current=new mb(p.current,{type:o,data:qx(l,a),options:c&&q({},c),plugins:u}),Bx(t,g.current))},y=()=>{Bx(t,null),g.current&&(g.current.destroy(),g.current=null)};return(0,r.useEffect)((()=>{!s&&g.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(g.current,c)}),[s,c]),(0,r.useEffect)((()=>{!s&&g.current&&Hx(g.current.config.data,l.labels)}),[s,l.labels]),(0,r.useEffect)((()=>{!s&&g.current&&l.datasets&&Wx(g.current.config.data,l.datasets,a)}),[s,l.datasets]),(0,r.useEffect)((()=>{g.current&&(s?(y(),setTimeout(m)):g.current.update(d))}),[s,c,l.labels,l.datasets,d]),(0,r.useEffect)((()=>{g.current&&(y(),setTimeout(m))}),[o]),(0,r.useEffect)((()=>(m(),()=>y())),[]),r.createElement("canvas",q({ref:p,role:"img",height:n,width:i},f),h)}const Gx=(0,r.forwardRef)(Kx);function Yx(e,t){return mb.register(t),(0,r.forwardRef)(((t,n)=>r.createElement(Gx,q(q({},t),{},{ref:n,type:e}))))}const Qx=Yx("bar",jy);mb.register(ux,px,zb,Kb,ox,Wb);const $x=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=Kd(Xh(Qd,"sales"),(e=>{t(e.docs.map((e=>q({id:e.id},e.data()))))})),n=Kd(Xh(Qd,"purchases"),(e=>{i(e.docs.map((e=>q({id:e.id},e.data()))))})),r=Kd(Xh(Qd,"plants"),(e=>{a(e.docs.map((e=>q({id:e.id},e.data()))))}));return()=>{e(),n(),r()}}),[]);const o=Array(12).fill(0),l=Array(12).fill(0);e.forEach((e=>{if(!e.date)return;const t=new Date(e.date);o[t.getMonth()]+=e.total||0})),n.forEach((e=>{if(!e.date)return;const t=new Date(e.date);l[t.getMonth()]+=e.total||0}));const c={labels:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],datasets:[{label:"Ventas",data:o,backgroundColor:"rgba(34,197,94,0.7)"},{label:"Compras",data:l,backgroundColor:"rgba(239,68,68,0.7)"}]};return(0,Zd.jsxs)("div",{children:[(0,Zd.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Reportes y Estad\xedsticas"}),(0,Zd.jsx)("div",{className:"mb-8",children:(0,Zd.jsx)(Qx,{data:c,options:{responsive:!0,plugins:{legend:{position:"top"}}}})}),(0,Zd.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Zd.jsxs)("div",{className:"bg-green-100 rounded p-4",children:[(0,Zd.jsx)("div",{className:"font-bold",children:"Total Ventas"}),(0,Zd.jsxs)("div",{className:"text-2xl text-green-700",children:["$",e.reduce(((e,t)=>e+(t.total||0)),0).toFixed(2)]})]}),(0,Zd.jsxs)("div",{className:"bg-red-100 rounded p-4",children:[(0,Zd.jsx)("div",{className:"font-bold",children:"Total Compras"}),(0,Zd.jsxs)("div",{className:"text-2xl text-red-700",children:["$",n.reduce(((e,t)=>e+(t.total||0)),0).toFixed(2)]})]}),(0,Zd.jsxs)("div",{className:"bg-blue-100 rounded p-4",children:[(0,Zd.jsx)("div",{className:"font-bold",children:"Stock Total"}),(0,Zd.jsx)("div",{className:"text-2xl text-blue-700",children:s.reduce(((e,t)=>e+(t.stock||0)),0)})]})]})]})},Xx=e=>{const t=new Date,[n,i]=(0,r.useState)(t.getMonth()),[s,a]=(0,r.useState)(t.getFullYear());return(0,Zd.jsx)("div",{className:"relative min-h-screen bg-gray-50 pb-24",children:(0,Zd.jsxs)("div",{className:"bg-white rounded-lg shadow p-3",children:[(0,Zd.jsxs)("div",{className:"flex justify-center gap-2 mb-2",children:[(0,Zd.jsx)("select",{value:n,onChange:e=>i(Number(e.target.value)),className:"text-xs rounded border px-2 py-1",children:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"].map(((e,t)=>(0,Zd.jsx)("option",{value:t,children:e},e)))}),(0,Zd.jsx)("select",{value:s,onChange:e=>a(Number(e.target.value)),className:"text-xs rounded border px-2 py-1",children:[s-1,s,s+1].map((e=>(0,Zd.jsx)("option",{value:e,children:e},e)))})]}),(0,Zd.jsx)(Lf,q(q({},e),{},{showOnlySalesOfDay:!0,selectedMonth:n,selectedYear:s}))]})})};mb.register(ux,px,zb,Db,Ab,Vy,Kb,ox,Wb);const Jx=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=Kd(Xh(Qd,"movements"),(e=>{t(e.docs.map((e=>q({id:e.id},e.data()))))})),n=Kd(Xh(Qd,"plants"),(e=>{i(e.docs.map((e=>q({id:e.id},e.data()))))}));return()=>{e(),n()}}),[]);const s=new Date,a=e.filter((e=>{if(!e.date)return!1;const t=new Date(e.date);return t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth()&&t.getDate()===s.getDate()})),o=a.filter((e=>"venta"===e.type)).reduce(((e,t)=>e+(Number(t.total)||0)),0),l=a.filter((e=>"compra"===e.type)).reduce(((e,t)=>e+(Number(t.total)||0)),0),c=a.filter((e=>"egreso"===e.type)).reduce(((e,t)=>e+(Number(t.total)||0)),0),u=a.filter((e=>"ingreso"===e.type)).reduce(((e,t)=>e+(Number(t.total)||0)),0),h=a.filter((e=>"efectivo"===e.paymentMethod)).reduce(((e,t)=>"venta"===t.type||"ingreso"===t.type?e+(Number(t.total)||0):"compra"===t.type||"egreso"===t.type?e-(Number(t.total)||0):e),0),d=a.filter((e=>"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>"venta"===t.type||"ingreso"===t.type?e+(Number(t.total)||0):"compra"===t.type||"egreso"===t.type?e-(Number(t.total)||0):e),0),f={};a.filter((e=>"venta"===e.type)).forEach((e=>{e.plantId&&(f[e.plantId]=(f[e.plantId]||0)+(Number(e.quantity)||0))}));const p=Object.entries(f).map((e=>{var t;let[r,i]=e;return{name:(null===(t=n.find((e=>String(e.id)===String(r))))||void 0===t?void 0:t.name)||"Producto eliminado",qty:i}})).sort(((e,t)=>t.qty-e.qty)),g={labels:p.map((e=>e.name)),datasets:[{label:"Cantidad vendida",data:p.map((e=>e.qty)),backgroundColor:"rgba(34,197,94,0.7)",borderColor:"rgba(34,197,94,1)",borderWidth:1}]},m=s.getMonth(),y=s.getFullYear(),v=e.filter((e=>{if(!e.date)return!1;const t=new Date(e.date);return t.getMonth()===m&&t.getFullYear()===y})),b={};v.filter((e=>"venta"===e.type)).forEach((e=>{e.plantId&&(b[e.plantId]=(b[e.plantId]||0)+(Number(e.quantity)||0))}));const x=Object.entries(b).map((e=>{var t;let[r,i]=e;return{name:(null===(t=n.find((e=>String(e.id)===String(r))))||void 0===t?void 0:t.name)||"Producto eliminado",qty:i}})).sort(((e,t)=>t.qty-e.qty)),w={labels:x.map((e=>e.name)),datasets:[{label:"Cantidad vendida",data:x.map((e=>e.qty)),backgroundColor:"rgba(59,130,246,0.7)",borderColor:"rgba(59,130,246,1)",borderWidth:1}]},_=e.filter((e=>{if(!e.date)return!1;const t=new Date(e.date);return t.getMonth()===m&&t.getFullYear()===y})),k=_.filter((e=>"venta"===e.type)).reduce(((e,t)=>e+(Number(t.quantity)||0)),0),S=(e,t,n)=>e.filter((e=>e.type===t&&e.paymentMethod===n)).reduce(((e,t)=>e+(Number(t.total)||0)),0),E=(S(a,"egreso","efectivo"),S(a,"compra","efectivo"),S(a,"egreso","mercadoPago"),S(a,"compra","mercadoPago"),S(_,"egreso","efectivo")+S(_,"compra","efectivo")+S(_,"gasto","efectivo")),C=S(_,"egreso","mercadoPago")+S(_,"compra","mercadoPago")+S(_,"gasto","mercadoPago"),N=S(_,"venta","efectivo"),T=S(_,"venta","mercadoPago"),I=new Date(y,m+1,0).getDate(),P=Array(I).fill(0),A=Array(I).fill(0);_.forEach((e=>{if(!e.date)return;const t=new Date(e.date);"venta"===e.type&&(P[t.getDate()-1]+=Number(e.total)||0,A[t.getDate()-1]+=Number(e.quantity)||0)}));const M={labels:Array.from({length:I},((e,t)=>"".concat(t+1))),datasets:[{label:"Total vendido ($)",data:P,backgroundColor:"rgba(34,197,94,0.7)",borderColor:"rgba(34,197,94,1)",borderWidth:1}]},D={labels:Array.from({length:I},((e,t)=>"".concat(t+1))),datasets:[{label:"Cantidad productos vendidos",data:A,backgroundColor:"rgba(59,130,246,0.7)",borderColor:"rgba(59,130,246,1)",borderWidth:1}]},R={};_.filter((e=>"venta"===e.type)).forEach((e=>{if(!e.plantId)return;const t=n.find((t=>String(t.id)===String(e.plantId))),r=t&&Number(t.basePrice)||0,i=Number(e.total)||0,s=Number(e.quantity)||0;R[e.plantId]||(R[e.plantId]={name:(null===t||void 0===t?void 0:t.name)||"Producto eliminado",cantidad:0,totalVenta:0,totalCosto:0,ganancia:0}),R[e.plantId].cantidad+=s,R[e.plantId].totalVenta+=i,R[e.plantId].totalCosto+=r*s,R[e.plantId].ganancia+=i-r*s}));const O=Object.values(R).map((e=>q(q({},e),{},{porcentaje:e.totalCosto>0?e.ganancia/e.totalCosto*100:null}))).sort(((e,t)=>t.ganancia-e.ganancia)),j=O.reduce(((e,t)=>e+t.ganancia),0),L=O.reduce(((e,t)=>e+t.totalCosto),0),F=L>0?j/L*100:null,V=n.filter((e=>Number(e.stock)<=1)).sort(((e,t)=>e.stock-t.stock)),z=_.filter((e=>"egreso"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),U=_.filter((e=>"compra"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),B=_.filter((e=>"gasto"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),H=_.filter((e=>"egreso"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),W=_.filter((e=>"compra"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),K=_.filter((e=>"gasto"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(Number(t.total)||0)),0),G={labels:["Egreso Efectivo","Egreso MP","Compra Efectivo","Compra MP","Gasto Efectivo","Gasto MP"],datasets:[{label:"Gastos ($)",data:[z,H,U,W,B,K],backgroundColor:["rgba(239,68,68,0.7)","rgba(168,85,247,0.7)","rgba(251,191,36,0.7)","rgba(59,130,246,0.7)","rgba(16,185,129,0.7)","rgba(244,63,94,0.7)"],borderColor:["rgba(239,68,68,1)","rgba(168,85,247,1)","rgba(251,191,36,1)","rgba(59,130,246,1)","rgba(16,185,129,1)","rgba(244,63,94,1)"],borderWidth:1}]},Y=_.filter((e=>"venta"===e.type)).reduce(((e,t)=>e+(Number(t.total)||0)),0),Q=_.filter((e=>"egreso"===e.type||"compra"===e.type||"gasto"===e.type)).reduce(((e,t)=>e+(Number(t.total)||0)),0),$={labels:["Ventas","Gastos"],datasets:[{label:"Total ($)",data:[Y,Q],backgroundColor:["rgba(34,197,94,0.7)","rgba(239,68,68,0.7)"],borderColor:["rgba(34,197,94,1)","rgba(239,68,68,1)"],borderWidth:1}]};return(0,Zd.jsx)("div",{children:(0,Zd.jsxs)("div",{className:"relative min-h-screen bg-gray-50 pb-24",children:[0===a.length?(0,Zd.jsxs)("div",{className:"rounded-lg shadow bg-white p-3 mb-4",children:[(0,Zd.jsx)("div",{className:"font-semibold text-blue-700 mb-2",children:"Saldo de caja disponible"}),(0,Zd.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center text-sm",children:[(0,Zd.jsxs)("div",{className:"bg-blue-100 rounded px-3 py-1",children:["Efectivo: ",(0,Zd.jsx)("b",{children:h.toLocaleString("es-AR",{style:"currency",currency:"ARS"})})]}),(0,Zd.jsxs)("div",{className:"bg-purple-100 rounded px-3 py-1",children:["MP: ",(0,Zd.jsx)("b",{children:d.toLocaleString("es-AR",{style:"currency",currency:"ARS"})})]})]})]}):(0,Zd.jsxs)("div",{className:"rounded-lg shadow bg-white p-3 mb-4",children:[(0,Zd.jsx)("div",{className:"font-semibold text-green-700 mb-2",children:"Totales del d\xeda"}),(0,Zd.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center text-sm",children:[(0,Zd.jsxs)("div",{className:"bg-green-100 rounded px-3 py-1",children:["Ventas: ",(0,Zd.jsx)("b",{children:o.toLocaleString("es-AR",{style:"currency",currency:"ARS"})})]}),(0,Zd.jsxs)("div",{className:"bg-red-100 rounded px-3 py-1",children:["Compras: ",(0,Zd.jsx)("b",{children:l.toLocaleString("es-AR",{style:"currency",currency:"ARS"})})]}),(0,Zd.jsxs)("div",{className:"bg-orange-100 rounded px-3 py-1",children:["Egresos: ",(0,Zd.jsx)("b",{children:c.toLocaleString("es-AR",{style:"currency",currency:"ARS"})})]}),(0,Zd.jsxs)("div",{className:"bg-pink-100 rounded px-3 py-1",children:["Gastos: ",(0,Zd.jsx)("b",{children:a.filter((e=>"gasto"===e.type)).reduce(((e,t)=>e+(Number(t.total)||0)),0).toLocaleString("es-AR",{style:"currency",currency:"ARS"})})]}),(0,Zd.jsxs)("div",{className:"bg-lime-100 rounded px-3 py-1",children:["Ingresos: ",(0,Zd.jsx)("b",{children:u.toLocaleString("es-AR",{style:"currency",currency:"ARS"})})]})]})]}),(0,Zd.jsxs)("div",{className:"rounded-lg shadow bg-white p-3 mb-4",children:[(0,Zd.jsx)("div",{className:"font-semibold text-green-700 mb-2",children:"Totales del mes"}),(0,Zd.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center text-sm",children:[(0,Zd.jsxs)("div",{className:"bg-green-100 rounded px-3 py-1",children:["Ventas Efectivo: ",(0,Zd.jsx)("b",{children:N.toLocaleString("es-AR",{style:"currency",currency:"ARS"})})]}),(0,Zd.jsxs)("div",{className:"bg-purple-100 rounded px-3 py-1",children:["Ventas MP: ",(0,Zd.jsx)("b",{children:T.toLocaleString("es-AR",{style:"currency",currency:"ARS"})})]}),(0,Zd.jsxs)("div",{className:"bg-blue-50 rounded px-3 py-1",children:["Gastos/Compras/Egresos/Gastos Efectivo: ",(0,Zd.jsx)("b",{children:E.toLocaleString("es-AR",{style:"currency",currency:"ARS"})})]}),(0,Zd.jsxs)("div",{className:"bg-purple-50 rounded px-3 py-1",children:["Gastos/Compras/Egresos/Gastos MP: ",(0,Zd.jsx)("b",{children:C.toLocaleString("es-AR",{style:"currency",currency:"ARS"})})]}),(0,Zd.jsxs)("div",{className:"bg-gray-100 rounded px-3 py-1",children:["Productos vendidos en el mes: ",(0,Zd.jsx)("b",{children:k})]})]})]}),(0,Zd.jsxs)("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[(0,Zd.jsx)("div",{className:"font-semibold text-blue-700 mb-2",children:"Productos vendidos hoy"}),0===p.length?(0,Zd.jsx)("div",{className:"text-gray-400 text-sm",children:"No hay ventas registradas hoy."}):(0,Zd.jsxs)(Zd.Fragment,{children:[(0,Zd.jsx)(Qx,{data:g,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Productos vendidos hoy"}},scales:{x:{title:{display:!1}},y:{beginAtZero:!0,title:{display:!0,text:"Cantidad"}}}},height:220}),(0,Zd.jsx)("ul",{className:"text-sm mt-2",children:p.map(((e,t)=>(0,Zd.jsxs)("li",{className:0===t?"font-bold text-green-700":"",children:[e.name,": ",e.qty]},e.name)))})]})]}),(0,Zd.jsxs)("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[(0,Zd.jsx)("div",{className:"font-semibold text-blue-700 mb-2",children:"Productos vendidos del mes"}),0===x.length?(0,Zd.jsx)("div",{className:"text-gray-400 text-sm",children:"No hay ventas registradas este mes."}):(0,Zd.jsxs)(Zd.Fragment,{children:[(0,Zd.jsx)(Qx,{data:w,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Productos vendidos este mes"}},scales:{x:{title:{display:!1}},y:{beginAtZero:!0,title:{display:!0,text:"Cantidad"}}}},height:220}),(0,Zd.jsx)("ul",{className:"text-sm mt-2",children:x.map(((e,t)=>(0,Zd.jsxs)("li",{className:0===t?"font-bold text-blue-700":"",children:[e.name,": ",e.qty]},e.name)))})]})]}),(0,Zd.jsxs)("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[(0,Zd.jsx)("div",{className:"font-semibold text-blue-700 mb-2",children:"Total vendido por d\xeda del mes"}),(0,Zd.jsx)(Qx,{data:M,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Total vendido por d\xeda del mes"}},scales:{x:{title:{display:!0,text:"D\xeda del mes"}},y:{beginAtZero:!0,title:{display:!0,text:"Total vendido ($)"}}}},height:220})]}),(0,Zd.jsxs)("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[(0,Zd.jsx)("div",{className:"font-semibold text-blue-700 mb-2",children:"Cantidad de productos vendidos por d\xeda del mes"}),(0,Zd.jsx)(Qx,{data:D,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Cantidad de productos vendidos por d\xeda del mes"}},scales:{x:{title:{display:!0,text:"D\xeda del mes"}},y:{beginAtZero:!0,title:{display:!0,text:"Cantidad productos"}}}},height:220})]}),(0,Zd.jsxs)("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[(0,Zd.jsx)("div",{className:"font-semibold text-blue-700 mb-2",children:"Total vendido y cantidad de productos por d\xeda del mes"}),(0,Zd.jsx)(Qx,{data:{labels:Array.from({length:I},((e,t)=>"".concat(t+1))),datasets:[{type:"bar",label:"Total vendido ($)",data:P,backgroundColor:"rgba(34,197,94,0.7)",borderColor:"rgba(34,197,94,1)",borderWidth:1,yAxisID:"y"},{type:"line",label:"Cantidad productos",data:A,backgroundColor:"rgba(59,130,246,0.7)",borderColor:"rgba(59,130,246,1)",borderWidth:2,fill:!1,yAxisID:"y1"}]},options:{responsive:!0,plugins:{legend:{display:!0},title:{display:!0,text:"Total vendido ($) y cantidad de productos por d\xeda"}},scales:{x:{title:{display:!0,text:"D\xeda del mes"}},y:{beginAtZero:!0,title:{display:!0,text:"Total vendido ($)"}},y1:{beginAtZero:!0,position:"right",title:{display:!0,text:"Cantidad productos"},grid:{drawOnChartArea:!1}}}},height:220})]}),(0,Zd.jsxs)("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[(0,Zd.jsx)("div",{className:"font-semibold text-red-700 mb-2",children:"Gastos del mes por tipo y m\xe9todo de pago"}),(0,Zd.jsx)(Qx,{data:G,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Gastos del mes por tipo y m\xe9todo de pago"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Gastos ($)"}}}},height:220})]}),(0,Zd.jsxs)("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[(0,Zd.jsx)("div",{className:"font-semibold text-blue-700 mb-2",children:"Ventas vs Gastos del mes"}),(0,Zd.jsx)(Qx,{data:$,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Ventas vs Gastos del mes"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Total ($)"}}}},height:120})]}),(0,Zd.jsxs)("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[(0,Zd.jsx)("div",{className:"font-semibold text-green-700 mb-2",children:"Ganancia por producto vendido (mes)"}),(0,Zd.jsxs)("div",{className:"mb-1 text-green-800 text-sm font-bold",children:["Ganancia total: ",j.toLocaleString("es-AR",{style:"currency",currency:"ARS"})]}),(0,Zd.jsxs)("div",{className:"mb-2 text-green-800 text-sm font-bold",children:["% Ganancia total: ",null!==F?F.toFixed(1)+"%":"-"]}),0===O.length?(0,Zd.jsx)("div",{className:"text-gray-400 text-sm",children:"No hay ventas registradas este mes."}):(0,Zd.jsxs)("table",{className:"min-w-full text-xs",children:[(0,Zd.jsx)("thead",{children:(0,Zd.jsxs)("tr",{className:"bg-green-100",children:[(0,Zd.jsx)("th",{className:"p-1",children:"Producto"}),(0,Zd.jsx)("th",{className:"p-1",children:"Cantidad"}),(0,Zd.jsx)("th",{className:"p-1",children:"Total Venta"}),(0,Zd.jsx)("th",{className:"p-1",children:"Total Costo"}),(0,Zd.jsx)("th",{className:"p-1",children:"Ganancia"}),(0,Zd.jsx)("th",{className:"p-1",children:"% Ganancia"})]})}),(0,Zd.jsx)("tbody",{children:O.map(((e,t)=>(0,Zd.jsxs)("tr",{children:[(0,Zd.jsx)("td",{className:"p-1",children:e.name}),(0,Zd.jsx)("td",{className:"p-1 text-center",children:e.cantidad}),(0,Zd.jsx)("td",{className:"p-1 text-right",children:e.totalVenta.toLocaleString("es-AR",{style:"currency",currency:"ARS"})}),(0,Zd.jsx)("td",{className:"p-1 text-right",children:e.totalCosto.toLocaleString("es-AR",{style:"currency",currency:"ARS"})}),(0,Zd.jsx)("td",{className:"p-1 text-right font-bold",children:e.ganancia.toLocaleString("es-AR",{style:"currency",currency:"ARS"})}),(0,Zd.jsx)("td",{className:"p-1 text-right",children:null!==e.porcentaje?e.porcentaje.toFixed(1)+"%":"-"})]},e.name+t)))})]})]}),(0,Zd.jsxs)("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[(0,Zd.jsx)("div",{className:"font-semibold text-orange-700 mb-2",children:"Productos a reponer (bajo stock)"}),0===V.length?(0,Zd.jsx)("div",{className:"text-gray-400 text-sm",children:"No hay productos con bajo stock."}):(0,Zd.jsx)("ul",{className:"text-sm",children:V.map((e=>(0,Zd.jsxs)("li",{children:[e.name," ",(0,Zd.jsxs)("span",{className:"text-gray-500",children:["(",e.stock," en stock)"]})]},e.id)))})]})]})})},Zx=n.p+"static/media/logo.002f0bc12656d05ad8e3.png",ew=Zx,tw=[{key:"inventory",label:"Inventario",icon:"\ud83d\udce6",color:"bg-green-100",onClick:null},{key:"cash",label:"Caja Diaria",icon:"\ud83d\udcb0",color:"bg-yellow-100",onClick:null},{key:"sales",label:"Ventas",icon:"\ud83d\uded2",color:"bg-blue-100",onClick:null},{key:"reports",label:"Reportes",icon:"\ud83d\udcca",color:"bg-purple-100",onClick:null}],nw=e=>{let{onModuleClick:t,businessName:n="Mundo Floral",logoUrl:r=ew,modulesConfig:i}=e;const s=i||tw;return(0,Zd.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-green-50 to-white pb-24",children:[(0,Zd.jsxs)("header",{className:"sticky top-0 z-20 bg-gradient-to-b from-green-50 to-white/95 backdrop-blur px-4 py-1.5 shadow-md flex items-center justify-between rounded-xl mx-2 mt-2",children:[(0,Zd.jsxs)("div",{className:"flex items-center",children:[(0,Zd.jsx)("div",{className:"bg-white p-1 rounded-full border border-green-100",children:(0,Zd.jsx)("img",{src:r,alt:"Logo",className:"h-9 w-9 object-contain"})}),(0,Zd.jsx)("span",{className:"text-lg font-bold text-green-700 tracking-tight ml-2",children:n})]}),(0,Zd.jsx)("p",{className:"text-sm text-gray-600 bg-white/80 px-3 py-0.5 rounded-full border border-green-50",children:"Sistema de Gesti\xf3n"})]}),(0,Zd.jsx)("div",{className:"h-3"}),(0,Zd.jsx)("div",{className:"grid grid-cols-2 gap-4 px-4 mt-2",children:s.map((e=>(0,Zd.jsxs)("button",{className:"flex flex-col items-center justify-center rounded-xl shadow-md border border-gray-100 p-5 ".concat(e.color," hover:scale-102 transition-transform active:scale-98"),onClick:()=>t&&t(e.key),children:[(0,Zd.jsx)("span",{className:"text-3xl mb-2",children:e.icon}),(0,Zd.jsx)("span",{className:"text-base font-medium text-gray-700",children:e.label})]},e.key)))}),(0,Zd.jsxs)("footer",{className:"fixed bottom-0 left-0 right-0 mx-2 mb-1 text-center text-xs text-gray-400 py-2 bg-white/80 backdrop-blur border-t border-gray-100 rounded-t-xl shadow-md",children:["\xa9 ",(new Date).getFullYear()," ",n]})]})},rw=()=>{const[e,t]=(0,r.useState)("home"),n=e=>e?(0,Zd.jsxs)("div",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur py-1.5 px-3 shadow-md flex justify-between items-center rounded-xl mx-2 mt-2 mb-3 border border-gray-100",children:[(0,Zd.jsx)("button",{className:"text-sm font-medium text-green-700 flex items-center bg-green-50 px-2 py-1 rounded-full border border-green-100",onClick:()=>t("home"),children:"\u2190 Inicio"}),(0,Zd.jsx)("h1",{className:"text-base font-bold text-gray-700",children:e}),(0,Zd.jsx)("div",{className:"w-16"})," "]}):null,i=(e,t)=>({active:"flex-1 flex flex-col items-center py-2 text-base font-semibold ".concat(t," text-white rounded-t-lg transition-all duration-200"),inactive:"flex-1 flex flex-col items-center py-2 text-base font-semibold bg-gray-50 text-gray-700 hover:bg-gray-100 rounded-t-lg transition-all duration-200"});return(0,Zd.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-24",children:[(0,Zd.jsxs)("div",{className:"max-w-2xl mx-auto pt-2 pb-28 px-2",children:["home"===e&&(0,Zd.jsx)(nw,{onModuleClick:e=>{switch(e){case"inventory":t("inventario");break;case"cash":t("caja");break;case"sales":t("ventas");break;case"reports":t("reportes");break;default:t("home")}},businessName:"Mundo Floral",logoUrl:Zx}),"ventas"===e&&(0,Zd.jsxs)(Zd.Fragment,{children:[n("Movimientos de Caja"),(0,Zd.jsx)(Xx,{})]}),"caja"===e&&(0,Zd.jsxs)(Zd.Fragment,{children:[n("Caja Diaria"),(0,Zd.jsx)(Ff,{hideTitleInView:!0})]}),"inventario"===e&&(0,Zd.jsxs)(Zd.Fragment,{children:[n("Inventario"),(0,Zd.jsx)(nf,{})]}),"reportes"===e&&(0,Zd.jsxs)(Zd.Fragment,{children:[n("Reportes"),(0,Zd.jsx)(Jx,{})]})]}),"home"!==e&&(0,Zd.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-white flex z-50 shadow-md border-t border-gray-100",children:[(0,Zd.jsxs)("button",{className:"ventas"===e?i(0,"bg-blue-600").active:i().inactive,onClick:()=>t("ventas"),children:[(0,Zd.jsx)("span",{className:"text-xl",children:"\ud83d\uded2"}),(0,Zd.jsx)("span",{className:"text-xs mt-0.5",children:"Ventas"})]}),(0,Zd.jsxs)("button",{className:"caja"===e?i(0,"bg-green-600").active:i().inactive,onClick:()=>t("caja"),children:[(0,Zd.jsx)("span",{className:"text-xl",children:"\ud83d\udcb0"}),(0,Zd.jsx)("span",{className:"text-xs mt-0.5",children:"Caja"})]}),(0,Zd.jsxs)("button",{className:"inventario"===e?i(0,"bg-yellow-600").active:i().inactive,onClick:()=>t("inventario"),children:[(0,Zd.jsx)("span",{className:"text-xl",children:"\ud83d\udce6"}),(0,Zd.jsx)("span",{className:"text-xs mt-0.5",children:"Inventario"})]}),(0,Zd.jsxs)("button",{className:"reportes"===e?i(0,"bg-gray-800").active:i().inactive,onClick:()=>t("reportes"),children:[(0,Zd.jsx)("span",{className:"text-xl",children:"\ud83d\udcca"}),(0,Zd.jsx)("span",{className:"text-xs mt-0.5",children:"Reportes"})]}),(0,Zd.jsxs)("button",{className:i(0,"").inactive+" bg-gray-200 hover:bg-gray-300",onClick:()=>t("home"),children:[(0,Zd.jsx)("span",{className:"text-xl",children:"\ud83c\udfe0"}),(0,Zd.jsx)("span",{className:"text-xs mt-0.5",children:"Inicio"})]})]})]})},iw=e=>{let{currentView:t,setCurrentView:n,sidebarMode:i,userData:s}=e;const a=(0,r.useContext)(hw),o=s||a&&a.userData;if(null===o&&a&&a.user)return(0,Zd.jsx)("div",{className:"text-gray-400 p-4",children:"Cargando men\xfa..."});const l=[{id:"plants",label:"Productos",icon:"\ud83d\udce6"},{id:"movements",label:"Caja",icon:"\ud83d\udcbc"},{id:"stats",label:"Estad\xedsticas",icon:"\ud83d\udcca"},{id:"reportes",label:"Reportes",icon:"\ud83d\udcc8"},{id:"carga-movil",label:"Carga M\xf3vil",icon:"\ud83d\udcf2",mobileOnly:!0}],c="admin",u="Administraci\xf3n",h="\ud83d\udee0\ufe0f",d="undefined"!==typeof window&&window.innerWidth<768;return!d&&i?(0,Zd.jsxs)("nav",{className:"flex flex-col gap-2 mt-4",children:[o&&(0,Zd.jsxs)("div",{className:"text-xs text-gray-500 mb-2",children:["Rol: ",(0,Zd.jsx)("b",{children:o.rol||"sin rol"})]}),l.filter((e=>!e.mobileOnly)).map((e=>(0,Zd.jsxs)("button",{onClick:()=>n(e.id),className:"flex items-center gap-3 px-3 py-2 rounded-lg font-semibold transition w-full text-left\n              ".concat(t===e.id?"bg-green-600 text-white shadow":"text-gray-700 hover:bg-green-100 hover:text-green-700"),title:e.label,children:[(0,Zd.jsx)("span",{className:"text-2xl",children:e.icon}),"full"===i&&(0,Zd.jsx)("span",{className:"text-base font-medium",children:e.label})]},e.id))),o&&("admin"===o.rol||"dios"===o.rol)&&(0,Zd.jsxs)("button",{onClick:()=>n(c),className:"flex items-center gap-3 px-3 py-2 rounded-lg font-semibold transition w-full text-left\n              ".concat(t===c?"bg-green-600 text-white shadow":"text-gray-700 hover:bg-green-100 hover:text-green-700"),title:u,children:[(0,Zd.jsx)("span",{className:"text-2xl",children:h}),"full"===i&&(0,Zd.jsx)("span",{className:"text-base font-medium",children:u})]},c)]}):d?(0,Zd.jsx)("nav",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:(0,Zd.jsx)("ul",{className:"flex divide-x divide-gray-200 overflow-x-auto",children:l.filter((e=>d?e.mobileOnly||"carga-movil"===e.id||"plants"===e.id||"movements"===e.id:"carga-movil"!==e.id||e.mobileOnly)).map((e=>(0,Zd.jsx)("li",{className:"flex-1 min-w-[80px]",children:(0,Zd.jsxs)("button",{onClick:()=>n(e.id),className:"w-full py-3 px-4 text-center font-medium ".concat(t===e.id?"bg-green-50 text-green-600":"text-gray-600 hover:bg-gray-50"),children:[(0,Zd.jsx)("span",{className:"block text-lg",children:e.icon}),(0,Zd.jsx)("span",{children:e.label})]})},e.id)))})}):(0,Zd.jsx)("nav",{className:"bg-white shadow rounded-xl px-4 py-2 flex items-center gap-2 mb-6",children:l.filter((e=>!e.mobileOnly)).map((e=>(0,Zd.jsxs)("button",{onClick:()=>n(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition\n              ".concat(t===e.id?"bg-green-600 text-white shadow":"text-gray-700 hover:bg-green-100 hover:text-green-700"),children:[(0,Zd.jsx)("span",{className:"text-xl",children:e.icon}),(0,Zd.jsx)("span",{className:"hidden sm:inline",children:e.label})]},e.id)))})},sw=[{name:"Instagram",url:"https://www.instagram.com/",icon:(0,Zd.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[(0,Zd.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75h9A3.75 3.75 0 0120.25 7.5v9a3.75 3.75 0 01-3.75 3.75h-9A3.75 3.75 0 013.75 16.5v-9A3.75 3.75 0 017.5 3.75zm0 0V3m9 0v.75m-9 0h9m-9 0A3.75 3.75 0 003.75 7.5v9A3.75 3.75 0 007.5 20.25h9A3.75 3.75 0 0020.25 16.5v-9A3.75 3.75 0 0016.5 3.75h-9z"}),(0,Zd.jsx)("circle",{cx:"12",cy:"12",r:"3.5",stroke:"currentColor",strokeWidth:"1.5"})]})},{name:"WhatsApp",url:"https://wa.me/",icon:(0,Zd.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[(0,Zd.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 13.487a6.5 6.5 0 10-2.375 2.375l2.122.53a.75.75 0 00.91-.91l-.53-2.122z"}),(0,Zd.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75h.008v.008H9.75V9.75zm4.5 0h.008v.008h-.008V9.75zm-2.25 2.25h.008v.008h-.008v-.008z"})]})}],aw=e=>{let{currentView:t,setCurrentView:n,children:i}=e;const[s,a]=(0,r.useState)(!0);return(0,Zd.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,Zd.jsxs)("header",{className:"w-full bg-white shadow flex items-center justify-between px-6 py-3 sticky top-0 z-30 relative",children:[(0,Zd.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Zd.jsx)("img",{src:Zx,alt:"Logo",className:"h-10 w-10 rounded-full shadow border-2 border-gray-200 bg-white"}),(0,Zd.jsx)("span",{className:"text-2xl font-bold text-gray-800 tracking-tight drop-shadow",children:"Mundo Floral"})]}),"caja"===t&&(0,Zd.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none z-20",children:(0,Zd.jsx)("span",{className:"text-base font-semibold text-black bg-[#e6f0fa] px-4 py-1 rounded-lg shadow border border-blue-300",style:{letterSpacing:1,fontWeight:400,boxShadow:"0 2px 12px 0 rgba(0,0,0,0.10)"},children:"Caja y Movimientos"})}),(0,Zd.jsxs)("div",{className:"flex items-center gap-3",children:[sw.map((e=>(0,Zd.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",title:e.name,className:"text-gray-400 hover:text-blue-500 transition",children:e.icon},e.name))),(0,Zd.jsx)("button",{className:"ml-2 text-gray-400 hover:text-blue-500",title:"Agregar red social",children:(0,Zd.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Zd.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}),(0,Zd.jsxs)("div",{className:"flex flex-1 min-h-0",children:[(0,Zd.jsx)(hw.Consumer,{children:e=>{let{userData:r}=e;return(0,Zd.jsxs)("aside",{className:"transition-all duration-300 bg-white shadow-lg flex flex-col ".concat(s?"w-56":"w-16"," h-screen sticky top-0 min-h-0 z-20"),children:[(0,Zd.jsx)("button",{className:"p-2 m-2 rounded hover:bg-gray-100 text-gray-400 self-end",onClick:()=>a((e=>!e)),title:s?"Ocultar men\xfa":"Mostrar men\xfa",children:(0,Zd.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Zd.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 12L6 6":"M6 6l12 6-12 6"})})}),(0,Zd.jsx)(iw,{currentView:t,setCurrentView:n,sidebarMode:s?"full":"compact",userData:r})]})}}),(0,Zd.jsx)("main",{className:"flex-1 overflow-y-auto min-h-0 ".concat("caja"===t?"pt-0 pr-6 pb-6 pl-6":"p-6"),style:"caja"===t?{paddingTop:0}:{},children:i})]}),(0,Zd.jsxs)("footer",{className:"w-full bg-gray-800 text-center text-xs text-gray-100 py-2 border-t mt-2",children:["\xa9 ",(new Date).getFullYear()," Mundo Floral. Todos los derechos reservados."]})]})},ow={email:"",password:"",nombre:"",apellido:"",telefono:"",rol:"usuario",modules:["basico"]},lw=e=>{let{onUserCreated:t,isDios:n=!1}=e;const[i,s]=(0,r.useState)(ow),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),d=e=>{const{name:t,value:n}=e.target;s((e=>q(q({},e),{},{[t]:n})))};return(0,Zd.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0),c(""),h("");try{await Xd(q(q({},i),{},{rol:n?i.rol:"usuario",modules:i.modules.length?i.modules:["basico"]})),h("Usuario registrado correctamente"),s(ow),t&&t()}catch(r){c(r.message||"Error al registrar usuario")}o(!1)},className:"bg-white p-4 rounded shadow max-w-md mx-auto mt-6",children:[(0,Zd.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Registrar Usuario"}),(0,Zd.jsxs)("div",{className:"mb-2",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold",children:"Email"}),(0,Zd.jsx)("input",{name:"email",type:"email",value:i.email,onChange:d,className:"border rounded p-2 w-full text-sm",required:!0})]}),(0,Zd.jsxs)("div",{className:"mb-2",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold",children:"Contrase\xf1a"}),(0,Zd.jsx)("input",{name:"password",type:"password",value:i.password,onChange:d,className:"border rounded p-2 w-full text-sm",required:!0})]}),(0,Zd.jsxs)("div",{className:"mb-2",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold",children:"Nombre"}),(0,Zd.jsx)("input",{name:"nombre",value:i.nombre,onChange:d,className:"border rounded p-2 w-full text-sm",required:!0})]}),(0,Zd.jsxs)("div",{className:"mb-2",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold",children:"Apellido"}),(0,Zd.jsx)("input",{name:"apellido",value:i.apellido,onChange:d,className:"border rounded p-2 w-full text-sm",required:!0})]}),(0,Zd.jsxs)("div",{className:"mb-2",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold",children:"Tel\xe9fono"}),(0,Zd.jsx)("input",{name:"telefono",value:i.telefono,onChange:d,className:"border rounded p-2 w-full text-sm",required:!0})]}),n&&(0,Zd.jsxs)("div",{className:"mb-2",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold",children:"Rol"}),(0,Zd.jsxs)("select",{name:"rol",value:i.rol,onChange:d,className:"border rounded p-2 w-full text-sm",children:[(0,Zd.jsx)("option",{value:"usuario",children:"Usuario"}),(0,Zd.jsx)("option",{value:"admin",children:"Admin"}),(0,Zd.jsx)("option",{value:"dios",children:"Dios"})]})]}),(0,Zd.jsxs)("div",{className:"mb-2",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold",children:"M\xf3dulos habilitados"}),(0,Zd.jsxs)("select",{name:"modules",multiple:!0,value:i.modules,onChange:e=>{const{options:t}=e.target,n=[];for(let r=0;r<t.length;r++)t[r].selected&&n.push(t[r].value);s((e=>q(q({},e),{},{modules:n})))},className:"border rounded p-2 w-full text-sm",children:[(0,Zd.jsx)("option",{value:"basico",children:"B\xe1sico"}),(0,Zd.jsx)("option",{value:"ventas",children:"Ventas"}),(0,Zd.jsx)("option",{value:"reportes",children:"Reportes"}),(0,Zd.jsx)("option",{value:"inventario",children:"Inventario"}),(0,Zd.jsx)("option",{value:"compras",children:"Compras"})]}),(0,Zd.jsx)("span",{className:"text-xs text-gray-500",children:"Ctrl+Click para seleccionar varios"})]}),l&&(0,Zd.jsx)("div",{className:"text-red-600 text-xs mb-2",children:l}),u&&(0,Zd.jsx)("div",{className:"text-green-700 text-xs mb-2",children:u}),(0,Zd.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded font-semibold mt-2",disabled:a,children:a?"Registrando...":"Registrar"})]})},cw=()=>{const{userData:e}=(0,r.useContext)(hw),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)(null),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),[d,f]=(0,r.useState)("");(0,r.useEffect)((()=>{if(!e||"admin"!==e.rol&&"dios"!==e.rol)return;const t=Kd(Xh(Qd,"users"),(e=>{n(e.docs.map((e=>q({id:e.id},e.data()))))}));return()=>t()}),[e]);const p=e=>{const{name:t,value:n}=e.target;o((e=>q(q({},e),{},{[t]:n})))};return!e||"admin"!==e.rol&&"dios"!==e.rol?(0,Zd.jsx)("div",{className:"text-red-600 font-bold p-4",children:"Acceso restringido: solo para administradores."}):(0,Zd.jsxs)("div",{className:"max-w-2xl mx-auto p-4",children:[(0,Zd.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Panel de Administraci\xf3n"}),(0,Zd.jsxs)("div",{className:"mb-6",children:[(0,Zd.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Registrar nuevo usuario"}),(0,Zd.jsx)(lw,{isDios:"dios"===e.rol})]}),(0,Zd.jsxs)("div",{className:"mb-8",children:[(0,Zd.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Usuarios registrados"}),u&&(0,Zd.jsx)("div",{className:"text-red-600 text-xs mb-2",children:u}),d&&(0,Zd.jsx)("div",{className:"text-green-700 text-xs mb-2",children:d}),(0,Zd.jsx)("div",{className:"overflow-x-auto",children:(0,Zd.jsxs)("table",{className:"min-w-full bg-white border rounded shadow text-sm",children:[(0,Zd.jsx)("thead",{children:(0,Zd.jsxs)("tr",{className:"bg-green-100",children:[(0,Zd.jsx)("th",{className:"p-2",children:"Email"}),(0,Zd.jsx)("th",{className:"p-2",children:"Nombre"}),(0,Zd.jsx)("th",{className:"p-2",children:"Apellido"}),(0,Zd.jsx)("th",{className:"p-2",children:"Tel\xe9fono"}),(0,Zd.jsx)("th",{className:"p-2",children:"Rol"}),(0,Zd.jsx)("th",{className:"p-2",children:"M\xf3dulos"}),(0,Zd.jsx)("th",{className:"p-2",children:"Acciones"})]})}),(0,Zd.jsx)("tbody",{children:t.map((e=>(0,Zd.jsxs)("tr",{className:"border-b",children:[(0,Zd.jsx)("td",{className:"p-2",children:e.email}),(0,Zd.jsx)("td",{className:"p-2",children:e.nombre}),(0,Zd.jsx)("td",{className:"p-2",children:e.apellido}),(0,Zd.jsx)("td",{className:"p-2",children:e.telefono}),(0,Zd.jsx)("td",{className:"p-2",children:e.rol}),(0,Zd.jsx)("td",{className:"p-2",children:(e.modules||[]).join(", ")}),(0,Zd.jsxs)("td",{className:"p-2",children:[(0,Zd.jsx)("button",{className:"text-blue-600 underline text-xs mr-2",onClick:()=>(e=>{s(e),o(q({},e)),h(""),f("")})(e),children:"Editar"}),(0,Zd.jsx)("button",{className:"text-red-600 underline text-xs",onClick:()=>(async e=>{if(window.confirm("\xbfEliminar usuario ".concat(e.email,"?"))){c(!0),h(""),f("");try{await Wd(Jh(Qd,"users",e.id)),f("Usuario eliminado")}catch(t){h("Error al eliminar usuario")}c(!1)}})(e),children:"Eliminar"})]})]},e.id)))})]})})]}),i&&(0,Zd.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:(0,Zd.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),h(""),f("");try{await Hd(Jh(Qd,"users",i.id),{nombre:a.nombre,apellido:a.apellido,telefono:a.telefono,rol:a.rol,modules:a.modules}),f("Usuario actualizado"),s(null),o(null)}catch(t){h("Error al actualizar usuario")}c(!1)},className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md border border-gray-200",children:[(0,Zd.jsx)("h3",{className:"text-lg font-bold mb-2 text-green-700",children:"Editar usuario"}),(0,Zd.jsxs)("div",{className:"mb-2",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold",children:"Nombre"}),(0,Zd.jsx)("input",{name:"nombre",value:a.nombre,onChange:p,className:"border rounded p-2 w-full text-sm",required:!0})]}),(0,Zd.jsxs)("div",{className:"mb-2",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold",children:"Apellido"}),(0,Zd.jsx)("input",{name:"apellido",value:a.apellido,onChange:p,className:"border rounded p-2 w-full text-sm",required:!0})]}),(0,Zd.jsxs)("div",{className:"mb-2",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold",children:"Tel\xe9fono"}),(0,Zd.jsx)("input",{name:"telefono",value:a.telefono,onChange:p,className:"border rounded p-2 w-full text-sm",required:!0})]}),(0,Zd.jsxs)("div",{className:"mb-2",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold",children:"Rol"}),(0,Zd.jsxs)("select",{name:"rol",value:a.rol,onChange:p,className:"border rounded p-2 w-full text-sm",children:[(0,Zd.jsx)("option",{value:"usuario",children:"Usuario"}),(0,Zd.jsx)("option",{value:"admin",children:"Admin"}),(0,Zd.jsx)("option",{value:"dios",children:"Dios"})]})]}),(0,Zd.jsxs)("div",{className:"mb-2",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold",children:"M\xf3dulos habilitados"}),(0,Zd.jsxs)("select",{name:"modules",multiple:!0,value:a.modules,onChange:e=>{const{options:t}=e.target,n=[];for(let r=0;r<t.length;r++)t[r].selected&&n.push(t[r].value);o((e=>q(q({},e),{},{modules:n})))},className:"border rounded p-2 w-full text-sm",children:[(0,Zd.jsx)("option",{value:"basico",children:"B\xe1sico"}),(0,Zd.jsx)("option",{value:"ventas",children:"Ventas"}),(0,Zd.jsx)("option",{value:"reportes",children:"Reportes"}),(0,Zd.jsx)("option",{value:"inventario",children:"Inventario"}),(0,Zd.jsx)("option",{value:"compras",children:"Compras"})]}),(0,Zd.jsx)("span",{className:"text-xs text-gray-500",children:"Ctrl+Click para seleccionar varios"})]}),(0,Zd.jsxs)("div",{className:"flex gap-2 mt-4 justify-end",children:[(0,Zd.jsx)("button",{type:"button",className:"px-3 py-1 rounded border border-gray-300 bg-gray-100 text-gray-700 hover:bg-gray-200",onClick:()=>{s(null),o(null)},children:"Cancelar"}),(0,Zd.jsx)("button",{type:"submit",className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",disabled:l,children:l?"Guardando...":"Guardar"})]})]})}),(0,Zd.jsx)("div",{className:"text-xs text-gray-500 mt-8",children:"Solo visible para administradores y modo DIOS."})]})},uw=e=>{let{onLogin:t}=e;const[n,i]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1);return(0,Zd.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-green-50",children:(0,Zd.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(""),u(!0);try{const e=wi();await function(e,t,n){return Ke(e.app)?Promise.reject(vt(e)):sr(I(e),Wn.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ar(e),t}))}(e,n,s),t&&t()}catch(r){l("Email o contrase\xf1a incorrectos")}u(!1)},className:"bg-white p-6 rounded shadow max-w-xs w-full border border-gray-200",children:[(0,Zd.jsx)("h2",{className:"text-xl font-bold mb-4 text-green-700",children:"Iniciar Sesi\xf3n"}),(0,Zd.jsxs)("div",{className:"mb-3",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold mb-1",children:"Email"}),(0,Zd.jsx)("input",{type:"email",value:n,onChange:e=>i(e.target.value),className:"border rounded p-2 w-full text-sm",required:!0,autoFocus:!0})]}),(0,Zd.jsxs)("div",{className:"mb-3",children:[(0,Zd.jsx)("label",{className:"block text-xs font-semibold mb-1",children:"Contrase\xf1a"}),(0,Zd.jsx)("input",{type:"password",value:s,onChange:e=>a(e.target.value),className:"border rounded p-2 w-full text-sm",required:!0})]}),o&&(0,Zd.jsx)("div",{className:"text-red-600 text-xs mb-2",children:o}),(0,Zd.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded w-full font-bold",disabled:c,children:c?"Ingresando...":"Ingresar"})]})})},hw=(0,r.createContext)(null),dw=()=>{const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0),[o,l]=r.useState(window.innerWidth<768),[c,u]=r.useState("plants");if((0,r.useEffect)((()=>{const e=function(e,t,n,r){return I(e).onAuthStateChanged(t,n,r)}(wi(),(async e=>{if(t(e),e){const t=await Jd(e.uid);i(t)}else i(null);a(!1)}));return()=>e()}),[]),r.useEffect((()=>{const e=()=>l(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),s)return(0,Zd.jsx)("div",{children:"Cargando..."});if(!e)return(0,Zd.jsx)(uw,{});if(o)return(0,Zd.jsx)(rw,{});return(0,Zd.jsx)(Zd.Fragment,{children:(0,Zd.jsx)(hw.Provider,{value:{user:e,userData:n},children:(0,Zd.jsx)(aw,{currentView:"movements"===c?"caja":c,setCurrentView:u,children:(()=>{switch(c){case"plants":return(0,Zd.jsx)(lf,{});case"movements":case"caja":return(0,Zd.jsx)(Vf,{});case"reportes":return(0,Zd.jsx)($x,{});case"admin":return(0,Zd.jsx)(cw,{});default:return(0,Zd.jsx)("div",{className:"text-center text-gray-500",children:"Seleccione un m\xf3dulo."})}})()})})})},fw=document.getElementById("root");if(!fw)throw new Error("No se encontr\xf3 el elemento root en el HTML.");(0,i.H)(fw).render((0,Zd.jsx)(r.StrictMode,{children:(0,Zd.jsx)(dw,{})}))})();
//# sourceMappingURL=main.4e7d5c80.js.map